(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';
var random = require('./random');
var dictator = require('./dictator');
var card = require('./card');
var time = require('./timer');

random.Init();
dictator.Init();
card.Init();
time.Init();

},{"./card":3,"./dictator":4,"./random":5,"./timer":6}],2:[function(require,module,exports){
/*! flipclock 2014-10-21 */
var jQuery = require('jquery');
var Base=function(){};Base.extend=function(a,b){"use strict";var c=Base.prototype.extend;Base._prototyping=!0;var d=new this;c.call(d,a),d.base=function(){},delete Base._prototyping;var e=d.constructor,f=d.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==f)this._constructing=!0,e.apply(this,arguments),delete this._constructing;else if(null!==arguments[0])return(arguments[0].extend||c).call(arguments[0],d)};return f.ancestor=this,f.extend=this.extend,f.forEach=this.forEach,f.implement=this.implement,f.prototype=d,f.toString=this.toString,f.valueOf=function(a){return"object"==a?f:e.valueOf()},c.call(f,b),"function"==typeof f.init&&f.init(),f},Base.prototype={extend:function(a,b){if(arguments.length>1){var c=this[a];if(c&&"function"==typeof b&&(!c.valueOf||c.valueOf()!=b.valueOf())&&/\bbase\b/.test(b)){var d=b.valueOf();b=function(){var a=this.base||Base.prototype.base;this.base=c;var b=d.apply(this,arguments);return this.base=a,b},b.valueOf=function(a){return"object"==a?b:d},b.toString=Base.toString}this[a]=b}else if(a){var e=Base.prototype.extend;Base._prototyping||"function"==typeof this||(e=this.extend||e);for(var f={toSource:null},g=["constructor","toString","valueOf"],h=Base._prototyping?0:1;i=g[h++];)a[i]!=f[i]&&e.call(this,i,a[i]);for(var i in a)f[i]||e.call(this,i,a[i])}return this}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(a,b,c){for(var d in a)void 0===this.prototype[d]&&b.call(c,a[d],d,a)},implement:function(){for(var a=0;a<arguments.length;a++)"function"==typeof arguments[a]?arguments[a](this.prototype):this.prototype.extend(arguments[a]);return this},toString:function(){return String(this.valueOf())}});var FlipClock;!function(a){"use strict";FlipClock=function(a,b,c){return b instanceof Object&&b instanceof Date==!1&&(c=b,b=0),new FlipClock.Factory(a,b,c)},FlipClock.Lang={},FlipClock.Base=Base.extend({buildDate:"2014-10-06",version:"0.7.5",constructor:function(b,c){"object"!=typeof b&&(b={}),"object"!=typeof c&&(c={}),this.setOptions(a.extend(!0,{},b,c))},callback:function(a){if("function"==typeof a){for(var b=[],c=1;c<=arguments.length;c++)arguments[c]&&b.push(arguments[c]);a.apply(this,b)}},log:function(a){window.console&&console.log&&console.log(a)},getOption:function(a){return this[a]?this[a]:!1},getOptions:function(){return this},setOption:function(a,b){this[a]=b},setOptions:function(a){for(var b in a)"undefined"!=typeof a[b]&&this.setOption(b,a[b])}})}(jQuery),function(a){"use strict";FlipClock.Face=FlipClock.Base.extend({autoStart:!0,dividers:[],factory:!1,lists:[],constructor:function(a,b){this.dividers=[],this.lists=[],this.base(b),this.factory=a},build:function(){this.autoStart&&this.start()},createDivider:function(b,c,d){"boolean"!=typeof c&&c||(d=c,c=b);var e=['<span class="'+this.factory.classes.dot+' top"></span>','<span class="'+this.factory.classes.dot+' bottom"></span>'].join("");d&&(e=""),b=this.factory.localize(b);var f=['<span class="'+this.factory.classes.divider+" "+(c?c:"").toLowerCase()+'">','<span class="'+this.factory.classes.label+'">'+(b?b:"")+"</span>",e,"</span>"],g=a(f.join(""));return this.dividers.push(g),g},createList:function(a,b){"object"==typeof a&&(b=a,a=0);var c=new FlipClock.List(this.factory,a,b);return this.lists.push(c),c},reset:function(){this.factory.time=new FlipClock.Time(this.factor,this.factory.original?Math.round(this.factory.original):0,{minimumDigits:this.factory.minimumDigits}),this.flip(this.factory.original,!1)},appendDigitToClock:function(a){a.$el.append(!1)},addDigit:function(a){var b=this.createList(a,{classes:{active:this.factory.classes.active,before:this.factory.classes.before,flip:this.factory.classes.flip}});this.appendDigitToClock(b)},start:function(){},stop:function(){},autoIncrement:function(){this.factory.countdown?this.decrement():this.increment()},increment:function(){this.factory.time.addSecond()},decrement:function(){0==this.factory.time.getTimeSeconds()?this.factory.stop():this.factory.time.subSecond()},flip:function(b,c){var d=this;a.each(b,function(a,b){var e=d.lists[a];e?(c||b==e.digit||e.play(),e.select(b)):d.addDigit(b)})}})}(jQuery),function(a){"use strict";FlipClock.Factory=FlipClock.Base.extend({animationRate:1e3,autoStart:!0,callbacks:{destroy:!1,create:!1,init:!1,interval:!1,start:!1,stop:!1,reset:!1},classes:{active:"flip-clock-active",before:"flip-clock-before",divider:"flip-clock-divider",dot:"flip-clock-dot",label:"flip-clock-label",flip:"flip",play:"play",wrapper:"flip-clock-wrapper"},clockFace:"HourlyCounter",countdown:!1,defaultClockFace:"HourlyCounter",defaultLanguage:"english",$el:!1,face:!0,lang:!1,language:"english",minimumDigits:0,original:!1,running:!1,time:!1,timer:!1,$wrapper:!1,constructor:function(b,c,d){d||(d={}),this.lists=[],this.running=!1,this.base(d),this.$el=a(b).addClass(this.classes.wrapper),this.$wrapper=this.$el,this.original=c instanceof Date?c:c?Math.round(c):0,this.time=new FlipClock.Time(this,this.original,{minimumDigits:this.minimumDigits,animationRate:this.animationRate}),this.timer=new FlipClock.Timer(this,d),this.loadLanguage(this.language),this.loadClockFace(this.clockFace,d),this.autoStart&&this.start()},loadClockFace:function(a,b){var c,d="Face",e=!1;return a=a.ucfirst()+d,this.face.stop&&(this.stop(),e=!0),this.$el.html(""),this.time.minimumDigits=this.minimumDigits,c=FlipClock[a]?new FlipClock[a](this,b):new FlipClock[this.defaultClockFace+d](this,b),c.build(),this.face=c,e&&this.start(),this.face},loadLanguage:function(a){var b;return b=FlipClock.Lang[a.ucfirst()]?FlipClock.Lang[a.ucfirst()]:FlipClock.Lang[a]?FlipClock.Lang[a]:FlipClock.Lang[this.defaultLanguage],this.lang=b},localize:function(a,b){var c=this.lang;if(!a)return null;var d=a.toLowerCase();return"object"==typeof b&&(c=b),c&&c[d]?c[d]:a},start:function(a){var b=this;b.running||b.countdown&&!(b.countdown&&b.time.time>0)?b.log("Trying to start timer when countdown already at 0"):(b.face.start(b.time),b.timer.start(function(){b.flip(),"function"==typeof a&&a()}))},stop:function(a){this.face.stop(),this.timer.stop(a);for(var b in this.lists)this.lists.hasOwnProperty(b)&&this.lists[b].stop()},reset:function(a){this.timer.reset(a),this.face.reset()},setTime:function(a){this.time.time=a,this.flip(!0)},getTime:function(){return this.time},setCountdown:function(a){var b=this.running;this.countdown=a?!0:!1,b&&(this.stop(),this.start())},flip:function(a){this.face.flip(!1,a)}})}(jQuery),function(a){"use strict";FlipClock.List=FlipClock.Base.extend({digit:0,classes:{active:"flip-clock-active",before:"flip-clock-before",flip:"flip"},factory:!1,$el:!1,$obj:!1,items:[],lastDigit:0,constructor:function(a,b){this.factory=a,this.digit=b,this.lastDigit=b,this.$el=this.createList(),this.$obj=this.$el,b>0&&this.select(b),this.factory.$el.append(this.$el)},select:function(a){if("undefined"==typeof a?a=this.digit:this.digit=a,this.digit!=this.lastDigit){var b=this.$el.find("."+this.classes.before).removeClass(this.classes.before);this.$el.find("."+this.classes.active).removeClass(this.classes.active).addClass(this.classes.before),this.appendListItem(this.classes.active,this.digit),b.remove(),this.lastDigit=this.digit}},play:function(){this.$el.addClass(this.factory.classes.play)},stop:function(){var a=this;setTimeout(function(){a.$el.removeClass(a.factory.classes.play)},this.factory.timer.interval)},createListItem:function(a,b){return['<li class="'+(a?a:"")+'">','<a href="#">','<div class="up">','<div class="shadow"></div>','<div class="inn">'+(b?b:"")+"</div>","</div>",'<div class="down">','<div class="shadow"></div>','<div class="inn">'+(b?b:"")+"</div>","</div>","</a>","</li>"].join("")},appendListItem:function(a,b){var c=this.createListItem(a,b);this.$el.append(c)},createList:function(){var b=this.getPrevDigit()?this.getPrevDigit():this.digit,c=a(['<ul class="'+this.classes.flip+" "+(this.factory.running?this.factory.classes.play:"")+'">',this.createListItem(this.classes.before,b),this.createListItem(this.classes.active,this.digit),"</ul>"].join(""));return c},getNextDigit:function(){return 9==this.digit?0:this.digit+1},getPrevDigit:function(){return 0==this.digit?9:this.digit-1}})}(jQuery),function(a){"use strict";String.prototype.ucfirst=function(){return this.substr(0,1).toUpperCase()+this.substr(1)},a.fn.FlipClock=function(b,c){return new FlipClock(a(this),b,c)},a.fn.flipClock=function(b,c){return a.fn.FlipClock(b,c)}}(jQuery),function(a){"use strict";FlipClock.Time=FlipClock.Base.extend({time:0,factory:!1,minimumDigits:0,constructor:function(a,b,c){"object"!=typeof c&&(c={}),c.minimumDigits||(c.minimumDigits=a.minimumDigits),this.base(c),this.factory=a,b&&(this.time=b)},convertDigitsToArray:function(a){var b=[];a=a.toString();for(var c=0;c<a.length;c++)a[c].match(/^\d*$/g)&&b.push(a[c]);return b},digit:function(a){var b=this.toString(),c=b.length;return b[c-a]?b[c-a]:!1},digitize:function(b){var c=[];if(a.each(b,function(a,b){b=b.toString(),1==b.length&&(b="0"+b);for(var d=0;d<b.length;d++)c.push(b.charAt(d))}),c.length>this.minimumDigits&&(this.minimumDigits=c.length),this.minimumDigits>c.length)for(var d=c.length;d<this.minimumDigits;d++)c.unshift("0");return c},getDateObject:function(){return this.time instanceof Date?this.time:new Date((new Date).getTime()+1e3*this.getTimeSeconds())},getDayCounter:function(a){var b=[this.getDays(),this.getHours(!0),this.getMinutes(!0)];return a&&b.push(this.getSeconds(!0)),this.digitize(b)},getDays:function(a){var b=this.getTimeSeconds()/60/60/24;return a&&(b%=7),Math.floor(b)},getHourCounter:function(){var a=this.digitize([this.getHours(),this.getMinutes(!0),this.getSeconds(!0)]);return a},getHourly:function(){return this.getHourCounter()},getHours:function(a){var b=this.getTimeSeconds()/60/60;return a&&(b%=24),Math.floor(b)},getMilitaryTime:function(a,b){"undefined"==typeof b&&(b=!0),a||(a=this.getDateObject());var c=[a.getHours(),a.getMinutes()];return b===!0&&c.push(a.getSeconds()),this.digitize(c)},getMinutes:function(a){var b=this.getTimeSeconds()/60;return a&&(b%=60),Math.floor(b)},getMinuteCounter:function(){var a=this.digitize([this.getMinutes(),this.getSeconds(!0)]);return a},getTimeSeconds:function(a){return a||(a=new Date),this.time instanceof Date?this.factory.countdown?Math.max(this.time.getTime()/1e3-a.getTime()/1e3,0):a.getTime()/1e3-this.time.getTime()/1e3:this.time},getTime:function(a,b){"undefined"==typeof b&&(b=!0),a||(a=this.getDateObject()),console.log(a);var c=a.getHours(),d=[c>12?c-12:0===c?12:c,a.getMinutes()];return b===!0&&d.push(a.getSeconds()),this.digitize(d)},getSeconds:function(a){var b=this.getTimeSeconds();return a&&(60==b?b=0:b%=60),Math.ceil(b)},getWeeks:function(a){var b=this.getTimeSeconds()/60/60/24/7;return a&&(b%=52),Math.floor(b)},removeLeadingZeros:function(b,c){var d=0,e=[];return a.each(c,function(a){b>a?d+=parseInt(c[a],10):e.push(c[a])}),0===d?e:c},addSeconds:function(a){this.time instanceof Date?this.time.setSeconds(this.time.getSeconds()+a):this.time+=a},addSecond:function(){this.addSeconds(1)},subSeconds:function(a){this.time instanceof Date?this.time.setSeconds(this.time.getSeconds()-a):this.time-=a},subSecond:function(){this.subSeconds(1)},toString:function(){return this.getTimeSeconds().toString()}})}(jQuery),function(){"use strict";FlipClock.Timer=FlipClock.Base.extend({callbacks:{destroy:!1,create:!1,init:!1,interval:!1,start:!1,stop:!1,reset:!1},count:0,factory:!1,interval:1e3,animationRate:1e3,constructor:function(a,b){this.base(b),this.factory=a,this.callback(this.callbacks.init),this.callback(this.callbacks.create)},getElapsed:function(){return this.count*this.interval},getElapsedTime:function(){return new Date(this.time+this.getElapsed())},reset:function(a){clearInterval(this.timer),this.count=0,this._setInterval(a),this.callback(this.callbacks.reset)},start:function(a){this.factory.running=!0,this._createTimer(a),this.callback(this.callbacks.start)},stop:function(a){this.factory.running=!1,this._clearInterval(a),this.callback(this.callbacks.stop),this.callback(a)},_clearInterval:function(){clearInterval(this.timer)},_createTimer:function(a){this._setInterval(a)},_destroyTimer:function(a){this._clearInterval(),this.timer=!1,this.callback(a),this.callback(this.callbacks.destroy)},_interval:function(a){this.callback(this.callbacks.interval),this.callback(a),this.count++},_setInterval:function(a){var b=this;b._interval(a),b.timer=setInterval(function(){b._interval(a)},this.interval)}})}(jQuery),function(a){FlipClock.TwentyFourHourClockFace=FlipClock.Face.extend({constructor:function(a,b){this.base(a,b)},build:function(b){var c=this,d=this.factory.$el.find("ul");this.factory.time.time||(this.factory.original=new Date,this.factory.time=new FlipClock.Time(this.factory,this.factory.original));var b=b?b:this.factory.time.getMilitaryTime(!1,this.showSeconds);b.length>d.length&&a.each(b,function(a,b){c.createList(b)}),this.createDivider(),this.createDivider(),a(this.dividers[0]).insertBefore(this.lists[this.lists.length-2].$el),a(this.dividers[1]).insertBefore(this.lists[this.lists.length-4].$el),this.base()},flip:function(a,b){this.autoIncrement(),a=a?a:this.factory.time.getMilitaryTime(!1,this.showSeconds),this.base(a,b)}})}(jQuery),function(a){FlipClock.CounterFace=FlipClock.Face.extend({shouldAutoIncrement:!1,constructor:function(a,b){"object"!=typeof b&&(b={}),a.autoStart=b.autoStart?!0:!1,b.autoStart&&(this.shouldAutoIncrement=!0),a.increment=function(){a.countdown=!1,a.setTime(a.getTime().getTimeSeconds()+1)},a.decrement=function(){a.countdown=!0;var b=a.getTime().getTimeSeconds();b>0&&a.setTime(b-1)},a.setValue=function(b){a.setTime(b)},a.setCounter=function(b){a.setTime(b)},this.base(a,b)},build:function(){var b=this,c=this.factory.$el.find("ul"),d=this.factory.getTime().digitize([this.factory.getTime().time]);d.length>c.length&&a.each(d,function(a,c){var d=b.createList(c);d.select(c)}),a.each(this.lists,function(a,b){b.play()}),this.base()},flip:function(a,b){this.shouldAutoIncrement&&this.autoIncrement(),a||(a=this.factory.getTime().digitize([this.factory.getTime().time])),this.base(a,b)},reset:function(){this.factory.time=new FlipClock.Time(this.factory,this.factory.original?Math.round(this.factory.original):0),this.flip()}})}(jQuery),function(a){FlipClock.DailyCounterFace=FlipClock.Face.extend({showSeconds:!0,constructor:function(a,b){this.base(a,b)},build:function(b){var c=this,d=this.factory.$el.find("ul"),e=0;b=b?b:this.factory.time.getDayCounter(this.showSeconds),b.length>d.length&&a.each(b,function(a,b){c.createList(b)}),this.showSeconds?a(this.createDivider("Seconds")).insertBefore(this.lists[this.lists.length-2].$el):e=2,a(this.createDivider("Minutes")).insertBefore(this.lists[this.lists.length-4+e].$el),a(this.createDivider("Hours")).insertBefore(this.lists[this.lists.length-6+e].$el),a(this.createDivider("Days",!0)).insertBefore(this.lists[0].$el),this.base()},flip:function(a,b){a||(a=this.factory.time.getDayCounter(this.showSeconds)),this.autoIncrement(),this.base(a,b)}})}(jQuery),function(a){FlipClock.HourlyCounterFace=FlipClock.Face.extend({constructor:function(a,b){this.base(a,b)},build:function(b,c){var d=this,e=this.factory.$el.find("ul");c=c?c:this.factory.time.getHourCounter(),c.length>e.length&&a.each(c,function(a,b){d.createList(b)}),a(this.createDivider("Seconds")).insertBefore(this.lists[this.lists.length-2].$el),a(this.createDivider("Minutes")).insertBefore(this.lists[this.lists.length-4].$el),b||a(this.createDivider("Hours",!0)).insertBefore(this.lists[0].$el),this.base()},flip:function(a,b){a||(a=this.factory.time.getHourCounter()),this.autoIncrement(),this.base(a,b)},appendDigitToClock:function(a){this.base(a),this.dividers[0].insertAfter(this.dividers[0].next())}})}(jQuery),function(){FlipClock.MinuteCounterFace=FlipClock.HourlyCounterFace.extend({clearExcessDigits:!1,constructor:function(a,b){this.base(a,b)},build:function(){this.base(!0,this.factory.time.getMinuteCounter())},flip:function(a,b){a||(a=this.factory.time.getMinuteCounter()),this.base(a,b)}})}(jQuery),function(a){FlipClock.TwelveHourClockFace=FlipClock.TwentyFourHourClockFace.extend({meridium:!1,meridiumText:"AM",build:function(){var b=this.factory.time.getTime(!1,this.showSeconds);this.base(b),this.meridiumText=this.getMeridium(),this.meridium=a(['<ul class="flip-clock-meridium">',"<li>",'<a href="#">'+this.meridiumText+"</a>","</li>","</ul>"].join("")),this.meridium.insertAfter(this.lists[this.lists.length-1].$el)},flip:function(a,b){this.meridiumText!=this.getMeridium()&&(this.meridiumText=this.getMeridium(),this.meridium.find("a").html(this.meridiumText)),this.base(this.factory.time.getTime(!1,this.showSeconds),b)},getMeridium:function(){return(new Date).getHours()>=12?"PM":"AM"},isPM:function(){return"PM"==this.getMeridium()?!0:!1},isAM:function(){return"AM"==this.getMeridium()?!0:!1}})}(jQuery),function(){FlipClock.Lang.Arabic={years:"سنوات",months:"شهور",days:"أيام",hours:"ساعات",minutes:"دقائق",seconds:"ثواني"},FlipClock.Lang.ar=FlipClock.Lang.Arabic,FlipClock.Lang["ar-ar"]=FlipClock.Lang.Arabic,FlipClock.Lang.arabic=FlipClock.Lang.Arabic}(jQuery),function(){FlipClock.Lang.Danish={years:"År",months:"Måneder",days:"Dage",hours:"Timer",minutes:"Minutter",seconds:"Sekunder"},FlipClock.Lang.da=FlipClock.Lang.Danish,FlipClock.Lang["da-dk"]=FlipClock.Lang.Danish,FlipClock.Lang.danish=FlipClock.Lang.Danish}(jQuery),function(){FlipClock.Lang.German={years:"Jahre",months:"Monate",days:"Tage",hours:"Stunden",minutes:"Minuten",seconds:"Sekunden"},FlipClock.Lang.de=FlipClock.Lang.German,FlipClock.Lang["de-de"]=FlipClock.Lang.German,FlipClock.Lang.german=FlipClock.Lang.German}(jQuery),function(){FlipClock.Lang.English={years:"Years",months:"Months",days:"Days",hours:"Hours",minutes:"Minutes",seconds:"Seconds"},FlipClock.Lang.en=FlipClock.Lang.English,FlipClock.Lang["en-us"]=FlipClock.Lang.English,FlipClock.Lang.english=FlipClock.Lang.English}(jQuery),function(){FlipClock.Lang.Spanish={years:"A&#241;os",months:"Meses",days:"D&#205;as",hours:"Horas",minutes:"Minutos",seconds:"Segundo"},FlipClock.Lang.es=FlipClock.Lang.Spanish,FlipClock.Lang["es-es"]=FlipClock.Lang.Spanish,FlipClock.Lang.spanish=FlipClock.Lang.Spanish}(jQuery),function(){FlipClock.Lang.Finnish={years:"Vuotta",months:"Kuukautta",days:"Päivää",hours:"Tuntia",minutes:"Minuuttia",seconds:"Sekuntia"},FlipClock.Lang.fi=FlipClock.Lang.Finnish,FlipClock.Lang["fi-fi"]=FlipClock.Lang.Finnish,FlipClock.Lang.finnish=FlipClock.Lang.Finnish}(jQuery),function(){FlipClock.Lang.French={years:"Ans",months:"Mois",days:"Jours",hours:"Heures",minutes:"Minutes",seconds:"Secondes"},FlipClock.Lang.fr=FlipClock.Lang.French,FlipClock.Lang["fr-ca"]=FlipClock.Lang.French,FlipClock.Lang.french=FlipClock.Lang.French}(jQuery),function(){FlipClock.Lang.Italian={years:"Anni",months:"Mesi",days:"Giorni",hours:"Ore",minutes:"Minuti",seconds:"Secondi"},FlipClock.Lang.it=FlipClock.Lang.Italian,FlipClock.Lang["it-it"]=FlipClock.Lang.Italian,FlipClock.Lang.italian=FlipClock.Lang.Italian}(jQuery),function(){FlipClock.Lang.Latvian={years:"Gadi",months:"Mēneši",days:"Dienas",hours:"Stundas",minutes:"Minūtes",seconds:"Sekundes"},FlipClock.Lang.lv=FlipClock.Lang.Latvian,FlipClock.Lang["lv-lv"]=FlipClock.Lang.Latvian,FlipClock.Lang.latvian=FlipClock.Lang.Latvian}(jQuery),function(){FlipClock.Lang.Dutch={years:"Jaren",months:"Maanden",days:"Dagen",hours:"Uren",minutes:"Minuten",seconds:"Seconden"},FlipClock.Lang.nl=FlipClock.Lang.Dutch,FlipClock.Lang["nl-be"]=FlipClock.Lang.Dutch,FlipClock.Lang.dutch=FlipClock.Lang.Dutch}(jQuery),function(){FlipClock.Lang.Norwegian={years:"År",months:"Måneder",days:"Dager",hours:"Timer",minutes:"Minutter",seconds:"Sekunder"},FlipClock.Lang.no=FlipClock.Lang.Norwegian,FlipClock.Lang.nb=FlipClock.Lang.Norwegian,FlipClock.Lang["no-nb"]=FlipClock.Lang.Norwegian,FlipClock.Lang.norwegian=FlipClock.Lang.Norwegian}(jQuery),function(){FlipClock.Lang.Portuguese={years:"Anos",months:"Meses",days:"Dias",hours:"Horas",minutes:"Minutos",seconds:"Segundos"},FlipClock.Lang.pt=FlipClock.Lang.Portuguese,FlipClock.Lang["pt-br"]=FlipClock.Lang.Portuguese,FlipClock.Lang.portuguese=FlipClock.Lang.Portuguese}(jQuery),function(){FlipClock.Lang.Russian={years:"лет",months:"месяцев",days:"дней",hours:"часов",minutes:"минут",seconds:"секунд"},FlipClock.Lang.ru=FlipClock.Lang.Russian,FlipClock.Lang["ru-ru"]=FlipClock.Lang.Russian,FlipClock.Lang.russian=FlipClock.Lang.Russian}(jQuery),function(){FlipClock.Lang.Swedish={years:"År",months:"Månader",days:"Dagar",hours:"Timmar",minutes:"Minuter",seconds:"Sekunder"},FlipClock.Lang.sv=FlipClock.Lang.Swedish,FlipClock.Lang["sv-se"]=FlipClock.Lang.Swedish,FlipClock.Lang.swedish=FlipClock.Lang.Swedish}(jQuery);

},{"jquery":"jquery"}],3:[function(require,module,exports){
//http://codepen.io/FelipeMartinin/pen/sAtvD

'use strict';
var $ = require('jquery');

module.exports = (function () {
  function Init() {
    bind();
  }

  function bind() {
    $('.goFlip').on("click", function () {
      $('.aboutMe').toggleClass('rotate-3d');
      $('.card-back').toggleClass('z-up');
    });
  }

  return {
    Init: Init
  };
}());

},{"jquery":"jquery"}],4:[function(require,module,exports){
'use strict';

var $ = require('jquery'),
  Firebase = require("firebase"),
  Week = require("./week");

/**
 * Dictator - A module for showing a who's the dictator.
 * @module dictator
 * @PublicMethod Init
 */

module.exports = (function () {
  var button,
    dictatorNumber,
    dictatorName,
    firebaseURL,
    startWeek,
    dictators,
    currentDictator;

  var config = {
    firebaseURL: 'https://fiery-torch-4818.firebaseio.com/'
  };

  function Init() {
    firebaseURL = new Firebase(config.firebaseURL);
    button = $('.js-dictator__button');
    getDictatorsFromFirebase();
    getStartWeek();
    firebaseURL.once('value', function (snap) {
      //console.log('initial data loaded!', Object.keys(snap.val()).length === count);
      getCurrentDictator();
      getMinutesFromFirebase();
    });

    readSingleFromFirebase();
    button.click(function (event) {
      event.preventDefault ? event.preventDefault() : event.returnValue = false;
      addDictotor();
      writeToFireBase();
    });
  }

  function addDictotor() {
    dictatorNumber = parseInt($('.dictator__number input').val(), 10);
    dictatorName = $('.dictator__name input').val();
  }

  function writeToFireBase() {
    var dictator = {};
    dictator[dictatorNumber] = dictatorName;
    firebaseURL.child("dictator/").update(dictator);
  }

  function getDictatorsFromFirebase() {
    firebaseURL.child("dictator").on('value', function (snapshot) {
      dictators = snapshot.val();
    }, function (errorObject) {
      console.log('The read failed: ' + errorObject.code);
    });
  }

  function getMinutesFromFirebase() {
    firebaseURL.child("StandUp").on('value', function (snapshot) {
      var totalStandUpMinutes=0;
      var standupMinutes = snapshot.val();
      for (var obj in standupMinutes) {
        totalStandUpMinutes = totalStandUpMinutes +standupMinutes[obj];
      }
      $('.headline__text2').text(' ' + totalStandUpMinutes + ' minuter');
    }, function (errorObject) {
      console.log('The read failed: ' + errorObject.code);
    });
  }

  function getStartWeek() {
    firebaseURL.child("StartWeek").on('value', function (snapshot) {
      startWeek = snapshot.val();
    }, function (errorObject) {
      console.log('The read failed: ' + errorObject.code);
    });
  }

  function getCurrentDictator() {
    var curWeek = Week.getWeek();
    var weekFromStart = curWeek - startWeek;
    var maxDictator = 10;
    var currentNumber = weekFromStart % maxDictator;
    currentDictator = dictators[currentNumber];
    $('.currentDictator').text(currentDictator);
  }

  function readSingleFromFirebase() {
    firebaseURL.child("dictator").on('child_added', function (snapshot) {
      var snapshotValue = snapshot.val(),
        snapshotName = snapshot.name();
      $('.dictator_output__list').append('<li><label>' + '#: ' + snapshotName + ' Namn: ' + snapshotValue + '</label></li>');
    });
  }

  return {
    Init: Init,
    config: config
  };
}());

},{"./week":7,"firebase":8,"jquery":"jquery"}],5:[function(require,module,exports){
'use strict';

var $ = require('jquery');
var FlipClock = require('FlipClock');
require('howler');

/**
 * Random - A module for showing a randomized timer.
 * @module Random
 * @PublicMethod Init
 */

module.exports = (function () {
  var button,
    min,
    max,
    random,
    randomTimeRetrieved,
    timeRetrieved,
    secondsPast,
    randomTimeInSeconds;

  var config = {
    urls: 'sounds/StandUp.mp3',
    button: '.js-random__button',
    firebaseURL: 'https://fiery-torch-4818.firebaseio.com/'
  };

  var sound = new Howl({
    urls: [config.urls]
  });

  var sound2 = new Howl({
    urls: ['sounds/smb_1-up.wav']
  });

  function Init() {
    button = $(config.button);
    getLocalStorage();
    if (randomTimeRetrieved !== null) {
      var secondsPast = getSecondsPast();
      randomTimeInSeconds = randomTimeRetrieved * 60;
      if (randomTimeInSeconds > secondsPast) {
        displayTimeLeft();
      }
    }
    button.click(function () {
      event.preventDefault ? event.preventDefault() : event.returnValue = false;
      getMaxMin();
      getRandomNumber();
      displayRandomNumber();
      setLocalStorage();
      setTimeInFirebase();
      sound.play();
    });
  }

  function setTimeInFirebase() {
    var firebaseURL = new Firebase(config.firebaseURL);
    var timeNow = new Date();
    var timeObject = {};
    timeObject[timeNow] = random;
    firebaseURL.child("StandUp/").update(timeObject);
  }

  function getSecondsPast() {
    var timeNow = new Date(),
      timeBefore = new Date(timeRetrieved),
      timeDifference = timeNow.getTime() - timeBefore.getTime();
    secondsPast = timeDifference / 1000;
    return secondsPast;
  }

  function getMaxMin() {
    min = parseInt($('.random_inputs__minutes--min').val(), 10);
    max = parseInt($('.random_inputs__minutes--max').val(), 10);
  }

  function getRandomNumber() {
    random = Math.floor(Math.random() * (max - min + 1) + min);
  }

  function displayTimeLeft() {
    var timeleft = randomTimeInSeconds - secondsPast;
    $('.clock').FlipClock(timeleft, {
      language: 'sv',
      countdown: true,
      callbacks: {
        stop: function () {
          $('.random_message__dispaly').html('Bra jobbat!');
          sound2.play();
        }
      }
    });
  }

  function displayRandomNumber() {
    $('.clock').FlipClock(random * 60, {
      language: 'sv',
      countdown: true,
      callbacks: {
        stop: function () {
          $('.random_message__dispaly').html('Bra jobbat!');
          sound2.play();
        }
      }
    });
  }

  function getLocalStorage() {
    randomTimeRetrieved = localStorage.getItem('randomTime');
    timeRetrieved = localStorage.getItem('timeDate');
  }

  function setLocalStorage() {
    localStorage.setItem('randomTime', random);
    localStorage.setItem('timeDate', new Date());
  }

  return {
    Init: Init,
    config: config
  };
}());

},{"FlipClock":2,"howler":9,"jquery":"jquery"}],6:[function(require,module,exports){
'use strict';

var $ = require('jquery');
require('howler');

/**
 * Timer - A module for timer.
 * @module timer
 * @PublicMethod Init
 */

module.exports = (function () {

  var config = {
    urls: 'sounds/Knight.mp3',
    time: {hours: 9, minutes: 30}
  };

  var sound = new Howl({
    urls: [config.urls]
  });

  function Init() {
    var now = new Date();
    var millisTillStandUp = new Date(now.getFullYear(), now.getMonth(), now.getDate(), config.time.hours, config.time.minutes, 0, 0) - now;
    if (millisTillStandUp < 0) {
      millisTillStandUp += 86400000; // it's after stand up, try tomorrow.
    }

    setTimeout(function () {
      console.log("play sound");
      sound.play();
      Init();
    }, millisTillStandUp);
  }

  return {
    Init: Init,
    config: config
  };
}());

},{"howler":9,"jquery":"jquery"}],7:[function(require,module,exports){
'use strict';


/**
 * Week - A module for showing week number.
 * @module week
 * @PublicMethod Init
 */

module.exports = (function () {
  function getWeek() {
    Date.prototype.getWeek = function () {
      var onejan = new Date(this.getFullYear(), 0, 1);
      return Math.ceil((((this - onejan) / 86400000) + onejan.getDay() + 1) / 7);
    };

    var weekNumber = (new Date()).getWeek();

    return weekNumber;
  }

  return {
    getWeek: getWeek
  };
}());

},{}],8:[function(require,module,exports){
/*! @license Firebase v2.1.2 - License: https://www.firebase.com/terms/terms-of-service.html */ (function() {var h,aa=this;function m(a){return void 0!==a}function ba(){}function ca(a){a.Nb=function(){return a.kf?a.kf:a.kf=new a}}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return"array"==da(a)}function fa(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function p(a){return"string"==typeof a}function ga(a){return"number"==typeof a}function ha(a){return"function"==da(a)}function ia(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ja(a,b,c){return a.call.apply(a.bind,arguments)}
function ka(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function q(a,b,c){q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka;return q.apply(null,arguments)}var la=Date.now||function(){return+new Date};
function ma(a,b){function c(){}c.prototype=b.prototype;a.Jg=b.prototype;a.prototype=new c;a.Fg=function(a,c,f){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};function na(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);}function oa(){this.Hd=void 0}
function pa(a,b,c){switch(typeof b){case "string":qa(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(null==b){c.push("null");break}if(ea(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),e=b[f],pa(a,a.Hd?a.Hd.call(b,String(f),e):e,c),e=",";c.push("]");break}c.push("{");d="";for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&(e=b[f],"function"!=typeof e&&(c.push(d),qa(f,c),
c.push(":"),pa(a,a.Hd?a.Hd.call(b,f,e):e,c),d=","));c.push("}");break;case "function":break;default:throw Error("Unknown type: "+typeof b);}}var ra={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},sa=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function qa(a,b){b.push('"',a.replace(sa,function(a){if(a in ra)return ra[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return ra[a]=e+b.toString(16)}),'"')};function ta(a){return"undefined"!==typeof JSON&&m(JSON.parse)?JSON.parse(a):na(a)}function r(a){if("undefined"!==typeof JSON&&m(JSON.stringify))a=JSON.stringify(a);else{var b=[];pa(new oa,a,b);a=b.join("")}return a};function s(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function t(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]}function ua(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(c,a[c])}function va(a){var b={};ua(a,function(a,d){b[a]=d});return b};function wa(a){this.uc=a;this.Ed="firebase:"}h=wa.prototype;h.set=function(a,b){null==b?this.uc.removeItem(this.Ed+a):this.uc.setItem(this.Ed+a,r(b))};h.get=function(a){a=this.uc.getItem(this.Ed+a);return null==a?null:ta(a)};h.remove=function(a){this.uc.removeItem(this.Ed+a)};h.lf=!1;h.toString=function(){return this.uc.toString()};function xa(){this.oc={}}xa.prototype.set=function(a,b){null==b?delete this.oc[a]:this.oc[a]=b};xa.prototype.get=function(a){return s(this.oc,a)?this.oc[a]:null};xa.prototype.remove=function(a){delete this.oc[a]};xa.prototype.lf=!0;function ya(a){try{if("undefined"!==typeof window&&"undefined"!==typeof window[a]){var b=window[a];b.setItem("firebase:sentinel","cache");b.removeItem("firebase:sentinel");return new wa(b)}}catch(c){}return new xa}var za=ya("localStorage"),v=ya("sessionStorage");function Aa(a,b,c,d,e){this.host=a.toLowerCase();this.domain=this.host.substr(this.host.indexOf(".")+1);this.Ab=b;this.tb=c;this.Dg=d;this.Dd=e||"";this.Ma=za.get("host:"+a)||this.host}function Ba(a,b){b!==a.Ma&&(a.Ma=b,"s-"===a.Ma.substr(0,2)&&za.set("host:"+a.host,a.Ma))}Aa.prototype.toString=function(){var a=(this.Ab?"https://":"http://")+this.host;this.Dd&&(a+="<"+this.Dd+">");return a};function Ca(){this.Sa=-1};function Da(){this.Sa=-1;this.Sa=64;this.R=[];this.be=[];this.Ef=[];this.Ad=[];this.Ad[0]=128;for(var a=1;a<this.Sa;++a)this.Ad[a]=0;this.Td=this.Sb=0;this.reset()}ma(Da,Ca);Da.prototype.reset=function(){this.R[0]=1732584193;this.R[1]=4023233417;this.R[2]=2562383102;this.R[3]=271733878;this.R[4]=3285377520;this.Td=this.Sb=0};
function Ea(a,b,c){c||(c=0);var d=a.Ef;if(p(b))for(var e=0;16>e;e++)d[e]=b.charCodeAt(c)<<24|b.charCodeAt(c+1)<<16|b.charCodeAt(c+2)<<8|b.charCodeAt(c+3),c+=4;else for(e=0;16>e;e++)d[e]=b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3],c+=4;for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=(f<<1|f>>>31)&4294967295}b=a.R[0];c=a.R[1];for(var g=a.R[2],k=a.R[3],l=a.R[4],n,e=0;80>e;e++)40>e?20>e?(f=k^c&(g^k),n=1518500249):(f=c^g^k,n=1859775393):60>e?(f=c&g|k&(c|g),n=2400959708):(f=c^g^k,n=3395469782),f=(b<<
5|b>>>27)+f+l+n+d[e]&4294967295,l=k,k=g,g=(c<<30|c>>>2)&4294967295,c=b,b=f;a.R[0]=a.R[0]+b&4294967295;a.R[1]=a.R[1]+c&4294967295;a.R[2]=a.R[2]+g&4294967295;a.R[3]=a.R[3]+k&4294967295;a.R[4]=a.R[4]+l&4294967295}
Da.prototype.update=function(a,b){m(b)||(b=a.length);for(var c=b-this.Sa,d=0,e=this.be,f=this.Sb;d<b;){if(0==f)for(;d<=c;)Ea(this,a,d),d+=this.Sa;if(p(a))for(;d<b;){if(e[f]=a.charCodeAt(d),++f,++d,f==this.Sa){Ea(this,e);f=0;break}}else for(;d<b;)if(e[f]=a[d],++f,++d,f==this.Sa){Ea(this,e);f=0;break}}this.Sb=f;this.Td+=b};function Fa(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^la()).toString(36)};var w=Array.prototype,Ga=w.indexOf?function(a,b,c){return w.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(p(a))return p(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ha=w.forEach?function(a,b,c){w.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ia=w.filter?function(a,b,c){return w.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=p(a)?
a.split(""):a,k=0;k<d;k++)if(k in g){var l=g[k];b.call(c,l,k,a)&&(e[f++]=l)}return e},Ja=w.map?function(a,b,c){return w.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=p(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Ka=w.reduce?function(a,b,c,d){d&&(b=q(b,d));return w.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;Ha(a,function(c,g){e=b.call(d,e,c,g,a)});return e},La=w.every?function(a,b,c){return w.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=
p(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function Ma(a,b){var c=Na(a,b,void 0);return 0>c?null:p(a)?a.charAt(c):a[c]}function Na(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function Oa(a,b){var c=Ga(a,b);0<=c&&w.splice.call(a,c,1)}function Pa(a,b,c){return 2>=arguments.length?w.slice.call(a,b):w.slice.call(a,b,c)}function Qa(a,b){a.sort(b||Ra)}function Ra(a,b){return a>b?1:a<b?-1:0};var Sa;a:{var Ta=aa.navigator;if(Ta){var Ua=Ta.userAgent;if(Ua){Sa=Ua;break a}}Sa=""}function Va(a){return-1!=Sa.indexOf(a)};var Wa=Va("Opera")||Va("OPR"),Xa=Va("Trident")||Va("MSIE"),Ya=Va("Gecko")&&-1==Sa.toLowerCase().indexOf("webkit")&&!(Va("Trident")||Va("MSIE")),Za=-1!=Sa.toLowerCase().indexOf("webkit");(function(){var a="",b;if(Wa&&aa.opera)return a=aa.opera.version,ha(a)?a():a;Ya?b=/rv\:([^\);]+)(\)|;)/:Xa?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Za&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(Sa))?a[1]:"");return Xa&&(b=(b=aa.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();var $a=null,ab=null,bb=null;function cb(a,b){if(!fa(a))throw Error("encodeByteArray takes an array as a parameter");db();for(var c=b?ab:$a,d=[],e=0;e<a.length;e+=3){var f=a[e],g=e+1<a.length,k=g?a[e+1]:0,l=e+2<a.length,n=l?a[e+2]:0,u=f>>2,f=(f&3)<<4|k>>4,k=(k&15)<<2|n>>6,n=n&63;l||(n=64,g||(k=64));d.push(c[u],c[f],c[k],c[n])}return d.join("")}
function db(){if(!$a){$a={};ab={};bb={};for(var a=0;65>a;a++)$a[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a),ab[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a),bb[ab[a]]=a}};var eb=function(){var a=1;return function(){return a++}}();function y(a,b){if(!a)throw fb(b);}function fb(a){return Error("Firebase INTERNAL ASSERT FAILED:"+a)}
function gb(a){try{var b;if("undefined"!==typeof atob)b=atob(a);else{db();for(var c=bb,d=[],e=0;e<a.length;){var f=c[a.charAt(e++)],g=e<a.length?c[a.charAt(e)]:0;++e;var k=e<a.length?c[a.charAt(e)]:64;++e;var l=e<a.length?c[a.charAt(e)]:64;++e;if(null==f||null==g||null==k||null==l)throw Error();d.push(f<<2|g>>4);64!=k&&(d.push(g<<4&240|k>>2),64!=l&&d.push(k<<6&192|l))}if(8192>d.length)b=String.fromCharCode.apply(null,d);else{a="";for(c=0;c<d.length;c+=8192)a+=String.fromCharCode.apply(null,Pa(d,c,
c+8192));b=a}}return b}catch(n){hb("base64Decode failed: ",n)}return null}function ib(a){var b=jb(a);a=new Da;a.update(b);var b=[],c=8*a.Td;56>a.Sb?a.update(a.Ad,56-a.Sb):a.update(a.Ad,a.Sa-(a.Sb-56));for(var d=a.Sa-1;56<=d;d--)a.be[d]=c&255,c/=256;Ea(a,a.be);for(d=c=0;5>d;d++)for(var e=24;0<=e;e-=8)b[c]=a.R[d]>>e&255,++c;return cb(b)}
function kb(a){for(var b="",c=0;c<arguments.length;c++)b=fa(arguments[c])?b+kb.apply(null,arguments[c]):"object"===typeof arguments[c]?b+r(arguments[c]):b+arguments[c],b+=" ";return b}var lb=null,mb=!0;function hb(a){!0===mb&&(mb=!1,null===lb&&!0===v.get("logging_enabled")&&nb(!0));if(lb){var b=kb.apply(null,arguments);lb(b)}}function ob(a){return function(){hb(a,arguments)}}
function pb(a){if("undefined"!==typeof console){var b="FIREBASE INTERNAL ERROR: "+kb.apply(null,arguments);"undefined"!==typeof console.error?console.error(b):console.log(b)}}function qb(a){var b=kb.apply(null,arguments);throw Error("FIREBASE FATAL ERROR: "+b);}function z(a){if("undefined"!==typeof console){var b="FIREBASE WARNING: "+kb.apply(null,arguments);"undefined"!==typeof console.warn?console.warn(b):console.log(b)}}
function rb(a){var b="",c="",d="",e="",f=!0,g="https",k=443;if(p(a)){var l=a.indexOf("//");0<=l&&(g=a.substring(0,l-1),a=a.substring(l+2));l=a.indexOf("/");-1===l&&(l=a.length);b=a.substring(0,l);e="";a=a.substring(l).split("/");for(l=0;l<a.length;l++)if(0<a[l].length){var n=a[l];try{n=decodeURIComponent(n.replace(/\+/g," "))}catch(u){}e+="/"+n}a=b.split(".");3===a.length?(c=a[1],d=a[0].toLowerCase()):2===a.length&&(c=a[0]);l=b.indexOf(":");0<=l&&(f="https"===g||"wss"===g,k=b.substring(l+1),isFinite(k)&&
(k=String(k)),k=p(k)?/^\s*-?0x/i.test(k)?parseInt(k,16):parseInt(k,10):NaN)}return{host:b,port:k,domain:c,Ag:d,Ab:f,scheme:g,Pc:e}}function sb(a){return ga(a)&&(a!=a||a==Number.POSITIVE_INFINITY||a==Number.NEGATIVE_INFINITY)}
function tb(a){if("complete"===document.readyState)a();else{var b=!1,c=function(){document.body?b||(b=!0,a()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}
function ub(a,b){if(a===b)return 0;if("[MIN_NAME]"===a||"[MAX_NAME]"===b)return-1;if("[MIN_NAME]"===b||"[MAX_NAME]"===a)return 1;var c=vb(a),d=vb(b);return null!==c?null!==d?0==c-d?a.length-b.length:c-d:-1:null!==d?1:a<b?-1:1}function wb(a,b){if(b&&a in b)return b[a];throw Error("Missing required key ("+a+") in object: "+r(b));}
function xb(a){if("object"!==typeof a||null===a)return r(a);var b=[],c;for(c in a)b.push(c);b.sort();c="{";for(var d=0;d<b.length;d++)0!==d&&(c+=","),c+=r(b[d]),c+=":",c+=xb(a[b[d]]);return c+"}"}function yb(a,b){if(a.length<=b)return[a];for(var c=[],d=0;d<a.length;d+=b)d+b>a?c.push(a.substring(d,a.length)):c.push(a.substring(d,d+b));return c}function zb(a,b){if(ea(a))for(var c=0;c<a.length;++c)b(c,a[c]);else A(a,b)}
function Ab(a){y(!sb(a),"Invalid JSON number");var b,c,d,e;0===a?(d=c=0,b=-Infinity===1/a?1:0):(b=0>a,a=Math.abs(a),a>=Math.pow(2,-1022)?(d=Math.min(Math.floor(Math.log(a)/Math.LN2),1023),c=d+1023,d=Math.round(a*Math.pow(2,52-d)-Math.pow(2,52))):(c=0,d=Math.round(a/Math.pow(2,-1074))));e=[];for(a=52;a;a-=1)e.push(d%2?1:0),d=Math.floor(d/2);for(a=11;a;a-=1)e.push(c%2?1:0),c=Math.floor(c/2);e.push(b?1:0);e.reverse();b=e.join("");c="";for(a=0;64>a;a+=8)d=parseInt(b.substr(a,8),2).toString(16),1===d.length&&
(d="0"+d),c+=d;return c.toLowerCase()}var Bb=/^-?\d{1,10}$/;function vb(a){return Bb.test(a)&&(a=Number(a),-2147483648<=a&&2147483647>=a)?a:null}function Cb(a){try{a()}catch(b){setTimeout(function(){z("Exception was thrown by user callback.",b.stack||"");throw b;},Math.floor(0))}}function B(a,b){if(ha(a)){var c=Array.prototype.slice.call(arguments,1).slice();Cb(function(){a.apply(null,c)})}};function Db(a,b,c,d){this.le=b;this.Nd=c;this.Fd=d;this.jd=a}Db.prototype.Qb=function(){var a=this.Nd.cc();return"value"===this.jd?a.path:a.parent().path};Db.prototype.pe=function(){return this.jd};Db.prototype.Lb=function(){return this.le.Lb(this)};Db.prototype.toString=function(){return this.Qb().toString()+":"+this.jd+":"+r(this.Nd.bf())};function Eb(a,b,c){this.le=a;this.error=b;this.path=c}Eb.prototype.Qb=function(){return this.path};Eb.prototype.pe=function(){return"cancel"};
Eb.prototype.Lb=function(){return this.le.Lb(this)};Eb.prototype.toString=function(){return this.path.toString()+":cancel"};function C(a,b,c,d){this.type=a;this.Ha=b;this.Ua=c;this.De=d;this.Fd=void 0}function Fb(a){return new C(Gb,a)}var Gb="value";function Hb(a,b,c){this.Hb=a;this.kb=b;this.mb=c||null}h=Hb.prototype;h.wf=function(a){return"value"===a};h.createEvent=function(a,b){var c=b.n.g;return new Db("value",this,new D(a.Ha,b.cc(),c))};h.Lb=function(a){var b=this.mb;if("cancel"===a.pe()){y(this.kb,"Raising a cancel event on a listener with no cancel callback");var c=this.kb;return function(){c.call(b,a.error)}}var d=this.Hb;return function(){d.call(b,a.Nd)}};h.Ye=function(a,b){return this.kb?new Eb(this,a,b):null};
h.matches=function(a){return a instanceof Hb?a.Hb&&this.Hb?a.Hb===this.Hb&&a.mb===this.mb:!0:!1};h.hf=function(){return null!==this.Hb};function Ib(a,b,c){this.da=a;this.kb=b;this.mb=c}h=Ib.prototype;h.wf=function(a){a="children_added"===a?"child_added":a;return("children_removed"===a?"child_removed":a)in this.da};h.Ye=function(a,b){return this.kb?new Eb(this,a,b):null};
h.createEvent=function(a,b){y(null!=a.Ua,"Child events should have a childName.");var c=b.cc().o(a.Ua);return new Db(a.type,this,new D(a.Ha,c,b.n.g),a.Fd)};h.Lb=function(a){var b=this.mb;if("cancel"===a.pe()){y(this.kb,"Raising a cancel event on a listener with no cancel callback");var c=this.kb;return function(){c.call(b,a.error)}}var d=this.da[a.jd];return function(){d.call(b,a.Nd,a.Fd)}};
h.matches=function(a){if(a instanceof Ib){if(!this.da||!a.da)return!0;if(this.mb===a.mb){var b=Jb(a.da);if(b===Jb(this.da)){if(1===b){var b=Kb(a.da),c=Kb(this.da);return c===b&&(!a.da[b]||!this.da[c]||a.da[b]===this.da[c])}return Lb(this.da,function(b,c){return a.da[c]===b})}}}return!1};h.hf=function(){return null!==this.da};function jb(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);55296<=e&&56319>=e&&(e-=55296,d++,y(d<a.length,"Surrogate pair missing trail surrogate."),e=65536+(e<<10)+(a.charCodeAt(d)-56320));128>e?b[c++]=e:(2048>e?b[c++]=e>>6|192:(65536>e?b[c++]=e>>12|224:(b[c++]=e>>18|240,b[c++]=e>>12&63|128),b[c++]=e>>6&63|128),b[c++]=e&63|128)}return b};function F(a,b,c,d){var e;d<b?e="at least "+b:d>c&&(e=0===c?"none":"no more than "+c);if(e)throw Error(a+" failed: Was called with "+d+(1===d?" argument.":" arguments.")+" Expects "+e+".");}function G(a,b,c){var d="";switch(b){case 1:d=c?"first":"First";break;case 2:d=c?"second":"Second";break;case 3:d=c?"third":"Third";break;case 4:d=c?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?");}return a=a+" failed: "+(d+" argument ")}
function H(a,b,c,d){if((!d||m(c))&&!ha(c))throw Error(G(a,b,d)+"must be a valid function.");}function Mb(a,b,c){if(m(c)&&(!ia(c)||null===c))throw Error(G(a,b,!0)+"must be a valid context object.");};var Nb=/[\[\].#$\/\u0000-\u001F\u007F]/,Ob=/[\[\].#$\u0000-\u001F\u007F]/;function Pb(a){return p(a)&&0!==a.length&&!Nb.test(a)}function Qb(a){return null===a||p(a)||ga(a)&&!sb(a)||ia(a)&&s(a,".sv")}function Rb(a,b,c){c&&!m(b)||Sb(G(a,1,c),b)}
function Sb(a,b,c,d){c||(c=0);var e=d||[];if(!m(b))throw Error(a+"contains undefined"+Tb(e));if(ha(b))throw Error(a+"contains a function"+Tb(e)+" with contents: "+b.toString());if(sb(b))throw Error(a+"contains "+b.toString()+Tb(e));if(1E3<c)throw new TypeError(a+"contains a cyclic object value ("+e.slice(0,100).join(".")+"...)");if(p(b)&&b.length>10485760/3&&10485760<jb(b).length)throw Error(a+"contains a string greater than 10485760 utf8 bytes"+Tb(e)+" ('"+b.substring(0,50)+"...')");if(ia(b)){var f=
!1,g=!1;ua(b,function(b,d){if(".value"===b)f=!0;else if(".priority"!==b&&".sv"!==b&&(g=!0,!Pb(b)))throw Error(a+" contains an invalid key ("+b+")"+Tb(e)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.push(b);Sb(a,d,c+1,e);e.pop()});if(f&&g)throw Error(a+' contains ".value" child'+Tb(e)+" in addition to actual children.");}}function Tb(a){return 0==a.length?"":" in property '"+a.join(".")+"'"}
function Ub(a,b){if(!ia(b)||ea(b))throw Error(G(a,1,!1)+" must be an Object containing the children to replace.");if(s(b,".value"))throw Error(G(a,1,!1)+' must not contain ".value".  To overwrite with a leaf value, just use .set() instead.');Rb(a,b,!1)}
function Vb(a,b,c){if(sb(c))throw Error(G(a,b,!1)+"is "+c.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Qb(c))throw Error(G(a,b,!1)+"must be a valid Firebase priority (a string, finite number, server value, or null).");}
function Wb(a,b,c){if(!c||m(b))switch(b){case "value":case "child_added":case "child_removed":case "child_changed":case "child_moved":break;default:throw Error(G(a,1,c)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".');}}function Xb(a,b,c,d){if((!d||m(c))&&!Pb(c))throw Error(G(a,b,d)+'was an invalid key: "'+c+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").');}
function Yb(a,b){if(!p(b)||0===b.length||Ob.test(b))throw Error(G(a,1,!1)+'was an invalid path: "'+b+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"');}function Zb(a,b){if(".info"===I(b))throw Error(a+" failed: Can't modify data under /.info/");}function $b(a,b){if(!p(b))throw Error(G(a,1,!1)+"must be a valid credential (a string).");}function ac(a,b,c){if(!p(c))throw Error(G(a,b,!1)+"must be a valid string.");}
function J(a,b,c,d){if(!d||m(c))if(!ia(c)||null===c)throw Error(G(a,b,d)+"must be a valid object.");}function K(a,b,c){if(!ia(b)||null===b||!s(b,c))throw Error(G(a,1,!1)+'must contain the key "'+c+'"');if(!p(t(b,c)))throw Error(G(a,1,!1)+'must contain the key "'+c+'" with type "string"');};function bc(a){this.g=a}h=bc.prototype;h.C=function(a,b,c,d,e){y(a.Bc(this.g),"A node must be indexed if only a child is updated");d=a.K(b);if(d.ea(c))return a;null!=e&&(c.e()?a.Da(b)?cc(e,new C("child_removed",d,b)):y(a.M(),"A child remove without an old child only makes sense on a leaf node"):d.e()?cc(e,new C("child_added",c,b)):cc(e,new C("child_changed",c,b,d)));return a.M()&&c.e()?a:a.P(b,c)};
h.oa=function(a,b,c){null!=c&&(a.M()||a.U(L,function(a,e){b.Da(a)||cc(c,new C("child_removed",e,a))}),b.M()||b.U(L,function(b,e){if(a.Da(b)){var f=a.K(b);f.ea(e)||cc(c,new C("child_changed",e,b,f))}else cc(c,new C("child_added",e,b))}));return b.Fb(this.g)};h.Z=function(a,b){return a.e()?M:a.Z(b)};h.ya=function(){return!1};h.Mb=function(){return this};function dc(a){this.re=new bc(a.g);this.g=a.g;var b;a.ia?(b=ec(a),b=a.g.Ae(fc(a),b)):b=a.g.Ce();this.Vc=b;a.qa?(b=gc(a),a=a.g.Ae(hc(a),b)):a=a.g.Be();this.wc=a}h=dc.prototype;h.matches=function(a){return 0>=this.g.compare(this.Vc,a)&&0>=this.g.compare(a,this.wc)};h.C=function(a,b,c,d,e){this.matches(new N(b,c))||(c=M);return this.re.C(a,b,c,d,e)};h.oa=function(a,b,c){b.M()&&(b=M);var d=b.Fb(this.g),d=d.Z(M),e=this;b.U(L,function(a,b){e.matches(new N(a,b))||(d=d.P(a,M))});return this.re.oa(a,d,c)};
h.Z=function(a){return a};h.ya=function(){return!0};h.Mb=function(){return this.re};function ic(a,b){return ub(a.name,b.name)}function jc(a,b){return ub(a,b)};function kc(){}var lc={};function mc(a){return q(a.compare,a)}kc.prototype.jf=function(a,b){return 0!==this.compare(new N("[MIN_NAME]",a),new N("[MIN_NAME]",b))};kc.prototype.Ce=function(){return nc};function oc(a){this.Ub=a}ma(oc,kc);h=oc.prototype;h.ue=function(a){return!a.K(this.Ub).e()};h.compare=function(a,b){var c=a.Y.K(this.Ub),d=b.Y.K(this.Ub),c=c.he(d);return 0===c?ub(a.name,b.name):c};h.Ae=function(a,b){var c=O(a),c=M.P(this.Ub,c);return new N(b,c)};
h.Be=function(){var a=M.P(this.Ub,pc);return new N("[MAX_NAME]",a)};h.toString=function(){return this.Ub};var L=new oc(".priority");function qc(){}ma(qc,kc);h=qc.prototype;h.compare=function(a,b){return ub(a.name,b.name)};h.ue=function(){throw fb("KeyIndex.isDefinedOn not expected to be called.");};h.jf=function(){return!1};h.Ce=function(){return nc};h.Be=function(){return new N("[MAX_NAME]",M)};h.Ae=function(a){y(p(a),"KeyIndex indexValue must always be a string.");return new N(a,M)};
h.toString=function(){return".key"};var rc=new qc;function sc(){}sc.prototype.ef=function(){return null};sc.prototype.oe=function(){return null};var tc=new sc;function uc(a,b,c){this.Bf=a;this.Ia=b;this.zd=c}uc.prototype.ef=function(a){var b=this.Ia.F;if(vc(b,a))return b.j().K(a);b=null!=this.zd?new wc(this.zd,!0,!1):this.Ia.u();return this.Bf.Ta(a,b)};uc.prototype.oe=function(a,b,c){var d=null!=this.zd?this.zd:xc(this.Ia);a=this.Bf.ce(d,b,1,c,a);return 0===a.length?null:a[0]};function yc(){this.Za={}}
function cc(a,b){var c=b.type,d=b.Ua;y("child_added"==c||"child_changed"==c||"child_removed"==c,"Only child changes supported for tracking");y(".priority"!==d,"Only non-priority child changes can be tracked.");var e=t(a.Za,d);if(e){var f=e.type;if("child_added"==c&&"child_removed"==f)a.Za[d]=new C("child_changed",b.Ha,d,e.Ha);else if("child_removed"==c&&"child_added"==f)delete a.Za[d];else if("child_removed"==c&&"child_changed"==f)a.Za[d]=new C("child_removed",e.De,d);else if("child_changed"==c&&
"child_added"==f)a.Za[d]=new C("child_added",b.Ha,d);else if("child_changed"==c&&"child_changed"==f)a.Za[d]=new C("child_changed",b.Ha,d,e.De);else throw fb("Illegal combination of changes: "+b+" occurred after "+e);}else a.Za[d]=b};function N(a,b){this.name=a;this.Y=b}function zc(a,b){return new N(a,b)};function Ac(a){this.ma=new dc(a);this.g=a.g;y(a.ka,"Only valid if limit has been set");this.sa=a.sa;this.zb=!(""===a.Eb?a.ia:"l"===a.Eb)}h=Ac.prototype;h.C=function(a,b,c,d,e){this.ma.matches(new N(b,c))||(c=M);return a.K(b).ea(c)?a:a.ub()<this.sa?this.ma.Mb().C(a,b,c,d,e):Bc(this,a,b,c,d,e)};
h.oa=function(a,b,c){var d;if(b.M()||b.e())d=M.Fb(this.g);else if(2*this.sa<b.ub()&&b.Bc(this.g)){d=M.Fb(this.g);b=this.zb?b.Rb(this.ma.wc,this.g):b.Pb(this.ma.Vc,this.g);for(var e=0;0<b.Na.length&&e<this.sa;){var f=P(b),g;if(g=this.zb?0>=this.g.compare(this.ma.Vc,f):0>=this.g.compare(f,this.ma.wc))d=d.P(f.name,f.Y),e++;else break}}else{d=b.Fb(this.g);d=d.Z(M);var k,l,n;if(this.zb){b=d.gf(this.g);k=this.ma.wc;l=this.ma.Vc;var u=mc(this.g);n=function(a,b){return u(b,a)}}else b=d.Ob(this.g),k=this.ma.Vc,
l=this.ma.wc,n=mc(this.g);for(var e=0,x=!1;0<b.Na.length;)f=P(b),!x&&0>=n(k,f)&&(x=!0),(g=x&&e<this.sa&&0>=n(f,l))?e++:d=d.P(f.name,M)}return this.ma.Mb().oa(a,d,c)};h.Z=function(a){return a};h.ya=function(){return!0};h.Mb=function(){return this.ma.Mb()};
function Bc(a,b,c,d,e,f){var g;if(a.zb){var k=mc(a.g);g=function(a,b){return k(b,a)}}else g=mc(a.g);y(b.ub()==a.sa,"");var l=new N(c,d),n=a.zb?Cc(b,a.g):Dc(b,a.g),u=a.ma.matches(l);if(b.Da(c)){var x=b.K(c),n=e.oe(a.g,n,a.zb);null!=n&&n.name==c&&(n=e.oe(a.g,n,a.zb));e=null==n?1:g(n,l);if(u&&!d.e()&&0<=e)return null!=f&&cc(f,new C("child_changed",d,c,x)),b.P(c,d);null!=f&&cc(f,new C("child_removed",x,c));b=b.P(c,M);return null!=n&&a.ma.matches(n)?(null!=f&&cc(f,new C("child_added",n.Y,n.name)),b.P(n.name,
n.Y)):b}return d.e()?b:u&&0<=g(n,l)?(null!=f&&(cc(f,new C("child_removed",n.Y,n.name)),cc(f,new C("child_added",d,c))),b.P(c,d).P(n.name,M)):b};function Ec(){this.vc=this.qa=this.kc=this.ia=this.ka=!1;this.sa=0;this.Eb="";this.Ac=null;this.Wb="";this.zc=null;this.Tb="";this.g=L}var Fc=new Ec;function fc(a){y(a.ia,"Only valid if start has been set");return a.Ac}function ec(a){y(a.ia,"Only valid if start has been set");return a.kc?a.Wb:"[MIN_NAME]"}function hc(a){y(a.qa,"Only valid if end has been set");return a.zc}function gc(a){y(a.qa,"Only valid if end has been set");return a.vc?a.Tb:"[MAX_NAME]"}
function Gc(a){var b=new Ec;b.ka=a.ka;b.sa=a.sa;b.ia=a.ia;b.Ac=a.Ac;b.kc=a.kc;b.Wb=a.Wb;b.qa=a.qa;b.zc=a.zc;b.vc=a.vc;b.Tb=a.Tb;b.g=a.g;return b}h=Ec.prototype;h.xe=function(a){var b=Gc(this);b.ka=!0;b.sa=a;b.Eb="";return b};h.ye=function(a){var b=Gc(this);b.ka=!0;b.sa=a;b.Eb="l";return b};h.ze=function(a){var b=Gc(this);b.ka=!0;b.sa=a;b.Eb="r";return b};h.Od=function(a,b){var c=Gc(this);c.ia=!0;m(a)||(a=null);c.Ac=a;null!=b?(c.kc=!0,c.Wb=b):(c.kc=!1,c.Wb="");return c};
h.hd=function(a,b){var c=Gc(this);c.qa=!0;m(a)||(a=null);c.zc=a;m(b)?(c.vc=!0,c.Tb=b):(c.Ig=!1,c.Tb="");return c};function Hc(a,b){var c=Gc(a);c.g=b;return c}function Ic(a){var b={};a.ia&&(b.sp=a.Ac,a.kc&&(b.sn=a.Wb));a.qa&&(b.ep=a.zc,a.vc&&(b.en=a.Tb));if(a.ka){b.l=a.sa;var c=a.Eb;""===c&&(c=a.ia?"l":"r");b.vf=c}a.g!==L&&(b.i=a.g.toString());return b}function Jc(a){return!(a.ia||a.qa||a.ka)}h.toString=function(){return r(Ic(this))};function Q(a,b,c,d){this.k=a;this.path=b;this.n=c;this.ac=d}
function Kc(a){var b=null,c=null;a.ia&&(b=fc(a));a.qa&&(c=hc(a));if(a.g===rc){if(a.ia){if("[MIN_NAME]"!=ec(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if(null!=b&&"string"!==typeof b)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");}if(a.qa){if("[MAX_NAME]"!=gc(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if(null!=
c&&"string"!==typeof c)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");}}else if(a.g===L){if(null!=b&&!Qb(b)||null!=c&&!Qb(c))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).");}else if(y(a.g instanceof oc,"unknown index type."),null!=b&&"object"===typeof b||null!=c&&"object"===typeof c)throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.");
}function Lc(a){if(a.ia&&a.qa&&a.ka&&(!a.ka||""===a.Eb))throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.");}function Mc(a,b){if(!0===a.ac)throw Error(b+": You can't combine multiple orderBy calls.");}Q.prototype.cc=function(){F("Query.ref",0,0,arguments.length);return new R(this.k,this.path)};Q.prototype.ref=Q.prototype.cc;
Q.prototype.vb=function(a,b,c,d){F("Query.on",2,4,arguments.length);Wb("Query.on",a,!1);H("Query.on",2,b,!1);var e=Nc("Query.on",c,d);if("value"===a)Oc(this.k,this,new Hb(b,e.cancel||null,e.Ka||null));else{var f={};f[a]=b;Oc(this.k,this,new Ib(f,e.cancel,e.Ka))}return b};Q.prototype.on=Q.prototype.vb;
Q.prototype.Zb=function(a,b,c){F("Query.off",0,3,arguments.length);Wb("Query.off",a,!0);H("Query.off",2,b,!0);Mb("Query.off",3,c);var d=null,e=null;"value"===a?d=new Hb(b||null,null,c||null):a&&(b&&(e={},e[a]=b),d=new Ib(e,null,c||null));e=this.k;d=".info"===I(this.path)?e.qd.gb(this,d):e.N.gb(this,d);Pc(e.$,this.path,d)};Q.prototype.off=Q.prototype.Zb;
Q.prototype.lg=function(a,b){function c(g){f&&(f=!1,e.Zb(a,c),b.call(d.Ka,g))}F("Query.once",2,4,arguments.length);Wb("Query.once",a,!1);H("Query.once",2,b,!1);var d=Nc("Query.once",arguments[2],arguments[3]),e=this,f=!0;this.vb(a,c,function(b){e.Zb(a,c);d.cancel&&d.cancel.call(d.Ka,b)})};Q.prototype.once=Q.prototype.lg;
Q.prototype.xe=function(a){z("Query.limit() being deprecated. Please use Query.limitToFirst() or Query.limitToLast() instead.");F("Query.limit",1,1,arguments.length);if(!ga(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limit: First argument must be a positive integer.");if(this.n.ka)throw Error("Query.limit: Limit was already set (by another call to limit, limitToFirst, orlimitToLast.");var b=this.n.xe(a);Lc(b);return new Q(this.k,this.path,b,this.ac)};Q.prototype.limit=Q.prototype.xe;
Q.prototype.ye=function(a){F("Query.limitToFirst",1,1,arguments.length);if(!ga(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.n.ka)throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Q(this.k,this.path,this.n.ye(a),this.ac)};Q.prototype.limitToFirst=Q.prototype.ye;
Q.prototype.ze=function(a){F("Query.limitToLast",1,1,arguments.length);if(!ga(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.n.ka)throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Q(this.k,this.path,this.n.ze(a),this.ac)};Q.prototype.limitToLast=Q.prototype.ze;
Q.prototype.mg=function(a){F("Query.orderByChild",1,1,arguments.length);if("$key"===a)throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===a)throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');Xb("Query.orderByChild",1,a,!1);Mc(this,"Query.orderByChild");var b=Hc(this.n,new oc(a));Kc(b);return new Q(this.k,this.path,b,!0)};Q.prototype.orderByChild=Q.prototype.mg;
Q.prototype.ng=function(){F("Query.orderByKey",0,0,arguments.length);Mc(this,"Query.orderByKey");var a=Hc(this.n,rc);Kc(a);return new Q(this.k,this.path,a,!0)};Q.prototype.orderByKey=Q.prototype.ng;Q.prototype.og=function(){F("Query.orderByPriority",0,0,arguments.length);Mc(this,"Query.orderByPriority");var a=Hc(this.n,L);Kc(a);return new Q(this.k,this.path,a,!0)};Q.prototype.orderByPriority=Q.prototype.og;
Q.prototype.Od=function(a,b){F("Query.startAt",0,2,arguments.length);Rb("Query.startAt",a,!0);Xb("Query.startAt",2,b,!0);var c=this.n.Od(a,b);Lc(c);Kc(c);if(this.n.ia)throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");m(a)||(b=a=null);return new Q(this.k,this.path,c,this.ac)};Q.prototype.startAt=Q.prototype.Od;
Q.prototype.hd=function(a,b){F("Query.endAt",0,2,arguments.length);Rb("Query.endAt",a,!0);Xb("Query.endAt",2,b,!0);var c=this.n.hd(a,b);Lc(c);Kc(c);if(this.n.qa)throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new Q(this.k,this.path,c,this.ac)};Q.prototype.endAt=Q.prototype.hd;
Q.prototype.Tf=function(a,b){F("Query.equalTo",1,2,arguments.length);Rb("Query.equalTo",a,!1);Xb("Query.equalTo",2,b,!0);if(this.n.ia)throw Error("Query.equalTo: Starting point was already set (by another call to endAt or equalTo).");if(this.n.qa)throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.Od(a,b).hd(a,b)};Q.prototype.equalTo=Q.prototype.Tf;Q.prototype.Fa=function(){var a=xb(Ic(this.n));return"{}"===a?"default":a};
function Nc(a,b,c){var d={cancel:null,Ka:null};if(b&&c)d.cancel=b,H(a,3,d.cancel,!0),d.Ka=c,Mb(a,4,d.Ka);else if(b)if("object"===typeof b&&null!==b)d.Ka=b;else if("function"===typeof b)d.cancel=b;else throw Error(G(a,3,!0)+" must either be a cancel callback or a context object.");return d};function S(a,b){if(1==arguments.length){this.w=a.split("/");for(var c=0,d=0;d<this.w.length;d++)0<this.w[d].length&&(this.w[c]=this.w[d],c++);this.w.length=c;this.ca=0}else this.w=a,this.ca=b}function I(a){return a.ca>=a.w.length?null:a.w[a.ca]}function Qc(a){return a.w.length-a.ca}function T(a){var b=a.ca;b<a.w.length&&b++;return new S(a.w,b)}function Rc(a){return a.ca<a.w.length?a.w[a.w.length-1]:null}
S.prototype.toString=function(){for(var a="",b=this.ca;b<this.w.length;b++)""!==this.w[b]&&(a+="/"+this.w[b]);return a||"/"};S.prototype.parent=function(){if(this.ca>=this.w.length)return null;for(var a=[],b=this.ca;b<this.w.length-1;b++)a.push(this.w[b]);return new S(a,0)};
S.prototype.o=function(a){for(var b=[],c=this.ca;c<this.w.length;c++)b.push(this.w[c]);if(a instanceof S)for(c=a.ca;c<a.w.length;c++)b.push(a.w[c]);else for(a=a.split("/"),c=0;c<a.length;c++)0<a[c].length&&b.push(a[c]);return new S(b,0)};S.prototype.e=function(){return this.ca>=this.w.length};var U=new S("");function V(a,b){var c=I(a);if(null===c)return b;if(c===I(b))return V(T(a),T(b));throw Error("INTERNAL ERROR: innerPath ("+b+") is not within outerPath ("+a+")");}
S.prototype.ea=function(a){if(Qc(this)!==Qc(a))return!1;for(var b=this.ca,c=a.ca;b<=this.w.length;b++,c++)if(this.w[b]!==a.w[c])return!1;return!0};S.prototype.contains=function(a){var b=this.ca,c=a.ca;if(Qc(this)>Qc(a))return!1;for(;b<this.w.length;){if(this.w[b]!==a.w[c])return!1;++b;++c}return!0};function Sc(){this.children={};this.bd=0;this.value=null}function Tc(a,b,c){this.ud=a?a:"";this.Oc=b?b:null;this.A=c?c:new Sc}function Uc(a,b){for(var c=b instanceof S?b:new S(b),d=a,e;null!==(e=I(c));)d=new Tc(e,d,t(d.A.children,e)||new Sc),c=T(c);return d}h=Tc.prototype;h.za=function(){return this.A.value};function Vc(a,b){y("undefined"!==typeof b,"Cannot set value to undefined");a.A.value=b;Wc(a)}h.clear=function(){this.A.value=null;this.A.children={};this.A.bd=0;Wc(this)};
h.ld=function(){return 0<this.A.bd};h.e=function(){return null===this.za()&&!this.ld()};h.U=function(a){var b=this;A(this.A.children,function(c,d){a(new Tc(d,b,c))})};function Xc(a,b,c,d){c&&!d&&b(a);a.U(function(a){Xc(a,b,!0,d)});c&&d&&b(a)}function Yc(a,b){for(var c=a.parent();null!==c&&!b(c);)c=c.parent()}h.path=function(){return new S(null===this.Oc?this.ud:this.Oc.path()+"/"+this.ud)};h.name=function(){return this.ud};h.parent=function(){return this.Oc};
function Wc(a){if(null!==a.Oc){var b=a.Oc,c=a.ud,d=a.e(),e=s(b.A.children,c);d&&e?(delete b.A.children[c],b.A.bd--,Wc(b)):d||e||(b.A.children[c]=a.A,b.A.bd++,Wc(b))}};function Zc(a,b){this.Ja=a;this.ua=b?b:$c}h=Zc.prototype;h.La=function(a,b){return new Zc(this.Ja,this.ua.La(a,b,this.Ja).X(null,null,!1,null,null))};h.remove=function(a){return new Zc(this.Ja,this.ua.remove(a,this.Ja).X(null,null,!1,null,null))};h.get=function(a){for(var b,c=this.ua;!c.e();){b=this.Ja(a,c.key);if(0===b)return c.value;0>b?c=c.left:0<b&&(c=c.right)}return null};
function ad(a,b){for(var c,d=a.ua,e=null;!d.e();){c=a.Ja(b,d.key);if(0===c){if(d.left.e())return e?e.key:null;for(d=d.left;!d.right.e();)d=d.right;return d.key}0>c?d=d.left:0<c&&(e=d,d=d.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?");}h.e=function(){return this.ua.e()};h.count=function(){return this.ua.count()};h.Ic=function(){return this.ua.Ic()};h.Xb=function(){return this.ua.Xb()};h.fa=function(a){return this.ua.fa(a)};
h.Ob=function(a){return new bd(this.ua,null,this.Ja,!1,a)};h.Pb=function(a,b){return new bd(this.ua,a,this.Ja,!1,b)};h.Rb=function(a,b){return new bd(this.ua,a,this.Ja,!0,b)};h.gf=function(a){return new bd(this.ua,null,this.Ja,!0,a)};function bd(a,b,c,d,e){this.Id=e||null;this.ve=d;this.Na=[];for(e=1;!a.e();)if(e=b?c(a.key,b):1,d&&(e*=-1),0>e)a=this.ve?a.left:a.right;else if(0===e){this.Na.push(a);break}else this.Na.push(a),a=this.ve?a.right:a.left}
function P(a){if(0===a.Na.length)return null;var b=a.Na.pop(),c;c=a.Id?a.Id(b.key,b.value):{key:b.key,value:b.value};if(a.ve)for(b=b.left;!b.e();)a.Na.push(b),b=b.right;else for(b=b.right;!b.e();)a.Na.push(b),b=b.left;return c}function cd(a){if(0===a.Na.length)return null;var b;b=a.Na;b=b[b.length-1];return a.Id?a.Id(b.key,b.value):{key:b.key,value:b.value}}function dd(a,b,c,d,e){this.key=a;this.value=b;this.color=null!=c?c:!0;this.left=null!=d?d:$c;this.right=null!=e?e:$c}h=dd.prototype;
h.X=function(a,b,c,d,e){return new dd(null!=a?a:this.key,null!=b?b:this.value,null!=c?c:this.color,null!=d?d:this.left,null!=e?e:this.right)};h.count=function(){return this.left.count()+1+this.right.count()};h.e=function(){return!1};h.fa=function(a){return this.left.fa(a)||a(this.key,this.value)||this.right.fa(a)};function ed(a){return a.left.e()?a:ed(a.left)}h.Ic=function(){return ed(this).key};h.Xb=function(){return this.right.e()?this.key:this.right.Xb()};
h.La=function(a,b,c){var d,e;e=this;d=c(a,e.key);e=0>d?e.X(null,null,null,e.left.La(a,b,c),null):0===d?e.X(null,b,null,null,null):e.X(null,null,null,null,e.right.La(a,b,c));return fd(e)};function gd(a){if(a.left.e())return $c;a.left.ba()||a.left.left.ba()||(a=hd(a));a=a.X(null,null,null,gd(a.left),null);return fd(a)}
h.remove=function(a,b){var c,d;c=this;if(0>b(a,c.key))c.left.e()||c.left.ba()||c.left.left.ba()||(c=hd(c)),c=c.X(null,null,null,c.left.remove(a,b),null);else{c.left.ba()&&(c=jd(c));c.right.e()||c.right.ba()||c.right.left.ba()||(c=kd(c),c.left.left.ba()&&(c=jd(c),c=kd(c)));if(0===b(a,c.key)){if(c.right.e())return $c;d=ed(c.right);c=c.X(d.key,d.value,null,null,gd(c.right))}c=c.X(null,null,null,null,c.right.remove(a,b))}return fd(c)};h.ba=function(){return this.color};
function fd(a){a.right.ba()&&!a.left.ba()&&(a=ld(a));a.left.ba()&&a.left.left.ba()&&(a=jd(a));a.left.ba()&&a.right.ba()&&(a=kd(a));return a}function hd(a){a=kd(a);a.right.left.ba()&&(a=a.X(null,null,null,null,jd(a.right)),a=ld(a),a=kd(a));return a}function ld(a){return a.right.X(null,null,a.color,a.X(null,null,!0,null,a.right.left),null)}function jd(a){return a.left.X(null,null,a.color,null,a.X(null,null,!0,a.left.right,null))}
function kd(a){return a.X(null,null,!a.color,a.left.X(null,null,!a.left.color,null,null),a.right.X(null,null,!a.right.color,null,null))}function md(){}h=md.prototype;h.X=function(){return this};h.La=function(a,b){return new dd(a,b,null)};h.remove=function(){return this};h.count=function(){return 0};h.e=function(){return!0};h.fa=function(){return!1};h.Ic=function(){return null};h.Xb=function(){return null};h.ba=function(){return!1};var $c=new md;function nd(a,b){this.D=a;y(m(this.D)&&null!==this.D,"LeafNode shouldn't be created with null/undefined value.");this.ha=b||M;od(this.ha);this.sb=null}h=nd.prototype;h.M=function(){return!0};h.L=function(){return this.ha};h.Z=function(a){return new nd(this.D,a)};h.K=function(a){return".priority"===a?this.ha:M};h.ra=function(a){return a.e()?this:".priority"===I(a)?this.ha:M};h.Da=function(){return!1};h.ff=function(){return null};
h.P=function(a,b){return".priority"===a?this.Z(b):b.e()&&".priority"!==a?this:M.P(a,b).Z(this.ha)};h.C=function(a,b){var c=I(a);if(null===c)return b;if(b.e()&&".priority"!==c)return this;y(".priority"!==c||1===Qc(a),".priority must be the last token in a path");return this.P(c,M.C(T(a),b))};h.e=function(){return!1};h.ub=function(){return 0};h.I=function(a){return a&&!this.L().e()?{".value":this.za(),".priority":this.L().I()}:this.za()};
h.hash=function(){if(null===this.sb){var a="";this.ha.e()||(a+="priority:"+pd(this.ha.I())+":");var b=typeof this.D,a=a+(b+":"),a="number"===b?a+Ab(this.D):a+this.D;this.sb=ib(a)}return this.sb};h.za=function(){return this.D};h.he=function(a){if(a===M)return 1;if(a instanceof W)return-1;y(a.M(),"Unknown node type");var b=typeof a.D,c=typeof this.D,d=Ga(qd,b),e=Ga(qd,c);y(0<=d,"Unknown leaf type: "+b);y(0<=e,"Unknown leaf type: "+c);return d===e?"object"===c?0:this.D<a.D?-1:this.D===a.D?0:1:e-d};
var qd=["object","boolean","number","string"];nd.prototype.Fb=function(){return this};nd.prototype.Bc=function(){return!0};nd.prototype.ea=function(a){return a===this?!0:a.M()?this.D===a.D&&this.ha.ea(a.ha):!1};nd.prototype.toString=function(){return r(this.I(!0))};function rd(a,b){this.pd=a;this.Vb=b}rd.prototype.get=function(a){var b=t(this.pd,a);if(!b)throw Error("No index defined for "+a);return b===lc?null:b};function sd(a,b,c){var d=td(a.pd,function(d,f){var g=t(a.Vb,f);y(g,"Missing index implementation for "+f);if(d===lc){if(g.ue(b.Y)){for(var k=[],l=c.Ob(zc),n=P(l);n;)n.name!=b.name&&k.push(n),n=P(l);k.push(b);return ud(k,mc(g))}return lc}g=c.get(b.name);k=d;g&&(k=k.remove(new N(b.name,g)));return k.La(b,b.Y)});return new rd(d,a.Vb)}
function vd(a,b,c){var d=td(a.pd,function(a){if(a===lc)return a;var d=c.get(b.name);return d?a.remove(new N(b.name,d)):a});return new rd(d,a.Vb)}var wd=new rd({".priority":lc},{".priority":L});function W(a,b,c){this.m=a;(this.ha=b)&&od(this.ha);this.ob=c;this.sb=null}h=W.prototype;h.M=function(){return!1};h.L=function(){return this.ha||M};h.Z=function(a){return new W(this.m,a,this.ob)};h.K=function(a){if(".priority"===a)return this.L();a=this.m.get(a);return null===a?M:a};h.ra=function(a){var b=I(a);return null===b?this:this.K(b).ra(T(a))};h.Da=function(a){return null!==this.m.get(a)};
h.P=function(a,b){y(b,"We should always be passing snapshot nodes");if(".priority"===a)return this.Z(b);var c=new N(a,b),d;b.e()?(d=this.m.remove(a),c=vd(this.ob,c,this.m)):(d=this.m.La(a,b),c=sd(this.ob,c,this.m));return new W(d,this.ha,c)};h.C=function(a,b){var c=I(a);if(null===c)return b;y(".priority"!==I(a)||1===Qc(a),".priority must be the last token in a path");var d=this.K(c).C(T(a),b);return this.P(c,d)};h.e=function(){return this.m.e()};h.ub=function(){return this.m.count()};var xd=/^(0|[1-9]\d*)$/;
h=W.prototype;h.I=function(a){if(this.e())return null;var b={},c=0,d=0,e=!0;this.U(L,function(f,g){b[f]=g.I(a);c++;e&&xd.test(f)?d=Math.max(d,Number(f)):e=!1});if(!a&&e&&d<2*c){var f=[],g;for(g in b)f[g]=b[g];return f}a&&!this.L().e()&&(b[".priority"]=this.L().I());return b};h.hash=function(){if(null===this.sb){var a="";this.L().e()||(a+="priority:"+pd(this.L().I())+":");this.U(L,function(b,c){var d=c.hash();""!==d&&(a+=":"+b+":"+d)});this.sb=""===a?"":ib(a)}return this.sb};
h.ff=function(a,b,c){return(c=yd(this,c))?(a=ad(c,new N(a,b)))?a.name:null:ad(this.m,a)};function Cc(a,b){var c;c=(c=yd(a,b))?(c=c.Ic())&&c.name:a.m.Ic();return c?new N(c,a.m.get(c)):null}function Dc(a,b){var c;c=(c=yd(a,b))?(c=c.Xb())&&c.name:a.m.Xb();return c?new N(c,a.m.get(c)):null}h.U=function(a,b){var c=yd(this,a);return c?c.fa(function(a){return b(a.name,a.Y)}):this.m.fa(b)};h.Ob=function(a){return this.Pb(a.Ce(),a)};
h.Pb=function(a,b){var c=yd(this,b);if(c)return c.Pb(a,function(a){return a});for(var c=this.m.Pb(a.name,zc),d=cd(c);null!=d&&0>b.compare(d,a);)P(c),d=cd(c);return c};h.gf=function(a){return this.Rb(a.Be(),a)};h.Rb=function(a,b){var c=yd(this,b);if(c)return c.Rb(a,function(a){return a});for(var c=this.m.Rb(a.name,zc),d=cd(c);null!=d&&0<b.compare(d,a);)P(c),d=cd(c);return c};h.he=function(a){return this.e()?a.e()?0:-1:a.M()||a.e()?1:a===pc?-1:0};
h.Fb=function(a){if(a===rc||zd(this.ob.Vb,a.toString()))return this;var b=this.ob,c=this.m;y(a!==rc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var d=[],e=!1,c=c.Ob(zc),f=P(c);f;)e=e||a.ue(f.Y),d.push(f),f=P(c);d=e?ud(d,mc(a)):lc;e=a.toString();c=Ad(b.Vb);c[e]=a;a=Ad(b.pd);a[e]=d;return new W(this.m,this.ha,new rd(a,c))};h.Bc=function(a){return a===rc||zd(this.ob.Vb,a.toString())};
h.ea=function(a){if(a===this)return!0;if(a.M())return!1;if(this.L().ea(a.L())&&this.m.count()===a.m.count()){var b=this.Ob(L);a=a.Ob(L);for(var c=P(b),d=P(a);c&&d;){if(c.name!==d.name||!c.Y.ea(d.Y))return!1;c=P(b);d=P(a)}return null===c&&null===d}return!1};function yd(a,b){return b===rc?null:a.ob.get(b.toString())}h.toString=function(){return r(this.I(!0))};function O(a,b){if(null===a)return M;var c=null;"object"===typeof a&&".priority"in a?c=a[".priority"]:"undefined"!==typeof b&&(c=b);y(null===c||"string"===typeof c||"number"===typeof c||"object"===typeof c&&".sv"in c,"Invalid priority type found: "+typeof c);"object"===typeof a&&".value"in a&&null!==a[".value"]&&(a=a[".value"]);if("object"!==typeof a||".sv"in a)return new nd(a,O(c));if(a instanceof Array){var d=M,e=a;A(e,function(a,b){if(s(e,b)&&"."!==b.substring(0,1)){var c=O(a);if(c.M()||!c.e())d=
d.P(b,c)}});return d.Z(O(c))}var f=[],g=!1,k=a;ua(k,function(a){if("string"!==typeof a||"."!==a.substring(0,1)){var b=O(k[a]);b.e()||(g=g||!b.L().e(),f.push(new N(a,b)))}});var l=ud(f,ic,function(a){return a.name},jc);if(g){var n=ud(f,mc(L));return new W(l,O(c),new rd({".priority":n},{".priority":L}))}return new W(l,O(c),wd)}var Bd=Math.log(2);function Cd(a){this.count=parseInt(Math.log(a+1)/Bd,10);this.$e=this.count-1;this.Nf=a+1&parseInt(Array(this.count+1).join("1"),2)}
function Dd(a){var b=!(a.Nf&1<<a.$e);a.$e--;return b}
function ud(a,b,c,d){function e(b,d){var f=d-b;if(0==f)return null;if(1==f){var n=a[b],u=c?c(n):n;return new dd(u,n.Y,!1,null,null)}var n=parseInt(f/2,10)+b,f=e(b,n),x=e(n+1,d),n=a[n],u=c?c(n):n;return new dd(u,n.Y,!1,f,x)}a.sort(b);var f=function(b){function d(b,g){var k=u-b,x=u;u-=b;var x=e(k+1,x),k=a[k],E=c?c(k):k,x=new dd(E,k.Y,g,null,x);f?f.left=x:n=x;f=x}for(var f=null,n=null,u=a.length,x=0;x<b.count;++x){var E=Dd(b),id=Math.pow(2,b.count-(x+1));E?d(id,!1):(d(id,!1),d(id,!0))}return n}(new Cd(a.length));
return null!==f?new Zc(d||b,f):new Zc(d||b)}function pd(a){return"number"===typeof a?"number:"+Ab(a):"string:"+a}function od(a){if(a.M()){var b=a.I();y("string"===typeof b||"number"===typeof b||"object"===typeof b&&s(b,".sv"),"Priority must be a string or number.")}else y(a===pc||a.e(),"priority of unexpected type.");y(a===pc||a.L().e(),"Priority nodes can't have a priority of their own.")}var M=new W(new Zc(jc),null,wd);function Ed(){W.call(this,new Zc(jc),M,wd)}ma(Ed,W);h=Ed.prototype;
h.he=function(a){return a===this?0:1};h.ea=function(a){return a===this};h.L=function(){throw fb("Why is this called?");};h.K=function(){return M};h.e=function(){return!1};var pc=new Ed,nc=new N("[MIN_NAME]",M);function D(a,b,c){this.A=a;this.V=b;this.g=c}D.prototype.I=function(){F("Firebase.DataSnapshot.val",0,0,arguments.length);return this.A.I()};D.prototype.val=D.prototype.I;D.prototype.bf=function(){F("Firebase.DataSnapshot.exportVal",0,0,arguments.length);return this.A.I(!0)};D.prototype.exportVal=D.prototype.bf;D.prototype.Wf=function(){F("Firebase.DataSnapshot.exists",0,0,arguments.length);return!this.A.e()};D.prototype.exists=D.prototype.Wf;
D.prototype.o=function(a){F("Firebase.DataSnapshot.child",0,1,arguments.length);ga(a)&&(a=String(a));Yb("Firebase.DataSnapshot.child",a);var b=new S(a),c=this.V.o(b);return new D(this.A.ra(b),c,L)};D.prototype.child=D.prototype.o;D.prototype.Da=function(a){F("Firebase.DataSnapshot.hasChild",1,1,arguments.length);Yb("Firebase.DataSnapshot.hasChild",a);var b=new S(a);return!this.A.ra(b).e()};D.prototype.hasChild=D.prototype.Da;
D.prototype.L=function(){F("Firebase.DataSnapshot.getPriority",0,0,arguments.length);return this.A.L().I()};D.prototype.getPriority=D.prototype.L;D.prototype.forEach=function(a){F("Firebase.DataSnapshot.forEach",1,1,arguments.length);H("Firebase.DataSnapshot.forEach",1,a,!1);if(this.A.M())return!1;var b=this;return!!this.A.U(this.g,function(c,d){return a(new D(d,b.V.o(c),L))})};D.prototype.forEach=D.prototype.forEach;
D.prototype.ld=function(){F("Firebase.DataSnapshot.hasChildren",0,0,arguments.length);return this.A.M()?!1:!this.A.e()};D.prototype.hasChildren=D.prototype.ld;D.prototype.name=function(){z("Firebase.DataSnapshot.name() being deprecated. Please use Firebase.DataSnapshot.key() instead.");F("Firebase.DataSnapshot.name",0,0,arguments.length);return this.key()};D.prototype.name=D.prototype.name;D.prototype.key=function(){F("Firebase.DataSnapshot.key",0,0,arguments.length);return this.V.key()};
D.prototype.key=D.prototype.key;D.prototype.ub=function(){F("Firebase.DataSnapshot.numChildren",0,0,arguments.length);return this.A.ub()};D.prototype.numChildren=D.prototype.ub;D.prototype.cc=function(){F("Firebase.DataSnapshot.ref",0,0,arguments.length);return this.V};D.prototype.ref=D.prototype.cc;function Fd(a){y(ea(a)&&0<a.length,"Requires a non-empty array");this.Ff=a;this.Gc={}}Fd.prototype.Vd=function(a,b){for(var c=this.Gc[a]||[],d=0;d<c.length;d++)c[d].qc.apply(c[d].Ka,Array.prototype.slice.call(arguments,1))};Fd.prototype.vb=function(a,b,c){Gd(this,a);this.Gc[a]=this.Gc[a]||[];this.Gc[a].push({qc:b,Ka:c});(a=this.qe(a))&&b.apply(c,a)};Fd.prototype.Zb=function(a,b,c){Gd(this,a);a=this.Gc[a]||[];for(var d=0;d<a.length;d++)if(a[d].qc===b&&(!c||c===a[d].Ka)){a.splice(d,1);break}};
function Gd(a,b){y(Ma(a.Ff,function(a){return a===b}),"Unknown event: "+b)};function Hd(){Fd.call(this,["visible"]);var a,b;"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(b="visibilitychange",a="hidden"):"undefined"!==typeof document.mozHidden?(b="mozvisibilitychange",a="mozHidden"):"undefined"!==typeof document.msHidden?(b="msvisibilitychange",a="msHidden"):"undefined"!==typeof document.webkitHidden&&(b="webkitvisibilitychange",a="webkitHidden"));this.mc=!0;if(b){var c=this;document.addEventListener(b,
function(){var b=!document[a];b!==c.mc&&(c.mc=b,c.Vd("visible",b))},!1)}}ma(Hd,Fd);ca(Hd);Hd.prototype.qe=function(a){y("visible"===a,"Unknown event type: "+a);return[this.mc]};function Id(){Fd.call(this,["online"]);this.Lc=!0;if("undefined"!==typeof window&&"undefined"!==typeof window.addEventListener){var a=this;window.addEventListener("online",function(){a.Lc||a.Vd("online",!0);a.Lc=!0},!1);window.addEventListener("offline",function(){a.Lc&&a.Vd("online",!1);a.Lc=!1},!1)}}ma(Id,Fd);ca(Id);Id.prototype.qe=function(a){y("online"===a,"Unknown event type: "+a);return[this.Lc]};function A(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function td(a,b){var c={},d;for(d in a)c[d]=b.call(void 0,a[d],d,a);return c}function Lb(a,b){for(var c in a)if(!b.call(void 0,a[c],c,a))return!1;return!0}function Jb(a){var b=0,c;for(c in a)b++;return b}function Kb(a){for(var b in a)return b}function Jd(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Kd(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function zd(a,b){for(var c in a)if(a[c]==b)return!0;return!1}
function Ld(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return d}function Md(a,b){var c=Ld(a,b,void 0);return c&&a[c]}function Nd(a){for(var b in a)return!1;return!0}function Od(a,b){return b in a?a[b]:void 0}function Ad(a){var b={},c;for(c in a)b[c]=a[c];return b}var Pd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Qd(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Pd.length;f++)c=Pd[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Rd(){this.tc={}}function Sd(a,b,c){m(c)||(c=1);s(a.tc,b)||(a.tc[b]=0);a.tc[b]+=c}Rd.prototype.get=function(){return Ad(this.tc)};function Td(a){this.Pf=a;this.rd=null}Td.prototype.get=function(){var a=this.Pf.get(),b=Ad(a);if(this.rd)for(var c in this.rd)b[c]-=this.rd[c];this.rd=a;return b};function Ud(a,b){this.zf={};this.Pd=new Td(a);this.S=b;var c=1E4+2E4*Math.random();setTimeout(q(this.tf,this),Math.floor(c))}Ud.prototype.tf=function(){var a=this.Pd.get(),b={},c=!1,d;for(d in a)0<a[d]&&s(this.zf,d)&&(b[d]=a[d],c=!0);c&&(a=this.S,a.ja&&(b={c:b},a.f("reportStats",b),a.Ca("s",b)));setTimeout(q(this.tf,this),Math.floor(6E5*Math.random()))};var Vd={},Wd={};function Xd(a){a=a.toString();Vd[a]||(Vd[a]=new Rd);return Vd[a]}function Yd(a,b){var c=a.toString();Wd[c]||(Wd[c]=b());return Wd[c]};var Zd=null;"undefined"!==typeof MozWebSocket?Zd=MozWebSocket:"undefined"!==typeof WebSocket&&(Zd=WebSocket);function $d(a,b,c){this.ie=a;this.f=ob(this.ie);this.frames=this.Cc=null;this.ib=this.jb=this.Te=0;this.Ra=Xd(b);this.$a=(b.Ab?"wss://":"ws://")+b.Ma+"/.ws?v=5";"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(this.$a+="&r=f");b.host!==b.Ma&&(this.$a=this.$a+"&ns="+b.tb);c&&(this.$a=this.$a+"&s="+c)}var ae;
$d.prototype.open=function(a,b){this.fb=b;this.hg=a;this.f("Websocket connecting to "+this.$a);this.xc=!1;za.set("previous_websocket_failure",!0);try{this.ta=new Zd(this.$a)}catch(c){this.f("Error instantiating WebSocket.");var d=c.message||c.data;d&&this.f(d);this.eb();return}var e=this;this.ta.onopen=function(){e.f("Websocket connected.");e.xc=!0};this.ta.onclose=function(){e.f("Websocket connection was disconnected.");e.ta=null;e.eb()};this.ta.onmessage=function(a){if(null!==e.ta)if(a=a.data,e.ib+=
a.length,Sd(e.Ra,"bytes_received",a.length),be(e),null!==e.frames)ce(e,a);else{a:{y(null===e.frames,"We already have a frame buffer");if(6>=a.length){var b=Number(a);if(!isNaN(b)){e.Te=b;e.frames=[];a=null;break a}}e.Te=1;e.frames=[]}null!==a&&ce(e,a)}};this.ta.onerror=function(a){e.f("WebSocket error.  Closing connection.");(a=a.message||a.data)&&e.f(a);e.eb()}};$d.prototype.start=function(){};
$d.isAvailable=function(){var a=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var b=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);b&&1<b.length&&4.4>parseFloat(b[1])&&(a=!0)}return!a&&null!==Zd&&!ae};$d.responsesRequiredToBeHealthy=2;$d.healthyTimeout=3E4;h=$d.prototype;h.sd=function(){za.remove("previous_websocket_failure")};function ce(a,b){a.frames.push(b);if(a.frames.length==a.Te){var c=a.frames.join("");a.frames=null;c=ta(c);a.hg(c)}}
h.send=function(a){be(this);a=r(a);this.jb+=a.length;Sd(this.Ra,"bytes_sent",a.length);a=yb(a,16384);1<a.length&&this.ta.send(String(a.length));for(var b=0;b<a.length;b++)this.ta.send(a[b])};h.Uc=function(){this.qb=!0;this.Cc&&(clearInterval(this.Cc),this.Cc=null);this.ta&&(this.ta.close(),this.ta=null)};h.eb=function(){this.qb||(this.f("WebSocket is closing itself"),this.Uc(),this.fb&&(this.fb(this.xc),this.fb=null))};h.close=function(){this.qb||(this.f("WebSocket is being closed"),this.Uc())};
function be(a){clearInterval(a.Cc);a.Cc=setInterval(function(){a.ta&&a.ta.send("0");be(a)},Math.floor(45E3))};function de(a){this.$b=a;this.Cd=[];this.Jb=0;this.ge=-1;this.wb=null}function ee(a,b,c){a.ge=b;a.wb=c;a.ge<a.Jb&&(a.wb(),a.wb=null)}function fe(a,b,c){for(a.Cd[b]=c;a.Cd[a.Jb];){var d=a.Cd[a.Jb];delete a.Cd[a.Jb];for(var e=0;e<d.length;++e)if(d[e]){var f=a;Cb(function(){f.$b(d[e])})}if(a.Jb===a.ge){a.wb&&(clearTimeout(a.wb),a.wb(),a.wb=null);break}a.Jb++}};function ge(){this.set={}}h=ge.prototype;h.add=function(a,b){this.set[a]=null!==b?b:!0};h.contains=function(a){return s(this.set,a)};h.get=function(a){return this.contains(a)?this.set[a]:void 0};h.remove=function(a){delete this.set[a]};h.clear=function(){this.set={}};h.e=function(){return Nd(this.set)};h.count=function(){return Jb(this.set)};function he(a,b){A(a.set,function(a,d){b(d,a)})};function ie(a,b,c){this.ie=a;this.f=ob(a);this.ib=this.jb=0;this.Ra=Xd(b);this.Md=c;this.xc=!1;this.Zc=function(a){b.host!==b.Ma&&(a.ns=b.tb);var c=[],f;for(f in a)a.hasOwnProperty(f)&&c.push(f+"="+a[f]);return(b.Ab?"https://":"http://")+b.Ma+"/.lp?"+c.join("&")}}var je,ke;
ie.prototype.open=function(a,b){this.Ze=0;this.ga=b;this.mf=new de(a);this.qb=!1;var c=this;this.lb=setTimeout(function(){c.f("Timed out trying to connect.");c.eb();c.lb=null},Math.floor(3E4));tb(function(){if(!c.qb){c.Pa=new le(function(a,b,d,k,l){me(c,arguments);if(c.Pa)if(c.lb&&(clearTimeout(c.lb),c.lb=null),c.xc=!0,"start"==a)c.id=b,c.rf=d;else if("close"===a)b?(c.Pa.Kd=!1,ee(c.mf,b,function(){c.eb()})):c.eb();else throw Error("Unrecognized command received: "+a);},function(a,b){me(c,arguments);
fe(c.mf,a,b)},function(){c.eb()},c.Zc);var a={start:"t"};a.ser=Math.floor(1E8*Math.random());c.Pa.Wd&&(a.cb=c.Pa.Wd);a.v="5";c.Md&&(a.s=c.Md);"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(a.r="f");a=c.Zc(a);c.f("Connecting via long-poll to "+a);ne(c.Pa,a,function(){})}})};
ie.prototype.start=function(){var a=this.Pa,b=this.rf;a.cg=this.id;a.dg=b;for(a.ae=!0;oe(a););a=this.id;b=this.rf;this.Yb=document.createElement("iframe");var c={dframe:"t"};c.id=a;c.pw=b;this.Yb.src=this.Zc(c);this.Yb.style.display="none";document.body.appendChild(this.Yb)};ie.isAvailable=function(){return!ke&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.Eg)&&(je||!0)};h=ie.prototype;
h.sd=function(){};h.Uc=function(){this.qb=!0;this.Pa&&(this.Pa.close(),this.Pa=null);this.Yb&&(document.body.removeChild(this.Yb),this.Yb=null);this.lb&&(clearTimeout(this.lb),this.lb=null)};h.eb=function(){this.qb||(this.f("Longpoll is closing itself"),this.Uc(),this.ga&&(this.ga(this.xc),this.ga=null))};h.close=function(){this.qb||(this.f("Longpoll is being closed."),this.Uc())};
h.send=function(a){a=r(a);this.jb+=a.length;Sd(this.Ra,"bytes_sent",a.length);a=jb(a);a=cb(a,!0);a=yb(a,1840);for(var b=0;b<a.length;b++){var c=this.Pa;c.Qc.push({tg:this.Ze,Bg:a.length,af:a[b]});c.ae&&oe(c);this.Ze++}};function me(a,b){var c=r(b).length;a.ib+=c;Sd(a.Ra,"bytes_received",c)}
function le(a,b,c,d){this.Zc=d;this.fb=c;this.Ie=new ge;this.Qc=[];this.ke=Math.floor(1E8*Math.random());this.Kd=!0;this.Wd=eb();window["pLPCommand"+this.Wd]=a;window["pRTLPCB"+this.Wd]=b;a=document.createElement("iframe");a.style.display="none";if(document.body){document.body.appendChild(a);try{a.contentWindow.document||hb("No IE domain setting required")}catch(e){a.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";
a.contentDocument?a.ab=a.contentDocument:a.contentWindow?a.ab=a.contentWindow.document:a.document&&(a.ab=a.document);this.Ba=a;a="";this.Ba.src&&"javascript:"===this.Ba.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";\x3c/script>');a="<html><body>"+a+"</body></html>";try{this.Ba.ab.open(),this.Ba.ab.write(a),this.Ba.ab.close()}catch(f){hb("frame writing exception"),f.stack&&hb(f.stack),hb(f)}}
le.prototype.close=function(){this.ae=!1;if(this.Ba){this.Ba.ab.body.innerHTML="";var a=this;setTimeout(function(){null!==a.Ba&&(document.body.removeChild(a.Ba),a.Ba=null)},Math.floor(0))}var b=this.fb;b&&(this.fb=null,b())};
function oe(a){if(a.ae&&a.Kd&&a.Ie.count()<(0<a.Qc.length?2:1)){a.ke++;var b={};b.id=a.cg;b.pw=a.dg;b.ser=a.ke;for(var b=a.Zc(b),c="",d=0;0<a.Qc.length;)if(1870>=a.Qc[0].af.length+30+c.length){var e=a.Qc.shift(),c=c+"&seg"+d+"="+e.tg+"&ts"+d+"="+e.Bg+"&d"+d+"="+e.af;d++}else break;pe(a,b+c,a.ke);return!0}return!1}function pe(a,b,c){function d(){a.Ie.remove(c);oe(a)}a.Ie.add(c);var e=setTimeout(d,Math.floor(25E3));ne(a,b,function(){clearTimeout(e);d()})}
function ne(a,b,c){setTimeout(function(){try{if(a.Kd){var d=a.Ba.ab.createElement("script");d.type="text/javascript";d.async=!0;d.src=b;d.onload=d.onreadystatechange=function(){var a=d.readyState;a&&"loaded"!==a&&"complete"!==a||(d.onload=d.onreadystatechange=null,d.parentNode&&d.parentNode.removeChild(d),c())};d.onerror=function(){hb("Long-poll script failed to load: "+b);a.Kd=!1;a.close()};a.Ba.ab.body.appendChild(d)}}catch(e){}},Math.floor(1))};function qe(a){re(this,a)}var se=[ie,$d];function re(a,b){var c=$d&&$d.isAvailable(),d=c&&!(za.lf||!0===za.get("previous_websocket_failure"));b.Dg&&(c||z("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),d=!0);if(d)a.Xc=[$d];else{var e=a.Xc=[];zb(se,function(a,b){b&&b.isAvailable()&&e.push(b)})}}function te(a){if(0<a.Xc.length)return a.Xc[0];throw Error("No transports available");};function ue(a,b,c,d,e,f){this.id=a;this.f=ob("c:"+this.id+":");this.$b=c;this.Kc=d;this.ga=e;this.Ge=f;this.O=b;this.Bd=[];this.Xe=0;this.Af=new qe(b);this.Qa=0;this.f("Connection created");ve(this)}
function ve(a){var b=te(a.Af);a.J=new b("c:"+a.id+":"+a.Xe++,a.O);a.Ke=b.responsesRequiredToBeHealthy||0;var c=we(a,a.J),d=xe(a,a.J);a.Yc=a.J;a.Tc=a.J;a.B=null;a.rb=!1;setTimeout(function(){a.J&&a.J.open(c,d)},Math.floor(0));b=b.healthyTimeout||0;0<b&&(a.nd=setTimeout(function(){a.nd=null;a.rb||(a.J&&102400<a.J.ib?(a.f("Connection exceeded healthy timeout but has received "+a.J.ib+" bytes.  Marking connection healthy."),a.rb=!0,a.J.sd()):a.J&&10240<a.J.jb?a.f("Connection exceeded healthy timeout but has sent "+
a.J.jb+" bytes.  Leaving connection alive."):(a.f("Closing unhealthy connection after timeout."),a.close()))},Math.floor(b)))}function xe(a,b){return function(c){b===a.J?(a.J=null,c||0!==a.Qa?1===a.Qa&&a.f("Realtime connection lost."):(a.f("Realtime connection failed."),"s-"===a.O.Ma.substr(0,2)&&(za.remove("host:"+a.O.host),a.O.Ma=a.O.host)),a.close()):b===a.B?(a.f("Secondary connection lost."),c=a.B,a.B=null,a.Yc!==c&&a.Tc!==c||a.close()):a.f("closing an old connection")}}
function we(a,b){return function(c){if(2!=a.Qa)if(b===a.Tc){var d=wb("t",c);c=wb("d",c);if("c"==d){if(d=wb("t",c),"d"in c)if(c=c.d,"h"===d){var d=c.ts,e=c.v,f=c.h;a.Md=c.s;Ba(a.O,f);0==a.Qa&&(a.J.start(),ye(a,a.J,d),"5"!==e&&z("Protocol version mismatch detected"),c=a.Af,(c=1<c.Xc.length?c.Xc[1]:null)&&ze(a,c))}else if("n"===d){a.f("recvd end transmission on primary");a.Tc=a.B;for(c=0;c<a.Bd.length;++c)a.xd(a.Bd[c]);a.Bd=[];Ae(a)}else"s"===d?(a.f("Connection shutdown command received. Shutting down..."),
a.Ge&&(a.Ge(c),a.Ge=null),a.ga=null,a.close()):"r"===d?(a.f("Reset packet received.  New host: "+c),Ba(a.O,c),1===a.Qa?a.close():(Be(a),ve(a))):"e"===d?pb("Server Error: "+c):"o"===d?(a.f("got pong on primary."),Ce(a),De(a)):pb("Unknown control packet command: "+d)}else"d"==d&&a.xd(c)}else if(b===a.B)if(d=wb("t",c),c=wb("d",c),"c"==d)"t"in c&&(c=c.t,"a"===c?Ee(a):"r"===c?(a.f("Got a reset on secondary, closing it"),a.B.close(),a.Yc!==a.B&&a.Tc!==a.B||a.close()):"o"===c&&(a.f("got pong on secondary."),
a.yf--,Ee(a)));else if("d"==d)a.Bd.push(c);else throw Error("Unknown protocol layer: "+d);else a.f("message on old connection")}}ue.prototype.Ca=function(a){Fe(this,{t:"d",d:a})};function Ae(a){a.Yc===a.B&&a.Tc===a.B&&(a.f("cleaning up and promoting a connection: "+a.B.ie),a.J=a.B,a.B=null)}
function Ee(a){0>=a.yf?(a.f("Secondary connection is healthy."),a.rb=!0,a.B.sd(),a.B.start(),a.f("sending client ack on secondary"),a.B.send({t:"c",d:{t:"a",d:{}}}),a.f("Ending transmission on primary"),a.J.send({t:"c",d:{t:"n",d:{}}}),a.Yc=a.B,Ae(a)):(a.f("sending ping on secondary."),a.B.send({t:"c",d:{t:"p",d:{}}}))}ue.prototype.xd=function(a){Ce(this);this.$b(a)};function Ce(a){a.rb||(a.Ke--,0>=a.Ke&&(a.f("Primary connection is healthy."),a.rb=!0,a.J.sd()))}
function ze(a,b){a.B=new b("c:"+a.id+":"+a.Xe++,a.O,a.Md);a.yf=b.responsesRequiredToBeHealthy||0;a.B.open(we(a,a.B),xe(a,a.B));setTimeout(function(){a.B&&(a.f("Timed out trying to upgrade."),a.B.close())},Math.floor(6E4))}function ye(a,b,c){a.f("Realtime connection established.");a.J=b;a.Qa=1;a.Kc&&(a.Kc(c),a.Kc=null);0===a.Ke?(a.f("Primary connection is healthy."),a.rb=!0):setTimeout(function(){De(a)},Math.floor(5E3))}
function De(a){a.rb||1!==a.Qa||(a.f("sending ping on primary."),Fe(a,{t:"c",d:{t:"p",d:{}}}))}function Fe(a,b){if(1!==a.Qa)throw"Connection is not connected";a.Yc.send(b)}ue.prototype.close=function(){2!==this.Qa&&(this.f("Closing realtime connection."),this.Qa=2,Be(this),this.ga&&(this.ga(),this.ga=null))};function Be(a){a.f("Shutting down all connections");a.J&&(a.J.close(),a.J=null);a.B&&(a.B.close(),a.B=null);a.nd&&(clearTimeout(a.nd),a.nd=null)};function Ge(a){var b={},c={},d={},e="";try{var f=a.split("."),b=ta(gb(f[0])||""),c=ta(gb(f[1])||""),e=f[2],d=c.d||{};delete c.d}catch(g){}return{Gg:b,fe:c,data:d,xg:e}}function He(a){a=Ge(a).fe;return"object"===typeof a&&a.hasOwnProperty("iat")?t(a,"iat"):null}function Ie(a){a=Ge(a);var b=a.fe;return!!a.xg&&!!b&&"object"===typeof b&&b.hasOwnProperty("iat")};function Je(a,b,c,d){this.id=Ke++;this.f=ob("p:"+this.id+":");this.Cb=!0;this.Aa={};this.la=[];this.Nc=0;this.Jc=[];this.ja=!1;this.Wa=1E3;this.td=3E5;this.yd=b;this.wd=c;this.He=d;this.O=a;this.Oe=null;this.Sc={};this.sg=0;this.Dc=this.we=null;Le(this,0);Hd.Nb().vb("visible",this.kg,this);-1===a.host.indexOf("fblocal")&&Id.Nb().vb("online",this.ig,this)}var Ke=0,Me=0;h=Je.prototype;
h.Ca=function(a,b,c){var d=++this.sg;a={r:d,a:a,b:b};this.f(r(a));y(this.ja,"sendRequest call when we're not connected not allowed.");this.Oa.Ca(a);c&&(this.Sc[d]=c)};function Ne(a,b,c,d,e){var f=b.Fa(),g=b.path.toString();a.f("Listen called for "+g+" "+f);a.Aa[g]=a.Aa[g]||{};y(!a.Aa[g][f],"listen() called twice for same path/queryId.");b={H:e,md:c,pg:Ic(b.n),tag:d};a.Aa[g][f]=b;a.ja&&Oe(a,g,f,b)}
function Oe(a,b,c,d){a.f("Listen on "+b+" for "+c);var e={p:b};d.tag&&(e.q=d.pg,e.t=d.tag);e.h=d.md();a.Ca("q",e,function(e){if((a.Aa[b]&&a.Aa[b][c])===d){a.f("listen response",e);var g=e.s;"ok"!==g&&Pe(a,b,c);e=e.d;d.H&&d.H(g,e)}})}h.Q=function(a,b,c){this.Ib={Rf:a,cf:!1,qc:b,ad:c};this.f("Authenticating using credential: "+a);Qe(this);(b=40==a.length)||(a=Ge(a).fe,b="object"===typeof a&&!0===t(a,"admin"));b&&(this.f("Admin auth credential detected.  Reducing max reconnect time."),this.td=3E4)};
h.Ue=function(a){delete this.Ib;this.ja&&this.Ca("unauth",{},function(b){a(b.s,b.d)})};function Qe(a){var b=a.Ib;a.ja&&b&&a.Ca("auth",{cred:b.Rf},function(c){var d=c.s;c=c.d||"error";"ok"!==d&&a.Ib===b&&delete a.Ib;b.cf?"ok"!==d&&b.ad&&b.ad(d,c):(b.cf=!0,b.qc&&b.qc(d,c))})}function Re(a,b,c,d){a.ja?Se(a,"o",b,c,d):a.Jc.push({Pc:b,action:"o",data:c,H:d})}function Te(a,b,c,d){a.ja?Se(a,"om",b,c,d):a.Jc.push({Pc:b,action:"om",data:c,H:d})}
h.Fe=function(a,b){this.ja?Se(this,"oc",a,null,b):this.Jc.push({Pc:a,action:"oc",data:null,H:b})};function Se(a,b,c,d,e){c={p:c,d:d};a.f("onDisconnect "+b,c);a.Ca(b,c,function(a){e&&setTimeout(function(){e(a.s,a.d)},Math.floor(0))})}h.put=function(a,b,c,d){Ue(this,"p",a,b,c,d)};function Ve(a,b,c,d){Ue(a,"m",b,c,d,void 0)}function Ue(a,b,c,d,e,f){d={p:c,d:d};m(f)&&(d.h=f);a.la.push({action:b,uf:d,H:e});a.Nc++;b=a.la.length-1;a.ja?We(a,b):a.f("Buffering put: "+c)}
function We(a,b){var c=a.la[b].action,d=a.la[b].uf,e=a.la[b].H;a.la[b].qg=a.ja;a.Ca(c,d,function(d){a.f(c+" response",d);delete a.la[b];a.Nc--;0===a.Nc&&(a.la=[]);e&&e(d.s,d.d)})}
h.xd=function(a){if("r"in a){this.f("from server: "+r(a));var b=a.r,c=this.Sc[b];c&&(delete this.Sc[b],c(a.b))}else{if("error"in a)throw"A server-side error has occurred: "+a.error;"a"in a&&(b=a.a,c=a.b,this.f("handleServerMessage",b,c),"d"===b?this.yd(c.p,c.d,!1,c.t):"m"===b?this.yd(c.p,c.d,!0,c.t):"c"===b?Xe(this,c.p,c.q):"ac"===b?(a=c.s,b=c.d,c=this.Ib,delete this.Ib,c&&c.ad&&c.ad(a,b)):"sd"===b?this.Oe?this.Oe(c):"msg"in c&&"undefined"!==typeof console&&console.log("FIREBASE: "+c.msg.replace("\n",
"\nFIREBASE: ")):pb("Unrecognized action received from server: "+r(b)+"\nAre you using the latest client?"))}};h.Kc=function(a){this.f("connection ready");this.ja=!0;this.Dc=(new Date).getTime();this.He({serverTimeOffset:a-(new Date).getTime()});Ye(this);this.wd(!0)};function Le(a,b){y(!a.Oa,"Scheduling a connect when we're already connected/ing?");a.Kb&&clearTimeout(a.Kb);a.Kb=setTimeout(function(){a.Kb=null;Ze(a)},Math.floor(b))}
h.kg=function(a){a&&!this.mc&&this.Wa===this.td&&(this.f("Window became visible.  Reducing delay."),this.Wa=1E3,this.Oa||Le(this,0));this.mc=a};h.ig=function(a){a?(this.f("Browser went online.  Reconnecting."),this.Wa=1E3,this.Cb=!0,this.Oa||Le(this,0)):(this.f("Browser went offline.  Killing connection; don't reconnect."),this.Cb=!1,this.Oa&&this.Oa.close())};
h.of=function(){this.f("data client disconnected");this.ja=!1;this.Oa=null;for(var a=0;a<this.la.length;a++){var b=this.la[a];b&&"h"in b.uf&&b.qg&&(b.H&&b.H("disconnect"),delete this.la[a],this.Nc--)}0===this.Nc&&(this.la=[]);if(this.Cb)this.mc?this.Dc&&(3E4<(new Date).getTime()-this.Dc&&(this.Wa=1E3),this.Dc=null):(this.f("Window isn't visible.  Delaying reconnect."),this.Wa=this.td,this.we=(new Date).getTime()),a=Math.max(0,this.Wa-((new Date).getTime()-this.we)),a*=Math.random(),this.f("Trying to reconnect in "+
a+"ms"),Le(this,a),this.Wa=Math.min(this.td,1.3*this.Wa);else for(var c in this.Sc)delete this.Sc[c];this.wd(!1)};function Ze(a){if(a.Cb){a.f("Making a connection attempt");a.we=(new Date).getTime();a.Dc=null;var b=q(a.xd,a),c=q(a.Kc,a),d=q(a.of,a),e=a.id+":"+Me++;a.Oa=new ue(e,a.O,b,c,d,function(b){z(b+" ("+a.O.toString()+")");a.Cb=!1})}}h.pb=function(){this.Cb=!1;this.Oa?this.Oa.close():(this.Kb&&(clearTimeout(this.Kb),this.Kb=null),this.ja&&this.of())};
h.hc=function(){this.Cb=!0;this.Wa=1E3;this.Oa||Le(this,0)};function Xe(a,b,c){c=c?Ja(c,function(a){return xb(a)}).join("$"):"default";(a=Pe(a,b,c))&&a.H&&a.H("permission_denied")}function Pe(a,b,c){b=(new S(b)).toString();var d=a.Aa[b][c];delete a.Aa[b][c];0===Jb(a.Aa[b])&&delete a.Aa[b];return d}function Ye(a){Qe(a);A(a.Aa,function(b,d){A(b,function(b,c){Oe(a,d,c,b)})});for(var b=0;b<a.la.length;b++)a.la[b]&&We(a,b);for(;a.Jc.length;)b=a.Jc.shift(),Se(a,b.action,b.Pc,b.data,b.H)};function $e(){this.m=this.D=null}$e.prototype.dc=function(a,b){if(a.e())this.D=b,this.m=null;else if(null!==this.D)this.D=this.D.C(a,b);else{null==this.m&&(this.m=new ge);var c=I(a);this.m.contains(c)||this.m.add(c,new $e);c=this.m.get(c);a=T(a);c.dc(a,b)}};
function af(a,b){if(b.e())return a.D=null,a.m=null,!0;if(null!==a.D){if(a.D.M())return!1;var c=a.D;a.D=null;c.U(L,function(b,c){a.dc(new S(b),c)});return af(a,b)}return null!==a.m?(c=I(b),b=T(b),a.m.contains(c)&&af(a.m.get(c),b)&&a.m.remove(c),a.m.e()?(a.m=null,!0):!1):!0}function bf(a,b,c){null!==a.D?c(b,a.D):a.U(function(a,e){var f=new S(b.toString()+"/"+a);bf(e,f,c)})}$e.prototype.U=function(a){null!==this.m&&he(this.m,function(b,c){a(b,c)})};function cf(){this.Jd=M}cf.prototype.j=function(a){return this.Jd.ra(a)};cf.prototype.toString=function(){return this.Jd.toString()};function df(){this.nb=[]}function ef(a,b){for(var c=null,d=0;d<b.length;d++){var e=b[d],f=e.Qb();null===c||f.ea(c.Qb())||(a.nb.push(c),c=null);null===c&&(c=new ff(f));c.add(e)}c&&a.nb.push(c)}function Pc(a,b,c){ef(a,c);gf(a,function(a){return a.ea(b)})}function hf(a,b,c){ef(a,c);gf(a,function(a){return a.contains(b)||b.contains(a)})}
function gf(a,b){for(var c=!0,d=0;d<a.nb.length;d++){var e=a.nb[d];if(e)if(e=e.Qb(),b(e)){for(var e=a.nb[d],f=0;f<e.kd.length;f++){var g=e.kd[f];if(null!==g){e.kd[f]=null;var k=g.Lb();lb&&hb("event: "+g.toString());Cb(k)}}a.nb[d]=null}else c=!1}c&&(a.nb=[])}function ff(a){this.Ea=a;this.kd=[]}ff.prototype.add=function(a){this.kd.push(a)};ff.prototype.Qb=function(){return this.Ea};var jf="auth.firebase.com";function kf(a,b,c){this.cd=a||{};this.Ud=b||{};this.Xa=c||{};this.cd.remember||(this.cd.remember="default")}var lf=["remember","redirectTo"];function mf(a){var b={},c={};ua(a||{},function(a,e){0<=Ga(lf,a)?b[a]=e:c[a]=e});return new kf(b,{},c)};var nf={NETWORK_ERROR:"Unable to contact the Firebase server.",SERVER_ERROR:"An unknown server error occurred.",TRANSPORT_UNAVAILABLE:"There are no login transports available for the requested method.",REQUEST_INTERRUPTED:"The browser redirected the page before the login request could complete.",USER_CANCELLED:"The user cancelled authentication."};function X(a){var b=Error(t(nf,a),a);b.code=a;return b};function of(){var a=window.opener.frames,b;for(b=a.length-1;0<=b;b--)try{if(a[b].location.protocol===window.location.protocol&&a[b].location.host===window.location.host&&"__winchan_relay_frame"===a[b].name)return a[b]}catch(c){}return null}function pf(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener&&a.addEventListener(b,c,!1)}function qf(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener&&a.removeEventListener(b,c,!1)}
function rf(a){/^https?:\/\//.test(a)||(a=window.location.href);var b=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(a);return b?b[1]:a}function sf(a){var b="";try{a=a.replace("#","");var c={},d=a.replace(/^\?/,"").split("&");for(a=0;a<d.length;a++)if(d[a]){var e=d[a].split("=");c[e[0]]=e[1]}c&&s(c,"__firebase_request_key")&&(b=t(c,"__firebase_request_key"))}catch(f){}return b}
function tf(a){var b=[],c;for(c in a)if(s(a,c)){var d=t(a,c);if(ea(d))for(var e=0;e<d.length;e++)b.push(encodeURIComponent(c)+"="+encodeURIComponent(d[e]));else b.push(encodeURIComponent(c)+"="+encodeURIComponent(t(a,c)))}return b?"&"+b.join("&"):""}function uf(){var a=rb(jf);return a.scheme+"://"+a.host+"/v2"}function vf(a){return uf()+"/"+a+"/auth/channel"};function wf(){return!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(navigator.userAgent)}function xf(){var a=navigator.userAgent;if("Microsoft Internet Explorer"===navigator.appName){if((a=a.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/))&&1<a.length)return 8<=parseFloat(a[1])}else if(-1<a.indexOf("Trident")&&(a=a.match(/rv:([0-9]{2,2}[\.0-9]{0,})/))&&1<a.length)return 8<=parseFloat(a[1]);return!1};function yf(a){a.method||(a.method="GET");a.headers||(a.headers={});a.headers.content_type||(a.headers.content_type="application/json");a.headers.content_type=a.headers.content_type.toLowerCase();this.options=a}
yf.prototype.open=function(a,b,c){function d(){c&&(c(X("REQUEST_INTERRUPTED")),c=null)}var e=new XMLHttpRequest,f=this.options.method.toUpperCase(),g;pf(window,"beforeunload",d);e.onreadystatechange=function(){if(c&&4===e.readyState){var a;if(200<=e.status&&300>e.status){try{a=ta(e.responseText)}catch(b){}c(null,a)}else 500<=e.status&&600>e.status?c(X("SERVER_ERROR")):c(X("NETWORK_ERROR"));c=null;qf(window,"beforeunload",d)}};if("GET"===f)a+=(/\?/.test(a)?"":"?")+tf(b),g=null;else{var k=this.options.headers.content_type;
"application/json"===k&&(g=r(b));"application/x-www-form-urlencoded"===k&&(g=tf(b))}e.open(f,a,!0);a={"X-Requested-With":"XMLHttpRequest",Accept:"application/json;text/plain"};Qd(a,this.options.headers);for(var l in a)e.setRequestHeader(l,a[l]);e.send(g)};yf.isAvailable=function(){return!!window.XMLHttpRequest&&"string"===typeof(new XMLHttpRequest).responseType&&(!(navigator.userAgent.match(/MSIE/)||navigator.userAgent.match(/Trident/))||xf())};yf.prototype.sc=function(){return"json"};function zf(a){this.fc=Fa()+Fa()+Fa();this.pf=a}
zf.prototype.open=function(a,b,c){function d(){c&&(c(X("USER_CANCELLED")),c=null)}var e=this,f=rb(jf),g;b.requestId=this.fc;b.redirectTo=f.scheme+"://"+f.host+"/blank/page.html";a+=/\?/.test(a)?"":"?";a+=tf(b);(g=window.open(a,"_blank","location=no"))&&ha(g.addEventListener)?(g.addEventListener("loadstart",function(a){var b;if(b=a&&a.url)a:{var n=a.url;try{var u=document.createElement("a");u.href=n;b=u.host===f.host&&"/blank/page.html"===u.pathname;break a}catch(x){}b=!1}b&&(a=sf(a.url),g.removeEventListener("exit",
d),g.close(),a=new kf(null,null,{requestId:e.fc,requestKey:a}),e.pf.requestWithCredential("/auth/session",a,c),c=null)}),g.addEventListener("exit",d)):c(X("TRANSPORT_UNAVAILABLE"))};zf.isAvailable=function(){return wf()};zf.prototype.sc=function(){return"redirect"};function Af(a){if(!a.window_features||-1!==navigator.userAgent.indexOf("Fennec/")||-1!==navigator.userAgent.indexOf("Firefox/")&&-1!==navigator.userAgent.indexOf("Android"))a.window_features=void 0;a.window_name||(a.window_name="_blank");this.options=a}
Af.prototype.open=function(a,b,c){function d(a){g&&(document.body.removeChild(g),g=void 0);u&&(u=clearInterval(u));qf(window,"message",e);qf(window,"unload",d);if(n&&!a)try{n.close()}catch(b){k.postMessage("die",l)}n=k=void 0}function e(a){if(a.origin===l)try{var b=ta(a.data);"ready"===b.a?k.postMessage(x,l):"error"===b.a?(d(!1),c&&(c(b.d),c=null)):"response"===b.a&&(d(b.forceKeepWindowOpen),c&&(c(null,b.d),c=null))}catch(e){}}var f=xf(),g,k;if(!this.options.relay_url)return c(Error("invalid arguments: origin of url and relay_url must match"));
var l=rf(a);if(l!==rf(this.options.relay_url))c&&setTimeout(function(){c(Error("invalid arguments: origin of url and relay_url must match"))},0);else{f&&(g=document.createElement("iframe"),g.setAttribute("src",this.options.relay_url),g.style.display="none",g.setAttribute("name","__winchan_relay_frame"),document.body.appendChild(g),k=g.contentWindow);a+=(/\?/.test(a)?"":"?")+tf(b);var n=window.open(a,this.options.window_name,this.options.window_features);k||(k=n);var u=setInterval(function(){n&&n.closed&&
(d(!1),c&&(c(X("USER_CANCELLED")),c=null))},500),x=r({a:"request",d:b});pf(window,"unload",d);pf(window,"message",e)}};
Af.isAvailable=function(){return"postMessage"in window&&!/^file:\//.test(location.href)&&!(wf()||navigator.userAgent.match(/Windows Phone/)||window.Windows&&/^ms-appx:/.test(location.href)||navigator.userAgent.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i)||navigator.userAgent.match(/CriOS/)||navigator.userAgent.match(/Twitter for iPhone/)||navigator.userAgent.match(/FBAN\/FBIOS/)||window.navigator.standalone)&&!navigator.userAgent.match(/PhantomJS/)};Af.prototype.sc=function(){return"popup"};function Bf(a){a.callback_parameter||(a.callback_parameter="callback");this.options=a;window.__firebase_auth_jsonp=window.__firebase_auth_jsonp||{}}
Bf.prototype.open=function(a,b,c){function d(){c&&(c(X("REQUEST_INTERRUPTED")),c=null)}function e(){setTimeout(function(){window.__firebase_auth_jsonp[f]=void 0;Nd(window.__firebase_auth_jsonp)&&(window.__firebase_auth_jsonp=void 0);try{var a=document.getElementById(f);a&&a.parentNode.removeChild(a)}catch(b){}},1);qf(window,"beforeunload",d)}var f="fn"+(new Date).getTime()+Math.floor(99999*Math.random());b[this.options.callback_parameter]="__firebase_auth_jsonp."+f;a+=(/\?/.test(a)?"":"?")+tf(b);
pf(window,"beforeunload",d);window.__firebase_auth_jsonp[f]=function(a){c&&(c(null,a),c=null);e()};Cf(f,a,c)};
function Cf(a,b,c){setTimeout(function(){try{var d=document.createElement("script");d.type="text/javascript";d.id=a;d.async=!0;d.src=b;d.onerror=function(){var b=document.getElementById(a);null!==b&&b.parentNode.removeChild(b);c&&c(X("NETWORK_ERROR"))};var e=document.getElementsByTagName("head");(e&&0!=e.length?e[0]:document.documentElement).appendChild(d)}catch(f){c&&c(X("NETWORK_ERROR"))}},0)}Bf.isAvailable=function(){return!wf()};Bf.prototype.sc=function(){return"json"};function Df(a,b){this.Je=["session",a.Dd,a.tb].join(":");this.Rd=b}Df.prototype.set=function(a,b){if(!b)if(this.Rd.length)b=this.Rd[0];else throw Error("fb.login.SessionManager : No storage options available!");b.set(this.Je,a)};Df.prototype.get=function(){var a=Ja(this.Rd,q(this.Zf,this)),a=Ia(a,function(a){return null!==a});Qa(a,function(a,c){return He(c.token)-He(a.token)});return 0<a.length?a.shift():null};Df.prototype.Zf=function(a){try{var b=a.get(this.Je);if(b&&b.token)return b}catch(c){}return null};
Df.prototype.clear=function(){var a=this;Ha(this.Rd,function(b){b.remove(a.Je)})};function Ef(a){this.fc=Fa()+Fa()+Fa();this.pf=a}Ef.prototype.open=function(a,b){v.set("redirect_request_id",this.fc);v.set("redirect_request_id",this.fc);b.requestId=this.fc;b.redirectTo=b.redirectTo||window.location.href;a+=(/\?/.test(a)?"":"?")+tf(b);window.location=a};Ef.isAvailable=function(){return!/^file:\//.test(location.href)&&!wf()};Ef.prototype.sc=function(){return"redirect"};function Ff(a,b,c,d){Fd.call(this,["auth_status"]);this.O=a;this.We=b;this.Cg=c;this.Ee=d;this.ic=new Df(a,[za,v]);this.hb=null;Gf(this)}ma(Ff,Fd);h=Ff.prototype;h.ne=function(){return this.hb||null};function Gf(a){v.get("redirect_request_id")&&Hf(a);var b=a.ic.get();b&&b.token?(If(a,b),a.We(b.token,function(c,d){Jf(a,c,d,!1,b.token,b)},function(b,d){Kf(a,"resumeSession()",b,d)})):If(a,null)}
function Lf(a,b,c,d,e,f){"firebaseio-demo.com"===a.O.domain&&z("Firebase authentication is not supported on demo Firebases (*.firebaseio-demo.com). To secure your Firebase, create a production Firebase at https://www.firebase.com.");a.We(b,function(f,k){Jf(a,f,k,!0,b,c,d||{},e)},function(b,c){Kf(a,"auth()",b,c,f)})}function Mf(a,b){a.ic.clear();If(a,null);a.Cg(function(a,d){if("ok"===a)B(b,null);else{var e=(a||"error").toUpperCase(),f=e;d&&(f+=": "+d);f=Error(f);f.code=e;B(b,f)}})}
function Jf(a,b,c,d,e,f,g,k){"ok"===b?(d&&(b=c.auth,f.auth=b,f.expires=c.expires,f.token=Ie(e)?e:"",c=null,b&&s(b,"uid")?c=t(b,"uid"):s(f,"uid")&&(c=t(f,"uid")),f.uid=c,c="custom",b&&s(b,"provider")?c=t(b,"provider"):s(f,"provider")&&(c=t(f,"provider")),f.provider=c,a.ic.clear(),Ie(e)&&(g=g||{},c=za,"sessionOnly"===g.remember&&(c=v),"none"!==g.remember&&a.ic.set(f,c)),If(a,f)),B(k,null,f)):(a.ic.clear(),If(a,null),f=a=(b||"error").toUpperCase(),c&&(f+=": "+c),f=Error(f),f.code=a,B(k,f))}
function Kf(a,b,c,d,e){z(b+" was canceled: "+d);a.ic.clear();If(a,null);a=Error(d);a.code=c.toUpperCase();B(e,a)}function Nf(a,b,c,d,e){Of(a);c=new kf(d||{},{},c||{});Pf(a,[yf,Bf],"/auth/"+b,c,e)}
function Qf(a,b,c,d){Of(a);var e=[Af,zf];c=mf(c);"anonymous"===b||"password"===b?setTimeout(function(){B(d,X("TRANSPORT_UNAVAILABLE"))},0):(c.Ud.window_features="menubar=yes,modal=yes,alwaysRaised=yeslocation=yes,resizable=yes,scrollbars=yes,status=yes,height=625,width=625,top="+("object"===typeof screen?.5*(screen.height-625):0)+",left="+("object"===typeof screen?.5*(screen.width-625):0),c.Ud.relay_url=vf(a.O.tb),c.Ud.requestWithCredential=q(a.gc,a),Pf(a,e,"/auth/"+b,c,d))}
function Hf(a){var b=v.get("redirect_request_id");if(b){var c=v.get("redirect_client_options");v.remove("redirect_request_id");v.remove("redirect_client_options");var d=[yf,Bf],b={requestId:b,requestKey:sf(document.location.hash)},c=new kf(c,{},b);try{document.location.hash=document.location.hash.replace(/&__firebase_request_key=([a-zA-z0-9]*)/,"")}catch(e){}Pf(a,d,"/auth/session",c)}}h.je=function(a,b){Of(this);var c=mf(a);c.Xa._method="POST";this.gc("/users",c,function(a,c){a?B(b,a):B(b,a,c)})};
h.Le=function(a,b){var c=this;Of(this);var d="/users/"+encodeURIComponent(a.email),e=mf(a);e.Xa._method="DELETE";this.gc(d,e,function(a,d){!a&&d&&d.uid&&c.hb&&c.hb.uid&&c.hb.uid===d.uid&&Mf(c);B(b,a)})};h.ee=function(a,b){Of(this);var c="/users/"+encodeURIComponent(a.email)+"/password",d=mf(a);d.Xa._method="PUT";d.Xa.password=a.newPassword;this.gc(c,d,function(a){B(b,a)})};
h.de=function(a,b){Of(this);var c="/users/"+encodeURIComponent(a.oldEmail)+"/email",d=mf(a);d.Xa._method="PUT";d.Xa.email=a.newEmail;d.Xa.password=a.password;this.gc(c,d,function(a){B(b,a)})};h.Me=function(a,b){Of(this);var c="/users/"+encodeURIComponent(a.email)+"/password",d=mf(a);d.Xa._method="POST";this.gc(c,d,function(a){B(b,a)})};h.gc=function(a,b,c){Rf(this,[yf,Bf],a,b,c)};
function Pf(a,b,c,d,e){Rf(a,b,c,d,function(b,c){!b&&c&&c.token&&c.uid?Lf(a,c.token,c,d.cd,function(a,b){a?B(e,a):B(e,null,b)}):B(e,b||X("UNKNOWN_ERROR"))})}
function Rf(a,b,c,d,e){b=Ia(b,function(a){return"function"===typeof a.isAvailable&&a.isAvailable()});0===b.length?setTimeout(function(){B(e,X("TRANSPORT_UNAVAILABLE"))},0):(b=new (b.shift())(d.Ud),d=va(d.Xa),d.v="js-2.1.2",d.transport=b.sc(),d.suppress_status_codes=!0,a=uf()+"/"+a.O.tb+c,b.open(a,d,function(a,b){if(a)B(e,a);else if(b&&b.error){var c=Error(b.error.message);c.code=b.error.code;c.details=b.error.details;B(e,c)}else B(e,null,b)}))}
function If(a,b){var c=null!==a.hb||null!==b;a.hb=b;c&&a.Vd("auth_status",b);a.Ee(null!==b)}h.qe=function(a){y("auth_status"===a,'initial event must be of type "auth_status"');return[this.hb]};function Of(a){var b=a.O;if("firebaseio.com"!==b.domain&&"firebaseio-demo.com"!==b.domain&&"auth.firebase.com"===jf)throw Error("This custom Firebase server ('"+a.O.domain+"') does not support delegated login.");};function Sf(a,b){return a&&"object"===typeof a?(y(".sv"in a,"Unexpected leaf node or priority contents"),b[a[".sv"]]):a}function Tf(a,b){var c=new $e;bf(a,new S(""),function(a,e){c.dc(a,Uf(e,b))});return c}function Uf(a,b){var c=a.L().I(),c=Sf(c,b),d;if(a.M()){var e=Sf(a.za(),b);return e!==a.za()||c!==a.L().I()?new nd(e,O(c)):a}d=a;c!==a.L().I()&&(d=d.Z(new nd(c)));a.U(L,function(a,c){var e=Uf(c,b);e!==c&&(d=d.P(a,e))});return d};function wc(a,b,c){this.A=a;this.aa=b;this.yc=c}function Vf(a){return a.aa}function vc(a,b){return a.aa&&!a.yc||a.A.Da(b)}wc.prototype.j=function(){return this.A};function Wf(a,b){this.F=a;this.Ld=b}function Xf(a,b,c,d){return new Wf(new wc(b,c,d),a.Ld)}function Yf(a){return a.F.aa?a.F.j():null}Wf.prototype.u=function(){return this.Ld};function xc(a){return a.Ld.aa?a.Ld.j():null};function Zf(a,b){this.Yd=a;this.Of=b}function $f(a){this.G=a}
$f.prototype.Ya=function(a,b,c,d){var e=new yc,f;if(b.type===ag)b.source.me?c=bg(this,a,b.path,b.Ga,c,d,e):(y(b.source.df,"Unknown source."),f=b.source.Se,c=cg(this,a,b.path,b.Ga,c,d,f,e));else if(b.type===dg)b.source.me?c=eg(this,a,b.path,b.children,c,d,e):(y(b.source.df,"Unknown source."),f=b.source.Se,c=fg(this,a,b.path,b.children,c,d,f,e));else if(b.type===gg)if(b.Ne)if(f=b.path,null!=c.jc(f))c=a;else{b=new uc(c,a,d);d=a.F.j();if(f.e()||".priority"===I(f))Vf(a.u())?b=c.pa(xc(a)):(b=a.u().j(),
y(b instanceof W,"serverChildren would be complete if leaf node"),b=c.pc(b)),b=this.G.oa(d,b,e);else{f=I(f);var g=c.Ta(f,a.u());null==g&&vc(a.u(),f)&&(g=d.K(f));b=null!=g?this.G.C(d,f,g,b,e):a.F.j().Da(f)?this.G.C(d,f,M,b,e):d;b.e()&&Vf(a.u())&&(d=c.pa(xc(a)),d.M()&&(b=this.G.oa(b,d,e)))}d=Vf(a.u())||null!=c.jc(U);c=Xf(a,b,d,this.G.ya())}else c=hg(this,a,b.path,c,d,e);else if(b.type===ig)d=b.path,b=a.u(),f=b.j(),g=b.aa||d.e(),c=jg(this,new Wf(a.F,new wc(f,g,b.yc)),d,c,tc,e);else throw fb("Unknown operation type: "+
b.type);e=Jd(e.Za);d=c;b=d.F;b.aa&&(f=b.j().M()||b.j().e(),g=Yf(a),(0<e.length||!a.F.aa||f&&!b.j().ea(g)||!b.j().L().ea(g.L()))&&e.push(Fb(Yf(d))));return new Zf(c,e)};
function jg(a,b,c,d,e,f){var g=b.F;if(null!=d.jc(c))return b;var k;if(c.e())y(Vf(b.u()),"If change path is empty, we must have complete server data"),a.G.ya()?(e=xc(b),d=d.pc(e instanceof W?e:M)):d=d.pa(xc(b)),f=a.G.oa(b.F.j(),d,f);else{var l=I(c);if(".priority"==l)y(1==Qc(c),"Can't have a priority with additional path components"),f=g.j(),k=b.u().j(),d=d.$c(c,f,k),f=null!=d?a.G.Z(f,d):g.j();else{var n=T(c);vc(g,l)?(k=b.u().j(),d=d.$c(c,g.j(),k),d=null!=d?g.j().K(l).C(n,d):g.j().K(l)):d=d.Ta(l,b.u());
f=null!=d?a.G.C(g.j(),l,d,e,f):g.j()}}return Xf(b,f,g.aa||c.e(),a.G.ya())}function cg(a,b,c,d,e,f,g,k){var l=b.u();g=g?a.G:a.G.Mb();if(c.e())d=g.oa(l.j(),d,null);else if(g.ya()&&!l.yc)d=l.j().C(c,d),d=g.oa(l.j(),d,null);else{var n=I(c);if((c.e()?!l.aa||l.yc:!vc(l,I(c)))&&1<Qc(c))return b;d=l.j().K(n).C(T(c),d);d=".priority"==n?g.Z(l.j(),d):g.C(l.j(),n,d,tc,null)}l=l.aa||c.e();b=new Wf(b.F,new wc(d,l,g.ya()));return jg(a,b,c,e,new uc(e,b,f),k)}
function bg(a,b,c,d,e,f,g){var k=b.F;e=new uc(e,b,f);if(c.e())g=a.G.oa(b.F.j(),d,g),a=Xf(b,g,!0,a.G.ya());else if(f=I(c),".priority"===f)g=a.G.Z(b.F.j(),d),a=Xf(b,g,k.aa,k.yc);else{var l=T(c);c=k.j().K(f);if(!l.e()){var n=e.ef(f);d=null!=n?".priority"===Rc(l)&&n.ra(l.parent()).e()?n:n.C(l,d):M}c.ea(d)?a=b:(g=a.G.C(k.j(),f,d,e,g),a=Xf(b,g,k.aa,a.G.ya()))}return a}
function eg(a,b,c,d,e,f,g){var k=b;kg(d,function(d,n){var u=c.o(d);vc(b.F,I(u))&&(k=bg(a,k,u,n,e,f,g))});kg(d,function(d,n){var u=c.o(d);vc(b.F,I(u))||(k=bg(a,k,u,n,e,f,g))});return k}function lg(a,b){kg(b,function(b,d){a=a.C(b,d)});return a}
function fg(a,b,c,d,e,f,g,k){if(b.u().j().e()&&!Vf(b.u()))return b;var l=b;c=c.e()?d:mg(ng,c,d);var n=b.u().j();c.children.fa(function(c,d){if(n.Da(c)){var E=b.u().j().K(c),E=lg(E,d);l=cg(a,l,new S(c),E,e,f,g,k)}});c.children.fa(function(c,d){var E=!Vf(b.u())&&null==d.value;n.Da(c)||E||(E=b.u().j().K(c),E=lg(E,d),l=cg(a,l,new S(c),E,e,f,g,k))});return l}
function hg(a,b,c,d,e,f){if(null!=d.jc(c))return b;var g=new uc(d,b,e),k=e=b.F.j();if(Vf(b.u())){if(c.e())e=d.pa(xc(b)),k=a.G.oa(b.F.j(),e,f);else if(".priority"===I(c)){var l=d.Ta(I(c),b.u());null==l||e.e()||e.L().ea(l)||(k=a.G.Z(e,l))}else l=I(c),e=d.Ta(l,b.u()),null!=e&&(k=a.G.C(b.F.j(),l,e,g,f));e=!0}else b.F.aa?(k=e,e=Yf(b),e.M()||e.U(L,function(c){var e=d.Ta(c,b.u());null!=e&&(k=a.G.C(k,c,e,g,f))}),e=!0):(!c.e()&&(l=I(c),1==Qc(c)||vc(b.F,l))&&(c=d.Ta(l,b.u()),null!=c&&(k=a.G.C(e,l,c,g,f))),
e=!1);return Xf(b,k,e,a.G.ya())};function og(a){this.V=a;this.g=a.n.g}function pg(a,b,c,d){var e=[],f=[];Ha(b,function(b){"child_changed"===b.type&&a.g.jf(b.De,b.Ha)&&f.push(new C("child_moved",b.Ha,b.Ua))});qg(a,e,"child_removed",b,d,c);qg(a,e,"child_added",b,d,c);qg(a,e,"child_moved",f,d,c);qg(a,e,"child_changed",b,d,c);qg(a,e,Gb,b,d,c);return e}function qg(a,b,c,d,e,f){d=Ia(d,function(a){return a.type===c});Qa(d,q(a.Qf,a));Ha(d,function(c){var d=rg(a,c,f);Ha(e,function(e){e.wf(c.type)&&b.push(e.createEvent(d,a.V))})})}
function rg(a,b,c){"value"!==b.type&&"child_removed"!==b.type&&(b.Fd=c.ff(b.Ua,b.Ha,a.g));return b}og.prototype.Qf=function(a,b){if(null==a.Ua||null==b.Ua)throw fb("Should only compare child_ events.");return this.g.compare(new N(a.Ua,a.Ha),new N(b.Ua,b.Ha))};function sg(a,b){this.V=a;var c=a.n,d=new bc(c.g),c=Jc(c)?new bc(c.g):c.ka?new Ac(c):new dc(c);this.sf=new $f(c);var e=b.u(),f=b.F,g=d.oa(M,e.j(),null),k=c.oa(M,f.j(),null);this.Ia=new Wf(new wc(k,f.aa,c.ya()),new wc(g,e.aa,d.ya()));this.Va=[];this.Uf=new og(a)}function tg(a){return a.V}h=sg.prototype;h.u=function(){return this.Ia.u().j()};h.bb=function(a){var b=xc(this.Ia);return b&&(Jc(this.V.n)||!a.e()&&!b.K(I(a)).e())?b.ra(a):null};h.e=function(){return 0===this.Va.length};h.Gb=function(a){this.Va.push(a)};
h.gb=function(a,b){var c=[];if(b){y(null==a,"A cancel should cancel all event registrations.");var d=this.V.path;Ha(this.Va,function(a){(a=a.Ye(b,d))&&c.push(a)})}if(a){for(var e=[],f=0;f<this.Va.length;++f){var g=this.Va[f];if(!g.matches(a))e.push(g);else if(a.hf()){e=e.concat(this.Va.slice(f+1));break}}this.Va=e}else this.Va=[];return c};
h.Ya=function(a,b,c){a.type===dg&&null!==a.source.yb&&(y(xc(this.Ia),"We should always have a full cache before handling merges"),y(Yf(this.Ia),"Missing event cache, even though we have a server cache"));var d=this.Ia;a=this.sf.Ya(d,a,b,c);b=this.sf;c=a.Yd;y(c.F.j().Bc(b.G.g),"Event snap not indexed");y(c.u().j().Bc(b.G.g),"Server snap not indexed");y(Vf(a.Yd.u())||!Vf(d.u()),"Once a server snap is complete, it should never go back");this.Ia=a.Yd;return ug(this,a.Of,a.Yd.F.j(),null)};
function vg(a,b){var c=a.Ia.F,d=[];c.j().M()||c.j().U(L,function(a,b){d.push(new C("child_added",b,a))});c.aa&&d.push(Fb(c.j()));return ug(a,d,c.j(),b)}function ug(a,b,c,d){return pg(a.Uf,b,c,d?[d]:a.Va)};function wg(a,b){this.value=a;this.children=b||xg}var xg=new Zc(function(a,b){return a===b?0:a<b?-1:1}),ng=new wg(null);function yg(a){var b=ng;A(a,function(a,d){b=b.set(new S(d),a)});return b}h=wg.prototype;h.e=function(){return null===this.value&&this.children.e()};function zg(a,b,c){if(null!=a.value&&c(a.value))return{path:U,value:a.value};if(b.e())return null;var d=I(b);a=a.children.get(d);return null!==a?(b=zg(a,T(b),c),null!=b?{path:(new S(d)).o(b.path),value:b.value}:null):null}
function Ag(a,b){return zg(a,b,function(){return!0})}h.subtree=function(a){if(a.e())return this;var b=this.children.get(I(a));return null!==b?b.subtree(T(a)):ng};h.set=function(a,b){if(a.e())return new wg(b,this.children);var c=I(a),d=(this.children.get(c)||ng).set(T(a),b),c=this.children.La(c,d);return new wg(this.value,c)};
h.remove=function(a){if(a.e())return this.children.e()?ng:new wg(null,this.children);var b=I(a),c=this.children.get(b);return c?(a=c.remove(T(a)),b=a.e()?this.children.remove(b):this.children.La(b,a),null===this.value&&b.e()?ng:new wg(this.value,b)):this};h.get=function(a){if(a.e())return this.value;var b=this.children.get(I(a));return b?b.get(T(a)):null};
function mg(a,b,c){if(b.e())return c;var d=I(b);b=mg(a.children.get(d)||ng,T(b),c);d=b.e()?a.children.remove(d):a.children.La(d,b);return new wg(a.value,d)}function Bg(a,b){return Cg(a,U,b)}function Cg(a,b,c){var d={};a.children.fa(function(a,f){d[a]=Cg(f,b.o(a),c)});return c(b,a.value,d)}function Dg(a,b,c){return Eg(a,b,U,c)}function Eg(a,b,c,d){var e=a.value?d(c,a.value):!1;if(e)return e;if(b.e())return null;e=I(b);return(a=a.children.get(e))?Eg(a,T(b),c.o(e),d):null}
function Fg(a,b,c){if(!b.e()){var d=!0;a.value&&(d=c(U,a.value));!0===d&&(d=I(b),(a=a.children.get(d))&&Gg(a,T(b),U.o(d),c))}}function Gg(a,b,c,d){if(b.e())return a;a.value&&d(c,a.value);var e=I(b);return(a=a.children.get(e))?Gg(a,T(b),c.o(e),d):ng}function kg(a,b){Hg(a,U,b)}function Hg(a,b,c){a.children.fa(function(a,e){Hg(e,b.o(a),c)});a.value&&c(b,a.value)}function Ig(a,b){a.children.fa(function(a,d){d.value&&b(a,d.value)})}
h.toString=function(){var a={};kg(this,function(b,c){a[b.toString()]=c.toString()});return r(a)};function Jg(){this.va={}}h=Jg.prototype;h.e=function(){return Nd(this.va)};h.Ya=function(a,b,c){var d=a.source.yb;if(null!==d)return d=t(this.va,d),y(null!=d,"SyncTree gave us an op for an invalid query."),d.Ya(a,b,c);var e=[];A(this.va,function(d){e=e.concat(d.Ya(a,b,c))});return e};h.Gb=function(a,b,c,d,e){var f=a.Fa(),g=t(this.va,f);if(!g){var g=c.pa(e?d:null),k=!1;g?k=!0:(g=d instanceof W?c.pc(d):M,k=!1);g=new sg(a,new Wf(new wc(g,k,!1),new wc(d,e,!1)));this.va[f]=g}g.Gb(b);return vg(g,b)};
h.gb=function(a,b,c){var d=a.Fa(),e=[],f=[],g=null!=Kg(this);if("default"===d){var k=this;A(this.va,function(a,d){f=f.concat(a.gb(b,c));a.e()&&(delete k.va[d],Jc(a.V.n)||e.push(a.V))})}else{var l=t(this.va,d);l&&(f=f.concat(l.gb(b,c)),l.e()&&(delete this.va[d],Jc(l.V.n)||e.push(l.V)))}g&&null==Kg(this)&&e.push(new R(a.k,a.path));return{rg:e,Vf:f}};function Lg(a){return Ia(Jd(a.va),function(a){return!Jc(a.V.n)})}h.bb=function(a){var b=null;A(this.va,function(c){b=b||c.bb(a)});return b};
function Mg(a,b){if(Jc(b.n))return Kg(a);var c=b.Fa();return t(a.va,c)}function Kg(a){return Md(a.va,function(a){return Jc(a.V.n)})||null};function Ng(a){this.W=a}var Og=new Ng(new wg(null));function Pg(a,b,c){if(b.e())return new Ng(new wg(c));var d=Ag(a.W,b);if(null!=d){var e=d.path,d=d.value;b=V(e,b);d=d.C(b,c);return new Ng(a.W.set(e,d))}a=mg(a.W,b,new wg(c));return new Ng(a)}function Qg(a,b,c){var d=a;ua(c,function(a,c){d=Pg(d,b.o(a),c)});return d}Ng.prototype.Gd=function(a){if(a.e())return Og;a=mg(this.W,a,ng);return new Ng(a)};function Rg(a,b){var c=Ag(a.W,b);return null!=c?a.W.get(c.path).ra(V(c.path,b)):null}
function Sg(a){var b=[],c=a.W.value;null!=c?c.M()||c.U(L,function(a,c){b.push(new N(a,c))}):a.W.children.fa(function(a,c){null!=c.value&&b.push(new N(a,c.value))});return b}function Tg(a,b){if(b.e())return a;var c=Rg(a,b);return null!=c?new Ng(new wg(c)):new Ng(a.W.subtree(b))}Ng.prototype.e=function(){return this.W.e()};Ng.prototype.apply=function(a){return Ug(U,this.W,a)};
function Ug(a,b,c){if(null!=b.value)return c.C(a,b.value);var d=null;b.children.fa(function(b,f){".priority"===b?(y(null!==f.value,"Priority writes must always be leaf nodes"),d=f.value):c=Ug(a.o(b),f,c)});c.ra(a).e()||null===d||(c=c.C(a.o(".priority"),d));return c};function Vg(){this.T=Og;this.wa=[];this.Ec=-1}h=Vg.prototype;
h.Gd=function(a){var b=Na(this.wa,function(b){return b.Zd===a});y(0<=b,"removeWrite called with nonexistent writeId.");var c=this.wa[b];this.wa.splice(b,1);for(var d=c.visible,e=!1,f=this.wa.length-1;d&&0<=f;){var g=this.wa[f];g.visible&&(f>=b&&Wg(g,c.path)?d=!1:c.path.contains(g.path)&&(e=!0));f--}if(d){if(e)this.T=Xg(this.wa,Yg,U),this.Ec=0<this.wa.length?this.wa[this.wa.length-1].Zd:-1;else if(c.Ga)this.T=this.T.Gd(c.path);else{var k=this;A(c.children,function(a,b){k.T=k.T.Gd(c.path.o(b))})}return c.path}return null};
h.pa=function(a,b,c,d){if(c||d){var e=Tg(this.T,a);return!d&&e.e()?b:d||null!=b||null!=Rg(e,U)?(e=Xg(this.wa,function(b){return(b.visible||d)&&(!c||!(0<=Ga(c,b.Zd)))&&(b.path.contains(a)||a.contains(b.path))},a),b=b||M,e.apply(b)):null}e=Rg(this.T,a);if(null!=e)return e;e=Tg(this.T,a);return e.e()?b:null!=b||null!=Rg(e,U)?(b=b||M,e.apply(b)):null};
h.pc=function(a,b){var c=M,d=Rg(this.T,a);if(d)d.M()||d.U(L,function(a,b){c=c.P(a,b)});else if(b){var e=Tg(this.T,a);b.U(L,function(a,b){var d=Tg(e,new S(a)).apply(b);c=c.P(a,d)});Ha(Sg(e),function(a){c=c.P(a.name,a.Y)})}else e=Tg(this.T,a),Ha(Sg(e),function(a){c=c.P(a.name,a.Y)});return c};h.$c=function(a,b,c,d){y(c||d,"Either existingEventSnap or existingServerSnap must exist");a=a.o(b);if(null!=Rg(this.T,a))return null;a=Tg(this.T,a);return a.e()?d.ra(b):a.apply(d.ra(b))};
h.Ta=function(a,b,c){a=a.o(b);var d=Rg(this.T,a);return null!=d?d:vc(c,b)?Tg(this.T,a).apply(c.j().K(b)):null};h.jc=function(a){return Rg(this.T,a)};h.ce=function(a,b,c,d,e,f){var g;a=Tg(this.T,a);g=Rg(a,U);if(null==g)if(null!=b)g=a.apply(b);else return[];g=g.Fb(f);if(g.e()||g.M())return[];b=[];a=mc(f);e=e?g.Rb(c,f):g.Pb(c,f);for(f=P(e);f&&b.length<d;)0!==a(f,c)&&b.push(f),f=P(e);return b};
function Wg(a,b){return a.Ga?a.path.contains(b):!!Ld(a.children,function(c,d){return a.path.o(d).contains(b)})}function Yg(a){return a.visible}
function Xg(a,b,c){for(var d=Og,e=0;e<a.length;++e){var f=a[e];if(b(f)){var g=f.path;if(f.Ga)c.contains(g)?(g=V(c,g),d=Pg(d,g,f.Ga)):g.contains(c)&&(g=V(g,c),d=Pg(d,U,f.Ga.ra(g)));else if(f.children)if(c.contains(g))g=V(c,g),d=Qg(d,g,f.children);else{if(g.contains(c))if(g=V(g,c),g.e())d=Qg(d,U,f.children);else if(f=t(f.children,I(g)))f=f.ra(T(g)),d=Pg(d,U,f)}else throw fb("WriteRecord should have .snap or .children");}}return d}function Zg(a,b){this.Db=a;this.W=b}h=Zg.prototype;
h.pa=function(a,b,c){return this.W.pa(this.Db,a,b,c)};h.pc=function(a){return this.W.pc(this.Db,a)};h.$c=function(a,b,c){return this.W.$c(this.Db,a,b,c)};h.jc=function(a){return this.W.jc(this.Db.o(a))};h.ce=function(a,b,c,d,e){return this.W.ce(this.Db,a,b,c,d,e)};h.Ta=function(a,b){return this.W.Ta(this.Db,a,b)};h.o=function(a){return new Zg(this.Db.o(a),this.W)};function $g(a,b,c){this.type=ag;this.source=a;this.path=b;this.Ga=c}$g.prototype.Mc=function(a){return this.path.e()?new $g(this.source,U,this.Ga.K(a)):new $g(this.source,T(this.path),this.Ga)};$g.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" overwrite: "+this.Ga.toString()+")"};function ah(a,b){this.type=gg;this.source=bh;this.path=a;this.Ne=b}ah.prototype.Mc=function(){return this.path.e()?this:new ah(T(this.path),this.Ne)};ah.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" ack write revert="+this.Ne+")"};function ch(a,b){this.type=ig;this.source=a;this.path=b}ch.prototype.Mc=function(){return this.path.e()?new ch(this.source,U):new ch(this.source,T(this.path))};ch.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" listen_complete)"};function dh(a,b,c){this.type=dg;this.source=a;this.path=b;this.children=c}dh.prototype.Mc=function(a){if(this.path.e())return a=this.children.subtree(new S(a)),a.e()?null:a.value?new $g(this.source,U,a.value):new dh(this.source,U,a);y(I(this.path)===a,"Can't get a merge for a child not on the path of the operation");return new dh(this.source,T(this.path),this.children)};dh.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"};var ag=0,dg=1,gg=2,ig=3;function eh(a,b,c,d){this.me=a;this.df=b;this.yb=c;this.Se=d;y(!d||b,"Tagged queries must be from server.")}var bh=new eh(!0,!1,null,!1),fh=new eh(!1,!0,null,!1);eh.prototype.toString=function(){return this.me?"user":this.Se?"server(queryID="+this.yb+")":"server"};function gh(a){this.na=ng;this.xb=new Vg;this.Wc={};this.bc={};this.Fc=a}function hh(a,b,c,d,e){var f=a.xb,g=e;y(d>f.Ec,"Stacking an older write on top of newer ones");m(g)||(g=!0);f.wa.push({path:b,Ga:c,Zd:d,visible:g});g&&(f.T=Pg(f.T,b,c));f.Ec=d;return e?ih(a,new $g(bh,b,c)):[]}function jh(a,b,c,d){var e=a.xb;y(d>e.Ec,"Stacking an older merge on top of newer ones");e.wa.push({path:b,children:c,Zd:d,visible:!0});e.T=Qg(e.T,b,c);e.Ec=d;c=yg(c);return ih(a,new dh(bh,b,c))}
function kh(a,b,c){c=c||!1;b=a.xb.Gd(b);return null==b?[]:ih(a,new ah(b,c))}function lh(a,b,c){c=yg(c);return ih(a,new dh(fh,b,c))}function mh(a,b,c,d){d=Od(a.Wc,"_"+d);if(null!=d){var e=nh(d);d=e.path;e=e.yb;b=V(d,b);c=new $g(new eh(!1,!0,e,!0),b,c);return oh(a,d,c)}return[]}function ph(a,b,c,d){if(d=Od(a.Wc,"_"+d)){var e=nh(d);d=e.path;e=e.yb;b=V(d,b);c=yg(c);c=new dh(new eh(!1,!0,e,!0),b,c);return oh(a,d,c)}return[]}
gh.prototype.Gb=function(a,b){var c=a.path,d=null,e=!1;Fg(this.na,c,function(a,b){var f=V(a,c);d=b.bb(f);e=e||null!=Kg(b);return!d});var f=this.na.get(c);f?(e=e||null!=Kg(f),d=d||f.bb(U)):(f=new Jg,this.na=this.na.set(c,f));var g;null!=d?g=!0:(g=!1,d=M,Ig(this.na.subtree(c),function(a,b){var c=b.bb(U);c&&(d=d.P(a,c))}));var k=null!=Mg(f,a);if(!k&&!Jc(a.n)){var l=qh(a);y(!(l in this.bc),"View does not exist, but we have a tag");var n=rh++;this.bc[l]=n;this.Wc["_"+n]=l}g=f.Gb(a,b,new Zg(c,this.xb),
d,g);k||e||(f=Mg(f,a),g=g.concat(sh(this,a,f)));return g};
gh.prototype.gb=function(a,b,c){var d=a.path,e=this.na.get(d),f=[];if(e&&("default"===a.Fa()||null!=Mg(e,a))){f=e.gb(a,b,c);e.e()&&(this.na=this.na.remove(d));e=f.rg;f=f.Vf;b=-1!==Na(e,function(a){return Jc(a.n)});var g=Dg(this.na,d,function(a,b){return null!=Kg(b)});if(b&&!g&&(d=this.na.subtree(d),!d.e()))for(var d=th(d),k=0;k<d.length;++k){var l=d[k],n=l.V,l=uh(this,l);this.Fc.Pe(n,vh(this,n),l.md,l.H)}if(!g&&0<e.length&&!c)if(b)this.Fc.Qd(a,null);else{var u=this;Ha(e,function(a){a.Fa();var b=u.bc[qh(a)];
u.Fc.Qd(a,b)})}wh(this,e)}return f};gh.prototype.pa=function(a,b){var c=this.xb,d=Dg(this.na,a,function(b,c){var d=V(b,a);if(d=c.bb(d))return d});return c.pa(a,d,b,!0)};function th(a){return Bg(a,function(a,c,d){if(c&&null!=Kg(c))return[Kg(c)];var e=[];c&&(e=Lg(c));A(d,function(a){e=e.concat(a)});return e})}function wh(a,b){for(var c=0;c<b.length;++c){var d=b[c];if(!Jc(d.n)){var d=qh(d),e=a.bc[d];delete a.bc[d];delete a.Wc["_"+e]}}}
function sh(a,b,c){var d=b.path,e=vh(a,b);c=uh(a,c);b=a.Fc.Pe(b,e,c.md,c.H);d=a.na.subtree(d);if(e)y(null==Kg(d.value),"If we're adding a query, it shouldn't be shadowed");else for(e=Bg(d,function(a,b,c){if(!a.e()&&b&&null!=Kg(b))return[tg(Kg(b))];var d=[];b&&(d=d.concat(Ja(Lg(b),function(a){return a.V})));A(c,function(a){d=d.concat(a)});return d}),d=0;d<e.length;++d)c=e[d],a.Fc.Qd(c,vh(a,c));return b}
function uh(a,b){var c=b.V,d=vh(a,c);return{md:function(){return(b.u()||M).hash()},H:function(b,f){if("ok"===b){if(f&&"object"===typeof f&&s(f,"w")){var g=t(f,"w");ea(g)&&0<=Ga(g,"no_index")&&z("Using an unspecified index. Consider adding "+('".indexOn": "'+c.n.g.toString()+'"')+" at "+c.path.toString()+" to your security rules for better performance")}if(d){var k=c.path;if(g=Od(a.Wc,"_"+d))var l=nh(g),g=l.path,l=l.yb,k=V(g,k),k=new ch(new eh(!1,!0,l,!0),k),g=oh(a,g,k);else g=[]}else g=ih(a,new ch(fh,
c.path));return g}g="Unknown Error";"too_big"===b?g="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==b?g="Client doesn't have permission to access the desired data.":"unavailable"==b&&(g="The service is unavailable");g=Error(b+": "+g);g.code=b.toUpperCase();return a.gb(c,null,g)}}}function qh(a){return a.path.toString()+"$"+a.Fa()}
function nh(a){var b=a.indexOf("$");y(-1!==b&&b<a.length-1,"Bad queryKey.");return{yb:a.substr(b+1),path:new S(a.substr(0,b))}}function vh(a,b){var c=qh(b);return t(a.bc,c)}var rh=1;function oh(a,b,c){var d=a.na.get(b);y(d,"Missing sync point for query tag that we're tracking");return d.Ya(c,new Zg(b,a.xb),null)}function ih(a,b){return xh(a,b,a.na,null,new Zg(U,a.xb))}
function xh(a,b,c,d,e){if(b.path.e())return yh(a,b,c,d,e);var f=c.get(U);null==d&&null!=f&&(d=f.bb(U));var g=[],k=I(b.path),l=b.Mc(k);if((c=c.children.get(k))&&l)var n=d?d.K(k):null,k=e.o(k),g=g.concat(xh(a,l,c,n,k));f&&(g=g.concat(f.Ya(b,e,d)));return g}function yh(a,b,c,d,e){var f=c.get(U);null==d&&null!=f&&(d=f.bb(U));var g=[];c.children.fa(function(c,f){var n=d?d.K(c):null,u=e.o(c),x=b.Mc(c);x&&(g=g.concat(yh(a,x,f,n,u)))});f&&(g=g.concat(f.Ya(b,e,d)));return g};function zh(a){this.O=a;this.Ra=Xd(a);this.$=new df;this.vd=1;this.S=new Je(this.O,q(this.yd,this),q(this.wd,this),q(this.He,this));this.zg=Yd(a,q(function(){return new Ud(this.Ra,this.S)},this));this.lc=new Tc;this.se=new cf;var b=this;this.qd=new gh({Pe:function(a,d,e,f){d=[];e=b.se.j(a.path);e.e()||(d=ih(b.qd,new $g(fh,a.path,e)),setTimeout(function(){f("ok")},0));return d},Qd:ba});Ah(this,"connected",!1);this.ga=new $e;this.Q=new Ff(a,q(this.S.Q,this.S),q(this.S.Ue,this.S),q(this.Ee,this));this.gd=
0;this.te=null;this.N=new gh({Pe:function(a,d,e,f){Ne(b.S,a,e,d,function(d,e){var l=f(d,e);hf(b.$,a.path,l)});return[]},Qd:function(a,d){var e=b.S,f=a.path.toString(),g=a.Fa();e.f("Unlisten called for "+f+" "+g);if(Pe(e,f,g)&&e.ja){var k=Ic(a.n);e.f("Unlisten on "+f+" for "+g);f={p:f};d&&(f.q=k,f.t=d);e.Ca("n",f)}}})}h=zh.prototype;h.toString=function(){return(this.O.Ab?"https://":"http://")+this.O.host};h.name=function(){return this.O.tb};
function Bh(a){a=a.se.j(new S(".info/serverTimeOffset")).I()||0;return(new Date).getTime()+a}function Ch(a){a=a={timestamp:Bh(a)};a.timestamp=a.timestamp||(new Date).getTime();return a}h.yd=function(a,b,c,d){this.gd++;var e=new S(a);b=this.te?this.te(a,b):b;a=[];d?c?(b=td(b,function(a){return O(a)}),a=ph(this.N,e,b,d)):(b=O(b),a=mh(this.N,e,b,d)):c?(d=td(b,function(a){return O(a)}),a=lh(this.N,e,d)):(d=O(b),a=ih(this.N,new $g(fh,e,d)));d=e;0<a.length&&(d=Dh(this,e));hf(this.$,d,a)};
h.wd=function(a){Ah(this,"connected",a);!1===a&&Eh(this)};h.He=function(a){var b=this;zb(a,function(a,d){Ah(b,d,a)})};h.Ee=function(a){Ah(this,"authenticated",a)};function Ah(a,b,c){b=new S("/.info/"+b);c=O(c);var d=a.se;d.Jd=d.Jd.C(b,c);c=ih(a.qd,new $g(fh,b,c));hf(a.$,b,c)}
h.Bb=function(a,b,c,d){this.f("set",{path:a.toString(),value:b,Hg:c});var e=Ch(this);b=O(b,c);var e=Uf(b,e),f=this.vd++,e=hh(this.N,a,e,f,!0);ef(this.$,e);var g=this;this.S.put(a.toString(),b.I(!0),function(b,c){var e="ok"===b;e||z("set at "+a+" failed: "+b);e=kh(g.N,f,!e);hf(g.$,a,e);Fh(d,b,c)});e=Gh(this,a);Dh(this,e);hf(this.$,e,[])};
h.update=function(a,b,c){this.f("update",{path:a.toString(),value:b});var d=!0,e=Ch(this),f={};A(b,function(a,b){d=!1;var c=O(a);f[b]=Uf(c,e)});if(d)hb("update() called with empty data.  Don't do anything."),Fh(c,"ok");else{var g=this.vd++,k=jh(this.N,a,f,g);ef(this.$,k);var l=this;Ve(this.S,a.toString(),b,function(b,d){y("ok"===b||"permission_denied"===b,"merge at "+a+" failed.");var e="ok"===b;e||z("update at "+a+" failed: "+b);var e=kh(l.N,g,!e),f=a;0<e.length&&(f=Dh(l,a));hf(l.$,f,e);Fh(c,b,d)});
b=Gh(this,a);Dh(this,b);hf(this.$,a,[])}};function Eh(a){a.f("onDisconnectEvents");var b=Ch(a),c=[];bf(Tf(a.ga,b),U,function(b,e){c=c.concat(ih(a.N,new $g(fh,b,e)));var f=Gh(a,b);Dh(a,f)});a.ga=new $e;hf(a.$,U,c)}h.Fe=function(a,b){var c=this;this.S.Fe(a.toString(),function(d,e){"ok"===d&&af(c.ga,a);Fh(b,d,e)})};function Hh(a,b,c,d){var e=O(c);Re(a.S,b.toString(),e.I(!0),function(c,g){"ok"===c&&a.ga.dc(b,e);Fh(d,c,g)})}
function Ih(a,b,c,d,e){var f=O(c,d);Re(a.S,b.toString(),f.I(!0),function(c,d){"ok"===c&&a.ga.dc(b,f);Fh(e,c,d)})}function Jh(a,b,c,d){var e=!0,f;for(f in c)e=!1;e?(hb("onDisconnect().update() called with empty data.  Don't do anything."),Fh(d,"ok")):Te(a.S,b.toString(),c,function(e,f){if("ok"===e)for(var l in c){var n=O(c[l]);a.ga.dc(b.o(l),n)}Fh(d,e,f)})}function Oc(a,b,c){c=".info"===I(b.path)?a.qd.Gb(b,c):a.N.Gb(b,c);Pc(a.$,b.path,c)}h.pb=function(){this.S.pb()};h.hc=function(){this.S.hc()};
h.Qe=function(a){if("undefined"!==typeof console){a?(this.Pd||(this.Pd=new Td(this.Ra)),a=this.Pd.get()):a=this.Ra.get();var b=Ka(Kd(a),function(a,b){return Math.max(b.length,a)},0),c;for(c in a){for(var d=a[c],e=c.length;e<b+2;e++)c+=" ";console.log(c+d)}}};h.Re=function(a){Sd(this.Ra,a);this.zg.zf[a]=!0};h.f=function(a){hb("r:"+this.S.id+":",arguments)};function Fh(a,b,c){a&&Cb(function(){if("ok"==b)a(null);else{var d=(b||"error").toUpperCase(),e=d;c&&(e+=": "+c);e=Error(e);e.code=d;a(e)}})};function Kh(a,b,c,d,e){function f(){}a.f("transaction on "+b);var g=new R(a,b);g.vb("value",f);c={path:b,update:c,H:d,status:null,qf:eb(),Ve:e,xf:0,Xd:function(){g.Zb("value",f)},$d:null,xa:null,dd:null,ed:null,fd:null};d=a.N.pa(b,void 0)||M;c.dd=d;d=c.update(d.I());if(m(d)){Sb("transaction failed: Data returned ",d);c.status=1;e=Uc(a.lc,b);var k=e.za()||[];k.push(c);Vc(e,k);"object"===typeof d&&null!==d&&s(d,".priority")?(k=t(d,".priority"),y(Qb(k),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):
k=(a.N.pa(b)||M).L().I();e=Ch(a);d=O(d,k);e=Uf(d,e);c.ed=d;c.fd=e;c.xa=a.vd++;c=hh(a.N,b,e,c.xa,c.Ve);hf(a.$,b,c);Lh(a)}else c.Xd(),c.ed=null,c.fd=null,c.H&&(a=new D(c.dd,new R(a,c.path),L),c.H(null,!1,a))}function Lh(a,b){var c=b||a.lc;b||Mh(a,c);if(null!==c.za()){var d=Nh(a,c);y(0<d.length,"Sending zero length transaction queue");La(d,function(a){return 1===a.status})&&Oh(a,c.path(),d)}else c.ld()&&c.U(function(b){Lh(a,b)})}
function Oh(a,b,c){for(var d=Ja(c,function(a){return a.xa}),e=a.N.pa(b,d)||M,d=e,e=e.hash(),f=0;f<c.length;f++){var g=c[f];y(1===g.status,"tryToSendTransactionQueue_: items in queue should all be run.");g.status=2;g.xf++;var k=V(b,g.path),d=d.C(k,g.ed)}d=d.I(!0);a.S.put(b.toString(),d,function(d){a.f("transaction put response",{path:b.toString(),status:d});var e=[];if("ok"===d){d=[];for(f=0;f<c.length;f++){c[f].status=3;e=e.concat(kh(a.N,c[f].xa));if(c[f].H){var g=c[f].fd,k=new R(a,c[f].path);d.push(q(c[f].H,
null,null,!0,new D(g,k,L)))}c[f].Xd()}Mh(a,Uc(a.lc,b));Lh(a);hf(a.$,b,e);for(f=0;f<d.length;f++)Cb(d[f])}else{if("datastale"===d)for(f=0;f<c.length;f++)c[f].status=4===c[f].status?5:1;else for(z("transaction at "+b.toString()+" failed: "+d),f=0;f<c.length;f++)c[f].status=5,c[f].$d=d;Dh(a,b)}},e)}function Dh(a,b){var c=Ph(a,b),d=c.path(),c=Nh(a,c);Qh(a,c,d);return d}
function Qh(a,b,c){if(0!==b.length){for(var d=[],e=[],f=Ja(b,function(a){return a.xa}),g=0;g<b.length;g++){var k=b[g],l=V(c,k.path),n=!1,u;y(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null.");if(5===k.status)n=!0,u=k.$d,e=e.concat(kh(a.N,k.xa,!0));else if(1===k.status)if(25<=k.xf)n=!0,u="maxretry",e=e.concat(kh(a.N,k.xa,!0));else{var x=a.N.pa(k.path,f)||M;k.dd=x;var E=b[g].update(x.I());m(E)?(Sb("transaction failed: Data returned ",E),l=O(E),"object"===typeof E&&null!=E&&s(E,
".priority")||(l=l.Z(x.L())),x=k.xa,E=Ch(a),E=Uf(l,E),k.ed=l,k.fd=E,k.xa=a.vd++,Oa(f,x),e=e.concat(hh(a.N,k.path,E,k.xa,k.Ve)),e=e.concat(kh(a.N,x,!0))):(n=!0,u="nodata",e=e.concat(kh(a.N,k.xa,!0)))}hf(a.$,c,e);e=[];n&&(b[g].status=3,setTimeout(b[g].Xd,Math.floor(0)),b[g].H&&("nodata"===u?(k=new R(a,b[g].path),d.push(q(b[g].H,null,null,!1,new D(b[g].dd,k,L)))):d.push(q(b[g].H,null,Error(u),!1,null))))}Mh(a,a.lc);for(g=0;g<d.length;g++)Cb(d[g]);Lh(a)}}
function Ph(a,b){for(var c,d=a.lc;null!==(c=I(b))&&null===d.za();)d=Uc(d,c),b=T(b);return d}function Nh(a,b){var c=[];Rh(a,b,c);c.sort(function(a,b){return a.qf-b.qf});return c}function Rh(a,b,c){var d=b.za();if(null!==d)for(var e=0;e<d.length;e++)c.push(d[e]);b.U(function(b){Rh(a,b,c)})}function Mh(a,b){var c=b.za();if(c){for(var d=0,e=0;e<c.length;e++)3!==c[e].status&&(c[d]=c[e],d++);c.length=d;Vc(b,0<c.length?c:null)}b.U(function(b){Mh(a,b)})}
function Gh(a,b){var c=Ph(a,b).path(),d=Uc(a.lc,b);Yc(d,function(b){Sh(a,b)});Sh(a,d);Xc(d,function(b){Sh(a,b)});return c}
function Sh(a,b){var c=b.za();if(null!==c){for(var d=[],e=[],f=-1,g=0;g<c.length;g++)4!==c[g].status&&(2===c[g].status?(y(f===g-1,"All SENT items should be at beginning of queue."),f=g,c[g].status=4,c[g].$d="set"):(y(1===c[g].status,"Unexpected transaction status in abort"),c[g].Xd(),e=e.concat(kh(a.N,c[g].xa,!0)),c[g].H&&d.push(q(c[g].H,null,Error("set"),!1,null))));-1===f?Vc(b,null):c.length=f+1;hf(a.$,b.path(),e);for(g=0;g<d.length;g++)Cb(d[g])}};function Th(){this.ec={}}ca(Th);Th.prototype.pb=function(){for(var a in this.ec)this.ec[a].pb()};Th.prototype.interrupt=Th.prototype.pb;Th.prototype.hc=function(){for(var a in this.ec)this.ec[a].hc()};Th.prototype.resume=Th.prototype.hc;function Uh(a){var b=this;this.rc=a;this.Sd="*";xf()?this.Hc=this.od=of():(this.Hc=window.opener,this.od=window);if(!b.Hc)throw"Unable to find relay frame";pf(this.od,"message",q(this.$b,this));pf(this.od,"message",q(this.nf,this));try{Vh(this,{a:"ready"})}catch(c){pf(this.Hc,"load",function(){Vh(b,{a:"ready"})})}pf(window,"unload",q(this.jg,this))}function Vh(a,b){b=r(b);xf()?a.Hc.doPost(b,a.Sd):a.Hc.postMessage(b,a.Sd)}
Uh.prototype.$b=function(a){var b=this,c;try{c=ta(a.data)}catch(d){}c&&"request"===c.a&&(qf(window,"message",this.$b),this.Sd=a.origin,this.rc&&setTimeout(function(){b.rc(b.Sd,c.d,function(a,c){b.Mf=!c;b.rc=void 0;Vh(b,{a:"response",d:a,forceKeepWindowOpen:c})})},0))};Uh.prototype.jg=function(){try{qf(this.od,"message",this.nf)}catch(a){}this.rc&&(Vh(this,{a:"error",d:"unknown closed window"}),this.rc=void 0);try{window.close()}catch(b){}};Uh.prototype.nf=function(a){if(this.Mf&&"die"===a.data)try{window.close()}catch(b){}};var Y={Xf:function(){je=ae=!0}};Y.forceLongPolling=Y.Xf;Y.Yf=function(){ke=!0};Y.forceWebSockets=Y.Yf;Y.wg=function(a,b){a.k.S.Oe=b};Y.setSecurityDebugCallback=Y.wg;Y.Qe=function(a,b){a.k.Qe(b)};Y.stats=Y.Qe;Y.Re=function(a,b){a.k.Re(b)};Y.statsIncrementCounter=Y.Re;Y.gd=function(a){return a.k.gd};Y.dataUpdateCount=Y.gd;Y.ag=function(a,b){a.k.te=b};Y.interceptServerData=Y.ag;Y.gg=function(a){new Uh(a)};Y.onPopupOpen=Y.gg;Y.ug=function(a){jf=a};Y.setAuthenticationServer=Y.ug;function Z(a,b){this.Rc=a;this.Ea=b}Z.prototype.cancel=function(a){F("Firebase.onDisconnect().cancel",0,1,arguments.length);H("Firebase.onDisconnect().cancel",1,a,!0);this.Rc.Fe(this.Ea,a||null)};Z.prototype.cancel=Z.prototype.cancel;Z.prototype.remove=function(a){F("Firebase.onDisconnect().remove",0,1,arguments.length);Zb("Firebase.onDisconnect().remove",this.Ea);H("Firebase.onDisconnect().remove",1,a,!0);Hh(this.Rc,this.Ea,null,a)};Z.prototype.remove=Z.prototype.remove;
Z.prototype.set=function(a,b){F("Firebase.onDisconnect().set",1,2,arguments.length);Zb("Firebase.onDisconnect().set",this.Ea);Rb("Firebase.onDisconnect().set",a,!1);H("Firebase.onDisconnect().set",2,b,!0);Hh(this.Rc,this.Ea,a,b)};Z.prototype.set=Z.prototype.set;
Z.prototype.Bb=function(a,b,c){F("Firebase.onDisconnect().setWithPriority",2,3,arguments.length);Zb("Firebase.onDisconnect().setWithPriority",this.Ea);Rb("Firebase.onDisconnect().setWithPriority",a,!1);Vb("Firebase.onDisconnect().setWithPriority",2,b);H("Firebase.onDisconnect().setWithPriority",3,c,!0);Ih(this.Rc,this.Ea,a,b,c)};Z.prototype.setWithPriority=Z.prototype.Bb;
Z.prototype.update=function(a,b){F("Firebase.onDisconnect().update",1,2,arguments.length);Zb("Firebase.onDisconnect().update",this.Ea);if(ea(a)){for(var c={},d=0;d<a.length;++d)c[""+d]=a[d];a=c;z("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ub("Firebase.onDisconnect().update",a);H("Firebase.onDisconnect().update",2,b,!0);Jh(this.Rc,
this.Ea,a,b)};Z.prototype.update=Z.prototype.update;var $={};$.nc=Je;$.DataConnection=$.nc;Je.prototype.yg=function(a,b){this.Ca("q",{p:a},b)};$.nc.prototype.simpleListen=$.nc.prototype.yg;Je.prototype.Sf=function(a,b){this.Ca("echo",{d:a},b)};$.nc.prototype.echo=$.nc.prototype.Sf;Je.prototype.interrupt=Je.prototype.pb;$.Df=ue;$.RealTimeConnection=$.Df;ue.prototype.sendRequest=ue.prototype.Ca;ue.prototype.close=ue.prototype.close;
$.$f=function(a){var b=Je.prototype.put;Je.prototype.put=function(c,d,e,f){m(f)&&(f=a());b.call(this,c,d,e,f)};return function(){Je.prototype.put=b}};$.hijackHash=$.$f;$.Cf=Aa;$.ConnectionTarget=$.Cf;$.Fa=function(a){return a.Fa()};$.queryIdentifier=$.Fa;$.bg=function(a){return a.k.S.Aa};$.listens=$.bg;var Wh=function(){var a=0,b=[];return function(c){var d=c===a;a=c;for(var e=Array(8),f=7;0<=f;f--)e[f]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(c%64),c=Math.floor(c/64);y(0===c,"Cannot push at time == 0");c=e.join("");if(d){for(f=11;0<=f&&63===b[f];f--)b[f]=0;b[f]++}else for(f=0;12>f;f++)b[f]=Math.floor(64*Math.random());for(f=0;12>f;f++)c+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(b[f]);y(20===c.length,"NextPushId: Length should be 20.");
return c}}();function R(a,b){var c,d,e;if(a instanceof zh)c=a,d=b;else{F("new Firebase",1,2,arguments.length);d=rb(arguments[0]);c=d.Ag;"firebase"===d.domain&&qb(d.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead");c||qb("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com");d.Ab||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&z("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");
c=new Aa(d.host,d.Ab,c,"ws"===d.scheme||"wss"===d.scheme);d=new S(d.Pc);e=d.toString();var f;!(f=!p(c.host)||0===c.host.length||!Pb(c.tb))&&(f=0!==e.length)&&(e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),f=!(p(e)&&0!==e.length&&!Ob.test(e)));if(f)throw Error(G("new Firebase",1,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".');if(b)if(b instanceof Th)e=b;else if(p(b))e=Th.Nb(),c.Dd=b;else throw Error("Expected a valid Firebase.Context for second argument to new Firebase()");
else e=Th.Nb();f=c.toString();var g=t(e.ec,f);g||(g=new zh(c),e.ec[f]=g);c=g}Q.call(this,c,d,Fc,!1)}ma(R,Q);var Xh=R,Yh=["Firebase"],Zh=aa;Yh[0]in Zh||!Zh.execScript||Zh.execScript("var "+Yh[0]);for(var $h;Yh.length&&($h=Yh.shift());)!Yh.length&&m(Xh)?Zh[$h]=Xh:Zh=Zh[$h]?Zh[$h]:Zh[$h]={};R.prototype.name=function(){z("Firebase.name() being deprecated. Please use Firebase.key() instead.");F("Firebase.name",0,0,arguments.length);return this.key()};R.prototype.name=R.prototype.name;
R.prototype.key=function(){F("Firebase.key",0,0,arguments.length);return this.path.e()?null:Rc(this.path)};R.prototype.key=R.prototype.key;R.prototype.o=function(a){F("Firebase.child",1,1,arguments.length);if(ga(a))a=String(a);else if(!(a instanceof S))if(null===I(this.path)){var b=a;b&&(b=b.replace(/^\/*\.info(\/|$)/,"/"));Yb("Firebase.child",b)}else Yb("Firebase.child",a);return new R(this.k,this.path.o(a))};R.prototype.child=R.prototype.o;
R.prototype.parent=function(){F("Firebase.parent",0,0,arguments.length);var a=this.path.parent();return null===a?null:new R(this.k,a)};R.prototype.parent=R.prototype.parent;R.prototype.root=function(){F("Firebase.ref",0,0,arguments.length);for(var a=this;null!==a.parent();)a=a.parent();return a};R.prototype.root=R.prototype.root;
R.prototype.toString=function(){F("Firebase.toString",0,0,arguments.length);var a;if(null===this.parent())a=this.k.toString();else{a=this.parent().toString()+"/";var b=this.key();a+=encodeURIComponent(String(b))}return a};R.prototype.toString=R.prototype.toString;R.prototype.set=function(a,b){F("Firebase.set",1,2,arguments.length);Zb("Firebase.set",this.path);Rb("Firebase.set",a,!1);H("Firebase.set",2,b,!0);this.k.Bb(this.path,a,null,b||null)};R.prototype.set=R.prototype.set;
R.prototype.update=function(a,b){F("Firebase.update",1,2,arguments.length);Zb("Firebase.update",this.path);if(ea(a)){for(var c={},d=0;d<a.length;++d)c[""+d]=a[d];a=c;z("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ub("Firebase.update",a);H("Firebase.update",2,b,!0);if(s(a,".priority"))throw Error("update() does not currently support updating .priority.");
this.k.update(this.path,a,b||null)};R.prototype.update=R.prototype.update;R.prototype.Bb=function(a,b,c){F("Firebase.setWithPriority",2,3,arguments.length);Zb("Firebase.setWithPriority",this.path);Rb("Firebase.setWithPriority",a,!1);Vb("Firebase.setWithPriority",2,b);H("Firebase.setWithPriority",3,c,!0);if(".length"===this.key()||".keys"===this.key())throw"Firebase.setWithPriority failed: "+this.key()+" is a read-only object.";this.k.Bb(this.path,a,b,c||null)};R.prototype.setWithPriority=R.prototype.Bb;
R.prototype.remove=function(a){F("Firebase.remove",0,1,arguments.length);Zb("Firebase.remove",this.path);H("Firebase.remove",1,a,!0);this.set(null,a)};R.prototype.remove=R.prototype.remove;
R.prototype.transaction=function(a,b,c){F("Firebase.transaction",1,3,arguments.length);Zb("Firebase.transaction",this.path);H("Firebase.transaction",1,a,!1);H("Firebase.transaction",2,b,!0);if(m(c)&&"boolean"!=typeof c)throw Error(G("Firebase.transaction",3,!0)+"must be a boolean.");if(".length"===this.key()||".keys"===this.key())throw"Firebase.transaction failed: "+this.key()+" is a read-only object.";"undefined"===typeof c&&(c=!0);Kh(this.k,this.path,a,b||null,c)};R.prototype.transaction=R.prototype.transaction;
R.prototype.vg=function(a,b){F("Firebase.setPriority",1,2,arguments.length);Zb("Firebase.setPriority",this.path);Vb("Firebase.setPriority",1,a);H("Firebase.setPriority",2,b,!0);this.k.Bb(this.path.o(".priority"),a,null,b)};R.prototype.setPriority=R.prototype.vg;R.prototype.push=function(a,b){F("Firebase.push",0,2,arguments.length);Zb("Firebase.push",this.path);Rb("Firebase.push",a,!0);H("Firebase.push",2,b,!0);var c=Bh(this.k),c=Wh(c),c=this.o(c);"undefined"!==typeof a&&null!==a&&c.set(a,b);return c};
R.prototype.push=R.prototype.push;R.prototype.fb=function(){Zb("Firebase.onDisconnect",this.path);return new Z(this.k,this.path)};R.prototype.onDisconnect=R.prototype.fb;R.prototype.Q=function(a,b,c){z("FirebaseRef.auth() being deprecated. Please use FirebaseRef.authWithCustomToken() instead.");F("Firebase.auth",1,3,arguments.length);$b("Firebase.auth",a);H("Firebase.auth",2,b,!0);H("Firebase.auth",3,b,!0);Lf(this.k.Q,a,{},{remember:"none"},b,c)};R.prototype.auth=R.prototype.Q;
R.prototype.Ue=function(a){F("Firebase.unauth",0,1,arguments.length);H("Firebase.unauth",1,a,!0);Mf(this.k.Q,a)};R.prototype.unauth=R.prototype.Ue;R.prototype.ne=function(){F("Firebase.getAuth",0,0,arguments.length);return this.k.Q.ne()};R.prototype.getAuth=R.prototype.ne;R.prototype.fg=function(a,b){F("Firebase.onAuth",1,2,arguments.length);H("Firebase.onAuth",1,a,!1);Mb("Firebase.onAuth",2,b);this.k.Q.vb("auth_status",a,b)};R.prototype.onAuth=R.prototype.fg;
R.prototype.eg=function(a,b){F("Firebase.offAuth",1,2,arguments.length);H("Firebase.offAuth",1,a,!1);Mb("Firebase.offAuth",2,b);this.k.Q.Zb("auth_status",a,b)};R.prototype.offAuth=R.prototype.eg;R.prototype.Hf=function(a,b,c){F("Firebase.authWithCustomToken",2,3,arguments.length);$b("Firebase.authWithCustomToken",a);H("Firebase.authWithCustomToken",2,b,!1);J("Firebase.authWithCustomToken",3,c,!0);Lf(this.k.Q,a,{},c||{},b)};R.prototype.authWithCustomToken=R.prototype.Hf;
R.prototype.If=function(a,b,c){F("Firebase.authWithOAuthPopup",2,3,arguments.length);ac("Firebase.authWithOAuthPopup",1,a);H("Firebase.authWithOAuthPopup",2,b,!1);J("Firebase.authWithOAuthPopup",3,c,!0);Qf(this.k.Q,a,c,b)};R.prototype.authWithOAuthPopup=R.prototype.If;
R.prototype.Jf=function(a,b,c){F("Firebase.authWithOAuthRedirect",2,3,arguments.length);ac("Firebase.authWithOAuthRedirect",1,a);H("Firebase.authWithOAuthRedirect",2,b,!1);J("Firebase.authWithOAuthRedirect",3,c,!0);var d=this.k.Q;Of(d);var e=[Ef],f=mf(c);"anonymous"===a||"firebase"===a?B(b,X("TRANSPORT_UNAVAILABLE")):(v.set("redirect_client_options",f.cd),Pf(d,e,"/auth/"+a,f,b))};R.prototype.authWithOAuthRedirect=R.prototype.Jf;
R.prototype.Kf=function(a,b,c,d){F("Firebase.authWithOAuthToken",3,4,arguments.length);ac("Firebase.authWithOAuthToken",1,a);H("Firebase.authWithOAuthToken",3,c,!1);J("Firebase.authWithOAuthToken",4,d,!0);p(b)?(ac("Firebase.authWithOAuthToken",2,b),Nf(this.k.Q,a+"/token",{access_token:b},d,c)):(J("Firebase.authWithOAuthToken",2,b,!1),Nf(this.k.Q,a+"/token",b,d,c))};R.prototype.authWithOAuthToken=R.prototype.Kf;
R.prototype.Gf=function(a,b){F("Firebase.authAnonymously",1,2,arguments.length);H("Firebase.authAnonymously",1,a,!1);J("Firebase.authAnonymously",2,b,!0);Nf(this.k.Q,"anonymous",{},b,a)};R.prototype.authAnonymously=R.prototype.Gf;
R.prototype.Lf=function(a,b,c){F("Firebase.authWithPassword",2,3,arguments.length);J("Firebase.authWithPassword",1,a,!1);K("Firebase.authWithPassword",a,"email");K("Firebase.authWithPassword",a,"password");H("Firebase.authAnonymously",2,b,!1);J("Firebase.authAnonymously",3,c,!0);Nf(this.k.Q,"password",a,c,b)};R.prototype.authWithPassword=R.prototype.Lf;
R.prototype.je=function(a,b){F("Firebase.createUser",2,2,arguments.length);J("Firebase.createUser",1,a,!1);K("Firebase.createUser",a,"email");K("Firebase.createUser",a,"password");H("Firebase.createUser",2,b,!1);this.k.Q.je(a,b)};R.prototype.createUser=R.prototype.je;R.prototype.Le=function(a,b){F("Firebase.removeUser",2,2,arguments.length);J("Firebase.removeUser",1,a,!1);K("Firebase.removeUser",a,"email");K("Firebase.removeUser",a,"password");H("Firebase.removeUser",2,b,!1);this.k.Q.Le(a,b)};
R.prototype.removeUser=R.prototype.Le;R.prototype.ee=function(a,b){F("Firebase.changePassword",2,2,arguments.length);J("Firebase.changePassword",1,a,!1);K("Firebase.changePassword",a,"email");K("Firebase.changePassword",a,"oldPassword");K("Firebase.changePassword",a,"newPassword");H("Firebase.changePassword",2,b,!1);this.k.Q.ee(a,b)};R.prototype.changePassword=R.prototype.ee;
R.prototype.de=function(a,b){F("Firebase.changeEmail",2,2,arguments.length);J("Firebase.changeEmail",1,a,!1);K("Firebase.changeEmail",a,"oldEmail");K("Firebase.changeEmail",a,"newEmail");K("Firebase.changeEmail",a,"password");H("Firebase.changeEmail",2,b,!1);this.k.Q.de(a,b)};R.prototype.changeEmail=R.prototype.de;
R.prototype.Me=function(a,b){F("Firebase.resetPassword",2,2,arguments.length);J("Firebase.resetPassword",1,a,!1);K("Firebase.resetPassword",a,"email");H("Firebase.resetPassword",2,b,!1);this.k.Q.Me(a,b)};R.prototype.resetPassword=R.prototype.Me;R.goOffline=function(){F("Firebase.goOffline",0,0,arguments.length);Th.Nb().pb()};R.goOnline=function(){F("Firebase.goOnline",0,0,arguments.length);Th.Nb().hc()};
function nb(a,b){y(!b||!0===a||!1===a,"Can't turn on custom loggers persistently.");!0===a?("undefined"!==typeof console&&("function"===typeof console.log?lb=q(console.log,console):"object"===typeof console.log&&(lb=function(a){console.log(a)})),b&&v.set("logging_enabled",!0)):a?lb=a:(lb=null,v.remove("logging_enabled"))}R.enableLogging=nb;R.ServerValue={TIMESTAMP:{".sv":"timestamp"}};R.SDK_VERSION="2.1.2";R.INTERNAL=Y;R.Context=Th;R.TEST_ACCESS=$;})();
module.exports = Firebase;

},{}],9:[function(require,module,exports){
/*!
 *  howler.js v1.1.25
 *  howlerjs.com
 *
 *  (c) 2013-2014, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */

(function() {
  // setup
  var cache = {};

  // setup the audio context
  var ctx = null,
    usingWebAudio = true,
    noAudio = false;
  try {
    if (typeof AudioContext !== 'undefined') {
      ctx = new AudioContext();
    } else if (typeof webkitAudioContext !== 'undefined') {
      ctx = new webkitAudioContext();
    } else {
      usingWebAudio = false;
    }
  } catch(e) {
    usingWebAudio = false;
  }

  if (!usingWebAudio) {
    if (typeof Audio !== 'undefined') {
      try {
        new Audio();
      } catch(e) {
        noAudio = true;
      }
    } else {
      noAudio = true;
    }
  }

  // create a master gain node
  if (usingWebAudio) {
    var masterGain = (typeof ctx.createGain === 'undefined') ? ctx.createGainNode() : ctx.createGain();
    masterGain.gain.value = 1;
    masterGain.connect(ctx.destination);
  }

  // create global controller
  var HowlerGlobal = function(codecs) {
    this._volume = 1;
    this._muted = false;
    this.usingWebAudio = usingWebAudio;
    this.ctx = ctx;
    this.noAudio = noAudio;
    this._howls = [];
    this._codecs = codecs;
    this.iOSAutoEnable = true;
  };
  HowlerGlobal.prototype = {
    /**
     * Get/set the global volume for all sounds.
     * @param  {Float} vol Volume from 0.0 to 1.0.
     * @return {Howler/Float}     Returns self or current volume.
     */
    volume: function(vol) {
      var self = this;

      // make sure volume is a number
      vol = parseFloat(vol);

      if (vol >= 0 && vol <= 1) {
        self._volume = vol;

        if (usingWebAudio) {
          masterGain.gain.value = vol;
        }

        // loop through cache and change volume of all nodes that are using HTML5 Audio
        for (var key in self._howls) {
          if (self._howls.hasOwnProperty(key) && self._howls[key]._webAudio === false) {
            // loop through the audio nodes
            for (var i=0; i<self._howls[key]._audioNode.length; i++) {
              self._howls[key]._audioNode[i].volume = self._howls[key]._volume * self._volume;
            }
          }
        }

        return self;
      }

      // return the current global volume
      return (usingWebAudio) ? masterGain.gain.value : self._volume;
    },

    /**
     * Mute all sounds.
     * @return {Howler}
     */
    mute: function() {
      this._setMuted(true);

      return this;
    },

    /**
     * Unmute all sounds.
     * @return {Howler}
     */
    unmute: function() {
      this._setMuted(false);

      return this;
    },

    /**
     * Handle muting and unmuting globally.
     * @param  {Boolean} muted Is muted or not.
     */
    _setMuted: function(muted) {
      var self = this;

      self._muted = muted;

      if (usingWebAudio) {
        masterGain.gain.value = muted ? 0 : self._volume;
      }

      for (var key in self._howls) {
        if (self._howls.hasOwnProperty(key) && self._howls[key]._webAudio === false) {
          // loop through the audio nodes
          for (var i=0; i<self._howls[key]._audioNode.length; i++) {
            self._howls[key]._audioNode[i].muted = muted;
          }
        }
      }
    },

    /**
     * Check for codec support.
     * @param  {String} ext Audio file extention.
     * @return {Boolean}
     */
    codecs: function(ext) {
      return this._codecs[ext];
    },

    /**
     * iOS will only allow audio to be played after a user interaction.
     * Attempt to automatically unlock audio on the first user interaction.
     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/
     * @return {Howler}
     */
    _enableiOSAudio: function() {
      var self = this;

      // only run this on iOS if audio isn't already eanbled
      if (ctx && (self._iOSEnabled || !/iPhone|iPad|iPod/i.test(navigator.userAgent))) {
        return;
      }

      self._iOSEnabled = false;

      // call this method on touch start to create and play a buffer,
      // then check if the audio actually played to determine if
      // audio has now been unlocked on iOS
      var unlock = function() {
        // create an empty buffer
        var buffer = ctx.createBuffer(1, 1, 22050);
        var source = ctx.createBufferSource();
        source.buffer = buffer;
        source.connect(ctx.destination);

        // play the empty buffer
        if (typeof source.start === 'undefined') {
          source.noteOn(0);
        } else {
          source.start(0);
        }

        // setup a timeout to check that we are unlocked on the next event loop
        setTimeout(function() {
          if ((source.playbackState === source.PLAYING_STATE || source.playbackState === source.FINISHED_STATE)) {
            // update the unlocked state and prevent this check from happening again
            self._iOSEnabled = true;
            self.iOSAutoEnable = false;

            // remove the touch start listener
            window.removeEventListener('touchstart', unlock, false);
          }
        }, 0);
      };

      // setup a touch start listener to attempt an unlock in
      window.addEventListener('touchstart', unlock, false);

      return self;
    }
  };

  // check for browser codec support
  var audioTest = null;
  var codecs = {};
  if (!noAudio) {
    audioTest = new Audio();
    codecs = {
      mp3: !!audioTest.canPlayType('audio/mpeg;').replace(/^no$/, ''),
      opus: !!audioTest.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, ''),
      ogg: !!audioTest.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ''),
      wav: !!audioTest.canPlayType('audio/wav; codecs="1"').replace(/^no$/, ''),
      aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),
      m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),
      mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),
      weba: !!audioTest.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, '')
    };
  }

  // allow access to the global audio controls
  var Howler = new HowlerGlobal(codecs);

  // setup the audio object
  var Howl = function(o) {
    var self = this;

    // setup the defaults
    self._autoplay = o.autoplay || false;
    self._buffer = o.buffer || false;
    self._duration = o.duration || 0;
    self._format = o.format || null;
    self._loop = o.loop || false;
    self._loaded = false;
    self._sprite = o.sprite || {};
    self._src = o.src || '';
    self._pos3d = o.pos3d || [0, 0, -0.5];
    self._volume = o.volume !== undefined ? o.volume : 1;
    self._urls = o.urls || [];
    self._rate = o.rate || 1;

    // allow forcing of a specific panningModel ('equalpower' or 'HRTF'),
    // if none is specified, defaults to 'equalpower' and switches to 'HRTF'
    // if 3d sound is used
    self._model = o.model || null;

    // setup event functions
    self._onload = [o.onload || function() {}];
    self._onloaderror = [o.onloaderror || function() {}];
    self._onend = [o.onend || function() {}];
    self._onpause = [o.onpause || function() {}];
    self._onplay = [o.onplay || function() {}];

    self._onendTimer = [];

    // Web Audio or HTML5 Audio?
    self._webAudio = usingWebAudio && !self._buffer;

    // check if we need to fall back to HTML5 Audio
    self._audioNode = [];
    if (self._webAudio) {
      self._setupAudioNode();
    }

    // automatically try to enable audio on iOS
    if (typeof ctx !== 'undefined' && ctx && Howler.iOSAutoEnable) {
      Howler._enableiOSAudio();
    }

    // add this to an array of Howl's to allow global control
    Howler._howls.push(self);

    // load the track
    self.load();
  };

  // setup all of the methods
  Howl.prototype = {
    /**
     * Load an audio file.
     * @return {Howl}
     */
    load: function() {
      var self = this,
        url = null;

      // if no audio is available, quit immediately
      if (noAudio) {
        self.on('loaderror');
        return;
      }

      // loop through source URLs and pick the first one that is compatible
      for (var i=0; i<self._urls.length; i++) {
        var ext, urlItem;

        if (self._format) {
          // use specified audio format if available
          ext = self._format;
        } else {
          // figure out the filetype (whether an extension or base64 data)
          urlItem = self._urls[i];
          ext = /^data:audio\/([^;,]+);/i.exec(urlItem);
          if (!ext) {
            ext = /\.([^.]+)$/.exec(urlItem.split('?', 1)[0]);
          }

          if (ext) {
            ext = ext[1].toLowerCase();
          } else {
            self.on('loaderror');
            return;
          }
        }

        if (codecs[ext]) {
          url = self._urls[i];
          break;
        }
      }

      if (!url) {
        self.on('loaderror');
        return;
      }

      self._src = url;

      if (self._webAudio) {
        loadBuffer(self, url);
      } else {
        var newNode = new Audio();

        // listen for errors with HTML5 audio (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror)
        newNode.addEventListener('error', function () {
          if (newNode.error && newNode.error.code === 4) {
            HowlerGlobal.noAudio = true;
          }

          self.on('loaderror', {type: newNode.error ? newNode.error.code : 0});
        }, false);

        self._audioNode.push(newNode);

        // setup the new audio node
        newNode.src = url;
        newNode._pos = 0;
        newNode.preload = 'auto';
        newNode.volume = (Howler._muted) ? 0 : self._volume * Howler.volume();

        // setup the event listener to start playing the sound
        // as soon as it has buffered enough
        var listener = function() {
          // round up the duration when using HTML5 Audio to account for the lower precision
          self._duration = Math.ceil(newNode.duration * 10) / 10;

          // setup a sprite if none is defined
          if (Object.getOwnPropertyNames(self._sprite).length === 0) {
            self._sprite = {_default: [0, self._duration * 1000]};
          }

          if (!self._loaded) {
            self._loaded = true;
            self.on('load');
          }

          if (self._autoplay) {
            self.play();
          }

          // clear the event listener
          newNode.removeEventListener('canplaythrough', listener, false);
        };
        newNode.addEventListener('canplaythrough', listener, false);
        newNode.load();
      }

      return self;
    },

    /**
     * Get/set the URLs to be pulled from to play in this source.
     * @param  {Array} urls  Arry of URLs to load from
     * @return {Howl}        Returns self or the current URLs
     */
    urls: function(urls) {
      var self = this;

      if (urls) {
        self.stop();
        self._urls = (typeof urls === 'string') ? [urls] : urls;
        self._loaded = false;
        self.load();

        return self;
      } else {
        return self._urls;
      }
    },

    /**
     * Play a sound from the current time (0 by default).
     * @param  {String}   sprite   (optional) Plays from the specified position in the sound sprite definition.
     * @param  {Function} callback (optional) Returns the unique playback id for this sound instance.
     * @return {Howl}
     */
    play: function(sprite, callback) {
      var self = this;

      // if no sprite was passed but a callback was, update the variables
      if (typeof sprite === 'function') {
        callback = sprite;
      }

      // use the default sprite if none is passed
      if (!sprite || typeof sprite === 'function') {
        sprite = '_default';
      }

      // if the sound hasn't been loaded, add it to the event queue
      if (!self._loaded) {
        self.on('load', function() {
          self.play(sprite, callback);
        });

        return self;
      }

      // if the sprite doesn't exist, play nothing
      if (!self._sprite[sprite]) {
        if (typeof callback === 'function') callback();
        return self;
      }

      // get the node to playback
      self._inactiveNode(function(node) {
        // persist the sprite being played
        node._sprite = sprite;

        // determine where to start playing from
        var pos = (node._pos > 0) ? node._pos : self._sprite[sprite][0] / 1000;

        // determine how long to play for
        var duration = 0;
        if (self._webAudio) {
          duration = self._sprite[sprite][1] / 1000 - node._pos;
          if (node._pos > 0) {
            pos = self._sprite[sprite][0] / 1000 + pos;
          }
        } else {
          duration = self._sprite[sprite][1] / 1000 - (pos - self._sprite[sprite][0] / 1000);
        }

        // determine if this sound should be looped
        var loop = !!(self._loop || self._sprite[sprite][2]);

        // set timer to fire the 'onend' event
        var soundId = (typeof callback === 'string') ? callback : Math.round(Date.now() * Math.random()) + '',
          timerId;
        (function() {
          var data = {
            id: soundId,
            sprite: sprite,
            loop: loop
          };
          timerId = setTimeout(function() {
            // if looping, restart the track
            if (!self._webAudio && loop) {
              self.stop(data.id).play(sprite, data.id);
            }

            // set web audio node to paused at end
            if (self._webAudio && !loop) {
              self._nodeById(data.id).paused = true;
              self._nodeById(data.id)._pos = 0;

              // clear the end timer
              self._clearEndTimer(data.id);
            }

            // end the track if it is HTML audio and a sprite
            if (!self._webAudio && !loop) {
              self.stop(data.id);
            }

            // fire ended event
            self.on('end', soundId);
          }, duration * 1000);

          // store the reference to the timer
          self._onendTimer.push({timer: timerId, id: data.id});
        })();

        if (self._webAudio) {
          var loopStart = self._sprite[sprite][0] / 1000,
            loopEnd = self._sprite[sprite][1] / 1000;

          // set the play id to this node and load into context
          node.id = soundId;
          node.paused = false;
          refreshBuffer(self, [loop, loopStart, loopEnd], soundId);
          self._playStart = ctx.currentTime;
          node.gain.value = self._volume;

          if (typeof node.bufferSource.start === 'undefined') {
            node.bufferSource.noteGrainOn(0, pos, duration);
          } else {
            node.bufferSource.start(0, pos, duration);
          }
        } else {
          if (node.readyState === 4 || !node.readyState && navigator.isCocoonJS) {
            node.readyState = 4;
            node.id = soundId;
            node.currentTime = pos;
            node.muted = Howler._muted || node.muted;
            node.volume = self._volume * Howler.volume();
            setTimeout(function() { node.play(); }, 0);
          } else {
            self._clearEndTimer(soundId);

            (function(){
              var sound = self,
                playSprite = sprite,
                fn = callback,
                newNode = node;
              var listener = function() {
                sound.play(playSprite, fn);

                // clear the event listener
                newNode.removeEventListener('canplaythrough', listener, false);
              };
              newNode.addEventListener('canplaythrough', listener, false);
            })();

            return self;
          }
        }

        // fire the play event and send the soundId back in the callback
        self.on('play');
        if (typeof callback === 'function') callback(soundId);

        return self;
      });

      return self;
    },

    /**
     * Pause playback and save the current position.
     * @param {String} id (optional) The play instance ID.
     * @return {Howl}
     */
    pause: function(id) {
      var self = this;

      // if the sound hasn't been loaded, add it to the event queue
      if (!self._loaded) {
        self.on('play', function() {
          self.pause(id);
        });

        return self;
      }

      // clear 'onend' timer
      self._clearEndTimer(id);

      var activeNode = (id) ? self._nodeById(id) : self._activeNode();
      if (activeNode) {
        activeNode._pos = self.pos(null, id);

        if (self._webAudio) {
          // make sure the sound has been created
          if (!activeNode.bufferSource || activeNode.paused) {
            return self;
          }

          activeNode.paused = true;
          if (typeof activeNode.bufferSource.stop === 'undefined') {
            activeNode.bufferSource.noteOff(0);
          } else {
            activeNode.bufferSource.stop(0);
          }
        } else {
          activeNode.pause();
        }
      }

      self.on('pause');

      return self;
    },

    /**
     * Stop playback and reset to start.
     * @param  {String} id  (optional) The play instance ID.
     * @return {Howl}
     */
    stop: function(id) {
      var self = this;

      // if the sound hasn't been loaded, add it to the event queue
      if (!self._loaded) {
        self.on('play', function() {
          self.stop(id);
        });

        return self;
      }

      // clear 'onend' timer
      self._clearEndTimer(id);

      var activeNode = (id) ? self._nodeById(id) : self._activeNode();
      if (activeNode) {
        activeNode._pos = 0;

        if (self._webAudio) {
          // make sure the sound has been created
          if (!activeNode.bufferSource || activeNode.paused) {
            return self;
          }

          activeNode.paused = true;

          if (typeof activeNode.bufferSource.stop === 'undefined') {
            activeNode.bufferSource.noteOff(0);
          } else {
            activeNode.bufferSource.stop(0);
          }
        } else if (!isNaN(activeNode.duration)) {
          activeNode.pause();
          activeNode.currentTime = 0;
        }
      }

      return self;
    },

    /**
     * Mute this sound.
     * @param  {String} id (optional) The play instance ID.
     * @return {Howl}
     */
    mute: function(id) {
      var self = this;

      // if the sound hasn't been loaded, add it to the event queue
      if (!self._loaded) {
        self.on('play', function() {
          self.mute(id);
        });

        return self;
      }

      var activeNode = (id) ? self._nodeById(id) : self._activeNode();
      if (activeNode) {
        if (self._webAudio) {
          activeNode.gain.value = 0;
        } else {
          activeNode.muted = true;
        }
      }

      return self;
    },

    /**
     * Unmute this sound.
     * @param  {String} id (optional) The play instance ID.
     * @return {Howl}
     */
    unmute: function(id) {
      var self = this;

      // if the sound hasn't been loaded, add it to the event queue
      if (!self._loaded) {
        self.on('play', function() {
          self.unmute(id);
        });

        return self;
      }

      var activeNode = (id) ? self._nodeById(id) : self._activeNode();
      if (activeNode) {
        if (self._webAudio) {
          activeNode.gain.value = self._volume;
        } else {
          activeNode.muted = false;
        }
      }

      return self;
    },

    /**
     * Get/set volume of this sound.
     * @param  {Float}  vol Volume from 0.0 to 1.0.
     * @param  {String} id  (optional) The play instance ID.
     * @return {Howl/Float}     Returns self or current volume.
     */
    volume: function(vol, id) {
      var self = this;

      // make sure volume is a number
      vol = parseFloat(vol);

      if (vol >= 0 && vol <= 1) {
        self._volume = vol;

        // if the sound hasn't been loaded, add it to the event queue
        if (!self._loaded) {
          self.on('play', function() {
            self.volume(vol, id);
          });

          return self;
        }

        var activeNode = (id) ? self._nodeById(id) : self._activeNode();
        if (activeNode) {
          if (self._webAudio) {
            activeNode.gain.value = vol;
          } else {
            activeNode.volume = vol * Howler.volume();
          }
        }

        return self;
      } else {
        return self._volume;
      }
    },

    /**
     * Get/set whether to loop the sound.
     * @param  {Boolean} loop To loop or not to loop, that is the question.
     * @return {Howl/Boolean}      Returns self or current looping value.
     */
    loop: function(loop) {
      var self = this;

      if (typeof loop === 'boolean') {
        self._loop = loop;

        return self;
      } else {
        return self._loop;
      }
    },

    /**
     * Get/set sound sprite definition.
     * @param  {Object} sprite Example: {spriteName: [offset, duration, loop]}
     *                @param {Integer} offset   Where to begin playback in milliseconds
     *                @param {Integer} duration How long to play in milliseconds
     *                @param {Boolean} loop     (optional) Set true to loop this sprite
     * @return {Howl}        Returns current sprite sheet or self.
     */
    sprite: function(sprite) {
      var self = this;

      if (typeof sprite === 'object') {
        self._sprite = sprite;

        return self;
      } else {
        return self._sprite;
      }
    },

    /**
     * Get/set the position of playback.
     * @param  {Float}  pos The position to move current playback to.
     * @param  {String} id  (optional) The play instance ID.
     * @return {Howl/Float}      Returns self or current playback position.
     */
    pos: function(pos, id) {
      var self = this;

      // if the sound hasn't been loaded, add it to the event queue
      if (!self._loaded) {
        self.on('load', function() {
          self.pos(pos);
        });

        return typeof pos === 'number' ? self : self._pos || 0;
      }

      // make sure we are dealing with a number for pos
      pos = parseFloat(pos);

      var activeNode = (id) ? self._nodeById(id) : self._activeNode();
      if (activeNode) {
        if (pos >= 0) {
          self.pause(id);
          activeNode._pos = pos;
          self.play(activeNode._sprite, id);

          return self;
        } else {
          return self._webAudio ? activeNode._pos + (ctx.currentTime - self._playStart) : activeNode.currentTime;
        }
      } else if (pos >= 0) {
        return self;
      } else {
        // find the first inactive node to return the pos for
        for (var i=0; i<self._audioNode.length; i++) {
          if (self._audioNode[i].paused && self._audioNode[i].readyState === 4) {
            return (self._webAudio) ? self._audioNode[i]._pos : self._audioNode[i].currentTime;
          }
        }
      }
    },

    /**
     * Get/set the 3D position of the audio source.
     * The most common usage is to set the 'x' position
     * to affect the left/right ear panning. Setting any value higher than
     * 1.0 will begin to decrease the volume of the sound as it moves further away.
     * NOTE: This only works with Web Audio API, HTML5 Audio playback
     * will not be affected.
     * @param  {Float}  x  The x-position of the playback from -1000.0 to 1000.0
     * @param  {Float}  y  The y-position of the playback from -1000.0 to 1000.0
     * @param  {Float}  z  The z-position of the playback from -1000.0 to 1000.0
     * @param  {String} id (optional) The play instance ID.
     * @return {Howl/Array}   Returns self or the current 3D position: [x, y, z]
     */
    pos3d: function(x, y, z, id) {
      var self = this;

      // set a default for the optional 'y' & 'z'
      y = (typeof y === 'undefined' || !y) ? 0 : y;
      z = (typeof z === 'undefined' || !z) ? -0.5 : z;

      // if the sound hasn't been loaded, add it to the event queue
      if (!self._loaded) {
        self.on('play', function() {
          self.pos3d(x, y, z, id);
        });

        return self;
      }

      if (x >= 0 || x < 0) {
        if (self._webAudio) {
          var activeNode = (id) ? self._nodeById(id) : self._activeNode();
          if (activeNode) {
            self._pos3d = [x, y, z];
            activeNode.panner.setPosition(x, y, z);
            activeNode.panner.panningModel = self._model || 'HRTF';
          }
        }
      } else {
        return self._pos3d;
      }

      return self;
    },

    /**
     * Fade a currently playing sound between two volumes.
     * @param  {Number}   from     The volume to fade from (0.0 to 1.0).
     * @param  {Number}   to       The volume to fade to (0.0 to 1.0).
     * @param  {Number}   len      Time in milliseconds to fade.
     * @param  {Function} callback (optional) Fired when the fade is complete.
     * @param  {String}   id       (optional) The play instance ID.
     * @return {Howl}
     */
    fade: function(from, to, len, callback, id) {
      var self = this,
        diff = Math.abs(from - to),
        dir = from > to ? 'down' : 'up',
        steps = diff / 0.01,
        stepTime = len / steps;

      // if the sound hasn't been loaded, add it to the event queue
      if (!self._loaded) {
        self.on('load', function() {
          self.fade(from, to, len, callback, id);
        });

        return self;
      }

      // set the volume to the start position
      self.volume(from, id);

      for (var i=1; i<=steps; i++) {
        (function() {
          var change = self._volume + (dir === 'up' ? 0.01 : -0.01) * i,
            vol = Math.round(1000 * change) / 1000,
            toVol = to;

          setTimeout(function() {
            self.volume(vol, id);

            if (vol === toVol) {
              if (callback) callback();
            }
          }, stepTime * i);
        })();
      }
    },

    /**
     * [DEPRECATED] Fade in the current sound.
     * @param  {Float}    to      Volume to fade to (0.0 to 1.0).
     * @param  {Number}   len     Time in milliseconds to fade.
     * @param  {Function} callback
     * @return {Howl}
     */
    fadeIn: function(to, len, callback) {
      return this.volume(0).play().fade(0, to, len, callback);
    },

    /**
     * [DEPRECATED] Fade out the current sound and pause when finished.
     * @param  {Float}    to       Volume to fade to (0.0 to 1.0).
     * @param  {Number}   len      Time in milliseconds to fade.
     * @param  {Function} callback
     * @param  {String}   id       (optional) The play instance ID.
     * @return {Howl}
     */
    fadeOut: function(to, len, callback, id) {
      var self = this;

      return self.fade(self._volume, to, len, function() {
        if (callback) callback();
        self.pause(id);

        // fire ended event
        self.on('end');
      }, id);
    },

    /**
     * Get an audio node by ID.
     * @return {Howl} Audio node.
     */
    _nodeById: function(id) {
      var self = this,
        node = self._audioNode[0];

      // find the node with this ID
      for (var i=0; i<self._audioNode.length; i++) {
        if (self._audioNode[i].id === id) {
          node = self._audioNode[i];
          break;
        }
      }

      return node;
    },

    /**
     * Get the first active audio node.
     * @return {Howl} Audio node.
     */
    _activeNode: function() {
      var self = this,
        node = null;

      // find the first playing node
      for (var i=0; i<self._audioNode.length; i++) {
        if (!self._audioNode[i].paused) {
          node = self._audioNode[i];
          break;
        }
      }

      // remove excess inactive nodes
      self._drainPool();

      return node;
    },

    /**
     * Get the first inactive audio node.
     * If there is none, create a new one and add it to the pool.
     * @param  {Function} callback Function to call when the audio node is ready.
     */
    _inactiveNode: function(callback) {
      var self = this,
        node = null;

      // find first inactive node to recycle
      for (var i=0; i<self._audioNode.length; i++) {
        if (self._audioNode[i].paused && self._audioNode[i].readyState === 4) {
          // send the node back for use by the new play instance
          callback(self._audioNode[i]);
          node = true;
          break;
        }
      }

      // remove excess inactive nodes
      self._drainPool();

      if (node) {
        return;
      }

      // create new node if there are no inactives
      var newNode;
      if (self._webAudio) {
        newNode = self._setupAudioNode();
        callback(newNode);
      } else {
        self.load();
        newNode = self._audioNode[self._audioNode.length - 1];

        // listen for the correct load event and fire the callback
        var listenerEvent = navigator.isCocoonJS ? 'canplaythrough' : 'loadedmetadata';
        var listener = function() {
          newNode.removeEventListener(listenerEvent, listener, false);
          callback(newNode);
        };
        newNode.addEventListener(listenerEvent, listener, false);
      }
    },

    /**
     * If there are more than 5 inactive audio nodes in the pool, clear out the rest.
     */
    _drainPool: function() {
      var self = this,
        inactive = 0,
        i;

      // count the number of inactive nodes
      for (i=0; i<self._audioNode.length; i++) {
        if (self._audioNode[i].paused) {
          inactive++;
        }
      }

      // remove excess inactive nodes
      for (i=self._audioNode.length-1; i>=0; i--) {
        if (inactive <= 5) {
          break;
        }

        if (self._audioNode[i].paused) {
          // disconnect the audio source if using Web Audio
          if (self._webAudio) {
            self._audioNode[i].disconnect(0);
          }

          inactive--;
          self._audioNode.splice(i, 1);
        }
      }
    },

    /**
     * Clear 'onend' timeout before it ends.
     * @param  {String} soundId  The play instance ID.
     */
    _clearEndTimer: function(soundId) {
      var self = this,
        index = 0;

      // loop through the timers to find the one associated with this sound
      for (var i=0; i<self._onendTimer.length; i++) {
        if (self._onendTimer[i].id === soundId) {
          index = i;
          break;
        }
      }

      var timer = self._onendTimer[index];
      if (timer) {
        clearTimeout(timer.timer);
        self._onendTimer.splice(index, 1);
      }
    },

    /**
     * Setup the gain node and panner for a Web Audio instance.
     * @return {Object} The new audio node.
     */
    _setupAudioNode: function() {
      var self = this,
        node = self._audioNode,
        index = self._audioNode.length;

      // create gain node
      node[index] = (typeof ctx.createGain === 'undefined') ? ctx.createGainNode() : ctx.createGain();
      node[index].gain.value = self._volume;
      node[index].paused = true;
      node[index]._pos = 0;
      node[index].readyState = 4;
      node[index].connect(masterGain);

      // create the panner
      node[index].panner = ctx.createPanner();
      node[index].panner.panningModel = self._model || 'equalpower';
      node[index].panner.setPosition(self._pos3d[0], self._pos3d[1], self._pos3d[2]);
      node[index].panner.connect(node[index]);

      return node[index];
    },

    /**
     * Call/set custom events.
     * @param  {String}   event Event type.
     * @param  {Function} fn    Function to call.
     * @return {Howl}
     */
    on: function(event, fn) {
      var self = this,
        events = self['_on' + event];

      if (typeof fn === 'function') {
        events.push(fn);
      } else {
        for (var i=0; i<events.length; i++) {
          if (fn) {
            events[i].call(self, fn);
          } else {
            events[i].call(self);
          }
        }
      }

      return self;
    },

    /**
     * Remove a custom event.
     * @param  {String}   event Event type.
     * @param  {Function} fn    Listener to remove.
     * @return {Howl}
     */
    off: function(event, fn) {
      var self = this,
        events = self['_on' + event],
        fnString = fn ? fn.toString() : null;

      if (fnString) {
        // loop through functions in the event for comparison
        for (var i=0; i<events.length; i++) {
          if (fnString === events[i].toString()) {
            events.splice(i, 1);
            break;
          }
        }
      } else {
        self['_on' + event] = [];
      }

      return self;
    },

    /**
     * Unload and destroy the current Howl object.
     * This will immediately stop all play instances attached to this sound.
     */
    unload: function() {
      var self = this;

      // stop playing any active nodes
      var nodes = self._audioNode;
      for (var i=0; i<self._audioNode.length; i++) {
        // stop the sound if it is currently playing
        if (!nodes[i].paused) {
          self.stop(nodes[i].id);
          self.on('end', nodes[i].id);
        }

        if (!self._webAudio) {
          // remove the source if using HTML5 Audio
          nodes[i].src = '';
        } else {
          // disconnect the output from the master gain
          nodes[i].disconnect(0);
        }
      }

      // make sure all timeouts are cleared
      for (i=0; i<self._onendTimer.length; i++) {
        clearTimeout(self._onendTimer[i].timer);
      }

      // remove the reference in the global Howler object
      var index = Howler._howls.indexOf(self);
      if (index !== null && index >= 0) {
        Howler._howls.splice(index, 1);
      }

      // delete this sound from the cache
      delete cache[self._src];
      self = null;
    }

  };

  // only define these functions when using WebAudio
  if (usingWebAudio) {

    /**
     * Buffer a sound from URL (or from cache) and decode to audio source (Web Audio API).
     * @param  {Object} obj The Howl object for the sound to load.
     * @param  {String} url The path to the sound file.
     */
    var loadBuffer = function(obj, url) {
      // check if the buffer has already been cached
      if (url in cache) {
        // set the duration from the cache
        obj._duration = cache[url].duration;

        // load the sound into this object
        loadSound(obj);
        return;
      }
      
      if (/^data:[^;]+;base64,/.test(url)) {
        // Decode base64 data-URIs because some browsers cannot load data-URIs with XMLHttpRequest.
        var data = atob(url.split(',')[1]);
        var dataView = new Uint8Array(data.length);
        for (var i=0; i<data.length; ++i) {
          dataView[i] = data.charCodeAt(i);
        }
        
        decodeAudioData(dataView.buffer, obj, url);
      } else {
        // load the buffer from the URL
        var xhr = new XMLHttpRequest();
        xhr.open('GET', url, true);
        xhr.responseType = 'arraybuffer';
        xhr.onload = function() {
          decodeAudioData(xhr.response, obj, url);
        };
        xhr.onerror = function() {
          // if there is an error, switch the sound to HTML Audio
          if (obj._webAudio) {
            obj._buffer = true;
            obj._webAudio = false;
            obj._audioNode = [];
            delete obj._gainNode;
            delete cache[url];
            obj.load();
          }
        };
        try {
          xhr.send();
        } catch (e) {
          xhr.onerror();
        }
      }
    };

    /**
     * Decode audio data from an array buffer.
     * @param  {ArrayBuffer} arraybuffer The audio data.
     * @param  {Object} obj The Howl object for the sound to load.
     * @param  {String} url The path to the sound file.
     */
    var decodeAudioData = function(arraybuffer, obj, url) {
      // decode the buffer into an audio source
      ctx.decodeAudioData(
        arraybuffer,
        function(buffer) {
          if (buffer) {
            cache[url] = buffer;
            loadSound(obj, buffer);
          }
        },
        function(err) {
          obj.on('loaderror');
        }
      );
    };

    /**
     * Finishes loading the Web Audio API sound and fires the loaded event
     * @param  {Object}  obj    The Howl object for the sound to load.
     * @param  {Objecct} buffer The decoded buffer sound source.
     */
    var loadSound = function(obj, buffer) {
      // set the duration
      obj._duration = (buffer) ? buffer.duration : obj._duration;

      // setup a sprite if none is defined
      if (Object.getOwnPropertyNames(obj._sprite).length === 0) {
        obj._sprite = {_default: [0, obj._duration * 1000]};
      }

      // fire the loaded event
      if (!obj._loaded) {
        obj._loaded = true;
        obj.on('load');
      }

      if (obj._autoplay) {
        obj.play();
      }
    };

    /**
     * Load the sound back into the buffer source.
     * @param  {Object} obj   The sound to load.
     * @param  {Array}  loop  Loop boolean, pos, and duration.
     * @param  {String} id    (optional) The play instance ID.
     */
    var refreshBuffer = function(obj, loop, id) {
      // determine which node to connect to
      var node = obj._nodeById(id);

      // setup the buffer source for playback
      node.bufferSource = ctx.createBufferSource();
      node.bufferSource.buffer = cache[obj._src];
      node.bufferSource.connect(node.panner);
      node.bufferSource.loop = loop[0];
      if (loop[0]) {
        node.bufferSource.loopStart = loop[1];
        node.bufferSource.loopEnd = loop[1] + loop[2];
      }
      node.bufferSource.playbackRate.value = obj._rate;
    };

  }

  /**
   * Add support for AMD (Asynchronous Module Definition) libraries such as require.js.
   */
  if (typeof define === 'function' && define.amd) {
    define(function() {
      return {
        Howler: Howler,
        Howl: Howl
      };
    });
  }

  /**
   * Add support for CommonJS libraries such as browserify.
   */
  if (typeof exports !== 'undefined') {
    exports.Howler = Howler;
    exports.Howl = Howl;
  }

  // define globally in case AMD is not available or available but not used

  if (typeof window !== 'undefined') {
    window.Howler = Howler;
    window.Howl = Howl;
  }

})();

},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuL2FwcC9zY3JpcHRzL21haW4uanMiLCIvaG9tZS9qb2hhbi9Qcm9qZWN0cy9kcmVhbXRlYW0vYXBwL2Jvd2VyX2NvbXBvbmVudHMvRmxpcENsb2NrL2NvbXBpbGVkL2ZsaXBjbG9jay5taW4uanMiLCIvaG9tZS9qb2hhbi9Qcm9qZWN0cy9kcmVhbXRlYW0vYXBwL3NjcmlwdHMvY2FyZC5qcyIsIi9ob21lL2pvaGFuL1Byb2plY3RzL2RyZWFtdGVhbS9hcHAvc2NyaXB0cy9kaWN0YXRvci5qcyIsIi9ob21lL2pvaGFuL1Byb2plY3RzL2RyZWFtdGVhbS9hcHAvc2NyaXB0cy9yYW5kb20uanMiLCIvaG9tZS9qb2hhbi9Qcm9qZWN0cy9kcmVhbXRlYW0vYXBwL3NjcmlwdHMvdGltZXIuanMiLCIvaG9tZS9qb2hhbi9Qcm9qZWN0cy9kcmVhbXRlYW0vYXBwL3NjcmlwdHMvd2Vlay5qcyIsIi9ob21lL2pvaGFuL1Byb2plY3RzL2RyZWFtdGVhbS9ub2RlX21vZHVsZXMvZmlyZWJhc2UvbGliL2ZpcmViYXNlLXdlYi5qcyIsIi9ob21lL2pvaGFuL1Byb2plY3RzL2RyZWFtdGVhbS9ub2RlX21vZHVsZXMvaG93bGVyL2hvd2xlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2UEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJ3VzZSBzdHJpY3QnO1xudmFyIHJhbmRvbSA9IHJlcXVpcmUoJy4vcmFuZG9tJyk7XG52YXIgZGljdGF0b3IgPSByZXF1aXJlKCcuL2RpY3RhdG9yJyk7XG52YXIgY2FyZCA9IHJlcXVpcmUoJy4vY2FyZCcpO1xudmFyIHRpbWUgPSByZXF1aXJlKCcuL3RpbWVyJyk7XG5cbnJhbmRvbS5Jbml0KCk7XG5kaWN0YXRvci5Jbml0KCk7XG5jYXJkLkluaXQoKTtcbnRpbWUuSW5pdCgpO1xuIiwiLyohIGZsaXBjbG9jayAyMDE0LTEwLTIxICovXG52YXIgalF1ZXJ5ID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XG52YXIgQmFzZT1mdW5jdGlvbigpe307QmFzZS5leHRlbmQ9ZnVuY3Rpb24oYSxiKXtcInVzZSBzdHJpY3RcIjt2YXIgYz1CYXNlLnByb3RvdHlwZS5leHRlbmQ7QmFzZS5fcHJvdG90eXBpbmc9ITA7dmFyIGQ9bmV3IHRoaXM7Yy5jYWxsKGQsYSksZC5iYXNlPWZ1bmN0aW9uKCl7fSxkZWxldGUgQmFzZS5fcHJvdG90eXBpbmc7dmFyIGU9ZC5jb25zdHJ1Y3RvcixmPWQuY29uc3RydWN0b3I9ZnVuY3Rpb24oKXtpZighQmFzZS5fcHJvdG90eXBpbmcpaWYodGhpcy5fY29uc3RydWN0aW5nfHx0aGlzLmNvbnN0cnVjdG9yPT1mKXRoaXMuX2NvbnN0cnVjdGluZz0hMCxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxkZWxldGUgdGhpcy5fY29uc3RydWN0aW5nO2Vsc2UgaWYobnVsbCE9PWFyZ3VtZW50c1swXSlyZXR1cm4oYXJndW1lbnRzWzBdLmV4dGVuZHx8YykuY2FsbChhcmd1bWVudHNbMF0sZCl9O3JldHVybiBmLmFuY2VzdG9yPXRoaXMsZi5leHRlbmQ9dGhpcy5leHRlbmQsZi5mb3JFYWNoPXRoaXMuZm9yRWFjaCxmLmltcGxlbWVudD10aGlzLmltcGxlbWVudCxmLnByb3RvdHlwZT1kLGYudG9TdHJpbmc9dGhpcy50b1N0cmluZyxmLnZhbHVlT2Y9ZnVuY3Rpb24oYSl7cmV0dXJuXCJvYmplY3RcIj09YT9mOmUudmFsdWVPZigpfSxjLmNhbGwoZixiKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBmLmluaXQmJmYuaW5pdCgpLGZ9LEJhc2UucHJvdG90eXBlPXtleHRlbmQ6ZnVuY3Rpb24oYSxiKXtpZihhcmd1bWVudHMubGVuZ3RoPjEpe3ZhciBjPXRoaXNbYV07aWYoYyYmXCJmdW5jdGlvblwiPT10eXBlb2YgYiYmKCFjLnZhbHVlT2Z8fGMudmFsdWVPZigpIT1iLnZhbHVlT2YoKSkmJi9cXGJiYXNlXFxiLy50ZXN0KGIpKXt2YXIgZD1iLnZhbHVlT2YoKTtiPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5iYXNlfHxCYXNlLnByb3RvdHlwZS5iYXNlO3RoaXMuYmFzZT1jO3ZhciBiPWQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiB0aGlzLmJhc2U9YSxifSxiLnZhbHVlT2Y9ZnVuY3Rpb24oYSl7cmV0dXJuXCJvYmplY3RcIj09YT9iOmR9LGIudG9TdHJpbmc9QmFzZS50b1N0cmluZ310aGlzW2FdPWJ9ZWxzZSBpZihhKXt2YXIgZT1CYXNlLnByb3RvdHlwZS5leHRlbmQ7QmFzZS5fcHJvdG90eXBpbmd8fFwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXN8fChlPXRoaXMuZXh0ZW5kfHxlKTtmb3IodmFyIGY9e3RvU291cmNlOm51bGx9LGc9W1wiY29uc3RydWN0b3JcIixcInRvU3RyaW5nXCIsXCJ2YWx1ZU9mXCJdLGg9QmFzZS5fcHJvdG90eXBpbmc/MDoxO2k9Z1toKytdOylhW2ldIT1mW2ldJiZlLmNhbGwodGhpcyxpLGFbaV0pO2Zvcih2YXIgaSBpbiBhKWZbaV18fGUuY2FsbCh0aGlzLGksYVtpXSl9cmV0dXJuIHRoaXN9fSxCYXNlPUJhc2UuZXh0ZW5kKHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3RoaXMuZXh0ZW5kKGFyZ3VtZW50c1swXSl9fSx7YW5jZXN0b3I6T2JqZWN0LHZlcnNpb246XCIxLjFcIixmb3JFYWNoOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQgaW4gYSl2b2lkIDA9PT10aGlzLnByb3RvdHlwZVtkXSYmYi5jYWxsKGMsYVtkXSxkLGEpfSxpbXBsZW1lbnQ6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKVwiZnVuY3Rpb25cIj09dHlwZW9mIGFyZ3VtZW50c1thXT9hcmd1bWVudHNbYV0odGhpcy5wcm90b3R5cGUpOnRoaXMucHJvdG90eXBlLmV4dGVuZChhcmd1bWVudHNbYV0pO3JldHVybiB0aGlzfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiBTdHJpbmcodGhpcy52YWx1ZU9mKCkpfX0pO3ZhciBGbGlwQ2xvY2s7IWZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO0ZsaXBDbG9jaz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGIgaW5zdGFuY2VvZiBPYmplY3QmJmIgaW5zdGFuY2VvZiBEYXRlPT0hMSYmKGM9YixiPTApLG5ldyBGbGlwQ2xvY2suRmFjdG9yeShhLGIsYyl9LEZsaXBDbG9jay5MYW5nPXt9LEZsaXBDbG9jay5CYXNlPUJhc2UuZXh0ZW5kKHtidWlsZERhdGU6XCIyMDE0LTEwLTA2XCIsdmVyc2lvbjpcIjAuNy41XCIsY29uc3RydWN0b3I6ZnVuY3Rpb24oYixjKXtcIm9iamVjdFwiIT10eXBlb2YgYiYmKGI9e30pLFwib2JqZWN0XCIhPXR5cGVvZiBjJiYoYz17fSksdGhpcy5zZXRPcHRpb25zKGEuZXh0ZW5kKCEwLHt9LGIsYykpfSxjYWxsYmFjazpmdW5jdGlvbihhKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBhKXtmb3IodmFyIGI9W10sYz0xO2M8PWFyZ3VtZW50cy5sZW5ndGg7YysrKWFyZ3VtZW50c1tjXSYmYi5wdXNoKGFyZ3VtZW50c1tjXSk7YS5hcHBseSh0aGlzLGIpfX0sbG9nOmZ1bmN0aW9uKGEpe3dpbmRvdy5jb25zb2xlJiZjb25zb2xlLmxvZyYmY29uc29sZS5sb2coYSl9LGdldE9wdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpc1thXT90aGlzW2FdOiExfSxnZXRPcHRpb25zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHNldE9wdGlvbjpmdW5jdGlvbihhLGIpe3RoaXNbYV09Yn0sc2V0T3B0aW9uczpmdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gYSlcInVuZGVmaW5lZFwiIT10eXBlb2YgYVtiXSYmdGhpcy5zZXRPcHRpb24oYixhW2JdKX19KX0oalF1ZXJ5KSxmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtGbGlwQ2xvY2suRmFjZT1GbGlwQ2xvY2suQmFzZS5leHRlbmQoe2F1dG9TdGFydDohMCxkaXZpZGVyczpbXSxmYWN0b3J5OiExLGxpc3RzOltdLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEsYil7dGhpcy5kaXZpZGVycz1bXSx0aGlzLmxpc3RzPVtdLHRoaXMuYmFzZShiKSx0aGlzLmZhY3Rvcnk9YX0sYnVpbGQ6ZnVuY3Rpb24oKXt0aGlzLmF1dG9TdGFydCYmdGhpcy5zdGFydCgpfSxjcmVhdGVEaXZpZGVyOmZ1bmN0aW9uKGIsYyxkKXtcImJvb2xlYW5cIiE9dHlwZW9mIGMmJmN8fChkPWMsYz1iKTt2YXIgZT1bJzxzcGFuIGNsYXNzPVwiJyt0aGlzLmZhY3RvcnkuY2xhc3Nlcy5kb3QrJyB0b3BcIj48L3NwYW4+JywnPHNwYW4gY2xhc3M9XCInK3RoaXMuZmFjdG9yeS5jbGFzc2VzLmRvdCsnIGJvdHRvbVwiPjwvc3Bhbj4nXS5qb2luKFwiXCIpO2QmJihlPVwiXCIpLGI9dGhpcy5mYWN0b3J5LmxvY2FsaXplKGIpO3ZhciBmPVsnPHNwYW4gY2xhc3M9XCInK3RoaXMuZmFjdG9yeS5jbGFzc2VzLmRpdmlkZXIrXCIgXCIrKGM/YzpcIlwiKS50b0xvd2VyQ2FzZSgpKydcIj4nLCc8c3BhbiBjbGFzcz1cIicrdGhpcy5mYWN0b3J5LmNsYXNzZXMubGFiZWwrJ1wiPicrKGI/YjpcIlwiKStcIjwvc3Bhbj5cIixlLFwiPC9zcGFuPlwiXSxnPWEoZi5qb2luKFwiXCIpKTtyZXR1cm4gdGhpcy5kaXZpZGVycy5wdXNoKGcpLGd9LGNyZWF0ZUxpc3Q6ZnVuY3Rpb24oYSxiKXtcIm9iamVjdFwiPT10eXBlb2YgYSYmKGI9YSxhPTApO3ZhciBjPW5ldyBGbGlwQ2xvY2suTGlzdCh0aGlzLmZhY3RvcnksYSxiKTtyZXR1cm4gdGhpcy5saXN0cy5wdXNoKGMpLGN9LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5mYWN0b3J5LnRpbWU9bmV3IEZsaXBDbG9jay5UaW1lKHRoaXMuZmFjdG9yLHRoaXMuZmFjdG9yeS5vcmlnaW5hbD9NYXRoLnJvdW5kKHRoaXMuZmFjdG9yeS5vcmlnaW5hbCk6MCx7bWluaW11bURpZ2l0czp0aGlzLmZhY3RvcnkubWluaW11bURpZ2l0c30pLHRoaXMuZmxpcCh0aGlzLmZhY3Rvcnkub3JpZ2luYWwsITEpfSxhcHBlbmREaWdpdFRvQ2xvY2s6ZnVuY3Rpb24oYSl7YS4kZWwuYXBwZW5kKCExKX0sYWRkRGlnaXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVMaXN0KGEse2NsYXNzZXM6e2FjdGl2ZTp0aGlzLmZhY3RvcnkuY2xhc3Nlcy5hY3RpdmUsYmVmb3JlOnRoaXMuZmFjdG9yeS5jbGFzc2VzLmJlZm9yZSxmbGlwOnRoaXMuZmFjdG9yeS5jbGFzc2VzLmZsaXB9fSk7dGhpcy5hcHBlbmREaWdpdFRvQ2xvY2soYil9LHN0YXJ0OmZ1bmN0aW9uKCl7fSxzdG9wOmZ1bmN0aW9uKCl7fSxhdXRvSW5jcmVtZW50OmZ1bmN0aW9uKCl7dGhpcy5mYWN0b3J5LmNvdW50ZG93bj90aGlzLmRlY3JlbWVudCgpOnRoaXMuaW5jcmVtZW50KCl9LGluY3JlbWVudDpmdW5jdGlvbigpe3RoaXMuZmFjdG9yeS50aW1lLmFkZFNlY29uZCgpfSxkZWNyZW1lbnQ6ZnVuY3Rpb24oKXswPT10aGlzLmZhY3RvcnkudGltZS5nZXRUaW1lU2Vjb25kcygpP3RoaXMuZmFjdG9yeS5zdG9wKCk6dGhpcy5mYWN0b3J5LnRpbWUuc3ViU2Vjb25kKCl9LGZsaXA6ZnVuY3Rpb24oYixjKXt2YXIgZD10aGlzO2EuZWFjaChiLGZ1bmN0aW9uKGEsYil7dmFyIGU9ZC5saXN0c1thXTtlPyhjfHxiPT1lLmRpZ2l0fHxlLnBsYXkoKSxlLnNlbGVjdChiKSk6ZC5hZGREaWdpdChiKX0pfX0pfShqUXVlcnkpLGZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO0ZsaXBDbG9jay5GYWN0b3J5PUZsaXBDbG9jay5CYXNlLmV4dGVuZCh7YW5pbWF0aW9uUmF0ZToxZTMsYXV0b1N0YXJ0OiEwLGNhbGxiYWNrczp7ZGVzdHJveTohMSxjcmVhdGU6ITEsaW5pdDohMSxpbnRlcnZhbDohMSxzdGFydDohMSxzdG9wOiExLHJlc2V0OiExfSxjbGFzc2VzOnthY3RpdmU6XCJmbGlwLWNsb2NrLWFjdGl2ZVwiLGJlZm9yZTpcImZsaXAtY2xvY2stYmVmb3JlXCIsZGl2aWRlcjpcImZsaXAtY2xvY2stZGl2aWRlclwiLGRvdDpcImZsaXAtY2xvY2stZG90XCIsbGFiZWw6XCJmbGlwLWNsb2NrLWxhYmVsXCIsZmxpcDpcImZsaXBcIixwbGF5OlwicGxheVwiLHdyYXBwZXI6XCJmbGlwLWNsb2NrLXdyYXBwZXJcIn0sY2xvY2tGYWNlOlwiSG91cmx5Q291bnRlclwiLGNvdW50ZG93bjohMSxkZWZhdWx0Q2xvY2tGYWNlOlwiSG91cmx5Q291bnRlclwiLGRlZmF1bHRMYW5ndWFnZTpcImVuZ2xpc2hcIiwkZWw6ITEsZmFjZTohMCxsYW5nOiExLGxhbmd1YWdlOlwiZW5nbGlzaFwiLG1pbmltdW1EaWdpdHM6MCxvcmlnaW5hbDohMSxydW5uaW5nOiExLHRpbWU6ITEsdGltZXI6ITEsJHdyYXBwZXI6ITEsY29uc3RydWN0b3I6ZnVuY3Rpb24oYixjLGQpe2R8fChkPXt9KSx0aGlzLmxpc3RzPVtdLHRoaXMucnVubmluZz0hMSx0aGlzLmJhc2UoZCksdGhpcy4kZWw9YShiKS5hZGRDbGFzcyh0aGlzLmNsYXNzZXMud3JhcHBlciksdGhpcy4kd3JhcHBlcj10aGlzLiRlbCx0aGlzLm9yaWdpbmFsPWMgaW5zdGFuY2VvZiBEYXRlP2M6Yz9NYXRoLnJvdW5kKGMpOjAsdGhpcy50aW1lPW5ldyBGbGlwQ2xvY2suVGltZSh0aGlzLHRoaXMub3JpZ2luYWwse21pbmltdW1EaWdpdHM6dGhpcy5taW5pbXVtRGlnaXRzLGFuaW1hdGlvblJhdGU6dGhpcy5hbmltYXRpb25SYXRlfSksdGhpcy50aW1lcj1uZXcgRmxpcENsb2NrLlRpbWVyKHRoaXMsZCksdGhpcy5sb2FkTGFuZ3VhZ2UodGhpcy5sYW5ndWFnZSksdGhpcy5sb2FkQ2xvY2tGYWNlKHRoaXMuY2xvY2tGYWNlLGQpLHRoaXMuYXV0b1N0YXJ0JiZ0aGlzLnN0YXJ0KCl9LGxvYWRDbG9ja0ZhY2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVwiRmFjZVwiLGU9ITE7cmV0dXJuIGE9YS51Y2ZpcnN0KCkrZCx0aGlzLmZhY2Uuc3RvcCYmKHRoaXMuc3RvcCgpLGU9ITApLHRoaXMuJGVsLmh0bWwoXCJcIiksdGhpcy50aW1lLm1pbmltdW1EaWdpdHM9dGhpcy5taW5pbXVtRGlnaXRzLGM9RmxpcENsb2NrW2FdP25ldyBGbGlwQ2xvY2tbYV0odGhpcyxiKTpuZXcgRmxpcENsb2NrW3RoaXMuZGVmYXVsdENsb2NrRmFjZStkXSh0aGlzLGIpLGMuYnVpbGQoKSx0aGlzLmZhY2U9YyxlJiZ0aGlzLnN0YXJ0KCksdGhpcy5mYWNlfSxsb2FkTGFuZ3VhZ2U6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIGI9RmxpcENsb2NrLkxhbmdbYS51Y2ZpcnN0KCldP0ZsaXBDbG9jay5MYW5nW2EudWNmaXJzdCgpXTpGbGlwQ2xvY2suTGFuZ1thXT9GbGlwQ2xvY2suTGFuZ1thXTpGbGlwQ2xvY2suTGFuZ1t0aGlzLmRlZmF1bHRMYW5ndWFnZV0sdGhpcy5sYW5nPWJ9LGxvY2FsaXplOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5sYW5nO2lmKCFhKXJldHVybiBudWxsO3ZhciBkPWEudG9Mb3dlckNhc2UoKTtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgYiYmKGM9YiksYyYmY1tkXT9jW2RdOmF9LHN0YXJ0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5ydW5uaW5nfHxiLmNvdW50ZG93biYmIShiLmNvdW50ZG93biYmYi50aW1lLnRpbWU+MCk/Yi5sb2coXCJUcnlpbmcgdG8gc3RhcnQgdGltZXIgd2hlbiBjb3VudGRvd24gYWxyZWFkeSBhdCAwXCIpOihiLmZhY2Uuc3RhcnQoYi50aW1lKSxiLnRpbWVyLnN0YXJ0KGZ1bmN0aW9uKCl7Yi5mbGlwKCksXCJmdW5jdGlvblwiPT10eXBlb2YgYSYmYSgpfSkpfSxzdG9wOmZ1bmN0aW9uKGEpe3RoaXMuZmFjZS5zdG9wKCksdGhpcy50aW1lci5zdG9wKGEpO2Zvcih2YXIgYiBpbiB0aGlzLmxpc3RzKXRoaXMubGlzdHMuaGFzT3duUHJvcGVydHkoYikmJnRoaXMubGlzdHNbYl0uc3RvcCgpfSxyZXNldDpmdW5jdGlvbihhKXt0aGlzLnRpbWVyLnJlc2V0KGEpLHRoaXMuZmFjZS5yZXNldCgpfSxzZXRUaW1lOmZ1bmN0aW9uKGEpe3RoaXMudGltZS50aW1lPWEsdGhpcy5mbGlwKCEwKX0sZ2V0VGltZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRpbWV9LHNldENvdW50ZG93bjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnJ1bm5pbmc7dGhpcy5jb3VudGRvd249YT8hMDohMSxiJiYodGhpcy5zdG9wKCksdGhpcy5zdGFydCgpKX0sZmxpcDpmdW5jdGlvbihhKXt0aGlzLmZhY2UuZmxpcCghMSxhKX19KX0oalF1ZXJ5KSxmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtGbGlwQ2xvY2suTGlzdD1GbGlwQ2xvY2suQmFzZS5leHRlbmQoe2RpZ2l0OjAsY2xhc3Nlczp7YWN0aXZlOlwiZmxpcC1jbG9jay1hY3RpdmVcIixiZWZvcmU6XCJmbGlwLWNsb2NrLWJlZm9yZVwiLGZsaXA6XCJmbGlwXCJ9LGZhY3Rvcnk6ITEsJGVsOiExLCRvYmo6ITEsaXRlbXM6W10sbGFzdERpZ2l0OjAsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSxiKXt0aGlzLmZhY3Rvcnk9YSx0aGlzLmRpZ2l0PWIsdGhpcy5sYXN0RGlnaXQ9Yix0aGlzLiRlbD10aGlzLmNyZWF0ZUxpc3QoKSx0aGlzLiRvYmo9dGhpcy4kZWwsYj4wJiZ0aGlzLnNlbGVjdChiKSx0aGlzLmZhY3RvcnkuJGVsLmFwcGVuZCh0aGlzLiRlbCl9LHNlbGVjdDpmdW5jdGlvbihhKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgYT9hPXRoaXMuZGlnaXQ6dGhpcy5kaWdpdD1hLHRoaXMuZGlnaXQhPXRoaXMubGFzdERpZ2l0KXt2YXIgYj10aGlzLiRlbC5maW5kKFwiLlwiK3RoaXMuY2xhc3Nlcy5iZWZvcmUpLnJlbW92ZUNsYXNzKHRoaXMuY2xhc3Nlcy5iZWZvcmUpO3RoaXMuJGVsLmZpbmQoXCIuXCIrdGhpcy5jbGFzc2VzLmFjdGl2ZSkucmVtb3ZlQ2xhc3ModGhpcy5jbGFzc2VzLmFjdGl2ZSkuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmJlZm9yZSksdGhpcy5hcHBlbmRMaXN0SXRlbSh0aGlzLmNsYXNzZXMuYWN0aXZlLHRoaXMuZGlnaXQpLGIucmVtb3ZlKCksdGhpcy5sYXN0RGlnaXQ9dGhpcy5kaWdpdH19LHBsYXk6ZnVuY3Rpb24oKXt0aGlzLiRlbC5hZGRDbGFzcyh0aGlzLmZhY3RvcnkuY2xhc3Nlcy5wbGF5KX0sc3RvcDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe2EuJGVsLnJlbW92ZUNsYXNzKGEuZmFjdG9yeS5jbGFzc2VzLnBsYXkpfSx0aGlzLmZhY3RvcnkudGltZXIuaW50ZXJ2YWwpfSxjcmVhdGVMaXN0SXRlbTpmdW5jdGlvbihhLGIpe3JldHVyblsnPGxpIGNsYXNzPVwiJysoYT9hOlwiXCIpKydcIj4nLCc8YSBocmVmPVwiI1wiPicsJzxkaXYgY2xhc3M9XCJ1cFwiPicsJzxkaXYgY2xhc3M9XCJzaGFkb3dcIj48L2Rpdj4nLCc8ZGl2IGNsYXNzPVwiaW5uXCI+JysoYj9iOlwiXCIpK1wiPC9kaXY+XCIsXCI8L2Rpdj5cIiwnPGRpdiBjbGFzcz1cImRvd25cIj4nLCc8ZGl2IGNsYXNzPVwic2hhZG93XCI+PC9kaXY+JywnPGRpdiBjbGFzcz1cImlublwiPicrKGI/YjpcIlwiKStcIjwvZGl2PlwiLFwiPC9kaXY+XCIsXCI8L2E+XCIsXCI8L2xpPlwiXS5qb2luKFwiXCIpfSxhcHBlbmRMaXN0SXRlbTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY3JlYXRlTGlzdEl0ZW0oYSxiKTt0aGlzLiRlbC5hcHBlbmQoYyl9LGNyZWF0ZUxpc3Q6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmdldFByZXZEaWdpdCgpP3RoaXMuZ2V0UHJldkRpZ2l0KCk6dGhpcy5kaWdpdCxjPWEoWyc8dWwgY2xhc3M9XCInK3RoaXMuY2xhc3Nlcy5mbGlwK1wiIFwiKyh0aGlzLmZhY3RvcnkucnVubmluZz90aGlzLmZhY3RvcnkuY2xhc3Nlcy5wbGF5OlwiXCIpKydcIj4nLHRoaXMuY3JlYXRlTGlzdEl0ZW0odGhpcy5jbGFzc2VzLmJlZm9yZSxiKSx0aGlzLmNyZWF0ZUxpc3RJdGVtKHRoaXMuY2xhc3Nlcy5hY3RpdmUsdGhpcy5kaWdpdCksXCI8L3VsPlwiXS5qb2luKFwiXCIpKTtyZXR1cm4gY30sZ2V0TmV4dERpZ2l0OmZ1bmN0aW9uKCl7cmV0dXJuIDk9PXRoaXMuZGlnaXQ/MDp0aGlzLmRpZ2l0KzF9LGdldFByZXZEaWdpdDpmdW5jdGlvbigpe3JldHVybiAwPT10aGlzLmRpZ2l0Pzk6dGhpcy5kaWdpdC0xfX0pfShqUXVlcnkpLGZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO1N0cmluZy5wcm90b3R5cGUudWNmaXJzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN1YnN0cigwLDEpLnRvVXBwZXJDYXNlKCkrdGhpcy5zdWJzdHIoMSl9LGEuZm4uRmxpcENsb2NrPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIG5ldyBGbGlwQ2xvY2soYSh0aGlzKSxiLGMpfSxhLmZuLmZsaXBDbG9jaz1mdW5jdGlvbihiLGMpe3JldHVybiBhLmZuLkZsaXBDbG9jayhiLGMpfX0oalF1ZXJ5KSxmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtGbGlwQ2xvY2suVGltZT1GbGlwQ2xvY2suQmFzZS5leHRlbmQoe3RpbWU6MCxmYWN0b3J5OiExLG1pbmltdW1EaWdpdHM6MCxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhLGIsYyl7XCJvYmplY3RcIiE9dHlwZW9mIGMmJihjPXt9KSxjLm1pbmltdW1EaWdpdHN8fChjLm1pbmltdW1EaWdpdHM9YS5taW5pbXVtRGlnaXRzKSx0aGlzLmJhc2UoYyksdGhpcy5mYWN0b3J5PWEsYiYmKHRoaXMudGltZT1iKX0sY29udmVydERpZ2l0c1RvQXJyYXk6ZnVuY3Rpb24oYSl7dmFyIGI9W107YT1hLnRvU3RyaW5nKCk7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspYVtjXS5tYXRjaCgvXlxcZCokL2cpJiZiLnB1c2goYVtjXSk7cmV0dXJuIGJ9LGRpZ2l0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMudG9TdHJpbmcoKSxjPWIubGVuZ3RoO3JldHVybiBiW2MtYV0/YltjLWFdOiExfSxkaWdpdGl6ZTpmdW5jdGlvbihiKXt2YXIgYz1bXTtpZihhLmVhY2goYixmdW5jdGlvbihhLGIpe2I9Yi50b1N0cmluZygpLDE9PWIubGVuZ3RoJiYoYj1cIjBcIitiKTtmb3IodmFyIGQ9MDtkPGIubGVuZ3RoO2QrKyljLnB1c2goYi5jaGFyQXQoZCkpfSksYy5sZW5ndGg+dGhpcy5taW5pbXVtRGlnaXRzJiYodGhpcy5taW5pbXVtRGlnaXRzPWMubGVuZ3RoKSx0aGlzLm1pbmltdW1EaWdpdHM+Yy5sZW5ndGgpZm9yKHZhciBkPWMubGVuZ3RoO2Q8dGhpcy5taW5pbXVtRGlnaXRzO2QrKyljLnVuc2hpZnQoXCIwXCIpO3JldHVybiBjfSxnZXREYXRlT2JqZWN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGltZSBpbnN0YW5jZW9mIERhdGU/dGhpcy50aW1lOm5ldyBEYXRlKChuZXcgRGF0ZSkuZ2V0VGltZSgpKzFlMyp0aGlzLmdldFRpbWVTZWNvbmRzKCkpfSxnZXREYXlDb3VudGVyOmZ1bmN0aW9uKGEpe3ZhciBiPVt0aGlzLmdldERheXMoKSx0aGlzLmdldEhvdXJzKCEwKSx0aGlzLmdldE1pbnV0ZXMoITApXTtyZXR1cm4gYSYmYi5wdXNoKHRoaXMuZ2V0U2Vjb25kcyghMCkpLHRoaXMuZGlnaXRpemUoYil9LGdldERheXM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRUaW1lU2Vjb25kcygpLzYwLzYwLzI0O3JldHVybiBhJiYoYiU9NyksTWF0aC5mbG9vcihiKX0sZ2V0SG91ckNvdW50ZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmRpZ2l0aXplKFt0aGlzLmdldEhvdXJzKCksdGhpcy5nZXRNaW51dGVzKCEwKSx0aGlzLmdldFNlY29uZHMoITApXSk7cmV0dXJuIGF9LGdldEhvdXJseTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEhvdXJDb3VudGVyKCl9LGdldEhvdXJzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0VGltZVNlY29uZHMoKS82MC82MDtyZXR1cm4gYSYmKGIlPTI0KSxNYXRoLmZsb29yKGIpfSxnZXRNaWxpdGFyeVRpbWU6ZnVuY3Rpb24oYSxiKXtcInVuZGVmaW5lZFwiPT10eXBlb2YgYiYmKGI9ITApLGF8fChhPXRoaXMuZ2V0RGF0ZU9iamVjdCgpKTt2YXIgYz1bYS5nZXRIb3VycygpLGEuZ2V0TWludXRlcygpXTtyZXR1cm4gYj09PSEwJiZjLnB1c2goYS5nZXRTZWNvbmRzKCkpLHRoaXMuZGlnaXRpemUoYyl9LGdldE1pbnV0ZXM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRUaW1lU2Vjb25kcygpLzYwO3JldHVybiBhJiYoYiU9NjApLE1hdGguZmxvb3IoYil9LGdldE1pbnV0ZUNvdW50ZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmRpZ2l0aXplKFt0aGlzLmdldE1pbnV0ZXMoKSx0aGlzLmdldFNlY29uZHMoITApXSk7cmV0dXJuIGF9LGdldFRpbWVTZWNvbmRzOmZ1bmN0aW9uKGEpe3JldHVybiBhfHwoYT1uZXcgRGF0ZSksdGhpcy50aW1lIGluc3RhbmNlb2YgRGF0ZT90aGlzLmZhY3RvcnkuY291bnRkb3duP01hdGgubWF4KHRoaXMudGltZS5nZXRUaW1lKCkvMWUzLWEuZ2V0VGltZSgpLzFlMywwKTphLmdldFRpbWUoKS8xZTMtdGhpcy50aW1lLmdldFRpbWUoKS8xZTM6dGhpcy50aW1lfSxnZXRUaW1lOmZ1bmN0aW9uKGEsYil7XCJ1bmRlZmluZWRcIj09dHlwZW9mIGImJihiPSEwKSxhfHwoYT10aGlzLmdldERhdGVPYmplY3QoKSksY29uc29sZS5sb2coYSk7dmFyIGM9YS5nZXRIb3VycygpLGQ9W2M+MTI/Yy0xMjowPT09Yz8xMjpjLGEuZ2V0TWludXRlcygpXTtyZXR1cm4gYj09PSEwJiZkLnB1c2goYS5nZXRTZWNvbmRzKCkpLHRoaXMuZGlnaXRpemUoZCl9LGdldFNlY29uZHM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRUaW1lU2Vjb25kcygpO3JldHVybiBhJiYoNjA9PWI/Yj0wOmIlPTYwKSxNYXRoLmNlaWwoYil9LGdldFdlZWtzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0VGltZVNlY29uZHMoKS82MC82MC8yNC83O3JldHVybiBhJiYoYiU9NTIpLE1hdGguZmxvb3IoYil9LHJlbW92ZUxlYWRpbmdaZXJvczpmdW5jdGlvbihiLGMpe3ZhciBkPTAsZT1bXTtyZXR1cm4gYS5lYWNoKGMsZnVuY3Rpb24oYSl7Yj5hP2QrPXBhcnNlSW50KGNbYV0sMTApOmUucHVzaChjW2FdKX0pLDA9PT1kP2U6Y30sYWRkU2Vjb25kczpmdW5jdGlvbihhKXt0aGlzLnRpbWUgaW5zdGFuY2VvZiBEYXRlP3RoaXMudGltZS5zZXRTZWNvbmRzKHRoaXMudGltZS5nZXRTZWNvbmRzKCkrYSk6dGhpcy50aW1lKz1hfSxhZGRTZWNvbmQ6ZnVuY3Rpb24oKXt0aGlzLmFkZFNlY29uZHMoMSl9LHN1YlNlY29uZHM6ZnVuY3Rpb24oYSl7dGhpcy50aW1lIGluc3RhbmNlb2YgRGF0ZT90aGlzLnRpbWUuc2V0U2Vjb25kcyh0aGlzLnRpbWUuZ2V0U2Vjb25kcygpLWEpOnRoaXMudGltZS09YX0sc3ViU2Vjb25kOmZ1bmN0aW9uKCl7dGhpcy5zdWJTZWNvbmRzKDEpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFRpbWVTZWNvbmRzKCkudG9TdHJpbmcoKX19KX0oalF1ZXJ5KSxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO0ZsaXBDbG9jay5UaW1lcj1GbGlwQ2xvY2suQmFzZS5leHRlbmQoe2NhbGxiYWNrczp7ZGVzdHJveTohMSxjcmVhdGU6ITEsaW5pdDohMSxpbnRlcnZhbDohMSxzdGFydDohMSxzdG9wOiExLHJlc2V0OiExfSxjb3VudDowLGZhY3Rvcnk6ITEsaW50ZXJ2YWw6MWUzLGFuaW1hdGlvblJhdGU6MWUzLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEsYil7dGhpcy5iYXNlKGIpLHRoaXMuZmFjdG9yeT1hLHRoaXMuY2FsbGJhY2sodGhpcy5jYWxsYmFja3MuaW5pdCksdGhpcy5jYWxsYmFjayh0aGlzLmNhbGxiYWNrcy5jcmVhdGUpfSxnZXRFbGFwc2VkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY291bnQqdGhpcy5pbnRlcnZhbH0sZ2V0RWxhcHNlZFRpbWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IERhdGUodGhpcy50aW1lK3RoaXMuZ2V0RWxhcHNlZCgpKX0scmVzZXQ6ZnVuY3Rpb24oYSl7Y2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKSx0aGlzLmNvdW50PTAsdGhpcy5fc2V0SW50ZXJ2YWwoYSksdGhpcy5jYWxsYmFjayh0aGlzLmNhbGxiYWNrcy5yZXNldCl9LHN0YXJ0OmZ1bmN0aW9uKGEpe3RoaXMuZmFjdG9yeS5ydW5uaW5nPSEwLHRoaXMuX2NyZWF0ZVRpbWVyKGEpLHRoaXMuY2FsbGJhY2sodGhpcy5jYWxsYmFja3Muc3RhcnQpfSxzdG9wOmZ1bmN0aW9uKGEpe3RoaXMuZmFjdG9yeS5ydW5uaW5nPSExLHRoaXMuX2NsZWFySW50ZXJ2YWwoYSksdGhpcy5jYWxsYmFjayh0aGlzLmNhbGxiYWNrcy5zdG9wKSx0aGlzLmNhbGxiYWNrKGEpfSxfY2xlYXJJbnRlcnZhbDpmdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwodGhpcy50aW1lcil9LF9jcmVhdGVUaW1lcjpmdW5jdGlvbihhKXt0aGlzLl9zZXRJbnRlcnZhbChhKX0sX2Rlc3Ryb3lUaW1lcjpmdW5jdGlvbihhKXt0aGlzLl9jbGVhckludGVydmFsKCksdGhpcy50aW1lcj0hMSx0aGlzLmNhbGxiYWNrKGEpLHRoaXMuY2FsbGJhY2sodGhpcy5jYWxsYmFja3MuZGVzdHJveSl9LF9pbnRlcnZhbDpmdW5jdGlvbihhKXt0aGlzLmNhbGxiYWNrKHRoaXMuY2FsbGJhY2tzLmludGVydmFsKSx0aGlzLmNhbGxiYWNrKGEpLHRoaXMuY291bnQrK30sX3NldEludGVydmFsOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5faW50ZXJ2YWwoYSksYi50aW1lcj1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2IuX2ludGVydmFsKGEpfSx0aGlzLmludGVydmFsKX19KX0oalF1ZXJ5KSxmdW5jdGlvbihhKXtGbGlwQ2xvY2suVHdlbnR5Rm91ckhvdXJDbG9ja0ZhY2U9RmxpcENsb2NrLkZhY2UuZXh0ZW5kKHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihhLGIpe3RoaXMuYmFzZShhLGIpfSxidWlsZDpmdW5jdGlvbihiKXt2YXIgYz10aGlzLGQ9dGhpcy5mYWN0b3J5LiRlbC5maW5kKFwidWxcIik7dGhpcy5mYWN0b3J5LnRpbWUudGltZXx8KHRoaXMuZmFjdG9yeS5vcmlnaW5hbD1uZXcgRGF0ZSx0aGlzLmZhY3RvcnkudGltZT1uZXcgRmxpcENsb2NrLlRpbWUodGhpcy5mYWN0b3J5LHRoaXMuZmFjdG9yeS5vcmlnaW5hbCkpO3ZhciBiPWI/Yjp0aGlzLmZhY3RvcnkudGltZS5nZXRNaWxpdGFyeVRpbWUoITEsdGhpcy5zaG93U2Vjb25kcyk7Yi5sZW5ndGg+ZC5sZW5ndGgmJmEuZWFjaChiLGZ1bmN0aW9uKGEsYil7Yy5jcmVhdGVMaXN0KGIpfSksdGhpcy5jcmVhdGVEaXZpZGVyKCksdGhpcy5jcmVhdGVEaXZpZGVyKCksYSh0aGlzLmRpdmlkZXJzWzBdKS5pbnNlcnRCZWZvcmUodGhpcy5saXN0c1t0aGlzLmxpc3RzLmxlbmd0aC0yXS4kZWwpLGEodGhpcy5kaXZpZGVyc1sxXSkuaW5zZXJ0QmVmb3JlKHRoaXMubGlzdHNbdGhpcy5saXN0cy5sZW5ndGgtNF0uJGVsKSx0aGlzLmJhc2UoKX0sZmxpcDpmdW5jdGlvbihhLGIpe3RoaXMuYXV0b0luY3JlbWVudCgpLGE9YT9hOnRoaXMuZmFjdG9yeS50aW1lLmdldE1pbGl0YXJ5VGltZSghMSx0aGlzLnNob3dTZWNvbmRzKSx0aGlzLmJhc2UoYSxiKX19KX0oalF1ZXJ5KSxmdW5jdGlvbihhKXtGbGlwQ2xvY2suQ291bnRlckZhY2U9RmxpcENsb2NrLkZhY2UuZXh0ZW5kKHtzaG91bGRBdXRvSW5jcmVtZW50OiExLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEsYil7XCJvYmplY3RcIiE9dHlwZW9mIGImJihiPXt9KSxhLmF1dG9TdGFydD1iLmF1dG9TdGFydD8hMDohMSxiLmF1dG9TdGFydCYmKHRoaXMuc2hvdWxkQXV0b0luY3JlbWVudD0hMCksYS5pbmNyZW1lbnQ9ZnVuY3Rpb24oKXthLmNvdW50ZG93bj0hMSxhLnNldFRpbWUoYS5nZXRUaW1lKCkuZ2V0VGltZVNlY29uZHMoKSsxKX0sYS5kZWNyZW1lbnQ9ZnVuY3Rpb24oKXthLmNvdW50ZG93bj0hMDt2YXIgYj1hLmdldFRpbWUoKS5nZXRUaW1lU2Vjb25kcygpO2I+MCYmYS5zZXRUaW1lKGItMSl9LGEuc2V0VmFsdWU9ZnVuY3Rpb24oYil7YS5zZXRUaW1lKGIpfSxhLnNldENvdW50ZXI9ZnVuY3Rpb24oYil7YS5zZXRUaW1lKGIpfSx0aGlzLmJhc2UoYSxiKX0sYnVpbGQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9dGhpcy5mYWN0b3J5LiRlbC5maW5kKFwidWxcIiksZD10aGlzLmZhY3RvcnkuZ2V0VGltZSgpLmRpZ2l0aXplKFt0aGlzLmZhY3RvcnkuZ2V0VGltZSgpLnRpbWVdKTtkLmxlbmd0aD5jLmxlbmd0aCYmYS5lYWNoKGQsZnVuY3Rpb24oYSxjKXt2YXIgZD1iLmNyZWF0ZUxpc3QoYyk7ZC5zZWxlY3QoYyl9KSxhLmVhY2godGhpcy5saXN0cyxmdW5jdGlvbihhLGIpe2IucGxheSgpfSksdGhpcy5iYXNlKCl9LGZsaXA6ZnVuY3Rpb24oYSxiKXt0aGlzLnNob3VsZEF1dG9JbmNyZW1lbnQmJnRoaXMuYXV0b0luY3JlbWVudCgpLGF8fChhPXRoaXMuZmFjdG9yeS5nZXRUaW1lKCkuZGlnaXRpemUoW3RoaXMuZmFjdG9yeS5nZXRUaW1lKCkudGltZV0pKSx0aGlzLmJhc2UoYSxiKX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLmZhY3RvcnkudGltZT1uZXcgRmxpcENsb2NrLlRpbWUodGhpcy5mYWN0b3J5LHRoaXMuZmFjdG9yeS5vcmlnaW5hbD9NYXRoLnJvdW5kKHRoaXMuZmFjdG9yeS5vcmlnaW5hbCk6MCksdGhpcy5mbGlwKCl9fSl9KGpRdWVyeSksZnVuY3Rpb24oYSl7RmxpcENsb2NrLkRhaWx5Q291bnRlckZhY2U9RmxpcENsb2NrLkZhY2UuZXh0ZW5kKHtzaG93U2Vjb25kczohMCxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhLGIpe3RoaXMuYmFzZShhLGIpfSxidWlsZDpmdW5jdGlvbihiKXt2YXIgYz10aGlzLGQ9dGhpcy5mYWN0b3J5LiRlbC5maW5kKFwidWxcIiksZT0wO2I9Yj9iOnRoaXMuZmFjdG9yeS50aW1lLmdldERheUNvdW50ZXIodGhpcy5zaG93U2Vjb25kcyksYi5sZW5ndGg+ZC5sZW5ndGgmJmEuZWFjaChiLGZ1bmN0aW9uKGEsYil7Yy5jcmVhdGVMaXN0KGIpfSksdGhpcy5zaG93U2Vjb25kcz9hKHRoaXMuY3JlYXRlRGl2aWRlcihcIlNlY29uZHNcIikpLmluc2VydEJlZm9yZSh0aGlzLmxpc3RzW3RoaXMubGlzdHMubGVuZ3RoLTJdLiRlbCk6ZT0yLGEodGhpcy5jcmVhdGVEaXZpZGVyKFwiTWludXRlc1wiKSkuaW5zZXJ0QmVmb3JlKHRoaXMubGlzdHNbdGhpcy5saXN0cy5sZW5ndGgtNCtlXS4kZWwpLGEodGhpcy5jcmVhdGVEaXZpZGVyKFwiSG91cnNcIikpLmluc2VydEJlZm9yZSh0aGlzLmxpc3RzW3RoaXMubGlzdHMubGVuZ3RoLTYrZV0uJGVsKSxhKHRoaXMuY3JlYXRlRGl2aWRlcihcIkRheXNcIiwhMCkpLmluc2VydEJlZm9yZSh0aGlzLmxpc3RzWzBdLiRlbCksdGhpcy5iYXNlKCl9LGZsaXA6ZnVuY3Rpb24oYSxiKXthfHwoYT10aGlzLmZhY3RvcnkudGltZS5nZXREYXlDb3VudGVyKHRoaXMuc2hvd1NlY29uZHMpKSx0aGlzLmF1dG9JbmNyZW1lbnQoKSx0aGlzLmJhc2UoYSxiKX19KX0oalF1ZXJ5KSxmdW5jdGlvbihhKXtGbGlwQ2xvY2suSG91cmx5Q291bnRlckZhY2U9RmxpcENsb2NrLkZhY2UuZXh0ZW5kKHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihhLGIpe3RoaXMuYmFzZShhLGIpfSxidWlsZDpmdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMsZT10aGlzLmZhY3RvcnkuJGVsLmZpbmQoXCJ1bFwiKTtjPWM/Yzp0aGlzLmZhY3RvcnkudGltZS5nZXRIb3VyQ291bnRlcigpLGMubGVuZ3RoPmUubGVuZ3RoJiZhLmVhY2goYyxmdW5jdGlvbihhLGIpe2QuY3JlYXRlTGlzdChiKX0pLGEodGhpcy5jcmVhdGVEaXZpZGVyKFwiU2Vjb25kc1wiKSkuaW5zZXJ0QmVmb3JlKHRoaXMubGlzdHNbdGhpcy5saXN0cy5sZW5ndGgtMl0uJGVsKSxhKHRoaXMuY3JlYXRlRGl2aWRlcihcIk1pbnV0ZXNcIikpLmluc2VydEJlZm9yZSh0aGlzLmxpc3RzW3RoaXMubGlzdHMubGVuZ3RoLTRdLiRlbCksYnx8YSh0aGlzLmNyZWF0ZURpdmlkZXIoXCJIb3Vyc1wiLCEwKSkuaW5zZXJ0QmVmb3JlKHRoaXMubGlzdHNbMF0uJGVsKSx0aGlzLmJhc2UoKX0sZmxpcDpmdW5jdGlvbihhLGIpe2F8fChhPXRoaXMuZmFjdG9yeS50aW1lLmdldEhvdXJDb3VudGVyKCkpLHRoaXMuYXV0b0luY3JlbWVudCgpLHRoaXMuYmFzZShhLGIpfSxhcHBlbmREaWdpdFRvQ2xvY2s6ZnVuY3Rpb24oYSl7dGhpcy5iYXNlKGEpLHRoaXMuZGl2aWRlcnNbMF0uaW5zZXJ0QWZ0ZXIodGhpcy5kaXZpZGVyc1swXS5uZXh0KCkpfX0pfShqUXVlcnkpLGZ1bmN0aW9uKCl7RmxpcENsb2NrLk1pbnV0ZUNvdW50ZXJGYWNlPUZsaXBDbG9jay5Ib3VybHlDb3VudGVyRmFjZS5leHRlbmQoe2NsZWFyRXhjZXNzRGlnaXRzOiExLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEsYil7dGhpcy5iYXNlKGEsYil9LGJ1aWxkOmZ1bmN0aW9uKCl7dGhpcy5iYXNlKCEwLHRoaXMuZmFjdG9yeS50aW1lLmdldE1pbnV0ZUNvdW50ZXIoKSl9LGZsaXA6ZnVuY3Rpb24oYSxiKXthfHwoYT10aGlzLmZhY3RvcnkudGltZS5nZXRNaW51dGVDb3VudGVyKCkpLHRoaXMuYmFzZShhLGIpfX0pfShqUXVlcnkpLGZ1bmN0aW9uKGEpe0ZsaXBDbG9jay5Ud2VsdmVIb3VyQ2xvY2tGYWNlPUZsaXBDbG9jay5Ud2VudHlGb3VySG91ckNsb2NrRmFjZS5leHRlbmQoe21lcmlkaXVtOiExLG1lcmlkaXVtVGV4dDpcIkFNXCIsYnVpbGQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmZhY3RvcnkudGltZS5nZXRUaW1lKCExLHRoaXMuc2hvd1NlY29uZHMpO3RoaXMuYmFzZShiKSx0aGlzLm1lcmlkaXVtVGV4dD10aGlzLmdldE1lcmlkaXVtKCksdGhpcy5tZXJpZGl1bT1hKFsnPHVsIGNsYXNzPVwiZmxpcC1jbG9jay1tZXJpZGl1bVwiPicsXCI8bGk+XCIsJzxhIGhyZWY9XCIjXCI+Jyt0aGlzLm1lcmlkaXVtVGV4dCtcIjwvYT5cIixcIjwvbGk+XCIsXCI8L3VsPlwiXS5qb2luKFwiXCIpKSx0aGlzLm1lcmlkaXVtLmluc2VydEFmdGVyKHRoaXMubGlzdHNbdGhpcy5saXN0cy5sZW5ndGgtMV0uJGVsKX0sZmxpcDpmdW5jdGlvbihhLGIpe3RoaXMubWVyaWRpdW1UZXh0IT10aGlzLmdldE1lcmlkaXVtKCkmJih0aGlzLm1lcmlkaXVtVGV4dD10aGlzLmdldE1lcmlkaXVtKCksdGhpcy5tZXJpZGl1bS5maW5kKFwiYVwiKS5odG1sKHRoaXMubWVyaWRpdW1UZXh0KSksdGhpcy5iYXNlKHRoaXMuZmFjdG9yeS50aW1lLmdldFRpbWUoITEsdGhpcy5zaG93U2Vjb25kcyksYil9LGdldE1lcmlkaXVtOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRIb3VycygpPj0xMj9cIlBNXCI6XCJBTVwifSxpc1BNOmZ1bmN0aW9uKCl7cmV0dXJuXCJQTVwiPT10aGlzLmdldE1lcmlkaXVtKCk/ITA6ITF9LGlzQU06ZnVuY3Rpb24oKXtyZXR1cm5cIkFNXCI9PXRoaXMuZ2V0TWVyaWRpdW0oKT8hMDohMX19KX0oalF1ZXJ5KSxmdW5jdGlvbigpe0ZsaXBDbG9jay5MYW5nLkFyYWJpYz17eWVhcnM6XCLYs9mG2YjYp9iqXCIsbW9udGhzOlwi2LTZh9mI2LFcIixkYXlzOlwi2KPZitin2YVcIixob3VyczpcItiz2KfYudin2KpcIixtaW51dGVzOlwi2K/Zgtin2KbZglwiLHNlY29uZHM6XCLYq9mI2KfZhtmKXCJ9LEZsaXBDbG9jay5MYW5nLmFyPUZsaXBDbG9jay5MYW5nLkFyYWJpYyxGbGlwQ2xvY2suTGFuZ1tcImFyLWFyXCJdPUZsaXBDbG9jay5MYW5nLkFyYWJpYyxGbGlwQ2xvY2suTGFuZy5hcmFiaWM9RmxpcENsb2NrLkxhbmcuQXJhYmljfShqUXVlcnkpLGZ1bmN0aW9uKCl7RmxpcENsb2NrLkxhbmcuRGFuaXNoPXt5ZWFyczpcIsOFclwiLG1vbnRoczpcIk3DpW5lZGVyXCIsZGF5czpcIkRhZ2VcIixob3VyczpcIlRpbWVyXCIsbWludXRlczpcIk1pbnV0dGVyXCIsc2Vjb25kczpcIlNla3VuZGVyXCJ9LEZsaXBDbG9jay5MYW5nLmRhPUZsaXBDbG9jay5MYW5nLkRhbmlzaCxGbGlwQ2xvY2suTGFuZ1tcImRhLWRrXCJdPUZsaXBDbG9jay5MYW5nLkRhbmlzaCxGbGlwQ2xvY2suTGFuZy5kYW5pc2g9RmxpcENsb2NrLkxhbmcuRGFuaXNofShqUXVlcnkpLGZ1bmN0aW9uKCl7RmxpcENsb2NrLkxhbmcuR2VybWFuPXt5ZWFyczpcIkphaHJlXCIsbW9udGhzOlwiTW9uYXRlXCIsZGF5czpcIlRhZ2VcIixob3VyczpcIlN0dW5kZW5cIixtaW51dGVzOlwiTWludXRlblwiLHNlY29uZHM6XCJTZWt1bmRlblwifSxGbGlwQ2xvY2suTGFuZy5kZT1GbGlwQ2xvY2suTGFuZy5HZXJtYW4sRmxpcENsb2NrLkxhbmdbXCJkZS1kZVwiXT1GbGlwQ2xvY2suTGFuZy5HZXJtYW4sRmxpcENsb2NrLkxhbmcuZ2VybWFuPUZsaXBDbG9jay5MYW5nLkdlcm1hbn0oalF1ZXJ5KSxmdW5jdGlvbigpe0ZsaXBDbG9jay5MYW5nLkVuZ2xpc2g9e3llYXJzOlwiWWVhcnNcIixtb250aHM6XCJNb250aHNcIixkYXlzOlwiRGF5c1wiLGhvdXJzOlwiSG91cnNcIixtaW51dGVzOlwiTWludXRlc1wiLHNlY29uZHM6XCJTZWNvbmRzXCJ9LEZsaXBDbG9jay5MYW5nLmVuPUZsaXBDbG9jay5MYW5nLkVuZ2xpc2gsRmxpcENsb2NrLkxhbmdbXCJlbi11c1wiXT1GbGlwQ2xvY2suTGFuZy5FbmdsaXNoLEZsaXBDbG9jay5MYW5nLmVuZ2xpc2g9RmxpcENsb2NrLkxhbmcuRW5nbGlzaH0oalF1ZXJ5KSxmdW5jdGlvbigpe0ZsaXBDbG9jay5MYW5nLlNwYW5pc2g9e3llYXJzOlwiQSYjMjQxO29zXCIsbW9udGhzOlwiTWVzZXNcIixkYXlzOlwiRCYjMjA1O2FzXCIsaG91cnM6XCJIb3Jhc1wiLG1pbnV0ZXM6XCJNaW51dG9zXCIsc2Vjb25kczpcIlNlZ3VuZG9cIn0sRmxpcENsb2NrLkxhbmcuZXM9RmxpcENsb2NrLkxhbmcuU3BhbmlzaCxGbGlwQ2xvY2suTGFuZ1tcImVzLWVzXCJdPUZsaXBDbG9jay5MYW5nLlNwYW5pc2gsRmxpcENsb2NrLkxhbmcuc3BhbmlzaD1GbGlwQ2xvY2suTGFuZy5TcGFuaXNofShqUXVlcnkpLGZ1bmN0aW9uKCl7RmxpcENsb2NrLkxhbmcuRmlubmlzaD17eWVhcnM6XCJWdW90dGFcIixtb250aHM6XCJLdXVrYXV0dGFcIixkYXlzOlwiUMOkaXbDpMOkXCIsaG91cnM6XCJUdW50aWFcIixtaW51dGVzOlwiTWludXV0dGlhXCIsc2Vjb25kczpcIlNla3VudGlhXCJ9LEZsaXBDbG9jay5MYW5nLmZpPUZsaXBDbG9jay5MYW5nLkZpbm5pc2gsRmxpcENsb2NrLkxhbmdbXCJmaS1maVwiXT1GbGlwQ2xvY2suTGFuZy5GaW5uaXNoLEZsaXBDbG9jay5MYW5nLmZpbm5pc2g9RmxpcENsb2NrLkxhbmcuRmlubmlzaH0oalF1ZXJ5KSxmdW5jdGlvbigpe0ZsaXBDbG9jay5MYW5nLkZyZW5jaD17eWVhcnM6XCJBbnNcIixtb250aHM6XCJNb2lzXCIsZGF5czpcIkpvdXJzXCIsaG91cnM6XCJIZXVyZXNcIixtaW51dGVzOlwiTWludXRlc1wiLHNlY29uZHM6XCJTZWNvbmRlc1wifSxGbGlwQ2xvY2suTGFuZy5mcj1GbGlwQ2xvY2suTGFuZy5GcmVuY2gsRmxpcENsb2NrLkxhbmdbXCJmci1jYVwiXT1GbGlwQ2xvY2suTGFuZy5GcmVuY2gsRmxpcENsb2NrLkxhbmcuZnJlbmNoPUZsaXBDbG9jay5MYW5nLkZyZW5jaH0oalF1ZXJ5KSxmdW5jdGlvbigpe0ZsaXBDbG9jay5MYW5nLkl0YWxpYW49e3llYXJzOlwiQW5uaVwiLG1vbnRoczpcIk1lc2lcIixkYXlzOlwiR2lvcm5pXCIsaG91cnM6XCJPcmVcIixtaW51dGVzOlwiTWludXRpXCIsc2Vjb25kczpcIlNlY29uZGlcIn0sRmxpcENsb2NrLkxhbmcuaXQ9RmxpcENsb2NrLkxhbmcuSXRhbGlhbixGbGlwQ2xvY2suTGFuZ1tcIml0LWl0XCJdPUZsaXBDbG9jay5MYW5nLkl0YWxpYW4sRmxpcENsb2NrLkxhbmcuaXRhbGlhbj1GbGlwQ2xvY2suTGFuZy5JdGFsaWFufShqUXVlcnkpLGZ1bmN0aW9uKCl7RmxpcENsb2NrLkxhbmcuTGF0dmlhbj17eWVhcnM6XCJHYWRpXCIsbW9udGhzOlwiTcSTbmXFoWlcIixkYXlzOlwiRGllbmFzXCIsaG91cnM6XCJTdHVuZGFzXCIsbWludXRlczpcIk1pbsWrdGVzXCIsc2Vjb25kczpcIlNla3VuZGVzXCJ9LEZsaXBDbG9jay5MYW5nLmx2PUZsaXBDbG9jay5MYW5nLkxhdHZpYW4sRmxpcENsb2NrLkxhbmdbXCJsdi1sdlwiXT1GbGlwQ2xvY2suTGFuZy5MYXR2aWFuLEZsaXBDbG9jay5MYW5nLmxhdHZpYW49RmxpcENsb2NrLkxhbmcuTGF0dmlhbn0oalF1ZXJ5KSxmdW5jdGlvbigpe0ZsaXBDbG9jay5MYW5nLkR1dGNoPXt5ZWFyczpcIkphcmVuXCIsbW9udGhzOlwiTWFhbmRlblwiLGRheXM6XCJEYWdlblwiLGhvdXJzOlwiVXJlblwiLG1pbnV0ZXM6XCJNaW51dGVuXCIsc2Vjb25kczpcIlNlY29uZGVuXCJ9LEZsaXBDbG9jay5MYW5nLm5sPUZsaXBDbG9jay5MYW5nLkR1dGNoLEZsaXBDbG9jay5MYW5nW1wibmwtYmVcIl09RmxpcENsb2NrLkxhbmcuRHV0Y2gsRmxpcENsb2NrLkxhbmcuZHV0Y2g9RmxpcENsb2NrLkxhbmcuRHV0Y2h9KGpRdWVyeSksZnVuY3Rpb24oKXtGbGlwQ2xvY2suTGFuZy5Ob3J3ZWdpYW49e3llYXJzOlwiw4VyXCIsbW9udGhzOlwiTcOlbmVkZXJcIixkYXlzOlwiRGFnZXJcIixob3VyczpcIlRpbWVyXCIsbWludXRlczpcIk1pbnV0dGVyXCIsc2Vjb25kczpcIlNla3VuZGVyXCJ9LEZsaXBDbG9jay5MYW5nLm5vPUZsaXBDbG9jay5MYW5nLk5vcndlZ2lhbixGbGlwQ2xvY2suTGFuZy5uYj1GbGlwQ2xvY2suTGFuZy5Ob3J3ZWdpYW4sRmxpcENsb2NrLkxhbmdbXCJuby1uYlwiXT1GbGlwQ2xvY2suTGFuZy5Ob3J3ZWdpYW4sRmxpcENsb2NrLkxhbmcubm9yd2VnaWFuPUZsaXBDbG9jay5MYW5nLk5vcndlZ2lhbn0oalF1ZXJ5KSxmdW5jdGlvbigpe0ZsaXBDbG9jay5MYW5nLlBvcnR1Z3Vlc2U9e3llYXJzOlwiQW5vc1wiLG1vbnRoczpcIk1lc2VzXCIsZGF5czpcIkRpYXNcIixob3VyczpcIkhvcmFzXCIsbWludXRlczpcIk1pbnV0b3NcIixzZWNvbmRzOlwiU2VndW5kb3NcIn0sRmxpcENsb2NrLkxhbmcucHQ9RmxpcENsb2NrLkxhbmcuUG9ydHVndWVzZSxGbGlwQ2xvY2suTGFuZ1tcInB0LWJyXCJdPUZsaXBDbG9jay5MYW5nLlBvcnR1Z3Vlc2UsRmxpcENsb2NrLkxhbmcucG9ydHVndWVzZT1GbGlwQ2xvY2suTGFuZy5Qb3J0dWd1ZXNlfShqUXVlcnkpLGZ1bmN0aW9uKCl7RmxpcENsb2NrLkxhbmcuUnVzc2lhbj17eWVhcnM6XCLQu9C10YJcIixtb250aHM6XCLQvNC10YHRj9GG0LXQslwiLGRheXM6XCLQtNC90LXQuVwiLGhvdXJzOlwi0YfQsNGB0L7QslwiLG1pbnV0ZXM6XCLQvNC40L3Rg9GCXCIsc2Vjb25kczpcItGB0LXQutGD0L3QtFwifSxGbGlwQ2xvY2suTGFuZy5ydT1GbGlwQ2xvY2suTGFuZy5SdXNzaWFuLEZsaXBDbG9jay5MYW5nW1wicnUtcnVcIl09RmxpcENsb2NrLkxhbmcuUnVzc2lhbixGbGlwQ2xvY2suTGFuZy5ydXNzaWFuPUZsaXBDbG9jay5MYW5nLlJ1c3NpYW59KGpRdWVyeSksZnVuY3Rpb24oKXtGbGlwQ2xvY2suTGFuZy5Td2VkaXNoPXt5ZWFyczpcIsOFclwiLG1vbnRoczpcIk3DpW5hZGVyXCIsZGF5czpcIkRhZ2FyXCIsaG91cnM6XCJUaW1tYXJcIixtaW51dGVzOlwiTWludXRlclwiLHNlY29uZHM6XCJTZWt1bmRlclwifSxGbGlwQ2xvY2suTGFuZy5zdj1GbGlwQ2xvY2suTGFuZy5Td2VkaXNoLEZsaXBDbG9jay5MYW5nW1wic3Ytc2VcIl09RmxpcENsb2NrLkxhbmcuU3dlZGlzaCxGbGlwQ2xvY2suTGFuZy5zd2VkaXNoPUZsaXBDbG9jay5MYW5nLlN3ZWRpc2h9KGpRdWVyeSk7XG4iLCIvL2h0dHA6Ly9jb2RlcGVuLmlvL0ZlbGlwZU1hcnRpbmluL3Blbi9zQXR2RFxuXG4ndXNlIHN0cmljdCc7XG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEluaXQoKSB7XG4gICAgYmluZCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gYmluZCgpIHtcbiAgICAkKCcuZ29GbGlwJykub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAkKCcuYWJvdXRNZScpLnRvZ2dsZUNsYXNzKCdyb3RhdGUtM2QnKTtcbiAgICAgICQoJy5jYXJkLWJhY2snKS50b2dnbGVDbGFzcygnei11cCcpO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBJbml0OiBJbml0XG4gIH07XG59KCkpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpLFxuICBGaXJlYmFzZSA9IHJlcXVpcmUoXCJmaXJlYmFzZVwiKSxcbiAgV2VlayA9IHJlcXVpcmUoXCIuL3dlZWtcIik7XG5cbi8qKlxuICogRGljdGF0b3IgLSBBIG1vZHVsZSBmb3Igc2hvd2luZyBhIHdobydzIHRoZSBkaWN0YXRvci5cbiAqIEBtb2R1bGUgZGljdGF0b3JcbiAqIEBQdWJsaWNNZXRob2QgSW5pdFxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGJ1dHRvbixcbiAgICBkaWN0YXRvck51bWJlcixcbiAgICBkaWN0YXRvck5hbWUsXG4gICAgZmlyZWJhc2VVUkwsXG4gICAgc3RhcnRXZWVrLFxuICAgIGRpY3RhdG9ycyxcbiAgICBjdXJyZW50RGljdGF0b3I7XG5cbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBmaXJlYmFzZVVSTDogJ2h0dHBzOi8vZmllcnktdG9yY2gtNDgxOC5maXJlYmFzZWlvLmNvbS8nXG4gIH07XG5cbiAgZnVuY3Rpb24gSW5pdCgpIHtcbiAgICBmaXJlYmFzZVVSTCA9IG5ldyBGaXJlYmFzZShjb25maWcuZmlyZWJhc2VVUkwpO1xuICAgIGJ1dHRvbiA9ICQoJy5qcy1kaWN0YXRvcl9fYnV0dG9uJyk7XG4gICAgZ2V0RGljdGF0b3JzRnJvbUZpcmViYXNlKCk7XG4gICAgZ2V0U3RhcnRXZWVrKCk7XG4gICAgZmlyZWJhc2VVUkwub25jZSgndmFsdWUnLCBmdW5jdGlvbiAoc25hcCkge1xuICAgICAgLy9jb25zb2xlLmxvZygnaW5pdGlhbCBkYXRhIGxvYWRlZCEnLCBPYmplY3Qua2V5cyhzbmFwLnZhbCgpKS5sZW5ndGggPT09IGNvdW50KTtcbiAgICAgIGdldEN1cnJlbnREaWN0YXRvcigpO1xuICAgICAgZ2V0TWludXRlc0Zyb21GaXJlYmFzZSgpO1xuICAgIH0pO1xuXG4gICAgcmVhZFNpbmdsZUZyb21GaXJlYmFzZSgpO1xuICAgIGJ1dHRvbi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0ID8gZXZlbnQucHJldmVudERlZmF1bHQoKSA6IGV2ZW50LnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgICBhZGREaWN0b3RvcigpO1xuICAgICAgd3JpdGVUb0ZpcmVCYXNlKCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGREaWN0b3RvcigpIHtcbiAgICBkaWN0YXRvck51bWJlciA9IHBhcnNlSW50KCQoJy5kaWN0YXRvcl9fbnVtYmVyIGlucHV0JykudmFsKCksIDEwKTtcbiAgICBkaWN0YXRvck5hbWUgPSAkKCcuZGljdGF0b3JfX25hbWUgaW5wdXQnKS52YWwoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHdyaXRlVG9GaXJlQmFzZSgpIHtcbiAgICB2YXIgZGljdGF0b3IgPSB7fTtcbiAgICBkaWN0YXRvcltkaWN0YXRvck51bWJlcl0gPSBkaWN0YXRvck5hbWU7XG4gICAgZmlyZWJhc2VVUkwuY2hpbGQoXCJkaWN0YXRvci9cIikudXBkYXRlKGRpY3RhdG9yKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldERpY3RhdG9yc0Zyb21GaXJlYmFzZSgpIHtcbiAgICBmaXJlYmFzZVVSTC5jaGlsZChcImRpY3RhdG9yXCIpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uIChzbmFwc2hvdCkge1xuICAgICAgZGljdGF0b3JzID0gc25hcHNob3QudmFsKCk7XG4gICAgfSwgZnVuY3Rpb24gKGVycm9yT2JqZWN0KSB7XG4gICAgICBjb25zb2xlLmxvZygnVGhlIHJlYWQgZmFpbGVkOiAnICsgZXJyb3JPYmplY3QuY29kZSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRNaW51dGVzRnJvbUZpcmViYXNlKCkge1xuICAgIGZpcmViYXNlVVJMLmNoaWxkKFwiU3RhbmRVcFwiKS5vbigndmFsdWUnLCBmdW5jdGlvbiAoc25hcHNob3QpIHtcbiAgICAgIHZhciB0b3RhbFN0YW5kVXBNaW51dGVzPTA7XG4gICAgICB2YXIgc3RhbmR1cE1pbnV0ZXMgPSBzbmFwc2hvdC52YWwoKTtcbiAgICAgIGZvciAodmFyIG9iaiBpbiBzdGFuZHVwTWludXRlcykge1xuICAgICAgICB0b3RhbFN0YW5kVXBNaW51dGVzID0gdG90YWxTdGFuZFVwTWludXRlcyArc3RhbmR1cE1pbnV0ZXNbb2JqXTtcbiAgICAgIH1cbiAgICAgICQoJy5oZWFkbGluZV9fdGV4dDInKS50ZXh0KCcgJyArIHRvdGFsU3RhbmRVcE1pbnV0ZXMgKyAnIG1pbnV0ZXInKTtcbiAgICB9LCBmdW5jdGlvbiAoZXJyb3JPYmplY3QpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdUaGUgcmVhZCBmYWlsZWQ6ICcgKyBlcnJvck9iamVjdC5jb2RlKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFN0YXJ0V2VlaygpIHtcbiAgICBmaXJlYmFzZVVSTC5jaGlsZChcIlN0YXJ0V2Vla1wiKS5vbigndmFsdWUnLCBmdW5jdGlvbiAoc25hcHNob3QpIHtcbiAgICAgIHN0YXJ0V2VlayA9IHNuYXBzaG90LnZhbCgpO1xuICAgIH0sIGZ1bmN0aW9uIChlcnJvck9iamVjdCkge1xuICAgICAgY29uc29sZS5sb2coJ1RoZSByZWFkIGZhaWxlZDogJyArIGVycm9yT2JqZWN0LmNvZGUpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q3VycmVudERpY3RhdG9yKCkge1xuICAgIHZhciBjdXJXZWVrID0gV2Vlay5nZXRXZWVrKCk7XG4gICAgdmFyIHdlZWtGcm9tU3RhcnQgPSBjdXJXZWVrIC0gc3RhcnRXZWVrO1xuICAgIHZhciBtYXhEaWN0YXRvciA9IDEwO1xuICAgIHZhciBjdXJyZW50TnVtYmVyID0gd2Vla0Zyb21TdGFydCAlIG1heERpY3RhdG9yO1xuICAgIGN1cnJlbnREaWN0YXRvciA9IGRpY3RhdG9yc1tjdXJyZW50TnVtYmVyXTtcbiAgICAkKCcuY3VycmVudERpY3RhdG9yJykudGV4dChjdXJyZW50RGljdGF0b3IpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVhZFNpbmdsZUZyb21GaXJlYmFzZSgpIHtcbiAgICBmaXJlYmFzZVVSTC5jaGlsZChcImRpY3RhdG9yXCIpLm9uKCdjaGlsZF9hZGRlZCcsIGZ1bmN0aW9uIChzbmFwc2hvdCkge1xuICAgICAgdmFyIHNuYXBzaG90VmFsdWUgPSBzbmFwc2hvdC52YWwoKSxcbiAgICAgICAgc25hcHNob3ROYW1lID0gc25hcHNob3QubmFtZSgpO1xuICAgICAgJCgnLmRpY3RhdG9yX291dHB1dF9fbGlzdCcpLmFwcGVuZCgnPGxpPjxsYWJlbD4nICsgJyM6ICcgKyBzbmFwc2hvdE5hbWUgKyAnIE5hbW46ICcgKyBzbmFwc2hvdFZhbHVlICsgJzwvbGFiZWw+PC9saT4nKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgSW5pdDogSW5pdCxcbiAgICBjb25maWc6IGNvbmZpZ1xuICB9O1xufSgpKTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcbnZhciBGbGlwQ2xvY2sgPSByZXF1aXJlKCdGbGlwQ2xvY2snKTtcbnJlcXVpcmUoJ2hvd2xlcicpO1xuXG4vKipcbiAqIFJhbmRvbSAtIEEgbW9kdWxlIGZvciBzaG93aW5nIGEgcmFuZG9taXplZCB0aW1lci5cbiAqIEBtb2R1bGUgUmFuZG9tXG4gKiBAUHVibGljTWV0aG9kIEluaXRcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gIHZhciBidXR0b24sXG4gICAgbWluLFxuICAgIG1heCxcbiAgICByYW5kb20sXG4gICAgcmFuZG9tVGltZVJldHJpZXZlZCxcbiAgICB0aW1lUmV0cmlldmVkLFxuICAgIHNlY29uZHNQYXN0LFxuICAgIHJhbmRvbVRpbWVJblNlY29uZHM7XG5cbiAgdmFyIGNvbmZpZyA9IHtcbiAgICB1cmxzOiAnc291bmRzL1N0YW5kVXAubXAzJyxcbiAgICBidXR0b246ICcuanMtcmFuZG9tX19idXR0b24nLFxuICAgIGZpcmViYXNlVVJMOiAnaHR0cHM6Ly9maWVyeS10b3JjaC00ODE4LmZpcmViYXNlaW8uY29tLydcbiAgfTtcblxuICB2YXIgc291bmQgPSBuZXcgSG93bCh7XG4gICAgdXJsczogW2NvbmZpZy51cmxzXVxuICB9KTtcblxuICB2YXIgc291bmQyID0gbmV3IEhvd2woe1xuICAgIHVybHM6IFsnc291bmRzL3NtYl8xLXVwLndhdiddXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIEluaXQoKSB7XG4gICAgYnV0dG9uID0gJChjb25maWcuYnV0dG9uKTtcbiAgICBnZXRMb2NhbFN0b3JhZ2UoKTtcbiAgICBpZiAocmFuZG9tVGltZVJldHJpZXZlZCAhPT0gbnVsbCkge1xuICAgICAgdmFyIHNlY29uZHNQYXN0ID0gZ2V0U2Vjb25kc1Bhc3QoKTtcbiAgICAgIHJhbmRvbVRpbWVJblNlY29uZHMgPSByYW5kb21UaW1lUmV0cmlldmVkICogNjA7XG4gICAgICBpZiAocmFuZG9tVGltZUluU2Vjb25kcyA+IHNlY29uZHNQYXN0KSB7XG4gICAgICAgIGRpc3BsYXlUaW1lTGVmdCgpO1xuICAgICAgfVxuICAgIH1cbiAgICBidXR0b24uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQgPyBldmVudC5wcmV2ZW50RGVmYXVsdCgpIDogZXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICAgIGdldE1heE1pbigpO1xuICAgICAgZ2V0UmFuZG9tTnVtYmVyKCk7XG4gICAgICBkaXNwbGF5UmFuZG9tTnVtYmVyKCk7XG4gICAgICBzZXRMb2NhbFN0b3JhZ2UoKTtcbiAgICAgIHNldFRpbWVJbkZpcmViYXNlKCk7XG4gICAgICBzb3VuZC5wbGF5KCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRUaW1lSW5GaXJlYmFzZSgpIHtcbiAgICB2YXIgZmlyZWJhc2VVUkwgPSBuZXcgRmlyZWJhc2UoY29uZmlnLmZpcmViYXNlVVJMKTtcbiAgICB2YXIgdGltZU5vdyA9IG5ldyBEYXRlKCk7XG4gICAgdmFyIHRpbWVPYmplY3QgPSB7fTtcbiAgICB0aW1lT2JqZWN0W3RpbWVOb3ddID0gcmFuZG9tO1xuICAgIGZpcmViYXNlVVJMLmNoaWxkKFwiU3RhbmRVcC9cIikudXBkYXRlKHRpbWVPYmplY3QpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0U2Vjb25kc1Bhc3QoKSB7XG4gICAgdmFyIHRpbWVOb3cgPSBuZXcgRGF0ZSgpLFxuICAgICAgdGltZUJlZm9yZSA9IG5ldyBEYXRlKHRpbWVSZXRyaWV2ZWQpLFxuICAgICAgdGltZURpZmZlcmVuY2UgPSB0aW1lTm93LmdldFRpbWUoKSAtIHRpbWVCZWZvcmUuZ2V0VGltZSgpO1xuICAgIHNlY29uZHNQYXN0ID0gdGltZURpZmZlcmVuY2UgLyAxMDAwO1xuICAgIHJldHVybiBzZWNvbmRzUGFzdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldE1heE1pbigpIHtcbiAgICBtaW4gPSBwYXJzZUludCgkKCcucmFuZG9tX2lucHV0c19fbWludXRlcy0tbWluJykudmFsKCksIDEwKTtcbiAgICBtYXggPSBwYXJzZUludCgkKCcucmFuZG9tX2lucHV0c19fbWludXRlcy0tbWF4JykudmFsKCksIDEwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFJhbmRvbU51bWJlcigpIHtcbiAgICByYW5kb20gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkgKyBtaW4pO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlzcGxheVRpbWVMZWZ0KCkge1xuICAgIHZhciB0aW1lbGVmdCA9IHJhbmRvbVRpbWVJblNlY29uZHMgLSBzZWNvbmRzUGFzdDtcbiAgICAkKCcuY2xvY2snKS5GbGlwQ2xvY2sodGltZWxlZnQsIHtcbiAgICAgIGxhbmd1YWdlOiAnc3YnLFxuICAgICAgY291bnRkb3duOiB0cnVlLFxuICAgICAgY2FsbGJhY2tzOiB7XG4gICAgICAgIHN0b3A6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkKCcucmFuZG9tX21lc3NhZ2VfX2Rpc3BhbHknKS5odG1sKCdCcmEgam9iYmF0IScpO1xuICAgICAgICAgIHNvdW5kMi5wbGF5KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc3BsYXlSYW5kb21OdW1iZXIoKSB7XG4gICAgJCgnLmNsb2NrJykuRmxpcENsb2NrKHJhbmRvbSAqIDYwLCB7XG4gICAgICBsYW5ndWFnZTogJ3N2JyxcbiAgICAgIGNvdW50ZG93bjogdHJ1ZSxcbiAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICBzdG9wOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJCgnLnJhbmRvbV9tZXNzYWdlX19kaXNwYWx5JykuaHRtbCgnQnJhIGpvYmJhdCEnKTtcbiAgICAgICAgICBzb3VuZDIucGxheSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRMb2NhbFN0b3JhZ2UoKSB7XG4gICAgcmFuZG9tVGltZVJldHJpZXZlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyYW5kb21UaW1lJyk7XG4gICAgdGltZVJldHJpZXZlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0aW1lRGF0ZScpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0TG9jYWxTdG9yYWdlKCkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyYW5kb21UaW1lJywgcmFuZG9tKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGltZURhdGUnLCBuZXcgRGF0ZSgpKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgSW5pdDogSW5pdCxcbiAgICBjb25maWc6IGNvbmZpZ1xuICB9O1xufSgpKTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcbnJlcXVpcmUoJ2hvd2xlcicpO1xuXG4vKipcbiAqIFRpbWVyIC0gQSBtb2R1bGUgZm9yIHRpbWVyLlxuICogQG1vZHVsZSB0aW1lclxuICogQFB1YmxpY01ldGhvZCBJbml0XG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuXG4gIHZhciBjb25maWcgPSB7XG4gICAgdXJsczogJ3NvdW5kcy9LbmlnaHQubXAzJyxcbiAgICB0aW1lOiB7aG91cnM6IDksIG1pbnV0ZXM6IDMwfVxuICB9O1xuXG4gIHZhciBzb3VuZCA9IG5ldyBIb3dsKHtcbiAgICB1cmxzOiBbY29uZmlnLnVybHNdXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIEluaXQoKSB7XG4gICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgdmFyIG1pbGxpc1RpbGxTdGFuZFVwID0gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIG5vdy5nZXRNb250aCgpLCBub3cuZ2V0RGF0ZSgpLCBjb25maWcudGltZS5ob3VycywgY29uZmlnLnRpbWUubWludXRlcywgMCwgMCkgLSBub3c7XG4gICAgaWYgKG1pbGxpc1RpbGxTdGFuZFVwIDwgMCkge1xuICAgICAgbWlsbGlzVGlsbFN0YW5kVXAgKz0gODY0MDAwMDA7IC8vIGl0J3MgYWZ0ZXIgc3RhbmQgdXAsIHRyeSB0b21vcnJvdy5cbiAgICB9XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwicGxheSBzb3VuZFwiKTtcbiAgICAgIHNvdW5kLnBsYXkoKTtcbiAgICAgIEluaXQoKTtcbiAgICB9LCBtaWxsaXNUaWxsU3RhbmRVcCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIEluaXQ6IEluaXQsXG4gICAgY29uZmlnOiBjb25maWdcbiAgfTtcbn0oKSk7XG4iLCIndXNlIHN0cmljdCc7XG5cblxuLyoqXG4gKiBXZWVrIC0gQSBtb2R1bGUgZm9yIHNob3dpbmcgd2VlayBudW1iZXIuXG4gKiBAbW9kdWxlIHdlZWtcbiAqIEBQdWJsaWNNZXRob2QgSW5pdFxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gZ2V0V2VlaygpIHtcbiAgICBEYXRlLnByb3RvdHlwZS5nZXRXZWVrID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG9uZWphbiA9IG5ldyBEYXRlKHRoaXMuZ2V0RnVsbFllYXIoKSwgMCwgMSk7XG4gICAgICByZXR1cm4gTWF0aC5jZWlsKCgoKHRoaXMgLSBvbmVqYW4pIC8gODY0MDAwMDApICsgb25lamFuLmdldERheSgpICsgMSkgLyA3KTtcbiAgICB9O1xuXG4gICAgdmFyIHdlZWtOdW1iZXIgPSAobmV3IERhdGUoKSkuZ2V0V2VlaygpO1xuXG4gICAgcmV0dXJuIHdlZWtOdW1iZXI7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGdldFdlZWs6IGdldFdlZWtcbiAgfTtcbn0oKSk7XG4iLCIvKiEgQGxpY2Vuc2UgRmlyZWJhc2UgdjIuMS4yIC0gTGljZW5zZTogaHR0cHM6Ly93d3cuZmlyZWJhc2UuY29tL3Rlcm1zL3Rlcm1zLW9mLXNlcnZpY2UuaHRtbCAqLyAoZnVuY3Rpb24oKSB7dmFyIGgsYWE9dGhpcztmdW5jdGlvbiBtKGEpe3JldHVybiB2b2lkIDAhPT1hfWZ1bmN0aW9uIGJhKCl7fWZ1bmN0aW9uIGNhKGEpe2EuTmI9ZnVuY3Rpb24oKXtyZXR1cm4gYS5rZj9hLmtmOmEua2Y9bmV3IGF9fVxuZnVuY3Rpb24gZGEoYSl7dmFyIGI9dHlwZW9mIGE7aWYoXCJvYmplY3RcIj09YilpZihhKXtpZihhIGluc3RhbmNlb2YgQXJyYXkpcmV0dXJuXCJhcnJheVwiO2lmKGEgaW5zdGFuY2VvZiBPYmplY3QpcmV0dXJuIGI7dmFyIGM9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpO2lmKFwiW29iamVjdCBXaW5kb3ddXCI9PWMpcmV0dXJuXCJvYmplY3RcIjtpZihcIltvYmplY3QgQXJyYXldXCI9PWN8fFwibnVtYmVyXCI9PXR5cGVvZiBhLmxlbmd0aCYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuc3BsaWNlJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5wcm9wZXJ0eUlzRW51bWVyYWJsZSYmIWEucHJvcGVydHlJc0VudW1lcmFibGUoXCJzcGxpY2VcIikpcmV0dXJuXCJhcnJheVwiO2lmKFwiW29iamVjdCBGdW5jdGlvbl1cIj09Y3x8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuY2FsbCYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEucHJvcGVydHlJc0VudW1lcmFibGUmJiFhLnByb3BlcnR5SXNFbnVtZXJhYmxlKFwiY2FsbFwiKSlyZXR1cm5cImZ1bmN0aW9uXCJ9ZWxzZSByZXR1cm5cIm51bGxcIjtcbmVsc2UgaWYoXCJmdW5jdGlvblwiPT1iJiZcInVuZGVmaW5lZFwiPT10eXBlb2YgYS5jYWxsKXJldHVyblwib2JqZWN0XCI7cmV0dXJuIGJ9ZnVuY3Rpb24gZWEoYSl7cmV0dXJuXCJhcnJheVwiPT1kYShhKX1mdW5jdGlvbiBmYShhKXt2YXIgYj1kYShhKTtyZXR1cm5cImFycmF5XCI9PWJ8fFwib2JqZWN0XCI9PWImJlwibnVtYmVyXCI9PXR5cGVvZiBhLmxlbmd0aH1mdW5jdGlvbiBwKGEpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBhfWZ1bmN0aW9uIGdhKGEpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBhfWZ1bmN0aW9uIGhhKGEpe3JldHVyblwiZnVuY3Rpb25cIj09ZGEoYSl9ZnVuY3Rpb24gaWEoYSl7dmFyIGI9dHlwZW9mIGE7cmV0dXJuXCJvYmplY3RcIj09YiYmbnVsbCE9YXx8XCJmdW5jdGlvblwiPT1ifWZ1bmN0aW9uIGphKGEsYixjKXtyZXR1cm4gYS5jYWxsLmFwcGx5KGEuYmluZCxhcmd1bWVudHMpfVxuZnVuY3Rpb24ga2EoYSxiLGMpe2lmKCFhKXRocm93IEVycm9yKCk7aWYoMjxhcmd1bWVudHMubGVuZ3RoKXt2YXIgZD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtBcnJheS5wcm90b3R5cGUudW5zaGlmdC5hcHBseShjLGQpO3JldHVybiBhLmFwcGx5KGIsYyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGIsYXJndW1lbnRzKX19ZnVuY3Rpb24gcShhLGIsYyl7cT1GdW5jdGlvbi5wcm90b3R5cGUuYmluZCYmLTEhPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLnRvU3RyaW5nKCkuaW5kZXhPZihcIm5hdGl2ZSBjb2RlXCIpP2phOmthO3JldHVybiBxLmFwcGx5KG51bGwsYXJndW1lbnRzKX12YXIgbGE9RGF0ZS5ub3d8fGZ1bmN0aW9uKCl7cmV0dXJuK25ldyBEYXRlfTtcbmZ1bmN0aW9uIG1hKGEsYil7ZnVuY3Rpb24gYygpe31jLnByb3RvdHlwZT1iLnByb3RvdHlwZTthLkpnPWIucHJvdG90eXBlO2EucHJvdG90eXBlPW5ldyBjO2EuRmc9ZnVuY3Rpb24oYSxjLGYpe3JldHVybiBiLnByb3RvdHlwZVtjXS5hcHBseShhLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKSl9fTtmdW5jdGlvbiBuYShhKXthPVN0cmluZyhhKTtpZigvXlxccyokLy50ZXN0KGEpPzA6L15bXFxdLDp7fVxcc1xcdTIwMjhcXHUyMDI5XSokLy50ZXN0KGEucmVwbGFjZSgvXFxcXFtcIlxcXFxcXC9iZm5ydHVdL2csXCJAXCIpLnJlcGxhY2UoL1wiW15cIlxcXFxcXG5cXHJcXHUyMDI4XFx1MjAyOVxceDAwLVxceDA4XFx4MGEtXFx4MWZdKlwifHRydWV8ZmFsc2V8bnVsbHwtP1xcZCsoPzpcXC5cXGQqKT8oPzpbZUVdWytcXC1dP1xcZCspPy9nLFwiXVwiKS5yZXBsYWNlKC8oPzpefDp8LCkoPzpbXFxzXFx1MjAyOFxcdTIwMjldKlxcWykrL2csXCJcIikpKXRyeXtyZXR1cm4gZXZhbChcIihcIithK1wiKVwiKX1jYXRjaChiKXt9dGhyb3cgRXJyb3IoXCJJbnZhbGlkIEpTT04gc3RyaW5nOiBcIithKTt9ZnVuY3Rpb24gb2EoKXt0aGlzLkhkPXZvaWQgMH1cbmZ1bmN0aW9uIHBhKGEsYixjKXtzd2l0Y2godHlwZW9mIGIpe2Nhc2UgXCJzdHJpbmdcIjpxYShiLGMpO2JyZWFrO2Nhc2UgXCJudW1iZXJcIjpjLnB1c2goaXNGaW5pdGUoYikmJiFpc05hTihiKT9iOlwibnVsbFwiKTticmVhaztjYXNlIFwiYm9vbGVhblwiOmMucHVzaChiKTticmVhaztjYXNlIFwidW5kZWZpbmVkXCI6Yy5wdXNoKFwibnVsbFwiKTticmVhaztjYXNlIFwib2JqZWN0XCI6aWYobnVsbD09Yil7Yy5wdXNoKFwibnVsbFwiKTticmVha31pZihlYShiKSl7dmFyIGQ9Yi5sZW5ndGg7Yy5wdXNoKFwiW1wiKTtmb3IodmFyIGU9XCJcIixmPTA7ZjxkO2YrKyljLnB1c2goZSksZT1iW2ZdLHBhKGEsYS5IZD9hLkhkLmNhbGwoYixTdHJpbmcoZiksZSk6ZSxjKSxlPVwiLFwiO2MucHVzaChcIl1cIik7YnJlYWt9Yy5wdXNoKFwie1wiKTtkPVwiXCI7Zm9yKGYgaW4gYilPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYixmKSYmKGU9YltmXSxcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiYoYy5wdXNoKGQpLHFhKGYsYyksXG5jLnB1c2goXCI6XCIpLHBhKGEsYS5IZD9hLkhkLmNhbGwoYixmLGUpOmUsYyksZD1cIixcIikpO2MucHVzaChcIn1cIik7YnJlYWs7Y2FzZSBcImZ1bmN0aW9uXCI6YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcIlVua25vd24gdHlwZTogXCIrdHlwZW9mIGIpO319dmFyIHJhPXsnXCInOidcXFxcXCInLFwiXFxcXFwiOlwiXFxcXFxcXFxcIixcIi9cIjpcIlxcXFwvXCIsXCJcXGJcIjpcIlxcXFxiXCIsXCJcXGZcIjpcIlxcXFxmXCIsXCJcXG5cIjpcIlxcXFxuXCIsXCJcXHJcIjpcIlxcXFxyXCIsXCJcXHRcIjpcIlxcXFx0XCIsXCJcXHgwQlwiOlwiXFxcXHUwMDBiXCJ9LHNhPS9cXHVmZmZmLy50ZXN0KFwiXFx1ZmZmZlwiKT8vW1xcXFxcXFwiXFx4MDAtXFx4MWZcXHg3Zi1cXHVmZmZmXS9nOi9bXFxcXFxcXCJcXHgwMC1cXHgxZlxceDdmLVxceGZmXS9nO1xuZnVuY3Rpb24gcWEoYSxiKXtiLnB1c2goJ1wiJyxhLnJlcGxhY2Uoc2EsZnVuY3Rpb24oYSl7aWYoYSBpbiByYSlyZXR1cm4gcmFbYV07dmFyIGI9YS5jaGFyQ29kZUF0KDApLGU9XCJcXFxcdVwiOzE2PmI/ZSs9XCIwMDBcIjoyNTY+Yj9lKz1cIjAwXCI6NDA5Nj5iJiYoZSs9XCIwXCIpO3JldHVybiByYVthXT1lK2IudG9TdHJpbmcoMTYpfSksJ1wiJyl9O2Z1bmN0aW9uIHRhKGEpe3JldHVyblwidW5kZWZpbmVkXCIhPT10eXBlb2YgSlNPTiYmbShKU09OLnBhcnNlKT9KU09OLnBhcnNlKGEpOm5hKGEpfWZ1bmN0aW9uIHIoYSl7aWYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBKU09OJiZtKEpTT04uc3RyaW5naWZ5KSlhPUpTT04uc3RyaW5naWZ5KGEpO2Vsc2V7dmFyIGI9W107cGEobmV3IG9hLGEsYik7YT1iLmpvaW4oXCJcIil9cmV0dXJuIGF9O2Z1bmN0aW9uIHMoYSxiKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYil9ZnVuY3Rpb24gdChhLGIpe2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGIpKXJldHVybiBhW2JdfWZ1bmN0aW9uIHVhKGEsYil7Zm9yKHZhciBjIGluIGEpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYykmJmIoYyxhW2NdKX1mdW5jdGlvbiB2YShhKXt2YXIgYj17fTt1YShhLGZ1bmN0aW9uKGEsZCl7YlthXT1kfSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIHdhKGEpe3RoaXMudWM9YTt0aGlzLkVkPVwiZmlyZWJhc2U6XCJ9aD13YS5wcm90b3R5cGU7aC5zZXQ9ZnVuY3Rpb24oYSxiKXtudWxsPT1iP3RoaXMudWMucmVtb3ZlSXRlbSh0aGlzLkVkK2EpOnRoaXMudWMuc2V0SXRlbSh0aGlzLkVkK2EscihiKSl9O2guZ2V0PWZ1bmN0aW9uKGEpe2E9dGhpcy51Yy5nZXRJdGVtKHRoaXMuRWQrYSk7cmV0dXJuIG51bGw9PWE/bnVsbDp0YShhKX07aC5yZW1vdmU9ZnVuY3Rpb24oYSl7dGhpcy51Yy5yZW1vdmVJdGVtKHRoaXMuRWQrYSl9O2gubGY9ITE7aC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVjLnRvU3RyaW5nKCl9O2Z1bmN0aW9uIHhhKCl7dGhpcy5vYz17fX14YS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGEsYil7bnVsbD09Yj9kZWxldGUgdGhpcy5vY1thXTp0aGlzLm9jW2FdPWJ9O3hhLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHModGhpcy5vYyxhKT90aGlzLm9jW2FdOm51bGx9O3hhLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oYSl7ZGVsZXRlIHRoaXMub2NbYV19O3hhLnByb3RvdHlwZS5sZj0hMDtmdW5jdGlvbiB5YShhKXt0cnl7aWYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiB3aW5kb3cmJlwidW5kZWZpbmVkXCIhPT10eXBlb2Ygd2luZG93W2FdKXt2YXIgYj13aW5kb3dbYV07Yi5zZXRJdGVtKFwiZmlyZWJhc2U6c2VudGluZWxcIixcImNhY2hlXCIpO2IucmVtb3ZlSXRlbShcImZpcmViYXNlOnNlbnRpbmVsXCIpO3JldHVybiBuZXcgd2EoYil9fWNhdGNoKGMpe31yZXR1cm4gbmV3IHhhfXZhciB6YT15YShcImxvY2FsU3RvcmFnZVwiKSx2PXlhKFwic2Vzc2lvblN0b3JhZ2VcIik7ZnVuY3Rpb24gQWEoYSxiLGMsZCxlKXt0aGlzLmhvc3Q9YS50b0xvd2VyQ2FzZSgpO3RoaXMuZG9tYWluPXRoaXMuaG9zdC5zdWJzdHIodGhpcy5ob3N0LmluZGV4T2YoXCIuXCIpKzEpO3RoaXMuQWI9Yjt0aGlzLnRiPWM7dGhpcy5EZz1kO3RoaXMuRGQ9ZXx8XCJcIjt0aGlzLk1hPXphLmdldChcImhvc3Q6XCIrYSl8fHRoaXMuaG9zdH1mdW5jdGlvbiBCYShhLGIpe2IhPT1hLk1hJiYoYS5NYT1iLFwicy1cIj09PWEuTWEuc3Vic3RyKDAsMikmJnphLnNldChcImhvc3Q6XCIrYS5ob3N0LGEuTWEpKX1BYS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgYT0odGhpcy5BYj9cImh0dHBzOi8vXCI6XCJodHRwOi8vXCIpK3RoaXMuaG9zdDt0aGlzLkRkJiYoYSs9XCI8XCIrdGhpcy5EZCtcIj5cIik7cmV0dXJuIGF9O2Z1bmN0aW9uIENhKCl7dGhpcy5TYT0tMX07ZnVuY3Rpb24gRGEoKXt0aGlzLlNhPS0xO3RoaXMuU2E9NjQ7dGhpcy5SPVtdO3RoaXMuYmU9W107dGhpcy5FZj1bXTt0aGlzLkFkPVtdO3RoaXMuQWRbMF09MTI4O2Zvcih2YXIgYT0xO2E8dGhpcy5TYTsrK2EpdGhpcy5BZFthXT0wO3RoaXMuVGQ9dGhpcy5TYj0wO3RoaXMucmVzZXQoKX1tYShEYSxDYSk7RGEucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5SWzBdPTE3MzI1ODQxOTM7dGhpcy5SWzFdPTQwMjMyMzM0MTc7dGhpcy5SWzJdPTI1NjIzODMxMDI7dGhpcy5SWzNdPTI3MTczMzg3ODt0aGlzLlJbNF09MzI4NTM3NzUyMDt0aGlzLlRkPXRoaXMuU2I9MH07XG5mdW5jdGlvbiBFYShhLGIsYyl7Y3x8KGM9MCk7dmFyIGQ9YS5FZjtpZihwKGIpKWZvcih2YXIgZT0wOzE2PmU7ZSsrKWRbZV09Yi5jaGFyQ29kZUF0KGMpPDwyNHxiLmNoYXJDb2RlQXQoYysxKTw8MTZ8Yi5jaGFyQ29kZUF0KGMrMik8PDh8Yi5jaGFyQ29kZUF0KGMrMyksYys9NDtlbHNlIGZvcihlPTA7MTY+ZTtlKyspZFtlXT1iW2NdPDwyNHxiW2MrMV08PDE2fGJbYysyXTw8OHxiW2MrM10sYys9NDtmb3IoZT0xNjs4MD5lO2UrKyl7dmFyIGY9ZFtlLTNdXmRbZS04XV5kW2UtMTRdXmRbZS0xNl07ZFtlXT0oZjw8MXxmPj4+MzEpJjQyOTQ5NjcyOTV9Yj1hLlJbMF07Yz1hLlJbMV07Zm9yKHZhciBnPWEuUlsyXSxrPWEuUlszXSxsPWEuUls0XSxuLGU9MDs4MD5lO2UrKyk0MD5lPzIwPmU/KGY9a15jJihnXmspLG49MTUxODUwMDI0OSk6KGY9Y15nXmssbj0xODU5Nzc1MzkzKTo2MD5lPyhmPWMmZ3xrJihjfGcpLG49MjQwMDk1OTcwOCk6KGY9Y15nXmssbj0zMzk1NDY5NzgyKSxmPShiPDxcbjV8Yj4+PjI3KStmK2wrbitkW2VdJjQyOTQ5NjcyOTUsbD1rLGs9ZyxnPShjPDwzMHxjPj4+MikmNDI5NDk2NzI5NSxjPWIsYj1mO2EuUlswXT1hLlJbMF0rYiY0Mjk0OTY3Mjk1O2EuUlsxXT1hLlJbMV0rYyY0Mjk0OTY3Mjk1O2EuUlsyXT1hLlJbMl0rZyY0Mjk0OTY3Mjk1O2EuUlszXT1hLlJbM10rayY0Mjk0OTY3Mjk1O2EuUls0XT1hLlJbNF0rbCY0Mjk0OTY3Mjk1fVxuRGEucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihhLGIpe20oYil8fChiPWEubGVuZ3RoKTtmb3IodmFyIGM9Yi10aGlzLlNhLGQ9MCxlPXRoaXMuYmUsZj10aGlzLlNiO2Q8Yjspe2lmKDA9PWYpZm9yKDtkPD1jOylFYSh0aGlzLGEsZCksZCs9dGhpcy5TYTtpZihwKGEpKWZvcig7ZDxiOyl7aWYoZVtmXT1hLmNoYXJDb2RlQXQoZCksKytmLCsrZCxmPT10aGlzLlNhKXtFYSh0aGlzLGUpO2Y9MDticmVha319ZWxzZSBmb3IoO2Q8YjspaWYoZVtmXT1hW2RdLCsrZiwrK2QsZj09dGhpcy5TYSl7RWEodGhpcyxlKTtmPTA7YnJlYWt9fXRoaXMuU2I9Zjt0aGlzLlRkKz1ifTtmdW5jdGlvbiBGYSgpe3JldHVybiBNYXRoLmZsb29yKDIxNDc0ODM2NDgqTWF0aC5yYW5kb20oKSkudG9TdHJpbmcoMzYpK01hdGguYWJzKE1hdGguZmxvb3IoMjE0NzQ4MzY0OCpNYXRoLnJhbmRvbSgpKV5sYSgpKS50b1N0cmluZygzNil9O3ZhciB3PUFycmF5LnByb3RvdHlwZSxHYT13LmluZGV4T2Y/ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB3LmluZGV4T2YuY2FsbChhLGIsYyl9OmZ1bmN0aW9uKGEsYixjKXtjPW51bGw9PWM/MDowPmM/TWF0aC5tYXgoMCxhLmxlbmd0aCtjKTpjO2lmKHAoYSkpcmV0dXJuIHAoYikmJjE9PWIubGVuZ3RoP2EuaW5kZXhPZihiLGMpOi0xO2Zvcig7YzxhLmxlbmd0aDtjKyspaWYoYyBpbiBhJiZhW2NdPT09YilyZXR1cm4gYztyZXR1cm4tMX0sSGE9dy5mb3JFYWNoP2Z1bmN0aW9uKGEsYixjKXt3LmZvckVhY2guY2FsbChhLGIsYyl9OmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9YS5sZW5ndGgsZT1wKGEpP2Euc3BsaXQoXCJcIik6YSxmPTA7ZjxkO2YrKylmIGluIGUmJmIuY2FsbChjLGVbZl0sZixhKX0sSWE9dy5maWx0ZXI/ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB3LmZpbHRlci5jYWxsKGEsYixjKX06ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPVtdLGY9MCxnPXAoYSk/XG5hLnNwbGl0KFwiXCIpOmEsaz0wO2s8ZDtrKyspaWYoayBpbiBnKXt2YXIgbD1nW2tdO2IuY2FsbChjLGwsayxhKSYmKGVbZisrXT1sKX1yZXR1cm4gZX0sSmE9dy5tYXA/ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB3Lm1hcC5jYWxsKGEsYixjKX06ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPUFycmF5KGQpLGY9cChhKT9hLnNwbGl0KFwiXCIpOmEsZz0wO2c8ZDtnKyspZyBpbiBmJiYoZVtnXT1iLmNhbGwoYyxmW2ddLGcsYSkpO3JldHVybiBlfSxLYT13LnJlZHVjZT9mdW5jdGlvbihhLGIsYyxkKXtkJiYoYj1xKGIsZCkpO3JldHVybiB3LnJlZHVjZS5jYWxsKGEsYixjKX06ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9YztIYShhLGZ1bmN0aW9uKGMsZyl7ZT1iLmNhbGwoZCxlLGMsZyxhKX0pO3JldHVybiBlfSxMYT13LmV2ZXJ5P2Z1bmN0aW9uKGEsYixjKXtyZXR1cm4gdy5ldmVyeS5jYWxsKGEsYixjKX06ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPVxucChhKT9hLnNwbGl0KFwiXCIpOmEsZj0wO2Y8ZDtmKyspaWYoZiBpbiBlJiYhYi5jYWxsKGMsZVtmXSxmLGEpKXJldHVybiExO3JldHVybiEwfTtmdW5jdGlvbiBNYShhLGIpe3ZhciBjPU5hKGEsYix2b2lkIDApO3JldHVybiAwPmM/bnVsbDpwKGEpP2EuY2hhckF0KGMpOmFbY119ZnVuY3Rpb24gTmEoYSxiLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPXAoYSk/YS5zcGxpdChcIlwiKTphLGY9MDtmPGQ7ZisrKWlmKGYgaW4gZSYmYi5jYWxsKGMsZVtmXSxmLGEpKXJldHVybiBmO3JldHVybi0xfWZ1bmN0aW9uIE9hKGEsYil7dmFyIGM9R2EoYSxiKTswPD1jJiZ3LnNwbGljZS5jYWxsKGEsYywxKX1mdW5jdGlvbiBQYShhLGIsYyl7cmV0dXJuIDI+PWFyZ3VtZW50cy5sZW5ndGg/dy5zbGljZS5jYWxsKGEsYik6dy5zbGljZS5jYWxsKGEsYixjKX1mdW5jdGlvbiBRYShhLGIpe2Euc29ydChifHxSYSl9ZnVuY3Rpb24gUmEoYSxiKXtyZXR1cm4gYT5iPzE6YTxiPy0xOjB9O3ZhciBTYTthOnt2YXIgVGE9YWEubmF2aWdhdG9yO2lmKFRhKXt2YXIgVWE9VGEudXNlckFnZW50O2lmKFVhKXtTYT1VYTticmVhayBhfX1TYT1cIlwifWZ1bmN0aW9uIFZhKGEpe3JldHVybi0xIT1TYS5pbmRleE9mKGEpfTt2YXIgV2E9VmEoXCJPcGVyYVwiKXx8VmEoXCJPUFJcIiksWGE9VmEoXCJUcmlkZW50XCIpfHxWYShcIk1TSUVcIiksWWE9VmEoXCJHZWNrb1wiKSYmLTE9PVNhLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcIndlYmtpdFwiKSYmIShWYShcIlRyaWRlbnRcIil8fFZhKFwiTVNJRVwiKSksWmE9LTEhPVNhLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcIndlYmtpdFwiKTsoZnVuY3Rpb24oKXt2YXIgYT1cIlwiLGI7aWYoV2EmJmFhLm9wZXJhKXJldHVybiBhPWFhLm9wZXJhLnZlcnNpb24saGEoYSk/YSgpOmE7WWE/Yj0vcnZcXDooW15cXCk7XSspKFxcKXw7KS86WGE/Yj0vXFxiKD86TVNJRXxydilbOiBdKFteXFwpO10rKShcXCl8OykvOlphJiYoYj0vV2ViS2l0XFwvKFxcUyspLyk7YiYmKGE9KGE9Yi5leGVjKFNhKSk/YVsxXTpcIlwiKTtyZXR1cm4gWGEmJihiPShiPWFhLmRvY3VtZW50KT9iLmRvY3VtZW50TW9kZTp2b2lkIDAsYj5wYXJzZUZsb2F0KGEpKT9TdHJpbmcoYik6YX0pKCk7dmFyICRhPW51bGwsYWI9bnVsbCxiYj1udWxsO2Z1bmN0aW9uIGNiKGEsYil7aWYoIWZhKGEpKXRocm93IEVycm9yKFwiZW5jb2RlQnl0ZUFycmF5IHRha2VzIGFuIGFycmF5IGFzIGEgcGFyYW1ldGVyXCIpO2RiKCk7Zm9yKHZhciBjPWI/YWI6JGEsZD1bXSxlPTA7ZTxhLmxlbmd0aDtlKz0zKXt2YXIgZj1hW2VdLGc9ZSsxPGEubGVuZ3RoLGs9Zz9hW2UrMV06MCxsPWUrMjxhLmxlbmd0aCxuPWw/YVtlKzJdOjAsdT1mPj4yLGY9KGYmMyk8PDR8az4+NCxrPShrJjE1KTw8MnxuPj42LG49biY2MztsfHwobj02NCxnfHwoaz02NCkpO2QucHVzaChjW3VdLGNbZl0sY1trXSxjW25dKX1yZXR1cm4gZC5qb2luKFwiXCIpfVxuZnVuY3Rpb24gZGIoKXtpZighJGEpeyRhPXt9O2FiPXt9O2JiPXt9O2Zvcih2YXIgYT0wOzY1PmE7YSsrKSRhW2FdPVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cIi5jaGFyQXQoYSksYWJbYV09XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OS1fLlwiLmNoYXJBdChhKSxiYlthYlthXV09YX19O3ZhciBlYj1mdW5jdGlvbigpe3ZhciBhPTE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGErK319KCk7ZnVuY3Rpb24geShhLGIpe2lmKCFhKXRocm93IGZiKGIpO31mdW5jdGlvbiBmYihhKXtyZXR1cm4gRXJyb3IoXCJGaXJlYmFzZSBJTlRFUk5BTCBBU1NFUlQgRkFJTEVEOlwiK2EpfVxuZnVuY3Rpb24gZ2IoYSl7dHJ5e3ZhciBiO2lmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgYXRvYiliPWF0b2IoYSk7ZWxzZXtkYigpO2Zvcih2YXIgYz1iYixkPVtdLGU9MDtlPGEubGVuZ3RoOyl7dmFyIGY9Y1thLmNoYXJBdChlKyspXSxnPWU8YS5sZW5ndGg/Y1thLmNoYXJBdChlKV06MDsrK2U7dmFyIGs9ZTxhLmxlbmd0aD9jW2EuY2hhckF0KGUpXTo2NDsrK2U7dmFyIGw9ZTxhLmxlbmd0aD9jW2EuY2hhckF0KGUpXTo2NDsrK2U7aWYobnVsbD09Znx8bnVsbD09Z3x8bnVsbD09a3x8bnVsbD09bCl0aHJvdyBFcnJvcigpO2QucHVzaChmPDwyfGc+PjQpOzY0IT1rJiYoZC5wdXNoKGc8PDQmMjQwfGs+PjIpLDY0IT1sJiZkLnB1c2goazw8NiYxOTJ8bCkpfWlmKDgxOTI+ZC5sZW5ndGgpYj1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsZCk7ZWxzZXthPVwiXCI7Zm9yKGM9MDtjPGQubGVuZ3RoO2MrPTgxOTIpYSs9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLFBhKGQsYyxcbmMrODE5MikpO2I9YX19cmV0dXJuIGJ9Y2F0Y2gobil7aGIoXCJiYXNlNjREZWNvZGUgZmFpbGVkOiBcIixuKX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBpYihhKXt2YXIgYj1qYihhKTthPW5ldyBEYTthLnVwZGF0ZShiKTt2YXIgYj1bXSxjPTgqYS5UZDs1Nj5hLlNiP2EudXBkYXRlKGEuQWQsNTYtYS5TYik6YS51cGRhdGUoYS5BZCxhLlNhLShhLlNiLTU2KSk7Zm9yKHZhciBkPWEuU2EtMTs1Njw9ZDtkLS0pYS5iZVtkXT1jJjI1NSxjLz0yNTY7RWEoYSxhLmJlKTtmb3IoZD1jPTA7NT5kO2QrKylmb3IodmFyIGU9MjQ7MDw9ZTtlLT04KWJbY109YS5SW2RdPj5lJjI1NSwrK2M7cmV0dXJuIGNiKGIpfVxuZnVuY3Rpb24ga2IoYSl7Zm9yKHZhciBiPVwiXCIsYz0wO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspYj1mYShhcmd1bWVudHNbY10pP2Ira2IuYXBwbHkobnVsbCxhcmd1bWVudHNbY10pOlwib2JqZWN0XCI9PT10eXBlb2YgYXJndW1lbnRzW2NdP2Ircihhcmd1bWVudHNbY10pOmIrYXJndW1lbnRzW2NdLGIrPVwiIFwiO3JldHVybiBifXZhciBsYj1udWxsLG1iPSEwO2Z1bmN0aW9uIGhiKGEpeyEwPT09bWImJihtYj0hMSxudWxsPT09bGImJiEwPT09di5nZXQoXCJsb2dnaW5nX2VuYWJsZWRcIikmJm5iKCEwKSk7aWYobGIpe3ZhciBiPWtiLmFwcGx5KG51bGwsYXJndW1lbnRzKTtsYihiKX19ZnVuY3Rpb24gb2IoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7aGIoYSxhcmd1bWVudHMpfX1cbmZ1bmN0aW9uIHBiKGEpe2lmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgY29uc29sZSl7dmFyIGI9XCJGSVJFQkFTRSBJTlRFUk5BTCBFUlJPUjogXCIra2IuYXBwbHkobnVsbCxhcmd1bWVudHMpO1widW5kZWZpbmVkXCIhPT10eXBlb2YgY29uc29sZS5lcnJvcj9jb25zb2xlLmVycm9yKGIpOmNvbnNvbGUubG9nKGIpfX1mdW5jdGlvbiBxYihhKXt2YXIgYj1rYi5hcHBseShudWxsLGFyZ3VtZW50cyk7dGhyb3cgRXJyb3IoXCJGSVJFQkFTRSBGQVRBTCBFUlJPUjogXCIrYik7fWZ1bmN0aW9uIHooYSl7aWYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBjb25zb2xlKXt2YXIgYj1cIkZJUkVCQVNFIFdBUk5JTkc6IFwiK2tiLmFwcGx5KG51bGwsYXJndW1lbnRzKTtcInVuZGVmaW5lZFwiIT09dHlwZW9mIGNvbnNvbGUud2Fybj9jb25zb2xlLndhcm4oYik6Y29uc29sZS5sb2coYil9fVxuZnVuY3Rpb24gcmIoYSl7dmFyIGI9XCJcIixjPVwiXCIsZD1cIlwiLGU9XCJcIixmPSEwLGc9XCJodHRwc1wiLGs9NDQzO2lmKHAoYSkpe3ZhciBsPWEuaW5kZXhPZihcIi8vXCIpOzA8PWwmJihnPWEuc3Vic3RyaW5nKDAsbC0xKSxhPWEuc3Vic3RyaW5nKGwrMikpO2w9YS5pbmRleE9mKFwiL1wiKTstMT09PWwmJihsPWEubGVuZ3RoKTtiPWEuc3Vic3RyaW5nKDAsbCk7ZT1cIlwiO2E9YS5zdWJzdHJpbmcobCkuc3BsaXQoXCIvXCIpO2ZvcihsPTA7bDxhLmxlbmd0aDtsKyspaWYoMDxhW2xdLmxlbmd0aCl7dmFyIG49YVtsXTt0cnl7bj1kZWNvZGVVUklDb21wb25lbnQobi5yZXBsYWNlKC9cXCsvZyxcIiBcIikpfWNhdGNoKHUpe31lKz1cIi9cIitufWE9Yi5zcGxpdChcIi5cIik7Mz09PWEubGVuZ3RoPyhjPWFbMV0sZD1hWzBdLnRvTG93ZXJDYXNlKCkpOjI9PT1hLmxlbmd0aCYmKGM9YVswXSk7bD1iLmluZGV4T2YoXCI6XCIpOzA8PWwmJihmPVwiaHR0cHNcIj09PWd8fFwid3NzXCI9PT1nLGs9Yi5zdWJzdHJpbmcobCsxKSxpc0Zpbml0ZShrKSYmXG4oaz1TdHJpbmcoaykpLGs9cChrKT8vXlxccyotPzB4L2kudGVzdChrKT9wYXJzZUludChrLDE2KTpwYXJzZUludChrLDEwKTpOYU4pfXJldHVybntob3N0OmIscG9ydDprLGRvbWFpbjpjLEFnOmQsQWI6ZixzY2hlbWU6ZyxQYzplfX1mdW5jdGlvbiBzYihhKXtyZXR1cm4gZ2EoYSkmJihhIT1hfHxhPT1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl8fGE9PU51bWJlci5ORUdBVElWRV9JTkZJTklUWSl9XG5mdW5jdGlvbiB0YihhKXtpZihcImNvbXBsZXRlXCI9PT1kb2N1bWVudC5yZWFkeVN0YXRlKWEoKTtlbHNle3ZhciBiPSExLGM9ZnVuY3Rpb24oKXtkb2N1bWVudC5ib2R5P2J8fChiPSEwLGEoKSk6c2V0VGltZW91dChjLE1hdGguZmxvb3IoMTApKX07ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcj8oZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixjLCExKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixjLCExKSk6ZG9jdW1lbnQuYXR0YWNoRXZlbnQmJihkb2N1bWVudC5hdHRhY2hFdmVudChcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLGZ1bmN0aW9uKCl7XCJjb21wbGV0ZVwiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmYygpfSksd2luZG93LmF0dGFjaEV2ZW50KFwib25sb2FkXCIsYykpfX1cbmZ1bmN0aW9uIHViKGEsYil7aWYoYT09PWIpcmV0dXJuIDA7aWYoXCJbTUlOX05BTUVdXCI9PT1hfHxcIltNQVhfTkFNRV1cIj09PWIpcmV0dXJuLTE7aWYoXCJbTUlOX05BTUVdXCI9PT1ifHxcIltNQVhfTkFNRV1cIj09PWEpcmV0dXJuIDE7dmFyIGM9dmIoYSksZD12YihiKTtyZXR1cm4gbnVsbCE9PWM/bnVsbCE9PWQ/MD09Yy1kP2EubGVuZ3RoLWIubGVuZ3RoOmMtZDotMTpudWxsIT09ZD8xOmE8Yj8tMToxfWZ1bmN0aW9uIHdiKGEsYil7aWYoYiYmYSBpbiBiKXJldHVybiBiW2FdO3Rocm93IEVycm9yKFwiTWlzc2luZyByZXF1aXJlZCBrZXkgKFwiK2ErXCIpIGluIG9iamVjdDogXCIrcihiKSk7fVxuZnVuY3Rpb24geGIoYSl7aWYoXCJvYmplY3RcIiE9PXR5cGVvZiBhfHxudWxsPT09YSlyZXR1cm4gcihhKTt2YXIgYj1bXSxjO2ZvcihjIGluIGEpYi5wdXNoKGMpO2Iuc29ydCgpO2M9XCJ7XCI7Zm9yKHZhciBkPTA7ZDxiLmxlbmd0aDtkKyspMCE9PWQmJihjKz1cIixcIiksYys9cihiW2RdKSxjKz1cIjpcIixjKz14YihhW2JbZF1dKTtyZXR1cm4gYytcIn1cIn1mdW5jdGlvbiB5YihhLGIpe2lmKGEubGVuZ3RoPD1iKXJldHVyblthXTtmb3IodmFyIGM9W10sZD0wO2Q8YS5sZW5ndGg7ZCs9YilkK2I+YT9jLnB1c2goYS5zdWJzdHJpbmcoZCxhLmxlbmd0aCkpOmMucHVzaChhLnN1YnN0cmluZyhkLGQrYikpO3JldHVybiBjfWZ1bmN0aW9uIHpiKGEsYil7aWYoZWEoYSkpZm9yKHZhciBjPTA7YzxhLmxlbmd0aDsrK2MpYihjLGFbY10pO2Vsc2UgQShhLGIpfVxuZnVuY3Rpb24gQWIoYSl7eSghc2IoYSksXCJJbnZhbGlkIEpTT04gbnVtYmVyXCIpO3ZhciBiLGMsZCxlOzA9PT1hPyhkPWM9MCxiPS1JbmZpbml0eT09PTEvYT8xOjApOihiPTA+YSxhPU1hdGguYWJzKGEpLGE+PU1hdGgucG93KDIsLTEwMjIpPyhkPU1hdGgubWluKE1hdGguZmxvb3IoTWF0aC5sb2coYSkvTWF0aC5MTjIpLDEwMjMpLGM9ZCsxMDIzLGQ9TWF0aC5yb3VuZChhKk1hdGgucG93KDIsNTItZCktTWF0aC5wb3coMiw1MikpKTooYz0wLGQ9TWF0aC5yb3VuZChhL01hdGgucG93KDIsLTEwNzQpKSkpO2U9W107Zm9yKGE9NTI7YTthLT0xKWUucHVzaChkJTI/MTowKSxkPU1hdGguZmxvb3IoZC8yKTtmb3IoYT0xMTthO2EtPTEpZS5wdXNoKGMlMj8xOjApLGM9TWF0aC5mbG9vcihjLzIpO2UucHVzaChiPzE6MCk7ZS5yZXZlcnNlKCk7Yj1lLmpvaW4oXCJcIik7Yz1cIlwiO2ZvcihhPTA7NjQ+YTthKz04KWQ9cGFyc2VJbnQoYi5zdWJzdHIoYSw4KSwyKS50b1N0cmluZygxNiksMT09PWQubGVuZ3RoJiZcbihkPVwiMFwiK2QpLGMrPWQ7cmV0dXJuIGMudG9Mb3dlckNhc2UoKX12YXIgQmI9L14tP1xcZHsxLDEwfSQvO2Z1bmN0aW9uIHZiKGEpe3JldHVybiBCYi50ZXN0KGEpJiYoYT1OdW1iZXIoYSksLTIxNDc0ODM2NDg8PWEmJjIxNDc0ODM2NDc+PWEpP2E6bnVsbH1mdW5jdGlvbiBDYihhKXt0cnl7YSgpfWNhdGNoKGIpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt6KFwiRXhjZXB0aW9uIHdhcyB0aHJvd24gYnkgdXNlciBjYWxsYmFjay5cIixiLnN0YWNrfHxcIlwiKTt0aHJvdyBiO30sTWF0aC5mbG9vcigwKSl9fWZ1bmN0aW9uIEIoYSxiKXtpZihoYShhKSl7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLnNsaWNlKCk7Q2IoZnVuY3Rpb24oKXthLmFwcGx5KG51bGwsYyl9KX19O2Z1bmN0aW9uIERiKGEsYixjLGQpe3RoaXMubGU9Yjt0aGlzLk5kPWM7dGhpcy5GZD1kO3RoaXMuamQ9YX1EYi5wcm90b3R5cGUuUWI9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLk5kLmNjKCk7cmV0dXJuXCJ2YWx1ZVwiPT09dGhpcy5qZD9hLnBhdGg6YS5wYXJlbnQoKS5wYXRofTtEYi5wcm90b3R5cGUucGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5qZH07RGIucHJvdG90eXBlLkxiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGUuTGIodGhpcyl9O0RiLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLlFiKCkudG9TdHJpbmcoKStcIjpcIit0aGlzLmpkK1wiOlwiK3IodGhpcy5OZC5iZigpKX07ZnVuY3Rpb24gRWIoYSxiLGMpe3RoaXMubGU9YTt0aGlzLmVycm9yPWI7dGhpcy5wYXRoPWN9RWIucHJvdG90eXBlLlFiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGF0aH07RWIucHJvdG90eXBlLnBlPWZ1bmN0aW9uKCl7cmV0dXJuXCJjYW5jZWxcIn07XG5FYi5wcm90b3R5cGUuTGI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZS5MYih0aGlzKX07RWIucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGF0aC50b1N0cmluZygpK1wiOmNhbmNlbFwifTtmdW5jdGlvbiBDKGEsYixjLGQpe3RoaXMudHlwZT1hO3RoaXMuSGE9Yjt0aGlzLlVhPWM7dGhpcy5EZT1kO3RoaXMuRmQ9dm9pZCAwfWZ1bmN0aW9uIEZiKGEpe3JldHVybiBuZXcgQyhHYixhKX12YXIgR2I9XCJ2YWx1ZVwiO2Z1bmN0aW9uIEhiKGEsYixjKXt0aGlzLkhiPWE7dGhpcy5rYj1iO3RoaXMubWI9Y3x8bnVsbH1oPUhiLnByb3RvdHlwZTtoLndmPWZ1bmN0aW9uKGEpe3JldHVyblwidmFsdWVcIj09PWF9O2guY3JlYXRlRXZlbnQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLm4uZztyZXR1cm4gbmV3IERiKFwidmFsdWVcIix0aGlzLG5ldyBEKGEuSGEsYi5jYygpLGMpKX07aC5MYj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLm1iO2lmKFwiY2FuY2VsXCI9PT1hLnBlKCkpe3kodGhpcy5rYixcIlJhaXNpbmcgYSBjYW5jZWwgZXZlbnQgb24gYSBsaXN0ZW5lciB3aXRoIG5vIGNhbmNlbCBjYWxsYmFja1wiKTt2YXIgYz10aGlzLmtiO3JldHVybiBmdW5jdGlvbigpe2MuY2FsbChiLGEuZXJyb3IpfX12YXIgZD10aGlzLkhiO3JldHVybiBmdW5jdGlvbigpe2QuY2FsbChiLGEuTmQpfX07aC5ZZT1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmtiP25ldyBFYih0aGlzLGEsYik6bnVsbH07XG5oLm1hdGNoZXM9ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBIYj9hLkhiJiZ0aGlzLkhiP2EuSGI9PT10aGlzLkhiJiZhLm1iPT09dGhpcy5tYjohMDohMX07aC5oZj1mdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5IYn07ZnVuY3Rpb24gSWIoYSxiLGMpe3RoaXMuZGE9YTt0aGlzLmtiPWI7dGhpcy5tYj1jfWg9SWIucHJvdG90eXBlO2gud2Y9ZnVuY3Rpb24oYSl7YT1cImNoaWxkcmVuX2FkZGVkXCI9PT1hP1wiY2hpbGRfYWRkZWRcIjphO3JldHVybihcImNoaWxkcmVuX3JlbW92ZWRcIj09PWE/XCJjaGlsZF9yZW1vdmVkXCI6YSlpbiB0aGlzLmRhfTtoLlllPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMua2I/bmV3IEViKHRoaXMsYSxiKTpudWxsfTtcbmguY3JlYXRlRXZlbnQ9ZnVuY3Rpb24oYSxiKXt5KG51bGwhPWEuVWEsXCJDaGlsZCBldmVudHMgc2hvdWxkIGhhdmUgYSBjaGlsZE5hbWUuXCIpO3ZhciBjPWIuY2MoKS5vKGEuVWEpO3JldHVybiBuZXcgRGIoYS50eXBlLHRoaXMsbmV3IEQoYS5IYSxjLGIubi5nKSxhLkZkKX07aC5MYj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLm1iO2lmKFwiY2FuY2VsXCI9PT1hLnBlKCkpe3kodGhpcy5rYixcIlJhaXNpbmcgYSBjYW5jZWwgZXZlbnQgb24gYSBsaXN0ZW5lciB3aXRoIG5vIGNhbmNlbCBjYWxsYmFja1wiKTt2YXIgYz10aGlzLmtiO3JldHVybiBmdW5jdGlvbigpe2MuY2FsbChiLGEuZXJyb3IpfX12YXIgZD10aGlzLmRhW2EuamRdO3JldHVybiBmdW5jdGlvbigpe2QuY2FsbChiLGEuTmQsYS5GZCl9fTtcbmgubWF0Y2hlcz1mdW5jdGlvbihhKXtpZihhIGluc3RhbmNlb2YgSWIpe2lmKCF0aGlzLmRhfHwhYS5kYSlyZXR1cm4hMDtpZih0aGlzLm1iPT09YS5tYil7dmFyIGI9SmIoYS5kYSk7aWYoYj09PUpiKHRoaXMuZGEpKXtpZigxPT09Yil7dmFyIGI9S2IoYS5kYSksYz1LYih0aGlzLmRhKTtyZXR1cm4gYz09PWImJighYS5kYVtiXXx8IXRoaXMuZGFbY118fGEuZGFbYl09PT10aGlzLmRhW2NdKX1yZXR1cm4gTGIodGhpcy5kYSxmdW5jdGlvbihiLGMpe3JldHVybiBhLmRhW2NdPT09Yn0pfX19cmV0dXJuITF9O2guaGY9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMuZGF9O2Z1bmN0aW9uIGpiKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgZT1hLmNoYXJDb2RlQXQoZCk7NTUyOTY8PWUmJjU2MzE5Pj1lJiYoZS09NTUyOTYsZCsrLHkoZDxhLmxlbmd0aCxcIlN1cnJvZ2F0ZSBwYWlyIG1pc3NpbmcgdHJhaWwgc3Vycm9nYXRlLlwiKSxlPTY1NTM2KyhlPDwxMCkrKGEuY2hhckNvZGVBdChkKS01NjMyMCkpOzEyOD5lP2JbYysrXT1lOigyMDQ4PmU/YltjKytdPWU+PjZ8MTkyOig2NTUzNj5lP2JbYysrXT1lPj4xMnwyMjQ6KGJbYysrXT1lPj4xOHwyNDAsYltjKytdPWU+PjEyJjYzfDEyOCksYltjKytdPWU+PjYmNjN8MTI4KSxiW2MrK109ZSY2M3wxMjgpfXJldHVybiBifTtmdW5jdGlvbiBGKGEsYixjLGQpe3ZhciBlO2Q8Yj9lPVwiYXQgbGVhc3QgXCIrYjpkPmMmJihlPTA9PT1jP1wibm9uZVwiOlwibm8gbW9yZSB0aGFuIFwiK2MpO2lmKGUpdGhyb3cgRXJyb3IoYStcIiBmYWlsZWQ6IFdhcyBjYWxsZWQgd2l0aCBcIitkKygxPT09ZD9cIiBhcmd1bWVudC5cIjpcIiBhcmd1bWVudHMuXCIpK1wiIEV4cGVjdHMgXCIrZStcIi5cIik7fWZ1bmN0aW9uIEcoYSxiLGMpe3ZhciBkPVwiXCI7c3dpdGNoKGIpe2Nhc2UgMTpkPWM/XCJmaXJzdFwiOlwiRmlyc3RcIjticmVhaztjYXNlIDI6ZD1jP1wic2Vjb25kXCI6XCJTZWNvbmRcIjticmVhaztjYXNlIDM6ZD1jP1widGhpcmRcIjpcIlRoaXJkXCI7YnJlYWs7Y2FzZSA0OmQ9Yz9cImZvdXJ0aFwiOlwiRm91cnRoXCI7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImVycm9yUHJlZml4IGNhbGxlZCB3aXRoIGFyZ3VtZW50TnVtYmVyID4gNC4gIE5lZWQgdG8gdXBkYXRlIGl0P1wiKTt9cmV0dXJuIGE9YStcIiBmYWlsZWQ6IFwiKyhkK1wiIGFyZ3VtZW50IFwiKX1cbmZ1bmN0aW9uIEgoYSxiLGMsZCl7aWYoKCFkfHxtKGMpKSYmIWhhKGMpKXRocm93IEVycm9yKEcoYSxiLGQpK1wibXVzdCBiZSBhIHZhbGlkIGZ1bmN0aW9uLlwiKTt9ZnVuY3Rpb24gTWIoYSxiLGMpe2lmKG0oYykmJighaWEoYyl8fG51bGw9PT1jKSl0aHJvdyBFcnJvcihHKGEsYiwhMCkrXCJtdXN0IGJlIGEgdmFsaWQgY29udGV4dCBvYmplY3QuXCIpO307dmFyIE5iPS9bXFxbXFxdLiMkXFwvXFx1MDAwMC1cXHUwMDFGXFx1MDA3Rl0vLE9iPS9bXFxbXFxdLiMkXFx1MDAwMC1cXHUwMDFGXFx1MDA3Rl0vO2Z1bmN0aW9uIFBiKGEpe3JldHVybiBwKGEpJiYwIT09YS5sZW5ndGgmJiFOYi50ZXN0KGEpfWZ1bmN0aW9uIFFiKGEpe3JldHVybiBudWxsPT09YXx8cChhKXx8Z2EoYSkmJiFzYihhKXx8aWEoYSkmJnMoYSxcIi5zdlwiKX1mdW5jdGlvbiBSYihhLGIsYyl7YyYmIW0oYil8fFNiKEcoYSwxLGMpLGIpfVxuZnVuY3Rpb24gU2IoYSxiLGMsZCl7Y3x8KGM9MCk7dmFyIGU9ZHx8W107aWYoIW0oYikpdGhyb3cgRXJyb3IoYStcImNvbnRhaW5zIHVuZGVmaW5lZFwiK1RiKGUpKTtpZihoYShiKSl0aHJvdyBFcnJvcihhK1wiY29udGFpbnMgYSBmdW5jdGlvblwiK1RiKGUpK1wiIHdpdGggY29udGVudHM6IFwiK2IudG9TdHJpbmcoKSk7aWYoc2IoYikpdGhyb3cgRXJyb3IoYStcImNvbnRhaW5zIFwiK2IudG9TdHJpbmcoKStUYihlKSk7aWYoMUUzPGMpdGhyb3cgbmV3IFR5cGVFcnJvcihhK1wiY29udGFpbnMgYSBjeWNsaWMgb2JqZWN0IHZhbHVlIChcIitlLnNsaWNlKDAsMTAwKS5qb2luKFwiLlwiKStcIi4uLilcIik7aWYocChiKSYmYi5sZW5ndGg+MTA0ODU3NjAvMyYmMTA0ODU3NjA8amIoYikubGVuZ3RoKXRocm93IEVycm9yKGErXCJjb250YWlucyBhIHN0cmluZyBncmVhdGVyIHRoYW4gMTA0ODU3NjAgdXRmOCBieXRlc1wiK1RiKGUpK1wiICgnXCIrYi5zdWJzdHJpbmcoMCw1MCkrXCIuLi4nKVwiKTtpZihpYShiKSl7dmFyIGY9XG4hMSxnPSExO3VhKGIsZnVuY3Rpb24oYixkKXtpZihcIi52YWx1ZVwiPT09YilmPSEwO2Vsc2UgaWYoXCIucHJpb3JpdHlcIiE9PWImJlwiLnN2XCIhPT1iJiYoZz0hMCwhUGIoYikpKXRocm93IEVycm9yKGErXCIgY29udGFpbnMgYW4gaW52YWxpZCBrZXkgKFwiK2IrXCIpXCIrVGIoZSkrJy4gIEtleXMgbXVzdCBiZSBub24tZW1wdHkgc3RyaW5ncyBhbmQgY2FuXFwndCBjb250YWluIFwiLlwiLCBcIiNcIiwgXCIkXCIsIFwiL1wiLCBcIltcIiwgb3IgXCJdXCInKTtlLnB1c2goYik7U2IoYSxkLGMrMSxlKTtlLnBvcCgpfSk7aWYoZiYmZyl0aHJvdyBFcnJvcihhKycgY29udGFpbnMgXCIudmFsdWVcIiBjaGlsZCcrVGIoZSkrXCIgaW4gYWRkaXRpb24gdG8gYWN0dWFsIGNoaWxkcmVuLlwiKTt9fWZ1bmN0aW9uIFRiKGEpe3JldHVybiAwPT1hLmxlbmd0aD9cIlwiOlwiIGluIHByb3BlcnR5ICdcIithLmpvaW4oXCIuXCIpK1wiJ1wifVxuZnVuY3Rpb24gVWIoYSxiKXtpZighaWEoYil8fGVhKGIpKXRocm93IEVycm9yKEcoYSwxLCExKStcIiBtdXN0IGJlIGFuIE9iamVjdCBjb250YWluaW5nIHRoZSBjaGlsZHJlbiB0byByZXBsYWNlLlwiKTtpZihzKGIsXCIudmFsdWVcIikpdGhyb3cgRXJyb3IoRyhhLDEsITEpKycgbXVzdCBub3QgY29udGFpbiBcIi52YWx1ZVwiLiAgVG8gb3ZlcndyaXRlIHdpdGggYSBsZWFmIHZhbHVlLCBqdXN0IHVzZSAuc2V0KCkgaW5zdGVhZC4nKTtSYihhLGIsITEpfVxuZnVuY3Rpb24gVmIoYSxiLGMpe2lmKHNiKGMpKXRocm93IEVycm9yKEcoYSxiLCExKStcImlzIFwiK2MudG9TdHJpbmcoKStcIiwgYnV0IG11c3QgYmUgYSB2YWxpZCBGaXJlYmFzZSBwcmlvcml0eSAoYSBzdHJpbmcsIGZpbml0ZSBudW1iZXIsIHNlcnZlciB2YWx1ZSwgb3IgbnVsbCkuXCIpO2lmKCFRYihjKSl0aHJvdyBFcnJvcihHKGEsYiwhMSkrXCJtdXN0IGJlIGEgdmFsaWQgRmlyZWJhc2UgcHJpb3JpdHkgKGEgc3RyaW5nLCBmaW5pdGUgbnVtYmVyLCBzZXJ2ZXIgdmFsdWUsIG9yIG51bGwpLlwiKTt9XG5mdW5jdGlvbiBXYihhLGIsYyl7aWYoIWN8fG0oYikpc3dpdGNoKGIpe2Nhc2UgXCJ2YWx1ZVwiOmNhc2UgXCJjaGlsZF9hZGRlZFwiOmNhc2UgXCJjaGlsZF9yZW1vdmVkXCI6Y2FzZSBcImNoaWxkX2NoYW5nZWRcIjpjYXNlIFwiY2hpbGRfbW92ZWRcIjpicmVhaztkZWZhdWx0OnRocm93IEVycm9yKEcoYSwxLGMpKydtdXN0IGJlIGEgdmFsaWQgZXZlbnQgdHlwZTogXCJ2YWx1ZVwiLCBcImNoaWxkX2FkZGVkXCIsIFwiY2hpbGRfcmVtb3ZlZFwiLCBcImNoaWxkX2NoYW5nZWRcIiwgb3IgXCJjaGlsZF9tb3ZlZFwiLicpO319ZnVuY3Rpb24gWGIoYSxiLGMsZCl7aWYoKCFkfHxtKGMpKSYmIVBiKGMpKXRocm93IEVycm9yKEcoYSxiLGQpKyd3YXMgYW4gaW52YWxpZCBrZXk6IFwiJytjKydcIi4gIEZpcmViYXNlIGtleXMgbXVzdCBiZSBub24tZW1wdHkgc3RyaW5ncyBhbmQgY2FuXFwndCBjb250YWluIFwiLlwiLCBcIiNcIiwgXCIkXCIsIFwiL1wiLCBcIltcIiwgb3IgXCJdXCIpLicpO31cbmZ1bmN0aW9uIFliKGEsYil7aWYoIXAoYil8fDA9PT1iLmxlbmd0aHx8T2IudGVzdChiKSl0aHJvdyBFcnJvcihHKGEsMSwhMSkrJ3dhcyBhbiBpbnZhbGlkIHBhdGg6IFwiJytiKydcIi4gUGF0aHMgbXVzdCBiZSBub24tZW1wdHkgc3RyaW5ncyBhbmQgY2FuXFwndCBjb250YWluIFwiLlwiLCBcIiNcIiwgXCIkXCIsIFwiW1wiLCBvciBcIl1cIicpO31mdW5jdGlvbiBaYihhLGIpe2lmKFwiLmluZm9cIj09PUkoYikpdGhyb3cgRXJyb3IoYStcIiBmYWlsZWQ6IENhbid0IG1vZGlmeSBkYXRhIHVuZGVyIC8uaW5mby9cIik7fWZ1bmN0aW9uICRiKGEsYil7aWYoIXAoYikpdGhyb3cgRXJyb3IoRyhhLDEsITEpK1wibXVzdCBiZSBhIHZhbGlkIGNyZWRlbnRpYWwgKGEgc3RyaW5nKS5cIik7fWZ1bmN0aW9uIGFjKGEsYixjKXtpZighcChjKSl0aHJvdyBFcnJvcihHKGEsYiwhMSkrXCJtdXN0IGJlIGEgdmFsaWQgc3RyaW5nLlwiKTt9XG5mdW5jdGlvbiBKKGEsYixjLGQpe2lmKCFkfHxtKGMpKWlmKCFpYShjKXx8bnVsbD09PWMpdGhyb3cgRXJyb3IoRyhhLGIsZCkrXCJtdXN0IGJlIGEgdmFsaWQgb2JqZWN0LlwiKTt9ZnVuY3Rpb24gSyhhLGIsYyl7aWYoIWlhKGIpfHxudWxsPT09Ynx8IXMoYixjKSl0aHJvdyBFcnJvcihHKGEsMSwhMSkrJ211c3QgY29udGFpbiB0aGUga2V5IFwiJytjKydcIicpO2lmKCFwKHQoYixjKSkpdGhyb3cgRXJyb3IoRyhhLDEsITEpKydtdXN0IGNvbnRhaW4gdGhlIGtleSBcIicrYysnXCIgd2l0aCB0eXBlIFwic3RyaW5nXCInKTt9O2Z1bmN0aW9uIGJjKGEpe3RoaXMuZz1hfWg9YmMucHJvdG90eXBlO2guQz1mdW5jdGlvbihhLGIsYyxkLGUpe3koYS5CYyh0aGlzLmcpLFwiQSBub2RlIG11c3QgYmUgaW5kZXhlZCBpZiBvbmx5IGEgY2hpbGQgaXMgdXBkYXRlZFwiKTtkPWEuSyhiKTtpZihkLmVhKGMpKXJldHVybiBhO251bGwhPWUmJihjLmUoKT9hLkRhKGIpP2NjKGUsbmV3IEMoXCJjaGlsZF9yZW1vdmVkXCIsZCxiKSk6eShhLk0oKSxcIkEgY2hpbGQgcmVtb3ZlIHdpdGhvdXQgYW4gb2xkIGNoaWxkIG9ubHkgbWFrZXMgc2Vuc2Ugb24gYSBsZWFmIG5vZGVcIik6ZC5lKCk/Y2MoZSxuZXcgQyhcImNoaWxkX2FkZGVkXCIsYyxiKSk6Y2MoZSxuZXcgQyhcImNoaWxkX2NoYW5nZWRcIixjLGIsZCkpKTtyZXR1cm4gYS5NKCkmJmMuZSgpP2E6YS5QKGIsYyl9O1xuaC5vYT1mdW5jdGlvbihhLGIsYyl7bnVsbCE9YyYmKGEuTSgpfHxhLlUoTCxmdW5jdGlvbihhLGUpe2IuRGEoYSl8fGNjKGMsbmV3IEMoXCJjaGlsZF9yZW1vdmVkXCIsZSxhKSl9KSxiLk0oKXx8Yi5VKEwsZnVuY3Rpb24oYixlKXtpZihhLkRhKGIpKXt2YXIgZj1hLksoYik7Zi5lYShlKXx8Y2MoYyxuZXcgQyhcImNoaWxkX2NoYW5nZWRcIixlLGIsZikpfWVsc2UgY2MoYyxuZXcgQyhcImNoaWxkX2FkZGVkXCIsZSxiKSl9KSk7cmV0dXJuIGIuRmIodGhpcy5nKX07aC5aPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuZSgpP006YS5aKGIpfTtoLnlhPWZ1bmN0aW9uKCl7cmV0dXJuITF9O2guTWI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307ZnVuY3Rpb24gZGMoYSl7dGhpcy5yZT1uZXcgYmMoYS5nKTt0aGlzLmc9YS5nO3ZhciBiO2EuaWE/KGI9ZWMoYSksYj1hLmcuQWUoZmMoYSksYikpOmI9YS5nLkNlKCk7dGhpcy5WYz1iO2EucWE/KGI9Z2MoYSksYT1hLmcuQWUoaGMoYSksYikpOmE9YS5nLkJlKCk7dGhpcy53Yz1hfWg9ZGMucHJvdG90eXBlO2gubWF0Y2hlcz1mdW5jdGlvbihhKXtyZXR1cm4gMD49dGhpcy5nLmNvbXBhcmUodGhpcy5WYyxhKSYmMD49dGhpcy5nLmNvbXBhcmUoYSx0aGlzLndjKX07aC5DPWZ1bmN0aW9uKGEsYixjLGQsZSl7dGhpcy5tYXRjaGVzKG5ldyBOKGIsYykpfHwoYz1NKTtyZXR1cm4gdGhpcy5yZS5DKGEsYixjLGQsZSl9O2gub2E9ZnVuY3Rpb24oYSxiLGMpe2IuTSgpJiYoYj1NKTt2YXIgZD1iLkZiKHRoaXMuZyksZD1kLlooTSksZT10aGlzO2IuVShMLGZ1bmN0aW9uKGEsYil7ZS5tYXRjaGVzKG5ldyBOKGEsYikpfHwoZD1kLlAoYSxNKSl9KTtyZXR1cm4gdGhpcy5yZS5vYShhLGQsYyl9O1xuaC5aPWZ1bmN0aW9uKGEpe3JldHVybiBhfTtoLnlhPWZ1bmN0aW9uKCl7cmV0dXJuITB9O2guTWI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZX07ZnVuY3Rpb24gaWMoYSxiKXtyZXR1cm4gdWIoYS5uYW1lLGIubmFtZSl9ZnVuY3Rpb24gamMoYSxiKXtyZXR1cm4gdWIoYSxiKX07ZnVuY3Rpb24ga2MoKXt9dmFyIGxjPXt9O2Z1bmN0aW9uIG1jKGEpe3JldHVybiBxKGEuY29tcGFyZSxhKX1rYy5wcm90b3R5cGUuamY9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gMCE9PXRoaXMuY29tcGFyZShuZXcgTihcIltNSU5fTkFNRV1cIixhKSxuZXcgTihcIltNSU5fTkFNRV1cIixiKSl9O2tjLnByb3RvdHlwZS5DZT1mdW5jdGlvbigpe3JldHVybiBuY307ZnVuY3Rpb24gb2MoYSl7dGhpcy5VYj1hfW1hKG9jLGtjKTtoPW9jLnByb3RvdHlwZTtoLnVlPWZ1bmN0aW9uKGEpe3JldHVybiFhLksodGhpcy5VYikuZSgpfTtoLmNvbXBhcmU9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLlkuSyh0aGlzLlViKSxkPWIuWS5LKHRoaXMuVWIpLGM9Yy5oZShkKTtyZXR1cm4gMD09PWM/dWIoYS5uYW1lLGIubmFtZSk6Y307aC5BZT1mdW5jdGlvbihhLGIpe3ZhciBjPU8oYSksYz1NLlAodGhpcy5VYixjKTtyZXR1cm4gbmV3IE4oYixjKX07XG5oLkJlPWZ1bmN0aW9uKCl7dmFyIGE9TS5QKHRoaXMuVWIscGMpO3JldHVybiBuZXcgTihcIltNQVhfTkFNRV1cIixhKX07aC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLlVifTt2YXIgTD1uZXcgb2MoXCIucHJpb3JpdHlcIik7ZnVuY3Rpb24gcWMoKXt9bWEocWMsa2MpO2g9cWMucHJvdG90eXBlO2guY29tcGFyZT1mdW5jdGlvbihhLGIpe3JldHVybiB1YihhLm5hbWUsYi5uYW1lKX07aC51ZT1mdW5jdGlvbigpe3Rocm93IGZiKFwiS2V5SW5kZXguaXNEZWZpbmVkT24gbm90IGV4cGVjdGVkIHRvIGJlIGNhbGxlZC5cIik7fTtoLmpmPWZ1bmN0aW9uKCl7cmV0dXJuITF9O2guQ2U9ZnVuY3Rpb24oKXtyZXR1cm4gbmN9O2guQmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE4oXCJbTUFYX05BTUVdXCIsTSl9O2guQWU9ZnVuY3Rpb24oYSl7eShwKGEpLFwiS2V5SW5kZXggaW5kZXhWYWx1ZSBtdXN0IGFsd2F5cyBiZSBhIHN0cmluZy5cIik7cmV0dXJuIG5ldyBOKGEsTSl9O1xuaC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiLmtleVwifTt2YXIgcmM9bmV3IHFjO2Z1bmN0aW9uIHNjKCl7fXNjLnByb3RvdHlwZS5lZj1mdW5jdGlvbigpe3JldHVybiBudWxsfTtzYy5wcm90b3R5cGUub2U9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH07dmFyIHRjPW5ldyBzYztmdW5jdGlvbiB1YyhhLGIsYyl7dGhpcy5CZj1hO3RoaXMuSWE9Yjt0aGlzLnpkPWN9dWMucHJvdG90eXBlLmVmPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuSWEuRjtpZih2YyhiLGEpKXJldHVybiBiLmooKS5LKGEpO2I9bnVsbCE9dGhpcy56ZD9uZXcgd2ModGhpcy56ZCwhMCwhMSk6dGhpcy5JYS51KCk7cmV0dXJuIHRoaXMuQmYuVGEoYSxiKX07dWMucHJvdG90eXBlLm9lPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1udWxsIT10aGlzLnpkP3RoaXMuemQ6eGModGhpcy5JYSk7YT10aGlzLkJmLmNlKGQsYiwxLGMsYSk7cmV0dXJuIDA9PT1hLmxlbmd0aD9udWxsOmFbMF19O2Z1bmN0aW9uIHljKCl7dGhpcy5aYT17fX1cbmZ1bmN0aW9uIGNjKGEsYil7dmFyIGM9Yi50eXBlLGQ9Yi5VYTt5KFwiY2hpbGRfYWRkZWRcIj09Y3x8XCJjaGlsZF9jaGFuZ2VkXCI9PWN8fFwiY2hpbGRfcmVtb3ZlZFwiPT1jLFwiT25seSBjaGlsZCBjaGFuZ2VzIHN1cHBvcnRlZCBmb3IgdHJhY2tpbmdcIik7eShcIi5wcmlvcml0eVwiIT09ZCxcIk9ubHkgbm9uLXByaW9yaXR5IGNoaWxkIGNoYW5nZXMgY2FuIGJlIHRyYWNrZWQuXCIpO3ZhciBlPXQoYS5aYSxkKTtpZihlKXt2YXIgZj1lLnR5cGU7aWYoXCJjaGlsZF9hZGRlZFwiPT1jJiZcImNoaWxkX3JlbW92ZWRcIj09ZilhLlphW2RdPW5ldyBDKFwiY2hpbGRfY2hhbmdlZFwiLGIuSGEsZCxlLkhhKTtlbHNlIGlmKFwiY2hpbGRfcmVtb3ZlZFwiPT1jJiZcImNoaWxkX2FkZGVkXCI9PWYpZGVsZXRlIGEuWmFbZF07ZWxzZSBpZihcImNoaWxkX3JlbW92ZWRcIj09YyYmXCJjaGlsZF9jaGFuZ2VkXCI9PWYpYS5aYVtkXT1uZXcgQyhcImNoaWxkX3JlbW92ZWRcIixlLkRlLGQpO2Vsc2UgaWYoXCJjaGlsZF9jaGFuZ2VkXCI9PWMmJlxuXCJjaGlsZF9hZGRlZFwiPT1mKWEuWmFbZF09bmV3IEMoXCJjaGlsZF9hZGRlZFwiLGIuSGEsZCk7ZWxzZSBpZihcImNoaWxkX2NoYW5nZWRcIj09YyYmXCJjaGlsZF9jaGFuZ2VkXCI9PWYpYS5aYVtkXT1uZXcgQyhcImNoaWxkX2NoYW5nZWRcIixiLkhhLGQsZS5EZSk7ZWxzZSB0aHJvdyBmYihcIklsbGVnYWwgY29tYmluYXRpb24gb2YgY2hhbmdlczogXCIrYitcIiBvY2N1cnJlZCBhZnRlciBcIitlKTt9ZWxzZSBhLlphW2RdPWJ9O2Z1bmN0aW9uIE4oYSxiKXt0aGlzLm5hbWU9YTt0aGlzLlk9Yn1mdW5jdGlvbiB6YyhhLGIpe3JldHVybiBuZXcgTihhLGIpfTtmdW5jdGlvbiBBYyhhKXt0aGlzLm1hPW5ldyBkYyhhKTt0aGlzLmc9YS5nO3koYS5rYSxcIk9ubHkgdmFsaWQgaWYgbGltaXQgaGFzIGJlZW4gc2V0XCIpO3RoaXMuc2E9YS5zYTt0aGlzLnpiPSEoXCJcIj09PWEuRWI/YS5pYTpcImxcIj09PWEuRWIpfWg9QWMucHJvdG90eXBlO2guQz1mdW5jdGlvbihhLGIsYyxkLGUpe3RoaXMubWEubWF0Y2hlcyhuZXcgTihiLGMpKXx8KGM9TSk7cmV0dXJuIGEuSyhiKS5lYShjKT9hOmEudWIoKTx0aGlzLnNhP3RoaXMubWEuTWIoKS5DKGEsYixjLGQsZSk6QmModGhpcyxhLGIsYyxkLGUpfTtcbmgub2E9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2lmKGIuTSgpfHxiLmUoKSlkPU0uRmIodGhpcy5nKTtlbHNlIGlmKDIqdGhpcy5zYTxiLnViKCkmJmIuQmModGhpcy5nKSl7ZD1NLkZiKHRoaXMuZyk7Yj10aGlzLnpiP2IuUmIodGhpcy5tYS53Yyx0aGlzLmcpOmIuUGIodGhpcy5tYS5WYyx0aGlzLmcpO2Zvcih2YXIgZT0wOzA8Yi5OYS5sZW5ndGgmJmU8dGhpcy5zYTspe3ZhciBmPVAoYiksZztpZihnPXRoaXMuemI/MD49dGhpcy5nLmNvbXBhcmUodGhpcy5tYS5WYyxmKTowPj10aGlzLmcuY29tcGFyZShmLHRoaXMubWEud2MpKWQ9ZC5QKGYubmFtZSxmLlkpLGUrKztlbHNlIGJyZWFrfX1lbHNle2Q9Yi5GYih0aGlzLmcpO2Q9ZC5aKE0pO3ZhciBrLGwsbjtpZih0aGlzLnpiKXtiPWQuZ2YodGhpcy5nKTtrPXRoaXMubWEud2M7bD10aGlzLm1hLlZjO3ZhciB1PW1jKHRoaXMuZyk7bj1mdW5jdGlvbihhLGIpe3JldHVybiB1KGIsYSl9fWVsc2UgYj1kLk9iKHRoaXMuZyksaz10aGlzLm1hLlZjLFxubD10aGlzLm1hLndjLG49bWModGhpcy5nKTtmb3IodmFyIGU9MCx4PSExOzA8Yi5OYS5sZW5ndGg7KWY9UChiKSwheCYmMD49bihrLGYpJiYoeD0hMCksKGc9eCYmZTx0aGlzLnNhJiYwPj1uKGYsbCkpP2UrKzpkPWQuUChmLm5hbWUsTSl9cmV0dXJuIHRoaXMubWEuTWIoKS5vYShhLGQsYyl9O2guWj1mdW5jdGlvbihhKXtyZXR1cm4gYX07aC55YT1mdW5jdGlvbigpe3JldHVybiEwfTtoLk1iPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWEuTWIoKX07XG5mdW5jdGlvbiBCYyhhLGIsYyxkLGUsZil7dmFyIGc7aWYoYS56Yil7dmFyIGs9bWMoYS5nKTtnPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGsoYixhKX19ZWxzZSBnPW1jKGEuZyk7eShiLnViKCk9PWEuc2EsXCJcIik7dmFyIGw9bmV3IE4oYyxkKSxuPWEuemI/Q2MoYixhLmcpOkRjKGIsYS5nKSx1PWEubWEubWF0Y2hlcyhsKTtpZihiLkRhKGMpKXt2YXIgeD1iLksoYyksbj1lLm9lKGEuZyxuLGEuemIpO251bGwhPW4mJm4ubmFtZT09YyYmKG49ZS5vZShhLmcsbixhLnpiKSk7ZT1udWxsPT1uPzE6ZyhuLGwpO2lmKHUmJiFkLmUoKSYmMDw9ZSlyZXR1cm4gbnVsbCE9ZiYmY2MoZixuZXcgQyhcImNoaWxkX2NoYW5nZWRcIixkLGMseCkpLGIuUChjLGQpO251bGwhPWYmJmNjKGYsbmV3IEMoXCJjaGlsZF9yZW1vdmVkXCIseCxjKSk7Yj1iLlAoYyxNKTtyZXR1cm4gbnVsbCE9biYmYS5tYS5tYXRjaGVzKG4pPyhudWxsIT1mJiZjYyhmLG5ldyBDKFwiY2hpbGRfYWRkZWRcIixuLlksbi5uYW1lKSksYi5QKG4ubmFtZSxcbm4uWSkpOmJ9cmV0dXJuIGQuZSgpP2I6dSYmMDw9ZyhuLGwpPyhudWxsIT1mJiYoY2MoZixuZXcgQyhcImNoaWxkX3JlbW92ZWRcIixuLlksbi5uYW1lKSksY2MoZixuZXcgQyhcImNoaWxkX2FkZGVkXCIsZCxjKSkpLGIuUChjLGQpLlAobi5uYW1lLE0pKTpifTtmdW5jdGlvbiBFYygpe3RoaXMudmM9dGhpcy5xYT10aGlzLmtjPXRoaXMuaWE9dGhpcy5rYT0hMTt0aGlzLnNhPTA7dGhpcy5FYj1cIlwiO3RoaXMuQWM9bnVsbDt0aGlzLldiPVwiXCI7dGhpcy56Yz1udWxsO3RoaXMuVGI9XCJcIjt0aGlzLmc9TH12YXIgRmM9bmV3IEVjO2Z1bmN0aW9uIGZjKGEpe3koYS5pYSxcIk9ubHkgdmFsaWQgaWYgc3RhcnQgaGFzIGJlZW4gc2V0XCIpO3JldHVybiBhLkFjfWZ1bmN0aW9uIGVjKGEpe3koYS5pYSxcIk9ubHkgdmFsaWQgaWYgc3RhcnQgaGFzIGJlZW4gc2V0XCIpO3JldHVybiBhLmtjP2EuV2I6XCJbTUlOX05BTUVdXCJ9ZnVuY3Rpb24gaGMoYSl7eShhLnFhLFwiT25seSB2YWxpZCBpZiBlbmQgaGFzIGJlZW4gc2V0XCIpO3JldHVybiBhLnpjfWZ1bmN0aW9uIGdjKGEpe3koYS5xYSxcIk9ubHkgdmFsaWQgaWYgZW5kIGhhcyBiZWVuIHNldFwiKTtyZXR1cm4gYS52Yz9hLlRiOlwiW01BWF9OQU1FXVwifVxuZnVuY3Rpb24gR2MoYSl7dmFyIGI9bmV3IEVjO2Iua2E9YS5rYTtiLnNhPWEuc2E7Yi5pYT1hLmlhO2IuQWM9YS5BYztiLmtjPWEua2M7Yi5XYj1hLldiO2IucWE9YS5xYTtiLnpjPWEuemM7Yi52Yz1hLnZjO2IuVGI9YS5UYjtiLmc9YS5nO3JldHVybiBifWg9RWMucHJvdG90eXBlO2gueGU9ZnVuY3Rpb24oYSl7dmFyIGI9R2ModGhpcyk7Yi5rYT0hMDtiLnNhPWE7Yi5FYj1cIlwiO3JldHVybiBifTtoLnllPWZ1bmN0aW9uKGEpe3ZhciBiPUdjKHRoaXMpO2Iua2E9ITA7Yi5zYT1hO2IuRWI9XCJsXCI7cmV0dXJuIGJ9O2guemU9ZnVuY3Rpb24oYSl7dmFyIGI9R2ModGhpcyk7Yi5rYT0hMDtiLnNhPWE7Yi5FYj1cInJcIjtyZXR1cm4gYn07aC5PZD1mdW5jdGlvbihhLGIpe3ZhciBjPUdjKHRoaXMpO2MuaWE9ITA7bShhKXx8KGE9bnVsbCk7Yy5BYz1hO251bGwhPWI/KGMua2M9ITAsYy5XYj1iKTooYy5rYz0hMSxjLldiPVwiXCIpO3JldHVybiBjfTtcbmguaGQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1HYyh0aGlzKTtjLnFhPSEwO20oYSl8fChhPW51bGwpO2MuemM9YTttKGIpPyhjLnZjPSEwLGMuVGI9Yik6KGMuSWc9ITEsYy5UYj1cIlwiKTtyZXR1cm4gY307ZnVuY3Rpb24gSGMoYSxiKXt2YXIgYz1HYyhhKTtjLmc9YjtyZXR1cm4gY31mdW5jdGlvbiBJYyhhKXt2YXIgYj17fTthLmlhJiYoYi5zcD1hLkFjLGEua2MmJihiLnNuPWEuV2IpKTthLnFhJiYoYi5lcD1hLnpjLGEudmMmJihiLmVuPWEuVGIpKTtpZihhLmthKXtiLmw9YS5zYTt2YXIgYz1hLkViO1wiXCI9PT1jJiYoYz1hLmlhP1wibFwiOlwiclwiKTtiLnZmPWN9YS5nIT09TCYmKGIuaT1hLmcudG9TdHJpbmcoKSk7cmV0dXJuIGJ9ZnVuY3Rpb24gSmMoYSl7cmV0dXJuIShhLmlhfHxhLnFhfHxhLmthKX1oLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHIoSWModGhpcykpfTtmdW5jdGlvbiBRKGEsYixjLGQpe3RoaXMuaz1hO3RoaXMucGF0aD1iO3RoaXMubj1jO3RoaXMuYWM9ZH1cbmZ1bmN0aW9uIEtjKGEpe3ZhciBiPW51bGwsYz1udWxsO2EuaWEmJihiPWZjKGEpKTthLnFhJiYoYz1oYyhhKSk7aWYoYS5nPT09cmMpe2lmKGEuaWEpe2lmKFwiW01JTl9OQU1FXVwiIT1lYyhhKSl0aHJvdyBFcnJvcihcIlF1ZXJ5OiBXaGVuIG9yZGVyaW5nIGJ5IGtleSwgeW91IG1heSBvbmx5IHBhc3Mgb25lIGFyZ3VtZW50IHRvIHN0YXJ0QXQoKSwgZW5kQXQoKSwgb3IgZXF1YWxUbygpLlwiKTtpZihudWxsIT1iJiZcInN0cmluZ1wiIT09dHlwZW9mIGIpdGhyb3cgRXJyb3IoXCJRdWVyeTogV2hlbiBvcmRlcmluZyBieSBrZXksIHRoZSBhcmd1bWVudCBwYXNzZWQgdG8gc3RhcnRBdCgpLCBlbmRBdCgpLG9yIGVxdWFsVG8oKSBtdXN0IGJlIGEgc3RyaW5nLlwiKTt9aWYoYS5xYSl7aWYoXCJbTUFYX05BTUVdXCIhPWdjKGEpKXRocm93IEVycm9yKFwiUXVlcnk6IFdoZW4gb3JkZXJpbmcgYnkga2V5LCB5b3UgbWF5IG9ubHkgcGFzcyBvbmUgYXJndW1lbnQgdG8gc3RhcnRBdCgpLCBlbmRBdCgpLCBvciBlcXVhbFRvKCkuXCIpO2lmKG51bGwhPVxuYyYmXCJzdHJpbmdcIiE9PXR5cGVvZiBjKXRocm93IEVycm9yKFwiUXVlcnk6IFdoZW4gb3JkZXJpbmcgYnkga2V5LCB0aGUgYXJndW1lbnQgcGFzc2VkIHRvIHN0YXJ0QXQoKSwgZW5kQXQoKSxvciBlcXVhbFRvKCkgbXVzdCBiZSBhIHN0cmluZy5cIik7fX1lbHNlIGlmKGEuZz09PUwpe2lmKG51bGwhPWImJiFRYihiKXx8bnVsbCE9YyYmIVFiKGMpKXRocm93IEVycm9yKFwiUXVlcnk6IFdoZW4gb3JkZXJpbmcgYnkgcHJpb3JpdHksIHRoZSBmaXJzdCBhcmd1bWVudCBwYXNzZWQgdG8gc3RhcnRBdCgpLCBlbmRBdCgpLCBvciBlcXVhbFRvKCkgbXVzdCBiZSBhIHZhbGlkIHByaW9yaXR5IHZhbHVlIChudWxsLCBhIG51bWJlciwgb3IgYSBzdHJpbmcpLlwiKTt9ZWxzZSBpZih5KGEuZyBpbnN0YW5jZW9mIG9jLFwidW5rbm93biBpbmRleCB0eXBlLlwiKSxudWxsIT1iJiZcIm9iamVjdFwiPT09dHlwZW9mIGJ8fG51bGwhPWMmJlwib2JqZWN0XCI9PT10eXBlb2YgYyl0aHJvdyBFcnJvcihcIlF1ZXJ5OiBGaXJzdCBhcmd1bWVudCBwYXNzZWQgdG8gc3RhcnRBdCgpLCBlbmRBdCgpLCBvciBlcXVhbFRvKCkgY2Fubm90IGJlIGFuIG9iamVjdC5cIik7XG59ZnVuY3Rpb24gTGMoYSl7aWYoYS5pYSYmYS5xYSYmYS5rYSYmKCFhLmthfHxcIlwiPT09YS5FYikpdGhyb3cgRXJyb3IoXCJRdWVyeTogQ2FuJ3QgY29tYmluZSBzdGFydEF0KCksIGVuZEF0KCksIGFuZCBsaW1pdCgpLiBVc2UgbGltaXRUb0ZpcnN0KCkgb3IgbGltaXRUb0xhc3QoKSBpbnN0ZWFkLlwiKTt9ZnVuY3Rpb24gTWMoYSxiKXtpZighMD09PWEuYWMpdGhyb3cgRXJyb3IoYitcIjogWW91IGNhbid0IGNvbWJpbmUgbXVsdGlwbGUgb3JkZXJCeSBjYWxscy5cIik7fVEucHJvdG90eXBlLmNjPWZ1bmN0aW9uKCl7RihcIlF1ZXJ5LnJlZlwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKTtyZXR1cm4gbmV3IFIodGhpcy5rLHRoaXMucGF0aCl9O1EucHJvdG90eXBlLnJlZj1RLnByb3RvdHlwZS5jYztcblEucHJvdG90eXBlLnZiPWZ1bmN0aW9uKGEsYixjLGQpe0YoXCJRdWVyeS5vblwiLDIsNCxhcmd1bWVudHMubGVuZ3RoKTtXYihcIlF1ZXJ5Lm9uXCIsYSwhMSk7SChcIlF1ZXJ5Lm9uXCIsMixiLCExKTt2YXIgZT1OYyhcIlF1ZXJ5Lm9uXCIsYyxkKTtpZihcInZhbHVlXCI9PT1hKU9jKHRoaXMuayx0aGlzLG5ldyBIYihiLGUuY2FuY2VsfHxudWxsLGUuS2F8fG51bGwpKTtlbHNle3ZhciBmPXt9O2ZbYV09YjtPYyh0aGlzLmssdGhpcyxuZXcgSWIoZixlLmNhbmNlbCxlLkthKSl9cmV0dXJuIGJ9O1EucHJvdG90eXBlLm9uPVEucHJvdG90eXBlLnZiO1xuUS5wcm90b3R5cGUuWmI9ZnVuY3Rpb24oYSxiLGMpe0YoXCJRdWVyeS5vZmZcIiwwLDMsYXJndW1lbnRzLmxlbmd0aCk7V2IoXCJRdWVyeS5vZmZcIixhLCEwKTtIKFwiUXVlcnkub2ZmXCIsMixiLCEwKTtNYihcIlF1ZXJ5Lm9mZlwiLDMsYyk7dmFyIGQ9bnVsbCxlPW51bGw7XCJ2YWx1ZVwiPT09YT9kPW5ldyBIYihifHxudWxsLG51bGwsY3x8bnVsbCk6YSYmKGImJihlPXt9LGVbYV09YiksZD1uZXcgSWIoZSxudWxsLGN8fG51bGwpKTtlPXRoaXMuaztkPVwiLmluZm9cIj09PUkodGhpcy5wYXRoKT9lLnFkLmdiKHRoaXMsZCk6ZS5OLmdiKHRoaXMsZCk7UGMoZS4kLHRoaXMucGF0aCxkKX07US5wcm90b3R5cGUub2ZmPVEucHJvdG90eXBlLlpiO1xuUS5wcm90b3R5cGUubGc9ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGcpe2YmJihmPSExLGUuWmIoYSxjKSxiLmNhbGwoZC5LYSxnKSl9RihcIlF1ZXJ5Lm9uY2VcIiwyLDQsYXJndW1lbnRzLmxlbmd0aCk7V2IoXCJRdWVyeS5vbmNlXCIsYSwhMSk7SChcIlF1ZXJ5Lm9uY2VcIiwyLGIsITEpO3ZhciBkPU5jKFwiUXVlcnkub25jZVwiLGFyZ3VtZW50c1syXSxhcmd1bWVudHNbM10pLGU9dGhpcyxmPSEwO3RoaXMudmIoYSxjLGZ1bmN0aW9uKGIpe2UuWmIoYSxjKTtkLmNhbmNlbCYmZC5jYW5jZWwuY2FsbChkLkthLGIpfSl9O1EucHJvdG90eXBlLm9uY2U9US5wcm90b3R5cGUubGc7XG5RLnByb3RvdHlwZS54ZT1mdW5jdGlvbihhKXt6KFwiUXVlcnkubGltaXQoKSBiZWluZyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIFF1ZXJ5LmxpbWl0VG9GaXJzdCgpIG9yIFF1ZXJ5LmxpbWl0VG9MYXN0KCkgaW5zdGVhZC5cIik7RihcIlF1ZXJ5LmxpbWl0XCIsMSwxLGFyZ3VtZW50cy5sZW5ndGgpO2lmKCFnYShhKXx8TWF0aC5mbG9vcihhKSE9PWF8fDA+PWEpdGhyb3cgRXJyb3IoXCJRdWVyeS5saW1pdDogRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIuXCIpO2lmKHRoaXMubi5rYSl0aHJvdyBFcnJvcihcIlF1ZXJ5LmxpbWl0OiBMaW1pdCB3YXMgYWxyZWFkeSBzZXQgKGJ5IGFub3RoZXIgY2FsbCB0byBsaW1pdCwgbGltaXRUb0ZpcnN0LCBvcmxpbWl0VG9MYXN0LlwiKTt2YXIgYj10aGlzLm4ueGUoYSk7TGMoYik7cmV0dXJuIG5ldyBRKHRoaXMuayx0aGlzLnBhdGgsYix0aGlzLmFjKX07US5wcm90b3R5cGUubGltaXQ9US5wcm90b3R5cGUueGU7XG5RLnByb3RvdHlwZS55ZT1mdW5jdGlvbihhKXtGKFwiUXVlcnkubGltaXRUb0ZpcnN0XCIsMSwxLGFyZ3VtZW50cy5sZW5ndGgpO2lmKCFnYShhKXx8TWF0aC5mbG9vcihhKSE9PWF8fDA+PWEpdGhyb3cgRXJyb3IoXCJRdWVyeS5saW1pdFRvRmlyc3Q6IEZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLlwiKTtpZih0aGlzLm4ua2EpdGhyb3cgRXJyb3IoXCJRdWVyeS5saW1pdFRvRmlyc3Q6IExpbWl0IHdhcyBhbHJlYWR5IHNldCAoYnkgYW5vdGhlciBjYWxsIHRvIGxpbWl0LCBsaW1pdFRvRmlyc3QsIG9yIGxpbWl0VG9MYXN0KS5cIik7cmV0dXJuIG5ldyBRKHRoaXMuayx0aGlzLnBhdGgsdGhpcy5uLnllKGEpLHRoaXMuYWMpfTtRLnByb3RvdHlwZS5saW1pdFRvRmlyc3Q9US5wcm90b3R5cGUueWU7XG5RLnByb3RvdHlwZS56ZT1mdW5jdGlvbihhKXtGKFwiUXVlcnkubGltaXRUb0xhc3RcIiwxLDEsYXJndW1lbnRzLmxlbmd0aCk7aWYoIWdhKGEpfHxNYXRoLmZsb29yKGEpIT09YXx8MD49YSl0aHJvdyBFcnJvcihcIlF1ZXJ5LmxpbWl0VG9MYXN0OiBGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlci5cIik7aWYodGhpcy5uLmthKXRocm93IEVycm9yKFwiUXVlcnkubGltaXRUb0xhc3Q6IExpbWl0IHdhcyBhbHJlYWR5IHNldCAoYnkgYW5vdGhlciBjYWxsIHRvIGxpbWl0LCBsaW1pdFRvRmlyc3QsIG9yIGxpbWl0VG9MYXN0KS5cIik7cmV0dXJuIG5ldyBRKHRoaXMuayx0aGlzLnBhdGgsdGhpcy5uLnplKGEpLHRoaXMuYWMpfTtRLnByb3RvdHlwZS5saW1pdFRvTGFzdD1RLnByb3RvdHlwZS56ZTtcblEucHJvdG90eXBlLm1nPWZ1bmN0aW9uKGEpe0YoXCJRdWVyeS5vcmRlckJ5Q2hpbGRcIiwxLDEsYXJndW1lbnRzLmxlbmd0aCk7aWYoXCIka2V5XCI9PT1hKXRocm93IEVycm9yKCdRdWVyeS5vcmRlckJ5Q2hpbGQ6IFwiJGtleVwiIGlzIGludmFsaWQuICBVc2UgUXVlcnkub3JkZXJCeUtleSgpIGluc3RlYWQuJyk7aWYoXCIkcHJpb3JpdHlcIj09PWEpdGhyb3cgRXJyb3IoJ1F1ZXJ5Lm9yZGVyQnlDaGlsZDogXCIkcHJpb3JpdHlcIiBpcyBpbnZhbGlkLiAgVXNlIFF1ZXJ5Lm9yZGVyQnlQcmlvcml0eSgpIGluc3RlYWQuJyk7WGIoXCJRdWVyeS5vcmRlckJ5Q2hpbGRcIiwxLGEsITEpO01jKHRoaXMsXCJRdWVyeS5vcmRlckJ5Q2hpbGRcIik7dmFyIGI9SGModGhpcy5uLG5ldyBvYyhhKSk7S2MoYik7cmV0dXJuIG5ldyBRKHRoaXMuayx0aGlzLnBhdGgsYiwhMCl9O1EucHJvdG90eXBlLm9yZGVyQnlDaGlsZD1RLnByb3RvdHlwZS5tZztcblEucHJvdG90eXBlLm5nPWZ1bmN0aW9uKCl7RihcIlF1ZXJ5Lm9yZGVyQnlLZXlcIiwwLDAsYXJndW1lbnRzLmxlbmd0aCk7TWModGhpcyxcIlF1ZXJ5Lm9yZGVyQnlLZXlcIik7dmFyIGE9SGModGhpcy5uLHJjKTtLYyhhKTtyZXR1cm4gbmV3IFEodGhpcy5rLHRoaXMucGF0aCxhLCEwKX07US5wcm90b3R5cGUub3JkZXJCeUtleT1RLnByb3RvdHlwZS5uZztRLnByb3RvdHlwZS5vZz1mdW5jdGlvbigpe0YoXCJRdWVyeS5vcmRlckJ5UHJpb3JpdHlcIiwwLDAsYXJndW1lbnRzLmxlbmd0aCk7TWModGhpcyxcIlF1ZXJ5Lm9yZGVyQnlQcmlvcml0eVwiKTt2YXIgYT1IYyh0aGlzLm4sTCk7S2MoYSk7cmV0dXJuIG5ldyBRKHRoaXMuayx0aGlzLnBhdGgsYSwhMCl9O1EucHJvdG90eXBlLm9yZGVyQnlQcmlvcml0eT1RLnByb3RvdHlwZS5vZztcblEucHJvdG90eXBlLk9kPWZ1bmN0aW9uKGEsYil7RihcIlF1ZXJ5LnN0YXJ0QXRcIiwwLDIsYXJndW1lbnRzLmxlbmd0aCk7UmIoXCJRdWVyeS5zdGFydEF0XCIsYSwhMCk7WGIoXCJRdWVyeS5zdGFydEF0XCIsMixiLCEwKTt2YXIgYz10aGlzLm4uT2QoYSxiKTtMYyhjKTtLYyhjKTtpZih0aGlzLm4uaWEpdGhyb3cgRXJyb3IoXCJRdWVyeS5zdGFydEF0OiBTdGFydGluZyBwb2ludCB3YXMgYWxyZWFkeSBzZXQgKGJ5IGFub3RoZXIgY2FsbCB0byBzdGFydEF0IG9yIGVxdWFsVG8pLlwiKTttKGEpfHwoYj1hPW51bGwpO3JldHVybiBuZXcgUSh0aGlzLmssdGhpcy5wYXRoLGMsdGhpcy5hYyl9O1EucHJvdG90eXBlLnN0YXJ0QXQ9US5wcm90b3R5cGUuT2Q7XG5RLnByb3RvdHlwZS5oZD1mdW5jdGlvbihhLGIpe0YoXCJRdWVyeS5lbmRBdFwiLDAsMixhcmd1bWVudHMubGVuZ3RoKTtSYihcIlF1ZXJ5LmVuZEF0XCIsYSwhMCk7WGIoXCJRdWVyeS5lbmRBdFwiLDIsYiwhMCk7dmFyIGM9dGhpcy5uLmhkKGEsYik7TGMoYyk7S2MoYyk7aWYodGhpcy5uLnFhKXRocm93IEVycm9yKFwiUXVlcnkuZW5kQXQ6IEVuZGluZyBwb2ludCB3YXMgYWxyZWFkeSBzZXQgKGJ5IGFub3RoZXIgY2FsbCB0byBlbmRBdCBvciBlcXVhbFRvKS5cIik7cmV0dXJuIG5ldyBRKHRoaXMuayx0aGlzLnBhdGgsYyx0aGlzLmFjKX07US5wcm90b3R5cGUuZW5kQXQ9US5wcm90b3R5cGUuaGQ7XG5RLnByb3RvdHlwZS5UZj1mdW5jdGlvbihhLGIpe0YoXCJRdWVyeS5lcXVhbFRvXCIsMSwyLGFyZ3VtZW50cy5sZW5ndGgpO1JiKFwiUXVlcnkuZXF1YWxUb1wiLGEsITEpO1hiKFwiUXVlcnkuZXF1YWxUb1wiLDIsYiwhMCk7aWYodGhpcy5uLmlhKXRocm93IEVycm9yKFwiUXVlcnkuZXF1YWxUbzogU3RhcnRpbmcgcG9pbnQgd2FzIGFscmVhZHkgc2V0IChieSBhbm90aGVyIGNhbGwgdG8gZW5kQXQgb3IgZXF1YWxUbykuXCIpO2lmKHRoaXMubi5xYSl0aHJvdyBFcnJvcihcIlF1ZXJ5LmVxdWFsVG86IEVuZGluZyBwb2ludCB3YXMgYWxyZWFkeSBzZXQgKGJ5IGFub3RoZXIgY2FsbCB0byBlbmRBdCBvciBlcXVhbFRvKS5cIik7cmV0dXJuIHRoaXMuT2QoYSxiKS5oZChhLGIpfTtRLnByb3RvdHlwZS5lcXVhbFRvPVEucHJvdG90eXBlLlRmO1EucHJvdG90eXBlLkZhPWZ1bmN0aW9uKCl7dmFyIGE9eGIoSWModGhpcy5uKSk7cmV0dXJuXCJ7fVwiPT09YT9cImRlZmF1bHRcIjphfTtcbmZ1bmN0aW9uIE5jKGEsYixjKXt2YXIgZD17Y2FuY2VsOm51bGwsS2E6bnVsbH07aWYoYiYmYylkLmNhbmNlbD1iLEgoYSwzLGQuY2FuY2VsLCEwKSxkLkthPWMsTWIoYSw0LGQuS2EpO2Vsc2UgaWYoYilpZihcIm9iamVjdFwiPT09dHlwZW9mIGImJm51bGwhPT1iKWQuS2E9YjtlbHNlIGlmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBiKWQuY2FuY2VsPWI7ZWxzZSB0aHJvdyBFcnJvcihHKGEsMywhMCkrXCIgbXVzdCBlaXRoZXIgYmUgYSBjYW5jZWwgY2FsbGJhY2sgb3IgYSBjb250ZXh0IG9iamVjdC5cIik7cmV0dXJuIGR9O2Z1bmN0aW9uIFMoYSxiKXtpZigxPT1hcmd1bWVudHMubGVuZ3RoKXt0aGlzLnc9YS5zcGxpdChcIi9cIik7Zm9yKHZhciBjPTAsZD0wO2Q8dGhpcy53Lmxlbmd0aDtkKyspMDx0aGlzLndbZF0ubGVuZ3RoJiYodGhpcy53W2NdPXRoaXMud1tkXSxjKyspO3RoaXMudy5sZW5ndGg9Yzt0aGlzLmNhPTB9ZWxzZSB0aGlzLnc9YSx0aGlzLmNhPWJ9ZnVuY3Rpb24gSShhKXtyZXR1cm4gYS5jYT49YS53Lmxlbmd0aD9udWxsOmEud1thLmNhXX1mdW5jdGlvbiBRYyhhKXtyZXR1cm4gYS53Lmxlbmd0aC1hLmNhfWZ1bmN0aW9uIFQoYSl7dmFyIGI9YS5jYTtiPGEudy5sZW5ndGgmJmIrKztyZXR1cm4gbmV3IFMoYS53LGIpfWZ1bmN0aW9uIFJjKGEpe3JldHVybiBhLmNhPGEudy5sZW5ndGg/YS53W2Eudy5sZW5ndGgtMV06bnVsbH1cblMucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPVwiXCIsYj10aGlzLmNhO2I8dGhpcy53Lmxlbmd0aDtiKyspXCJcIiE9PXRoaXMud1tiXSYmKGErPVwiL1wiK3RoaXMud1tiXSk7cmV0dXJuIGF8fFwiL1wifTtTLnByb3RvdHlwZS5wYXJlbnQ9ZnVuY3Rpb24oKXtpZih0aGlzLmNhPj10aGlzLncubGVuZ3RoKXJldHVybiBudWxsO2Zvcih2YXIgYT1bXSxiPXRoaXMuY2E7Yjx0aGlzLncubGVuZ3RoLTE7YisrKWEucHVzaCh0aGlzLndbYl0pO3JldHVybiBuZXcgUyhhLDApfTtcblMucHJvdG90eXBlLm89ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVtdLGM9dGhpcy5jYTtjPHRoaXMudy5sZW5ndGg7YysrKWIucHVzaCh0aGlzLndbY10pO2lmKGEgaW5zdGFuY2VvZiBTKWZvcihjPWEuY2E7YzxhLncubGVuZ3RoO2MrKyliLnB1c2goYS53W2NdKTtlbHNlIGZvcihhPWEuc3BsaXQoXCIvXCIpLGM9MDtjPGEubGVuZ3RoO2MrKykwPGFbY10ubGVuZ3RoJiZiLnB1c2goYVtjXSk7cmV0dXJuIG5ldyBTKGIsMCl9O1MucHJvdG90eXBlLmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jYT49dGhpcy53Lmxlbmd0aH07dmFyIFU9bmV3IFMoXCJcIik7ZnVuY3Rpb24gVihhLGIpe3ZhciBjPUkoYSk7aWYobnVsbD09PWMpcmV0dXJuIGI7aWYoYz09PUkoYikpcmV0dXJuIFYoVChhKSxUKGIpKTt0aHJvdyBFcnJvcihcIklOVEVSTkFMIEVSUk9SOiBpbm5lclBhdGggKFwiK2IrXCIpIGlzIG5vdCB3aXRoaW4gb3V0ZXJQYXRoIChcIithK1wiKVwiKTt9XG5TLnByb3RvdHlwZS5lYT1mdW5jdGlvbihhKXtpZihRYyh0aGlzKSE9PVFjKGEpKXJldHVybiExO2Zvcih2YXIgYj10aGlzLmNhLGM9YS5jYTtiPD10aGlzLncubGVuZ3RoO2IrKyxjKyspaWYodGhpcy53W2JdIT09YS53W2NdKXJldHVybiExO3JldHVybiEwfTtTLnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmNhLGM9YS5jYTtpZihRYyh0aGlzKT5RYyhhKSlyZXR1cm4hMTtmb3IoO2I8dGhpcy53Lmxlbmd0aDspe2lmKHRoaXMud1tiXSE9PWEud1tjXSlyZXR1cm4hMTsrK2I7KytjfXJldHVybiEwfTtmdW5jdGlvbiBTYygpe3RoaXMuY2hpbGRyZW49e307dGhpcy5iZD0wO3RoaXMudmFsdWU9bnVsbH1mdW5jdGlvbiBUYyhhLGIsYyl7dGhpcy51ZD1hP2E6XCJcIjt0aGlzLk9jPWI/YjpudWxsO3RoaXMuQT1jP2M6bmV3IFNjfWZ1bmN0aW9uIFVjKGEsYil7Zm9yKHZhciBjPWIgaW5zdGFuY2VvZiBTP2I6bmV3IFMoYiksZD1hLGU7bnVsbCE9PShlPUkoYykpOylkPW5ldyBUYyhlLGQsdChkLkEuY2hpbGRyZW4sZSl8fG5ldyBTYyksYz1UKGMpO3JldHVybiBkfWg9VGMucHJvdG90eXBlO2guemE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5BLnZhbHVlfTtmdW5jdGlvbiBWYyhhLGIpe3koXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBiLFwiQ2Fubm90IHNldCB2YWx1ZSB0byB1bmRlZmluZWRcIik7YS5BLnZhbHVlPWI7V2MoYSl9aC5jbGVhcj1mdW5jdGlvbigpe3RoaXMuQS52YWx1ZT1udWxsO3RoaXMuQS5jaGlsZHJlbj17fTt0aGlzLkEuYmQ9MDtXYyh0aGlzKX07XG5oLmxkPWZ1bmN0aW9uKCl7cmV0dXJuIDA8dGhpcy5BLmJkfTtoLmU9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMuemEoKSYmIXRoaXMubGQoKX07aC5VPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7QSh0aGlzLkEuY2hpbGRyZW4sZnVuY3Rpb24oYyxkKXthKG5ldyBUYyhkLGIsYykpfSl9O2Z1bmN0aW9uIFhjKGEsYixjLGQpe2MmJiFkJiZiKGEpO2EuVShmdW5jdGlvbihhKXtYYyhhLGIsITAsZCl9KTtjJiZkJiZiKGEpfWZ1bmN0aW9uIFljKGEsYil7Zm9yKHZhciBjPWEucGFyZW50KCk7bnVsbCE9PWMmJiFiKGMpOyljPWMucGFyZW50KCl9aC5wYXRoPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBTKG51bGw9PT10aGlzLk9jP3RoaXMudWQ6dGhpcy5PYy5wYXRoKCkrXCIvXCIrdGhpcy51ZCl9O2gubmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVkfTtoLnBhcmVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLk9jfTtcbmZ1bmN0aW9uIFdjKGEpe2lmKG51bGwhPT1hLk9jKXt2YXIgYj1hLk9jLGM9YS51ZCxkPWEuZSgpLGU9cyhiLkEuY2hpbGRyZW4sYyk7ZCYmZT8oZGVsZXRlIGIuQS5jaGlsZHJlbltjXSxiLkEuYmQtLSxXYyhiKSk6ZHx8ZXx8KGIuQS5jaGlsZHJlbltjXT1hLkEsYi5BLmJkKyssV2MoYikpfX07ZnVuY3Rpb24gWmMoYSxiKXt0aGlzLkphPWE7dGhpcy51YT1iP2I6JGN9aD1aYy5wcm90b3R5cGU7aC5MYT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgWmModGhpcy5KYSx0aGlzLnVhLkxhKGEsYix0aGlzLkphKS5YKG51bGwsbnVsbCwhMSxudWxsLG51bGwpKX07aC5yZW1vdmU9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBaYyh0aGlzLkphLHRoaXMudWEucmVtb3ZlKGEsdGhpcy5KYSkuWChudWxsLG51bGwsITEsbnVsbCxudWxsKSl9O2guZ2V0PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPXRoaXMudWE7IWMuZSgpOyl7Yj10aGlzLkphKGEsYy5rZXkpO2lmKDA9PT1iKXJldHVybiBjLnZhbHVlOzA+Yj9jPWMubGVmdDowPGImJihjPWMucmlnaHQpfXJldHVybiBudWxsfTtcbmZ1bmN0aW9uIGFkKGEsYil7Zm9yKHZhciBjLGQ9YS51YSxlPW51bGw7IWQuZSgpOyl7Yz1hLkphKGIsZC5rZXkpO2lmKDA9PT1jKXtpZihkLmxlZnQuZSgpKXJldHVybiBlP2Uua2V5Om51bGw7Zm9yKGQ9ZC5sZWZ0OyFkLnJpZ2h0LmUoKTspZD1kLnJpZ2h0O3JldHVybiBkLmtleX0wPmM/ZD1kLmxlZnQ6MDxjJiYoZT1kLGQ9ZC5yaWdodCl9dGhyb3cgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gZmluZCBwcmVkZWNlc3NvciBrZXkgZm9yIGEgbm9uZXhpc3RlbnQga2V5LiAgV2hhdCBnaXZlcz9cIik7fWguZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVhLmUoKX07aC5jb3VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVhLmNvdW50KCl9O2guSWM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51YS5JYygpfTtoLlhiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudWEuWGIoKX07aC5mYT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy51YS5mYShhKX07XG5oLk9iPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgYmQodGhpcy51YSxudWxsLHRoaXMuSmEsITEsYSl9O2guUGI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IGJkKHRoaXMudWEsYSx0aGlzLkphLCExLGIpfTtoLlJiPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBiZCh0aGlzLnVhLGEsdGhpcy5KYSwhMCxiKX07aC5nZj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IGJkKHRoaXMudWEsbnVsbCx0aGlzLkphLCEwLGEpfTtmdW5jdGlvbiBiZChhLGIsYyxkLGUpe3RoaXMuSWQ9ZXx8bnVsbDt0aGlzLnZlPWQ7dGhpcy5OYT1bXTtmb3IoZT0xOyFhLmUoKTspaWYoZT1iP2MoYS5rZXksYik6MSxkJiYoZSo9LTEpLDA+ZSlhPXRoaXMudmU/YS5sZWZ0OmEucmlnaHQ7ZWxzZSBpZigwPT09ZSl7dGhpcy5OYS5wdXNoKGEpO2JyZWFrfWVsc2UgdGhpcy5OYS5wdXNoKGEpLGE9dGhpcy52ZT9hLnJpZ2h0OmEubGVmdH1cbmZ1bmN0aW9uIFAoYSl7aWYoMD09PWEuTmEubGVuZ3RoKXJldHVybiBudWxsO3ZhciBiPWEuTmEucG9wKCksYztjPWEuSWQ/YS5JZChiLmtleSxiLnZhbHVlKTp7a2V5OmIua2V5LHZhbHVlOmIudmFsdWV9O2lmKGEudmUpZm9yKGI9Yi5sZWZ0OyFiLmUoKTspYS5OYS5wdXNoKGIpLGI9Yi5yaWdodDtlbHNlIGZvcihiPWIucmlnaHQ7IWIuZSgpOylhLk5hLnB1c2goYiksYj1iLmxlZnQ7cmV0dXJuIGN9ZnVuY3Rpb24gY2QoYSl7aWYoMD09PWEuTmEubGVuZ3RoKXJldHVybiBudWxsO3ZhciBiO2I9YS5OYTtiPWJbYi5sZW5ndGgtMV07cmV0dXJuIGEuSWQ/YS5JZChiLmtleSxiLnZhbHVlKTp7a2V5OmIua2V5LHZhbHVlOmIudmFsdWV9fWZ1bmN0aW9uIGRkKGEsYixjLGQsZSl7dGhpcy5rZXk9YTt0aGlzLnZhbHVlPWI7dGhpcy5jb2xvcj1udWxsIT1jP2M6ITA7dGhpcy5sZWZ0PW51bGwhPWQ/ZDokYzt0aGlzLnJpZ2h0PW51bGwhPWU/ZTokY31oPWRkLnByb3RvdHlwZTtcbmguWD1mdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybiBuZXcgZGQobnVsbCE9YT9hOnRoaXMua2V5LG51bGwhPWI/Yjp0aGlzLnZhbHVlLG51bGwhPWM/Yzp0aGlzLmNvbG9yLG51bGwhPWQ/ZDp0aGlzLmxlZnQsbnVsbCE9ZT9lOnRoaXMucmlnaHQpfTtoLmNvdW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVmdC5jb3VudCgpKzErdGhpcy5yaWdodC5jb3VudCgpfTtoLmU9ZnVuY3Rpb24oKXtyZXR1cm4hMX07aC5mYT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5sZWZ0LmZhKGEpfHxhKHRoaXMua2V5LHRoaXMudmFsdWUpfHx0aGlzLnJpZ2h0LmZhKGEpfTtmdW5jdGlvbiBlZChhKXtyZXR1cm4gYS5sZWZ0LmUoKT9hOmVkKGEubGVmdCl9aC5JYz1mdW5jdGlvbigpe3JldHVybiBlZCh0aGlzKS5rZXl9O2guWGI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yaWdodC5lKCk/dGhpcy5rZXk6dGhpcy5yaWdodC5YYigpfTtcbmguTGE9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU7ZT10aGlzO2Q9YyhhLGUua2V5KTtlPTA+ZD9lLlgobnVsbCxudWxsLG51bGwsZS5sZWZ0LkxhKGEsYixjKSxudWxsKTowPT09ZD9lLlgobnVsbCxiLG51bGwsbnVsbCxudWxsKTplLlgobnVsbCxudWxsLG51bGwsbnVsbCxlLnJpZ2h0LkxhKGEsYixjKSk7cmV0dXJuIGZkKGUpfTtmdW5jdGlvbiBnZChhKXtpZihhLmxlZnQuZSgpKXJldHVybiAkYzthLmxlZnQuYmEoKXx8YS5sZWZ0LmxlZnQuYmEoKXx8KGE9aGQoYSkpO2E9YS5YKG51bGwsbnVsbCxudWxsLGdkKGEubGVmdCksbnVsbCk7cmV0dXJuIGZkKGEpfVxuaC5yZW1vdmU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkO2M9dGhpcztpZigwPmIoYSxjLmtleSkpYy5sZWZ0LmUoKXx8Yy5sZWZ0LmJhKCl8fGMubGVmdC5sZWZ0LmJhKCl8fChjPWhkKGMpKSxjPWMuWChudWxsLG51bGwsbnVsbCxjLmxlZnQucmVtb3ZlKGEsYiksbnVsbCk7ZWxzZXtjLmxlZnQuYmEoKSYmKGM9amQoYykpO2MucmlnaHQuZSgpfHxjLnJpZ2h0LmJhKCl8fGMucmlnaHQubGVmdC5iYSgpfHwoYz1rZChjKSxjLmxlZnQubGVmdC5iYSgpJiYoYz1qZChjKSxjPWtkKGMpKSk7aWYoMD09PWIoYSxjLmtleSkpe2lmKGMucmlnaHQuZSgpKXJldHVybiAkYztkPWVkKGMucmlnaHQpO2M9Yy5YKGQua2V5LGQudmFsdWUsbnVsbCxudWxsLGdkKGMucmlnaHQpKX1jPWMuWChudWxsLG51bGwsbnVsbCxudWxsLGMucmlnaHQucmVtb3ZlKGEsYikpfXJldHVybiBmZChjKX07aC5iYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbG9yfTtcbmZ1bmN0aW9uIGZkKGEpe2EucmlnaHQuYmEoKSYmIWEubGVmdC5iYSgpJiYoYT1sZChhKSk7YS5sZWZ0LmJhKCkmJmEubGVmdC5sZWZ0LmJhKCkmJihhPWpkKGEpKTthLmxlZnQuYmEoKSYmYS5yaWdodC5iYSgpJiYoYT1rZChhKSk7cmV0dXJuIGF9ZnVuY3Rpb24gaGQoYSl7YT1rZChhKTthLnJpZ2h0LmxlZnQuYmEoKSYmKGE9YS5YKG51bGwsbnVsbCxudWxsLG51bGwsamQoYS5yaWdodCkpLGE9bGQoYSksYT1rZChhKSk7cmV0dXJuIGF9ZnVuY3Rpb24gbGQoYSl7cmV0dXJuIGEucmlnaHQuWChudWxsLG51bGwsYS5jb2xvcixhLlgobnVsbCxudWxsLCEwLG51bGwsYS5yaWdodC5sZWZ0KSxudWxsKX1mdW5jdGlvbiBqZChhKXtyZXR1cm4gYS5sZWZ0LlgobnVsbCxudWxsLGEuY29sb3IsbnVsbCxhLlgobnVsbCxudWxsLCEwLGEubGVmdC5yaWdodCxudWxsKSl9XG5mdW5jdGlvbiBrZChhKXtyZXR1cm4gYS5YKG51bGwsbnVsbCwhYS5jb2xvcixhLmxlZnQuWChudWxsLG51bGwsIWEubGVmdC5jb2xvcixudWxsLG51bGwpLGEucmlnaHQuWChudWxsLG51bGwsIWEucmlnaHQuY29sb3IsbnVsbCxudWxsKSl9ZnVuY3Rpb24gbWQoKXt9aD1tZC5wcm90b3R5cGU7aC5YPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O2guTGE9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IGRkKGEsYixudWxsKX07aC5yZW1vdmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307aC5jb3VudD1mdW5jdGlvbigpe3JldHVybiAwfTtoLmU9ZnVuY3Rpb24oKXtyZXR1cm4hMH07aC5mYT1mdW5jdGlvbigpe3JldHVybiExfTtoLkljPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9O2guWGI9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH07aC5iYT1mdW5jdGlvbigpe3JldHVybiExfTt2YXIgJGM9bmV3IG1kO2Z1bmN0aW9uIG5kKGEsYil7dGhpcy5EPWE7eShtKHRoaXMuRCkmJm51bGwhPT10aGlzLkQsXCJMZWFmTm9kZSBzaG91bGRuJ3QgYmUgY3JlYXRlZCB3aXRoIG51bGwvdW5kZWZpbmVkIHZhbHVlLlwiKTt0aGlzLmhhPWJ8fE07b2QodGhpcy5oYSk7dGhpcy5zYj1udWxsfWg9bmQucHJvdG90eXBlO2guTT1mdW5jdGlvbigpe3JldHVybiEwfTtoLkw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYX07aC5aPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgbmQodGhpcy5ELGEpfTtoLks9ZnVuY3Rpb24oYSl7cmV0dXJuXCIucHJpb3JpdHlcIj09PWE/dGhpcy5oYTpNfTtoLnJhPWZ1bmN0aW9uKGEpe3JldHVybiBhLmUoKT90aGlzOlwiLnByaW9yaXR5XCI9PT1JKGEpP3RoaXMuaGE6TX07aC5EYT1mdW5jdGlvbigpe3JldHVybiExfTtoLmZmPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9O1xuaC5QPWZ1bmN0aW9uKGEsYil7cmV0dXJuXCIucHJpb3JpdHlcIj09PWE/dGhpcy5aKGIpOmIuZSgpJiZcIi5wcmlvcml0eVwiIT09YT90aGlzOk0uUChhLGIpLloodGhpcy5oYSl9O2guQz1mdW5jdGlvbihhLGIpe3ZhciBjPUkoYSk7aWYobnVsbD09PWMpcmV0dXJuIGI7aWYoYi5lKCkmJlwiLnByaW9yaXR5XCIhPT1jKXJldHVybiB0aGlzO3koXCIucHJpb3JpdHlcIiE9PWN8fDE9PT1RYyhhKSxcIi5wcmlvcml0eSBtdXN0IGJlIHRoZSBsYXN0IHRva2VuIGluIGEgcGF0aFwiKTtyZXR1cm4gdGhpcy5QKGMsTS5DKFQoYSksYikpfTtoLmU9ZnVuY3Rpb24oKXtyZXR1cm4hMX07aC51Yj1mdW5jdGlvbigpe3JldHVybiAwfTtoLkk9ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJiF0aGlzLkwoKS5lKCk/e1wiLnZhbHVlXCI6dGhpcy56YSgpLFwiLnByaW9yaXR5XCI6dGhpcy5MKCkuSSgpfTp0aGlzLnphKCl9O1xuaC5oYXNoPWZ1bmN0aW9uKCl7aWYobnVsbD09PXRoaXMuc2Ipe3ZhciBhPVwiXCI7dGhpcy5oYS5lKCl8fChhKz1cInByaW9yaXR5OlwiK3BkKHRoaXMuaGEuSSgpKStcIjpcIik7dmFyIGI9dHlwZW9mIHRoaXMuRCxhPWErKGIrXCI6XCIpLGE9XCJudW1iZXJcIj09PWI/YStBYih0aGlzLkQpOmErdGhpcy5EO3RoaXMuc2I9aWIoYSl9cmV0dXJuIHRoaXMuc2J9O2guemE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5EfTtoLmhlPWZ1bmN0aW9uKGEpe2lmKGE9PT1NKXJldHVybiAxO2lmKGEgaW5zdGFuY2VvZiBXKXJldHVybi0xO3koYS5NKCksXCJVbmtub3duIG5vZGUgdHlwZVwiKTt2YXIgYj10eXBlb2YgYS5ELGM9dHlwZW9mIHRoaXMuRCxkPUdhKHFkLGIpLGU9R2EocWQsYyk7eSgwPD1kLFwiVW5rbm93biBsZWFmIHR5cGU6IFwiK2IpO3koMDw9ZSxcIlVua25vd24gbGVhZiB0eXBlOiBcIitjKTtyZXR1cm4gZD09PWU/XCJvYmplY3RcIj09PWM/MDp0aGlzLkQ8YS5EPy0xOnRoaXMuRD09PWEuRD8wOjE6ZS1kfTtcbnZhciBxZD1bXCJvYmplY3RcIixcImJvb2xlYW5cIixcIm51bWJlclwiLFwic3RyaW5nXCJdO25kLnByb3RvdHlwZS5GYj1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtuZC5wcm90b3R5cGUuQmM9ZnVuY3Rpb24oKXtyZXR1cm4hMH07bmQucHJvdG90eXBlLmVhPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpcz8hMDphLk0oKT90aGlzLkQ9PT1hLkQmJnRoaXMuaGEuZWEoYS5oYSk6ITF9O25kLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiByKHRoaXMuSSghMCkpfTtmdW5jdGlvbiByZChhLGIpe3RoaXMucGQ9YTt0aGlzLlZiPWJ9cmQucHJvdG90eXBlLmdldD1mdW5jdGlvbihhKXt2YXIgYj10KHRoaXMucGQsYSk7aWYoIWIpdGhyb3cgRXJyb3IoXCJObyBpbmRleCBkZWZpbmVkIGZvciBcIithKTtyZXR1cm4gYj09PWxjP251bGw6Yn07ZnVuY3Rpb24gc2QoYSxiLGMpe3ZhciBkPXRkKGEucGQsZnVuY3Rpb24oZCxmKXt2YXIgZz10KGEuVmIsZik7eShnLFwiTWlzc2luZyBpbmRleCBpbXBsZW1lbnRhdGlvbiBmb3IgXCIrZik7aWYoZD09PWxjKXtpZihnLnVlKGIuWSkpe2Zvcih2YXIgaz1bXSxsPWMuT2IoemMpLG49UChsKTtuOyluLm5hbWUhPWIubmFtZSYmay5wdXNoKG4pLG49UChsKTtrLnB1c2goYik7cmV0dXJuIHVkKGssbWMoZykpfXJldHVybiBsY31nPWMuZ2V0KGIubmFtZSk7az1kO2cmJihrPWsucmVtb3ZlKG5ldyBOKGIubmFtZSxnKSkpO3JldHVybiBrLkxhKGIsYi5ZKX0pO3JldHVybiBuZXcgcmQoZCxhLlZiKX1cbmZ1bmN0aW9uIHZkKGEsYixjKXt2YXIgZD10ZChhLnBkLGZ1bmN0aW9uKGEpe2lmKGE9PT1sYylyZXR1cm4gYTt2YXIgZD1jLmdldChiLm5hbWUpO3JldHVybiBkP2EucmVtb3ZlKG5ldyBOKGIubmFtZSxkKSk6YX0pO3JldHVybiBuZXcgcmQoZCxhLlZiKX12YXIgd2Q9bmV3IHJkKHtcIi5wcmlvcml0eVwiOmxjfSx7XCIucHJpb3JpdHlcIjpMfSk7ZnVuY3Rpb24gVyhhLGIsYyl7dGhpcy5tPWE7KHRoaXMuaGE9YikmJm9kKHRoaXMuaGEpO3RoaXMub2I9Yzt0aGlzLnNiPW51bGx9aD1XLnByb3RvdHlwZTtoLk09ZnVuY3Rpb24oKXtyZXR1cm4hMX07aC5MPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGF8fE19O2guWj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IFcodGhpcy5tLGEsdGhpcy5vYil9O2guSz1mdW5jdGlvbihhKXtpZihcIi5wcmlvcml0eVwiPT09YSlyZXR1cm4gdGhpcy5MKCk7YT10aGlzLm0uZ2V0KGEpO3JldHVybiBudWxsPT09YT9NOmF9O2gucmE9ZnVuY3Rpb24oYSl7dmFyIGI9SShhKTtyZXR1cm4gbnVsbD09PWI/dGhpczp0aGlzLksoYikucmEoVChhKSl9O2guRGE9ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPT10aGlzLm0uZ2V0KGEpfTtcbmguUD1mdW5jdGlvbihhLGIpe3koYixcIldlIHNob3VsZCBhbHdheXMgYmUgcGFzc2luZyBzbmFwc2hvdCBub2Rlc1wiKTtpZihcIi5wcmlvcml0eVwiPT09YSlyZXR1cm4gdGhpcy5aKGIpO3ZhciBjPW5ldyBOKGEsYiksZDtiLmUoKT8oZD10aGlzLm0ucmVtb3ZlKGEpLGM9dmQodGhpcy5vYixjLHRoaXMubSkpOihkPXRoaXMubS5MYShhLGIpLGM9c2QodGhpcy5vYixjLHRoaXMubSkpO3JldHVybiBuZXcgVyhkLHRoaXMuaGEsYyl9O2guQz1mdW5jdGlvbihhLGIpe3ZhciBjPUkoYSk7aWYobnVsbD09PWMpcmV0dXJuIGI7eShcIi5wcmlvcml0eVwiIT09SShhKXx8MT09PVFjKGEpLFwiLnByaW9yaXR5IG11c3QgYmUgdGhlIGxhc3QgdG9rZW4gaW4gYSBwYXRoXCIpO3ZhciBkPXRoaXMuSyhjKS5DKFQoYSksYik7cmV0dXJuIHRoaXMuUChjLGQpfTtoLmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tLmUoKX07aC51Yj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm0uY291bnQoKX07dmFyIHhkPS9eKDB8WzEtOV1cXGQqKSQvO1xuaD1XLnByb3RvdHlwZTtoLkk9ZnVuY3Rpb24oYSl7aWYodGhpcy5lKCkpcmV0dXJuIG51bGw7dmFyIGI9e30sYz0wLGQ9MCxlPSEwO3RoaXMuVShMLGZ1bmN0aW9uKGYsZyl7YltmXT1nLkkoYSk7YysrO2UmJnhkLnRlc3QoZik/ZD1NYXRoLm1heChkLE51bWJlcihmKSk6ZT0hMX0pO2lmKCFhJiZlJiZkPDIqYyl7dmFyIGY9W10sZztmb3IoZyBpbiBiKWZbZ109YltnXTtyZXR1cm4gZn1hJiYhdGhpcy5MKCkuZSgpJiYoYltcIi5wcmlvcml0eVwiXT10aGlzLkwoKS5JKCkpO3JldHVybiBifTtoLmhhc2g9ZnVuY3Rpb24oKXtpZihudWxsPT09dGhpcy5zYil7dmFyIGE9XCJcIjt0aGlzLkwoKS5lKCl8fChhKz1cInByaW9yaXR5OlwiK3BkKHRoaXMuTCgpLkkoKSkrXCI6XCIpO3RoaXMuVShMLGZ1bmN0aW9uKGIsYyl7dmFyIGQ9Yy5oYXNoKCk7XCJcIiE9PWQmJihhKz1cIjpcIitiK1wiOlwiK2QpfSk7dGhpcy5zYj1cIlwiPT09YT9cIlwiOmliKGEpfXJldHVybiB0aGlzLnNifTtcbmguZmY9ZnVuY3Rpb24oYSxiLGMpe3JldHVybihjPXlkKHRoaXMsYykpPyhhPWFkKGMsbmV3IE4oYSxiKSkpP2EubmFtZTpudWxsOmFkKHRoaXMubSxhKX07ZnVuY3Rpb24gQ2MoYSxiKXt2YXIgYztjPShjPXlkKGEsYikpPyhjPWMuSWMoKSkmJmMubmFtZTphLm0uSWMoKTtyZXR1cm4gYz9uZXcgTihjLGEubS5nZXQoYykpOm51bGx9ZnVuY3Rpb24gRGMoYSxiKXt2YXIgYztjPShjPXlkKGEsYikpPyhjPWMuWGIoKSkmJmMubmFtZTphLm0uWGIoKTtyZXR1cm4gYz9uZXcgTihjLGEubS5nZXQoYykpOm51bGx9aC5VPWZ1bmN0aW9uKGEsYil7dmFyIGM9eWQodGhpcyxhKTtyZXR1cm4gYz9jLmZhKGZ1bmN0aW9uKGEpe3JldHVybiBiKGEubmFtZSxhLlkpfSk6dGhpcy5tLmZhKGIpfTtoLk9iPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLlBiKGEuQ2UoKSxhKX07XG5oLlBiPWZ1bmN0aW9uKGEsYil7dmFyIGM9eWQodGhpcyxiKTtpZihjKXJldHVybiBjLlBiKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGF9KTtmb3IodmFyIGM9dGhpcy5tLlBiKGEubmFtZSx6YyksZD1jZChjKTtudWxsIT1kJiYwPmIuY29tcGFyZShkLGEpOylQKGMpLGQ9Y2QoYyk7cmV0dXJuIGN9O2guZ2Y9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuUmIoYS5CZSgpLGEpfTtoLlJiPWZ1bmN0aW9uKGEsYil7dmFyIGM9eWQodGhpcyxiKTtpZihjKXJldHVybiBjLlJiKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGF9KTtmb3IodmFyIGM9dGhpcy5tLlJiKGEubmFtZSx6YyksZD1jZChjKTtudWxsIT1kJiYwPGIuY29tcGFyZShkLGEpOylQKGMpLGQ9Y2QoYyk7cmV0dXJuIGN9O2guaGU9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZSgpP2EuZSgpPzA6LTE6YS5NKCl8fGEuZSgpPzE6YT09PXBjPy0xOjB9O1xuaC5GYj1mdW5jdGlvbihhKXtpZihhPT09cmN8fHpkKHRoaXMub2IuVmIsYS50b1N0cmluZygpKSlyZXR1cm4gdGhpczt2YXIgYj10aGlzLm9iLGM9dGhpcy5tO3koYSE9PXJjLFwiS2V5SW5kZXggYWx3YXlzIGV4aXN0cyBhbmQgaXNuJ3QgbWVhbnQgdG8gYmUgYWRkZWQgdG8gdGhlIEluZGV4TWFwLlwiKTtmb3IodmFyIGQ9W10sZT0hMSxjPWMuT2IoemMpLGY9UChjKTtmOyllPWV8fGEudWUoZi5ZKSxkLnB1c2goZiksZj1QKGMpO2Q9ZT91ZChkLG1jKGEpKTpsYztlPWEudG9TdHJpbmcoKTtjPUFkKGIuVmIpO2NbZV09YTthPUFkKGIucGQpO2FbZV09ZDtyZXR1cm4gbmV3IFcodGhpcy5tLHRoaXMuaGEsbmV3IHJkKGEsYykpfTtoLkJjPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09cmN8fHpkKHRoaXMub2IuVmIsYS50b1N0cmluZygpKX07XG5oLmVhPWZ1bmN0aW9uKGEpe2lmKGE9PT10aGlzKXJldHVybiEwO2lmKGEuTSgpKXJldHVybiExO2lmKHRoaXMuTCgpLmVhKGEuTCgpKSYmdGhpcy5tLmNvdW50KCk9PT1hLm0uY291bnQoKSl7dmFyIGI9dGhpcy5PYihMKTthPWEuT2IoTCk7Zm9yKHZhciBjPVAoYiksZD1QKGEpO2MmJmQ7KXtpZihjLm5hbWUhPT1kLm5hbWV8fCFjLlkuZWEoZC5ZKSlyZXR1cm4hMTtjPVAoYik7ZD1QKGEpfXJldHVybiBudWxsPT09YyYmbnVsbD09PWR9cmV0dXJuITF9O2Z1bmN0aW9uIHlkKGEsYil7cmV0dXJuIGI9PT1yYz9udWxsOmEub2IuZ2V0KGIudG9TdHJpbmcoKSl9aC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiByKHRoaXMuSSghMCkpfTtmdW5jdGlvbiBPKGEsYil7aWYobnVsbD09PWEpcmV0dXJuIE07dmFyIGM9bnVsbDtcIm9iamVjdFwiPT09dHlwZW9mIGEmJlwiLnByaW9yaXR5XCJpbiBhP2M9YVtcIi5wcmlvcml0eVwiXTpcInVuZGVmaW5lZFwiIT09dHlwZW9mIGImJihjPWIpO3kobnVsbD09PWN8fFwic3RyaW5nXCI9PT10eXBlb2YgY3x8XCJudW1iZXJcIj09PXR5cGVvZiBjfHxcIm9iamVjdFwiPT09dHlwZW9mIGMmJlwiLnN2XCJpbiBjLFwiSW52YWxpZCBwcmlvcml0eSB0eXBlIGZvdW5kOiBcIit0eXBlb2YgYyk7XCJvYmplY3RcIj09PXR5cGVvZiBhJiZcIi52YWx1ZVwiaW4gYSYmbnVsbCE9PWFbXCIudmFsdWVcIl0mJihhPWFbXCIudmFsdWVcIl0pO2lmKFwib2JqZWN0XCIhPT10eXBlb2YgYXx8XCIuc3ZcImluIGEpcmV0dXJuIG5ldyBuZChhLE8oYykpO2lmKGEgaW5zdGFuY2VvZiBBcnJheSl7dmFyIGQ9TSxlPWE7QShlLGZ1bmN0aW9uKGEsYil7aWYocyhlLGIpJiZcIi5cIiE9PWIuc3Vic3RyaW5nKDAsMSkpe3ZhciBjPU8oYSk7aWYoYy5NKCl8fCFjLmUoKSlkPVxuZC5QKGIsYyl9fSk7cmV0dXJuIGQuWihPKGMpKX12YXIgZj1bXSxnPSExLGs9YTt1YShrLGZ1bmN0aW9uKGEpe2lmKFwic3RyaW5nXCIhPT10eXBlb2YgYXx8XCIuXCIhPT1hLnN1YnN0cmluZygwLDEpKXt2YXIgYj1PKGtbYV0pO2IuZSgpfHwoZz1nfHwhYi5MKCkuZSgpLGYucHVzaChuZXcgTihhLGIpKSl9fSk7dmFyIGw9dWQoZixpYyxmdW5jdGlvbihhKXtyZXR1cm4gYS5uYW1lfSxqYyk7aWYoZyl7dmFyIG49dWQoZixtYyhMKSk7cmV0dXJuIG5ldyBXKGwsTyhjKSxuZXcgcmQoe1wiLnByaW9yaXR5XCI6bn0se1wiLnByaW9yaXR5XCI6TH0pKX1yZXR1cm4gbmV3IFcobCxPKGMpLHdkKX12YXIgQmQ9TWF0aC5sb2coMik7ZnVuY3Rpb24gQ2QoYSl7dGhpcy5jb3VudD1wYXJzZUludChNYXRoLmxvZyhhKzEpL0JkLDEwKTt0aGlzLiRlPXRoaXMuY291bnQtMTt0aGlzLk5mPWErMSZwYXJzZUludChBcnJheSh0aGlzLmNvdW50KzEpLmpvaW4oXCIxXCIpLDIpfVxuZnVuY3Rpb24gRGQoYSl7dmFyIGI9IShhLk5mJjE8PGEuJGUpO2EuJGUtLTtyZXR1cm4gYn1cbmZ1bmN0aW9uIHVkKGEsYixjLGQpe2Z1bmN0aW9uIGUoYixkKXt2YXIgZj1kLWI7aWYoMD09ZilyZXR1cm4gbnVsbDtpZigxPT1mKXt2YXIgbj1hW2JdLHU9Yz9jKG4pOm47cmV0dXJuIG5ldyBkZCh1LG4uWSwhMSxudWxsLG51bGwpfXZhciBuPXBhcnNlSW50KGYvMiwxMCkrYixmPWUoYixuKSx4PWUobisxLGQpLG49YVtuXSx1PWM/YyhuKTpuO3JldHVybiBuZXcgZGQodSxuLlksITEsZix4KX1hLnNvcnQoYik7dmFyIGY9ZnVuY3Rpb24oYil7ZnVuY3Rpb24gZChiLGcpe3ZhciBrPXUtYix4PXU7dS09Yjt2YXIgeD1lKGsrMSx4KSxrPWFba10sRT1jP2Moayk6ayx4PW5ldyBkZChFLGsuWSxnLG51bGwseCk7Zj9mLmxlZnQ9eDpuPXg7Zj14fWZvcih2YXIgZj1udWxsLG49bnVsbCx1PWEubGVuZ3RoLHg9MDt4PGIuY291bnQ7Kyt4KXt2YXIgRT1EZChiKSxpZD1NYXRoLnBvdygyLGIuY291bnQtKHgrMSkpO0U/ZChpZCwhMSk6KGQoaWQsITEpLGQoaWQsITApKX1yZXR1cm4gbn0obmV3IENkKGEubGVuZ3RoKSk7XG5yZXR1cm4gbnVsbCE9PWY/bmV3IFpjKGR8fGIsZik6bmV3IFpjKGR8fGIpfWZ1bmN0aW9uIHBkKGEpe3JldHVyblwibnVtYmVyXCI9PT10eXBlb2YgYT9cIm51bWJlcjpcIitBYihhKTpcInN0cmluZzpcIithfWZ1bmN0aW9uIG9kKGEpe2lmKGEuTSgpKXt2YXIgYj1hLkkoKTt5KFwic3RyaW5nXCI9PT10eXBlb2YgYnx8XCJudW1iZXJcIj09PXR5cGVvZiBifHxcIm9iamVjdFwiPT09dHlwZW9mIGImJnMoYixcIi5zdlwiKSxcIlByaW9yaXR5IG11c3QgYmUgYSBzdHJpbmcgb3IgbnVtYmVyLlwiKX1lbHNlIHkoYT09PXBjfHxhLmUoKSxcInByaW9yaXR5IG9mIHVuZXhwZWN0ZWQgdHlwZS5cIik7eShhPT09cGN8fGEuTCgpLmUoKSxcIlByaW9yaXR5IG5vZGVzIGNhbid0IGhhdmUgYSBwcmlvcml0eSBvZiB0aGVpciBvd24uXCIpfXZhciBNPW5ldyBXKG5ldyBaYyhqYyksbnVsbCx3ZCk7ZnVuY3Rpb24gRWQoKXtXLmNhbGwodGhpcyxuZXcgWmMoamMpLE0sd2QpfW1hKEVkLFcpO2g9RWQucHJvdG90eXBlO1xuaC5oZT1mdW5jdGlvbihhKXtyZXR1cm4gYT09PXRoaXM/MDoxfTtoLmVhPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpc307aC5MPWZ1bmN0aW9uKCl7dGhyb3cgZmIoXCJXaHkgaXMgdGhpcyBjYWxsZWQ/XCIpO307aC5LPWZ1bmN0aW9uKCl7cmV0dXJuIE19O2guZT1mdW5jdGlvbigpe3JldHVybiExfTt2YXIgcGM9bmV3IEVkLG5jPW5ldyBOKFwiW01JTl9OQU1FXVwiLE0pO2Z1bmN0aW9uIEQoYSxiLGMpe3RoaXMuQT1hO3RoaXMuVj1iO3RoaXMuZz1jfUQucHJvdG90eXBlLkk9ZnVuY3Rpb24oKXtGKFwiRmlyZWJhc2UuRGF0YVNuYXBzaG90LnZhbFwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKTtyZXR1cm4gdGhpcy5BLkkoKX07RC5wcm90b3R5cGUudmFsPUQucHJvdG90eXBlLkk7RC5wcm90b3R5cGUuYmY9ZnVuY3Rpb24oKXtGKFwiRmlyZWJhc2UuRGF0YVNuYXBzaG90LmV4cG9ydFZhbFwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKTtyZXR1cm4gdGhpcy5BLkkoITApfTtELnByb3RvdHlwZS5leHBvcnRWYWw9RC5wcm90b3R5cGUuYmY7RC5wcm90b3R5cGUuV2Y9ZnVuY3Rpb24oKXtGKFwiRmlyZWJhc2UuRGF0YVNuYXBzaG90LmV4aXN0c1wiLDAsMCxhcmd1bWVudHMubGVuZ3RoKTtyZXR1cm4hdGhpcy5BLmUoKX07RC5wcm90b3R5cGUuZXhpc3RzPUQucHJvdG90eXBlLldmO1xuRC5wcm90b3R5cGUubz1mdW5jdGlvbihhKXtGKFwiRmlyZWJhc2UuRGF0YVNuYXBzaG90LmNoaWxkXCIsMCwxLGFyZ3VtZW50cy5sZW5ndGgpO2dhKGEpJiYoYT1TdHJpbmcoYSkpO1liKFwiRmlyZWJhc2UuRGF0YVNuYXBzaG90LmNoaWxkXCIsYSk7dmFyIGI9bmV3IFMoYSksYz10aGlzLlYubyhiKTtyZXR1cm4gbmV3IEQodGhpcy5BLnJhKGIpLGMsTCl9O0QucHJvdG90eXBlLmNoaWxkPUQucHJvdG90eXBlLm87RC5wcm90b3R5cGUuRGE9ZnVuY3Rpb24oYSl7RihcIkZpcmViYXNlLkRhdGFTbmFwc2hvdC5oYXNDaGlsZFwiLDEsMSxhcmd1bWVudHMubGVuZ3RoKTtZYihcIkZpcmViYXNlLkRhdGFTbmFwc2hvdC5oYXNDaGlsZFwiLGEpO3ZhciBiPW5ldyBTKGEpO3JldHVybiF0aGlzLkEucmEoYikuZSgpfTtELnByb3RvdHlwZS5oYXNDaGlsZD1ELnByb3RvdHlwZS5EYTtcbkQucHJvdG90eXBlLkw9ZnVuY3Rpb24oKXtGKFwiRmlyZWJhc2UuRGF0YVNuYXBzaG90LmdldFByaW9yaXR5XCIsMCwwLGFyZ3VtZW50cy5sZW5ndGgpO3JldHVybiB0aGlzLkEuTCgpLkkoKX07RC5wcm90b3R5cGUuZ2V0UHJpb3JpdHk9RC5wcm90b3R5cGUuTDtELnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKGEpe0YoXCJGaXJlYmFzZS5EYXRhU25hcHNob3QuZm9yRWFjaFwiLDEsMSxhcmd1bWVudHMubGVuZ3RoKTtIKFwiRmlyZWJhc2UuRGF0YVNuYXBzaG90LmZvckVhY2hcIiwxLGEsITEpO2lmKHRoaXMuQS5NKCkpcmV0dXJuITE7dmFyIGI9dGhpcztyZXR1cm4hIXRoaXMuQS5VKHRoaXMuZyxmdW5jdGlvbihjLGQpe3JldHVybiBhKG5ldyBEKGQsYi5WLm8oYyksTCkpfSl9O0QucHJvdG90eXBlLmZvckVhY2g9RC5wcm90b3R5cGUuZm9yRWFjaDtcbkQucHJvdG90eXBlLmxkPWZ1bmN0aW9uKCl7RihcIkZpcmViYXNlLkRhdGFTbmFwc2hvdC5oYXNDaGlsZHJlblwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKTtyZXR1cm4gdGhpcy5BLk0oKT8hMTohdGhpcy5BLmUoKX07RC5wcm90b3R5cGUuaGFzQ2hpbGRyZW49RC5wcm90b3R5cGUubGQ7RC5wcm90b3R5cGUubmFtZT1mdW5jdGlvbigpe3ooXCJGaXJlYmFzZS5EYXRhU25hcHNob3QubmFtZSgpIGJlaW5nIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgRmlyZWJhc2UuRGF0YVNuYXBzaG90LmtleSgpIGluc3RlYWQuXCIpO0YoXCJGaXJlYmFzZS5EYXRhU25hcHNob3QubmFtZVwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKTtyZXR1cm4gdGhpcy5rZXkoKX07RC5wcm90b3R5cGUubmFtZT1ELnByb3RvdHlwZS5uYW1lO0QucHJvdG90eXBlLmtleT1mdW5jdGlvbigpe0YoXCJGaXJlYmFzZS5EYXRhU25hcHNob3Qua2V5XCIsMCwwLGFyZ3VtZW50cy5sZW5ndGgpO3JldHVybiB0aGlzLlYua2V5KCl9O1xuRC5wcm90b3R5cGUua2V5PUQucHJvdG90eXBlLmtleTtELnByb3RvdHlwZS51Yj1mdW5jdGlvbigpe0YoXCJGaXJlYmFzZS5EYXRhU25hcHNob3QubnVtQ2hpbGRyZW5cIiwwLDAsYXJndW1lbnRzLmxlbmd0aCk7cmV0dXJuIHRoaXMuQS51YigpfTtELnByb3RvdHlwZS5udW1DaGlsZHJlbj1ELnByb3RvdHlwZS51YjtELnByb3RvdHlwZS5jYz1mdW5jdGlvbigpe0YoXCJGaXJlYmFzZS5EYXRhU25hcHNob3QucmVmXCIsMCwwLGFyZ3VtZW50cy5sZW5ndGgpO3JldHVybiB0aGlzLlZ9O0QucHJvdG90eXBlLnJlZj1ELnByb3RvdHlwZS5jYztmdW5jdGlvbiBGZChhKXt5KGVhKGEpJiYwPGEubGVuZ3RoLFwiUmVxdWlyZXMgYSBub24tZW1wdHkgYXJyYXlcIik7dGhpcy5GZj1hO3RoaXMuR2M9e319RmQucHJvdG90eXBlLlZkPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMuR2NbYV18fFtdLGQ9MDtkPGMubGVuZ3RoO2QrKyljW2RdLnFjLmFwcGx5KGNbZF0uS2EsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKX07RmQucHJvdG90eXBlLnZiPWZ1bmN0aW9uKGEsYixjKXtHZCh0aGlzLGEpO3RoaXMuR2NbYV09dGhpcy5HY1thXXx8W107dGhpcy5HY1thXS5wdXNoKHtxYzpiLEthOmN9KTsoYT10aGlzLnFlKGEpKSYmYi5hcHBseShjLGEpfTtGZC5wcm90b3R5cGUuWmI9ZnVuY3Rpb24oYSxiLGMpe0dkKHRoaXMsYSk7YT10aGlzLkdjW2FdfHxbXTtmb3IodmFyIGQ9MDtkPGEubGVuZ3RoO2QrKylpZihhW2RdLnFjPT09YiYmKCFjfHxjPT09YVtkXS5LYSkpe2Euc3BsaWNlKGQsMSk7YnJlYWt9fTtcbmZ1bmN0aW9uIEdkKGEsYil7eShNYShhLkZmLGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0pLFwiVW5rbm93biBldmVudDogXCIrYil9O2Z1bmN0aW9uIEhkKCl7RmQuY2FsbCh0aGlzLFtcInZpc2libGVcIl0pO3ZhciBhLGI7XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBkb2N1bWVudCYmXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyJiYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBkb2N1bWVudC5oaWRkZW4/KGI9XCJ2aXNpYmlsaXR5Y2hhbmdlXCIsYT1cImhpZGRlblwiKTpcInVuZGVmaW5lZFwiIT09dHlwZW9mIGRvY3VtZW50Lm1vekhpZGRlbj8oYj1cIm1venZpc2liaWxpdHljaGFuZ2VcIixhPVwibW96SGlkZGVuXCIpOlwidW5kZWZpbmVkXCIhPT10eXBlb2YgZG9jdW1lbnQubXNIaWRkZW4/KGI9XCJtc3Zpc2liaWxpdHljaGFuZ2VcIixhPVwibXNIaWRkZW5cIik6XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBkb2N1bWVudC53ZWJraXRIaWRkZW4mJihiPVwid2Via2l0dmlzaWJpbGl0eWNoYW5nZVwiLGE9XCJ3ZWJraXRIaWRkZW5cIikpO3RoaXMubWM9ITA7aWYoYil7dmFyIGM9dGhpcztkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGIsXG5mdW5jdGlvbigpe3ZhciBiPSFkb2N1bWVudFthXTtiIT09Yy5tYyYmKGMubWM9YixjLlZkKFwidmlzaWJsZVwiLGIpKX0sITEpfX1tYShIZCxGZCk7Y2EoSGQpO0hkLnByb3RvdHlwZS5xZT1mdW5jdGlvbihhKXt5KFwidmlzaWJsZVwiPT09YSxcIlVua25vd24gZXZlbnQgdHlwZTogXCIrYSk7cmV0dXJuW3RoaXMubWNdfTtmdW5jdGlvbiBJZCgpe0ZkLmNhbGwodGhpcyxbXCJvbmxpbmVcIl0pO3RoaXMuTGM9ITA7aWYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiB3aW5kb3cmJlwidW5kZWZpbmVkXCIhPT10eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIpe3ZhciBhPXRoaXM7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIixmdW5jdGlvbigpe2EuTGN8fGEuVmQoXCJvbmxpbmVcIiwhMCk7YS5MYz0hMH0sITEpO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLGZ1bmN0aW9uKCl7YS5MYyYmYS5WZChcIm9ubGluZVwiLCExKTthLkxjPSExfSwhMSl9fW1hKElkLEZkKTtjYShJZCk7SWQucHJvdG90eXBlLnFlPWZ1bmN0aW9uKGEpe3koXCJvbmxpbmVcIj09PWEsXCJVbmtub3duIGV2ZW50IHR5cGU6IFwiK2EpO3JldHVyblt0aGlzLkxjXX07ZnVuY3Rpb24gQShhLGIpe2Zvcih2YXIgYyBpbiBhKWIuY2FsbCh2b2lkIDAsYVtjXSxjLGEpfWZ1bmN0aW9uIHRkKGEsYil7dmFyIGM9e30sZDtmb3IoZCBpbiBhKWNbZF09Yi5jYWxsKHZvaWQgMCxhW2RdLGQsYSk7cmV0dXJuIGN9ZnVuY3Rpb24gTGIoYSxiKXtmb3IodmFyIGMgaW4gYSlpZighYi5jYWxsKHZvaWQgMCxhW2NdLGMsYSkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gSmIoYSl7dmFyIGI9MCxjO2ZvcihjIGluIGEpYisrO3JldHVybiBifWZ1bmN0aW9uIEtiKGEpe2Zvcih2YXIgYiBpbiBhKXJldHVybiBifWZ1bmN0aW9uIEpkKGEpe3ZhciBiPVtdLGM9MCxkO2ZvcihkIGluIGEpYltjKytdPWFbZF07cmV0dXJuIGJ9ZnVuY3Rpb24gS2QoYSl7dmFyIGI9W10sYz0wLGQ7Zm9yKGQgaW4gYSliW2MrK109ZDtyZXR1cm4gYn1mdW5jdGlvbiB6ZChhLGIpe2Zvcih2YXIgYyBpbiBhKWlmKGFbY109PWIpcmV0dXJuITA7cmV0dXJuITF9XG5mdW5jdGlvbiBMZChhLGIsYyl7Zm9yKHZhciBkIGluIGEpaWYoYi5jYWxsKGMsYVtkXSxkLGEpKXJldHVybiBkfWZ1bmN0aW9uIE1kKGEsYil7dmFyIGM9TGQoYSxiLHZvaWQgMCk7cmV0dXJuIGMmJmFbY119ZnVuY3Rpb24gTmQoYSl7Zm9yKHZhciBiIGluIGEpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gT2QoYSxiKXtyZXR1cm4gYiBpbiBhP2FbYl06dm9pZCAwfWZ1bmN0aW9uIEFkKGEpe3ZhciBiPXt9LGM7Zm9yKGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9dmFyIFBkPVwiY29uc3RydWN0b3IgaGFzT3duUHJvcGVydHkgaXNQcm90b3R5cGVPZiBwcm9wZXJ0eUlzRW51bWVyYWJsZSB0b0xvY2FsZVN0cmluZyB0b1N0cmluZyB2YWx1ZU9mXCIuc3BsaXQoXCIgXCIpO1xuZnVuY3Rpb24gUWQoYSxiKXtmb3IodmFyIGMsZCxlPTE7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7ZD1hcmd1bWVudHNbZV07Zm9yKGMgaW4gZClhW2NdPWRbY107Zm9yKHZhciBmPTA7ZjxQZC5sZW5ndGg7ZisrKWM9UGRbZl0sT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGQsYykmJihhW2NdPWRbY10pfX07ZnVuY3Rpb24gUmQoKXt0aGlzLnRjPXt9fWZ1bmN0aW9uIFNkKGEsYixjKXttKGMpfHwoYz0xKTtzKGEudGMsYil8fChhLnRjW2JdPTApO2EudGNbYl0rPWN9UmQucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiBBZCh0aGlzLnRjKX07ZnVuY3Rpb24gVGQoYSl7dGhpcy5QZj1hO3RoaXMucmQ9bnVsbH1UZC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5QZi5nZXQoKSxiPUFkKGEpO2lmKHRoaXMucmQpZm9yKHZhciBjIGluIHRoaXMucmQpYltjXS09dGhpcy5yZFtjXTt0aGlzLnJkPWE7cmV0dXJuIGJ9O2Z1bmN0aW9uIFVkKGEsYil7dGhpcy56Zj17fTt0aGlzLlBkPW5ldyBUZChhKTt0aGlzLlM9Yjt2YXIgYz0xRTQrMkU0Kk1hdGgucmFuZG9tKCk7c2V0VGltZW91dChxKHRoaXMudGYsdGhpcyksTWF0aC5mbG9vcihjKSl9VWQucHJvdG90eXBlLnRmPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5QZC5nZXQoKSxiPXt9LGM9ITEsZDtmb3IoZCBpbiBhKTA8YVtkXSYmcyh0aGlzLnpmLGQpJiYoYltkXT1hW2RdLGM9ITApO2MmJihhPXRoaXMuUyxhLmphJiYoYj17YzpifSxhLmYoXCJyZXBvcnRTdGF0c1wiLGIpLGEuQ2EoXCJzXCIsYikpKTtzZXRUaW1lb3V0KHEodGhpcy50Zix0aGlzKSxNYXRoLmZsb29yKDZFNSpNYXRoLnJhbmRvbSgpKSl9O3ZhciBWZD17fSxXZD17fTtmdW5jdGlvbiBYZChhKXthPWEudG9TdHJpbmcoKTtWZFthXXx8KFZkW2FdPW5ldyBSZCk7cmV0dXJuIFZkW2FdfWZ1bmN0aW9uIFlkKGEsYil7dmFyIGM9YS50b1N0cmluZygpO1dkW2NdfHwoV2RbY109YigpKTtyZXR1cm4gV2RbY119O3ZhciBaZD1udWxsO1widW5kZWZpbmVkXCIhPT10eXBlb2YgTW96V2ViU29ja2V0P1pkPU1veldlYlNvY2tldDpcInVuZGVmaW5lZFwiIT09dHlwZW9mIFdlYlNvY2tldCYmKFpkPVdlYlNvY2tldCk7ZnVuY3Rpb24gJGQoYSxiLGMpe3RoaXMuaWU9YTt0aGlzLmY9b2IodGhpcy5pZSk7dGhpcy5mcmFtZXM9dGhpcy5DYz1udWxsO3RoaXMuaWI9dGhpcy5qYj10aGlzLlRlPTA7dGhpcy5SYT1YZChiKTt0aGlzLiRhPShiLkFiP1wid3NzOi8vXCI6XCJ3czovL1wiKStiLk1hK1wiLy53cz92PTVcIjtcInVuZGVmaW5lZFwiIT09dHlwZW9mIGxvY2F0aW9uJiZsb2NhdGlvbi5ocmVmJiYtMSE9PWxvY2F0aW9uLmhyZWYuaW5kZXhPZihcImZpcmViYXNlaW8uY29tXCIpJiYodGhpcy4kYSs9XCImcj1mXCIpO2IuaG9zdCE9PWIuTWEmJih0aGlzLiRhPXRoaXMuJGErXCImbnM9XCIrYi50Yik7YyYmKHRoaXMuJGE9dGhpcy4kYStcIiZzPVwiK2MpfXZhciBhZTtcbiRkLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKGEsYil7dGhpcy5mYj1iO3RoaXMuaGc9YTt0aGlzLmYoXCJXZWJzb2NrZXQgY29ubmVjdGluZyB0byBcIit0aGlzLiRhKTt0aGlzLnhjPSExO3phLnNldChcInByZXZpb3VzX3dlYnNvY2tldF9mYWlsdXJlXCIsITApO3RyeXt0aGlzLnRhPW5ldyBaZCh0aGlzLiRhKX1jYXRjaChjKXt0aGlzLmYoXCJFcnJvciBpbnN0YW50aWF0aW5nIFdlYlNvY2tldC5cIik7dmFyIGQ9Yy5tZXNzYWdlfHxjLmRhdGE7ZCYmdGhpcy5mKGQpO3RoaXMuZWIoKTtyZXR1cm59dmFyIGU9dGhpczt0aGlzLnRhLm9ub3Blbj1mdW5jdGlvbigpe2UuZihcIldlYnNvY2tldCBjb25uZWN0ZWQuXCIpO2UueGM9ITB9O3RoaXMudGEub25jbG9zZT1mdW5jdGlvbigpe2UuZihcIldlYnNvY2tldCBjb25uZWN0aW9uIHdhcyBkaXNjb25uZWN0ZWQuXCIpO2UudGE9bnVsbDtlLmViKCl9O3RoaXMudGEub25tZXNzYWdlPWZ1bmN0aW9uKGEpe2lmKG51bGwhPT1lLnRhKWlmKGE9YS5kYXRhLGUuaWIrPVxuYS5sZW5ndGgsU2QoZS5SYSxcImJ5dGVzX3JlY2VpdmVkXCIsYS5sZW5ndGgpLGJlKGUpLG51bGwhPT1lLmZyYW1lcyljZShlLGEpO2Vsc2V7YTp7eShudWxsPT09ZS5mcmFtZXMsXCJXZSBhbHJlYWR5IGhhdmUgYSBmcmFtZSBidWZmZXJcIik7aWYoNj49YS5sZW5ndGgpe3ZhciBiPU51bWJlcihhKTtpZighaXNOYU4oYikpe2UuVGU9YjtlLmZyYW1lcz1bXTthPW51bGw7YnJlYWsgYX19ZS5UZT0xO2UuZnJhbWVzPVtdfW51bGwhPT1hJiZjZShlLGEpfX07dGhpcy50YS5vbmVycm9yPWZ1bmN0aW9uKGEpe2UuZihcIldlYlNvY2tldCBlcnJvci4gIENsb3NpbmcgY29ubmVjdGlvbi5cIik7KGE9YS5tZXNzYWdlfHxhLmRhdGEpJiZlLmYoYSk7ZS5lYigpfX07JGQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7fTtcbiRkLmlzQXZhaWxhYmxlPWZ1bmN0aW9uKCl7dmFyIGE9ITE7aWYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBuYXZpZ2F0b3ImJm5hdmlnYXRvci51c2VyQWdlbnQpe3ZhciBiPW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQgKFswLTldezAsfVxcLlswLTldezAsfSkvKTtiJiYxPGIubGVuZ3RoJiY0LjQ+cGFyc2VGbG9hdChiWzFdKSYmKGE9ITApfXJldHVybiFhJiZudWxsIT09WmQmJiFhZX07JGQucmVzcG9uc2VzUmVxdWlyZWRUb0JlSGVhbHRoeT0yOyRkLmhlYWx0aHlUaW1lb3V0PTNFNDtoPSRkLnByb3RvdHlwZTtoLnNkPWZ1bmN0aW9uKCl7emEucmVtb3ZlKFwicHJldmlvdXNfd2Vic29ja2V0X2ZhaWx1cmVcIil9O2Z1bmN0aW9uIGNlKGEsYil7YS5mcmFtZXMucHVzaChiKTtpZihhLmZyYW1lcy5sZW5ndGg9PWEuVGUpe3ZhciBjPWEuZnJhbWVzLmpvaW4oXCJcIik7YS5mcmFtZXM9bnVsbDtjPXRhKGMpO2EuaGcoYyl9fVxuaC5zZW5kPWZ1bmN0aW9uKGEpe2JlKHRoaXMpO2E9cihhKTt0aGlzLmpiKz1hLmxlbmd0aDtTZCh0aGlzLlJhLFwiYnl0ZXNfc2VudFwiLGEubGVuZ3RoKTthPXliKGEsMTYzODQpOzE8YS5sZW5ndGgmJnRoaXMudGEuc2VuZChTdHJpbmcoYS5sZW5ndGgpKTtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKyl0aGlzLnRhLnNlbmQoYVtiXSl9O2guVWM9ZnVuY3Rpb24oKXt0aGlzLnFiPSEwO3RoaXMuQ2MmJihjbGVhckludGVydmFsKHRoaXMuQ2MpLHRoaXMuQ2M9bnVsbCk7dGhpcy50YSYmKHRoaXMudGEuY2xvc2UoKSx0aGlzLnRhPW51bGwpfTtoLmViPWZ1bmN0aW9uKCl7dGhpcy5xYnx8KHRoaXMuZihcIldlYlNvY2tldCBpcyBjbG9zaW5nIGl0c2VsZlwiKSx0aGlzLlVjKCksdGhpcy5mYiYmKHRoaXMuZmIodGhpcy54YyksdGhpcy5mYj1udWxsKSl9O2guY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLnFifHwodGhpcy5mKFwiV2ViU29ja2V0IGlzIGJlaW5nIGNsb3NlZFwiKSx0aGlzLlVjKCkpfTtcbmZ1bmN0aW9uIGJlKGEpe2NsZWFySW50ZXJ2YWwoYS5DYyk7YS5DYz1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2EudGEmJmEudGEuc2VuZChcIjBcIik7YmUoYSl9LE1hdGguZmxvb3IoNDVFMykpfTtmdW5jdGlvbiBkZShhKXt0aGlzLiRiPWE7dGhpcy5DZD1bXTt0aGlzLkpiPTA7dGhpcy5nZT0tMTt0aGlzLndiPW51bGx9ZnVuY3Rpb24gZWUoYSxiLGMpe2EuZ2U9YjthLndiPWM7YS5nZTxhLkpiJiYoYS53YigpLGEud2I9bnVsbCl9ZnVuY3Rpb24gZmUoYSxiLGMpe2ZvcihhLkNkW2JdPWM7YS5DZFthLkpiXTspe3ZhciBkPWEuQ2RbYS5KYl07ZGVsZXRlIGEuQ2RbYS5KYl07Zm9yKHZhciBlPTA7ZTxkLmxlbmd0aDsrK2UpaWYoZFtlXSl7dmFyIGY9YTtDYihmdW5jdGlvbigpe2YuJGIoZFtlXSl9KX1pZihhLkpiPT09YS5nZSl7YS53YiYmKGNsZWFyVGltZW91dChhLndiKSxhLndiKCksYS53Yj1udWxsKTticmVha31hLkpiKyt9fTtmdW5jdGlvbiBnZSgpe3RoaXMuc2V0PXt9fWg9Z2UucHJvdG90eXBlO2guYWRkPWZ1bmN0aW9uKGEsYil7dGhpcy5zZXRbYV09bnVsbCE9PWI/YjohMH07aC5jb250YWlucz1mdW5jdGlvbihhKXtyZXR1cm4gcyh0aGlzLnNldCxhKX07aC5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY29udGFpbnMoYSk/dGhpcy5zZXRbYV06dm9pZCAwfTtoLnJlbW92ZT1mdW5jdGlvbihhKXtkZWxldGUgdGhpcy5zZXRbYV19O2guY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLnNldD17fX07aC5lPWZ1bmN0aW9uKCl7cmV0dXJuIE5kKHRoaXMuc2V0KX07aC5jb3VudD1mdW5jdGlvbigpe3JldHVybiBKYih0aGlzLnNldCl9O2Z1bmN0aW9uIGhlKGEsYil7QShhLnNldCxmdW5jdGlvbihhLGQpe2IoZCxhKX0pfTtmdW5jdGlvbiBpZShhLGIsYyl7dGhpcy5pZT1hO3RoaXMuZj1vYihhKTt0aGlzLmliPXRoaXMuamI9MDt0aGlzLlJhPVhkKGIpO3RoaXMuTWQ9Yzt0aGlzLnhjPSExO3RoaXMuWmM9ZnVuY3Rpb24oYSl7Yi5ob3N0IT09Yi5NYSYmKGEubnM9Yi50Yik7dmFyIGM9W10sZjtmb3IoZiBpbiBhKWEuaGFzT3duUHJvcGVydHkoZikmJmMucHVzaChmK1wiPVwiK2FbZl0pO3JldHVybihiLkFiP1wiaHR0cHM6Ly9cIjpcImh0dHA6Ly9cIikrYi5NYStcIi8ubHA/XCIrYy5qb2luKFwiJlwiKX19dmFyIGplLGtlO1xuaWUucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24oYSxiKXt0aGlzLlplPTA7dGhpcy5nYT1iO3RoaXMubWY9bmV3IGRlKGEpO3RoaXMucWI9ITE7dmFyIGM9dGhpczt0aGlzLmxiPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLmYoXCJUaW1lZCBvdXQgdHJ5aW5nIHRvIGNvbm5lY3QuXCIpO2MuZWIoKTtjLmxiPW51bGx9LE1hdGguZmxvb3IoM0U0KSk7dGIoZnVuY3Rpb24oKXtpZighYy5xYil7Yy5QYT1uZXcgbGUoZnVuY3Rpb24oYSxiLGQsayxsKXttZShjLGFyZ3VtZW50cyk7aWYoYy5QYSlpZihjLmxiJiYoY2xlYXJUaW1lb3V0KGMubGIpLGMubGI9bnVsbCksYy54Yz0hMCxcInN0YXJ0XCI9PWEpYy5pZD1iLGMucmY9ZDtlbHNlIGlmKFwiY2xvc2VcIj09PWEpYj8oYy5QYS5LZD0hMSxlZShjLm1mLGIsZnVuY3Rpb24oKXtjLmViKCl9KSk6Yy5lYigpO2Vsc2UgdGhyb3cgRXJyb3IoXCJVbnJlY29nbml6ZWQgY29tbWFuZCByZWNlaXZlZDogXCIrYSk7fSxmdW5jdGlvbihhLGIpe21lKGMsYXJndW1lbnRzKTtcbmZlKGMubWYsYSxiKX0sZnVuY3Rpb24oKXtjLmViKCl9LGMuWmMpO3ZhciBhPXtzdGFydDpcInRcIn07YS5zZXI9TWF0aC5mbG9vcigxRTgqTWF0aC5yYW5kb20oKSk7Yy5QYS5XZCYmKGEuY2I9Yy5QYS5XZCk7YS52PVwiNVwiO2MuTWQmJihhLnM9Yy5NZCk7XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBsb2NhdGlvbiYmbG9jYXRpb24uaHJlZiYmLTEhPT1sb2NhdGlvbi5ocmVmLmluZGV4T2YoXCJmaXJlYmFzZWlvLmNvbVwiKSYmKGEucj1cImZcIik7YT1jLlpjKGEpO2MuZihcIkNvbm5lY3RpbmcgdmlhIGxvbmctcG9sbCB0byBcIithKTtuZShjLlBhLGEsZnVuY3Rpb24oKXt9KX19KX07XG5pZS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLlBhLGI9dGhpcy5yZjthLmNnPXRoaXMuaWQ7YS5kZz1iO2ZvcihhLmFlPSEwO29lKGEpOyk7YT10aGlzLmlkO2I9dGhpcy5yZjt0aGlzLlliPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7dmFyIGM9e2RmcmFtZTpcInRcIn07Yy5pZD1hO2MucHc9Yjt0aGlzLlliLnNyYz10aGlzLlpjKGMpO3RoaXMuWWIuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuWWIpfTtpZS5pc0F2YWlsYWJsZT1mdW5jdGlvbigpe3JldHVybiFrZSYmIShcIm9iamVjdFwiPT09dHlwZW9mIHdpbmRvdyYmd2luZG93LmNocm9tZSYmd2luZG93LmNocm9tZS5leHRlbnNpb24mJiEvXmNocm9tZS8udGVzdCh3aW5kb3cubG9jYXRpb24uaHJlZikpJiYhKFwib2JqZWN0XCI9PT10eXBlb2YgV2luZG93cyYmXCJvYmplY3RcIj09PXR5cGVvZiBXaW5kb3dzLkVnKSYmKGplfHwhMCl9O2g9aWUucHJvdG90eXBlO1xuaC5zZD1mdW5jdGlvbigpe307aC5VYz1mdW5jdGlvbigpe3RoaXMucWI9ITA7dGhpcy5QYSYmKHRoaXMuUGEuY2xvc2UoKSx0aGlzLlBhPW51bGwpO3RoaXMuWWImJihkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuWWIpLHRoaXMuWWI9bnVsbCk7dGhpcy5sYiYmKGNsZWFyVGltZW91dCh0aGlzLmxiKSx0aGlzLmxiPW51bGwpfTtoLmViPWZ1bmN0aW9uKCl7dGhpcy5xYnx8KHRoaXMuZihcIkxvbmdwb2xsIGlzIGNsb3NpbmcgaXRzZWxmXCIpLHRoaXMuVWMoKSx0aGlzLmdhJiYodGhpcy5nYSh0aGlzLnhjKSx0aGlzLmdhPW51bGwpKX07aC5jbG9zZT1mdW5jdGlvbigpe3RoaXMucWJ8fCh0aGlzLmYoXCJMb25ncG9sbCBpcyBiZWluZyBjbG9zZWQuXCIpLHRoaXMuVWMoKSl9O1xuaC5zZW5kPWZ1bmN0aW9uKGEpe2E9cihhKTt0aGlzLmpiKz1hLmxlbmd0aDtTZCh0aGlzLlJhLFwiYnl0ZXNfc2VudFwiLGEubGVuZ3RoKTthPWpiKGEpO2E9Y2IoYSwhMCk7YT15YihhLDE4NDApO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgYz10aGlzLlBhO2MuUWMucHVzaCh7dGc6dGhpcy5aZSxCZzphLmxlbmd0aCxhZjphW2JdfSk7Yy5hZSYmb2UoYyk7dGhpcy5aZSsrfX07ZnVuY3Rpb24gbWUoYSxiKXt2YXIgYz1yKGIpLmxlbmd0aDthLmliKz1jO1NkKGEuUmEsXCJieXRlc19yZWNlaXZlZFwiLGMpfVxuZnVuY3Rpb24gbGUoYSxiLGMsZCl7dGhpcy5aYz1kO3RoaXMuZmI9Yzt0aGlzLkllPW5ldyBnZTt0aGlzLlFjPVtdO3RoaXMua2U9TWF0aC5mbG9vcigxRTgqTWF0aC5yYW5kb20oKSk7dGhpcy5LZD0hMDt0aGlzLldkPWViKCk7d2luZG93W1wicExQQ29tbWFuZFwiK3RoaXMuV2RdPWE7d2luZG93W1wicFJUTFBDQlwiK3RoaXMuV2RdPWI7YT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO2Euc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtpZihkb2N1bWVudC5ib2R5KXtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpO3RyeXthLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnR8fGhiKFwiTm8gSUUgZG9tYWluIHNldHRpbmcgcmVxdWlyZWRcIil9Y2F0Y2goZSl7YS5zcmM9XCJqYXZhc2NyaXB0OnZvaWQoKGZ1bmN0aW9uKCl7ZG9jdW1lbnQub3BlbigpO2RvY3VtZW50LmRvbWFpbj0nXCIrZG9jdW1lbnQuZG9tYWluK1wiJztkb2N1bWVudC5jbG9zZSgpO30pKCkpXCJ9fWVsc2UgdGhyb3dcIkRvY3VtZW50IGJvZHkgaGFzIG5vdCBpbml0aWFsaXplZC4gV2FpdCB0byBpbml0aWFsaXplIEZpcmViYXNlIHVudGlsIGFmdGVyIHRoZSBkb2N1bWVudCBpcyByZWFkeS5cIjtcbmEuY29udGVudERvY3VtZW50P2EuYWI9YS5jb250ZW50RG9jdW1lbnQ6YS5jb250ZW50V2luZG93P2EuYWI9YS5jb250ZW50V2luZG93LmRvY3VtZW50OmEuZG9jdW1lbnQmJihhLmFiPWEuZG9jdW1lbnQpO3RoaXMuQmE9YTthPVwiXCI7dGhpcy5CYS5zcmMmJlwiamF2YXNjcmlwdDpcIj09PXRoaXMuQmEuc3JjLnN1YnN0cigwLDExKSYmKGE9JzxzY3JpcHQ+ZG9jdW1lbnQuZG9tYWluPVwiJytkb2N1bWVudC5kb21haW4rJ1wiO1xceDNjL3NjcmlwdD4nKTthPVwiPGh0bWw+PGJvZHk+XCIrYStcIjwvYm9keT48L2h0bWw+XCI7dHJ5e3RoaXMuQmEuYWIub3BlbigpLHRoaXMuQmEuYWIud3JpdGUoYSksdGhpcy5CYS5hYi5jbG9zZSgpfWNhdGNoKGYpe2hiKFwiZnJhbWUgd3JpdGluZyBleGNlcHRpb25cIiksZi5zdGFjayYmaGIoZi5zdGFjayksaGIoZil9fVxubGUucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5hZT0hMTtpZih0aGlzLkJhKXt0aGlzLkJhLmFiLmJvZHkuaW5uZXJIVE1MPVwiXCI7dmFyIGE9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bnVsbCE9PWEuQmEmJihkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEuQmEpLGEuQmE9bnVsbCl9LE1hdGguZmxvb3IoMCkpfXZhciBiPXRoaXMuZmI7YiYmKHRoaXMuZmI9bnVsbCxiKCkpfTtcbmZ1bmN0aW9uIG9lKGEpe2lmKGEuYWUmJmEuS2QmJmEuSWUuY291bnQoKTwoMDxhLlFjLmxlbmd0aD8yOjEpKXthLmtlKys7dmFyIGI9e307Yi5pZD1hLmNnO2IucHc9YS5kZztiLnNlcj1hLmtlO2Zvcih2YXIgYj1hLlpjKGIpLGM9XCJcIixkPTA7MDxhLlFjLmxlbmd0aDspaWYoMTg3MD49YS5RY1swXS5hZi5sZW5ndGgrMzArYy5sZW5ndGgpe3ZhciBlPWEuUWMuc2hpZnQoKSxjPWMrXCImc2VnXCIrZCtcIj1cIitlLnRnK1wiJnRzXCIrZCtcIj1cIitlLkJnK1wiJmRcIitkK1wiPVwiK2UuYWY7ZCsrfWVsc2UgYnJlYWs7cGUoYSxiK2MsYS5rZSk7cmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gcGUoYSxiLGMpe2Z1bmN0aW9uIGQoKXthLkllLnJlbW92ZShjKTtvZShhKX1hLkllLmFkZChjKTt2YXIgZT1zZXRUaW1lb3V0KGQsTWF0aC5mbG9vcigyNUUzKSk7bmUoYSxiLGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGUpO2QoKX0pfVxuZnVuY3Rpb24gbmUoYSxiLGMpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0cnl7aWYoYS5LZCl7dmFyIGQ9YS5CYS5hYi5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO2QudHlwZT1cInRleHQvamF2YXNjcmlwdFwiO2QuYXN5bmM9ITA7ZC5zcmM9YjtkLm9ubG9hZD1kLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe3ZhciBhPWQucmVhZHlTdGF0ZTthJiZcImxvYWRlZFwiIT09YSYmXCJjb21wbGV0ZVwiIT09YXx8KGQub25sb2FkPWQub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsZC5wYXJlbnROb2RlJiZkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZCksYygpKX07ZC5vbmVycm9yPWZ1bmN0aW9uKCl7aGIoXCJMb25nLXBvbGwgc2NyaXB0IGZhaWxlZCB0byBsb2FkOiBcIitiKTthLktkPSExO2EuY2xvc2UoKX07YS5CYS5hYi5ib2R5LmFwcGVuZENoaWxkKGQpfX1jYXRjaChlKXt9fSxNYXRoLmZsb29yKDEpKX07ZnVuY3Rpb24gcWUoYSl7cmUodGhpcyxhKX12YXIgc2U9W2llLCRkXTtmdW5jdGlvbiByZShhLGIpe3ZhciBjPSRkJiYkZC5pc0F2YWlsYWJsZSgpLGQ9YyYmISh6YS5sZnx8ITA9PT16YS5nZXQoXCJwcmV2aW91c193ZWJzb2NrZXRfZmFpbHVyZVwiKSk7Yi5EZyYmKGN8fHooXCJ3c3M6Ly8gVVJMIHVzZWQsIGJ1dCBicm93c2VyIGlzbid0IGtub3duIHRvIHN1cHBvcnQgd2Vic29ja2V0cy4gIFRyeWluZyBhbnl3YXkuXCIpLGQ9ITApO2lmKGQpYS5YYz1bJGRdO2Vsc2V7dmFyIGU9YS5YYz1bXTt6YihzZSxmdW5jdGlvbihhLGIpe2ImJmIuaXNBdmFpbGFibGUoKSYmZS5wdXNoKGIpfSl9fWZ1bmN0aW9uIHRlKGEpe2lmKDA8YS5YYy5sZW5ndGgpcmV0dXJuIGEuWGNbMF07dGhyb3cgRXJyb3IoXCJObyB0cmFuc3BvcnRzIGF2YWlsYWJsZVwiKTt9O2Z1bmN0aW9uIHVlKGEsYixjLGQsZSxmKXt0aGlzLmlkPWE7dGhpcy5mPW9iKFwiYzpcIit0aGlzLmlkK1wiOlwiKTt0aGlzLiRiPWM7dGhpcy5LYz1kO3RoaXMuZ2E9ZTt0aGlzLkdlPWY7dGhpcy5PPWI7dGhpcy5CZD1bXTt0aGlzLlhlPTA7dGhpcy5BZj1uZXcgcWUoYik7dGhpcy5RYT0wO3RoaXMuZihcIkNvbm5lY3Rpb24gY3JlYXRlZFwiKTt2ZSh0aGlzKX1cbmZ1bmN0aW9uIHZlKGEpe3ZhciBiPXRlKGEuQWYpO2EuSj1uZXcgYihcImM6XCIrYS5pZCtcIjpcIithLlhlKyssYS5PKTthLktlPWIucmVzcG9uc2VzUmVxdWlyZWRUb0JlSGVhbHRoeXx8MDt2YXIgYz13ZShhLGEuSiksZD14ZShhLGEuSik7YS5ZYz1hLko7YS5UYz1hLko7YS5CPW51bGw7YS5yYj0hMTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5KJiZhLkoub3BlbihjLGQpfSxNYXRoLmZsb29yKDApKTtiPWIuaGVhbHRoeVRpbWVvdXR8fDA7MDxiJiYoYS5uZD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5uZD1udWxsO2EucmJ8fChhLkomJjEwMjQwMDxhLkouaWI/KGEuZihcIkNvbm5lY3Rpb24gZXhjZWVkZWQgaGVhbHRoeSB0aW1lb3V0IGJ1dCBoYXMgcmVjZWl2ZWQgXCIrYS5KLmliK1wiIGJ5dGVzLiAgTWFya2luZyBjb25uZWN0aW9uIGhlYWx0aHkuXCIpLGEucmI9ITAsYS5KLnNkKCkpOmEuSiYmMTAyNDA8YS5KLmpiP2EuZihcIkNvbm5lY3Rpb24gZXhjZWVkZWQgaGVhbHRoeSB0aW1lb3V0IGJ1dCBoYXMgc2VudCBcIitcbmEuSi5qYitcIiBieXRlcy4gIExlYXZpbmcgY29ubmVjdGlvbiBhbGl2ZS5cIik6KGEuZihcIkNsb3NpbmcgdW5oZWFsdGh5IGNvbm5lY3Rpb24gYWZ0ZXIgdGltZW91dC5cIiksYS5jbG9zZSgpKSl9LE1hdGguZmxvb3IoYikpKX1mdW5jdGlvbiB4ZShhLGIpe3JldHVybiBmdW5jdGlvbihjKXtiPT09YS5KPyhhLko9bnVsbCxjfHwwIT09YS5RYT8xPT09YS5RYSYmYS5mKFwiUmVhbHRpbWUgY29ubmVjdGlvbiBsb3N0LlwiKTooYS5mKFwiUmVhbHRpbWUgY29ubmVjdGlvbiBmYWlsZWQuXCIpLFwicy1cIj09PWEuTy5NYS5zdWJzdHIoMCwyKSYmKHphLnJlbW92ZShcImhvc3Q6XCIrYS5PLmhvc3QpLGEuTy5NYT1hLk8uaG9zdCkpLGEuY2xvc2UoKSk6Yj09PWEuQj8oYS5mKFwiU2Vjb25kYXJ5IGNvbm5lY3Rpb24gbG9zdC5cIiksYz1hLkIsYS5CPW51bGwsYS5ZYyE9PWMmJmEuVGMhPT1jfHxhLmNsb3NlKCkpOmEuZihcImNsb3NpbmcgYW4gb2xkIGNvbm5lY3Rpb25cIil9fVxuZnVuY3Rpb24gd2UoYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyl7aWYoMiE9YS5RYSlpZihiPT09YS5UYyl7dmFyIGQ9d2IoXCJ0XCIsYyk7Yz13YihcImRcIixjKTtpZihcImNcIj09ZCl7aWYoZD13YihcInRcIixjKSxcImRcImluIGMpaWYoYz1jLmQsXCJoXCI9PT1kKXt2YXIgZD1jLnRzLGU9Yy52LGY9Yy5oO2EuTWQ9Yy5zO0JhKGEuTyxmKTswPT1hLlFhJiYoYS5KLnN0YXJ0KCkseWUoYSxhLkosZCksXCI1XCIhPT1lJiZ6KFwiUHJvdG9jb2wgdmVyc2lvbiBtaXNtYXRjaCBkZXRlY3RlZFwiKSxjPWEuQWYsKGM9MTxjLlhjLmxlbmd0aD9jLlhjWzFdOm51bGwpJiZ6ZShhLGMpKX1lbHNlIGlmKFwiblwiPT09ZCl7YS5mKFwicmVjdmQgZW5kIHRyYW5zbWlzc2lvbiBvbiBwcmltYXJ5XCIpO2EuVGM9YS5CO2ZvcihjPTA7YzxhLkJkLmxlbmd0aDsrK2MpYS54ZChhLkJkW2NdKTthLkJkPVtdO0FlKGEpfWVsc2VcInNcIj09PWQ/KGEuZihcIkNvbm5lY3Rpb24gc2h1dGRvd24gY29tbWFuZCByZWNlaXZlZC4gU2h1dHRpbmcgZG93bi4uLlwiKSxcbmEuR2UmJihhLkdlKGMpLGEuR2U9bnVsbCksYS5nYT1udWxsLGEuY2xvc2UoKSk6XCJyXCI9PT1kPyhhLmYoXCJSZXNldCBwYWNrZXQgcmVjZWl2ZWQuICBOZXcgaG9zdDogXCIrYyksQmEoYS5PLGMpLDE9PT1hLlFhP2EuY2xvc2UoKTooQmUoYSksdmUoYSkpKTpcImVcIj09PWQ/cGIoXCJTZXJ2ZXIgRXJyb3I6IFwiK2MpOlwib1wiPT09ZD8oYS5mKFwiZ290IHBvbmcgb24gcHJpbWFyeS5cIiksQ2UoYSksRGUoYSkpOnBiKFwiVW5rbm93biBjb250cm9sIHBhY2tldCBjb21tYW5kOiBcIitkKX1lbHNlXCJkXCI9PWQmJmEueGQoYyl9ZWxzZSBpZihiPT09YS5CKWlmKGQ9d2IoXCJ0XCIsYyksYz13YihcImRcIixjKSxcImNcIj09ZClcInRcImluIGMmJihjPWMudCxcImFcIj09PWM/RWUoYSk6XCJyXCI9PT1jPyhhLmYoXCJHb3QgYSByZXNldCBvbiBzZWNvbmRhcnksIGNsb3NpbmcgaXRcIiksYS5CLmNsb3NlKCksYS5ZYyE9PWEuQiYmYS5UYyE9PWEuQnx8YS5jbG9zZSgpKTpcIm9cIj09PWMmJihhLmYoXCJnb3QgcG9uZyBvbiBzZWNvbmRhcnkuXCIpLFxuYS55Zi0tLEVlKGEpKSk7ZWxzZSBpZihcImRcIj09ZClhLkJkLnB1c2goYyk7ZWxzZSB0aHJvdyBFcnJvcihcIlVua25vd24gcHJvdG9jb2wgbGF5ZXI6IFwiK2QpO2Vsc2UgYS5mKFwibWVzc2FnZSBvbiBvbGQgY29ubmVjdGlvblwiKX19dWUucHJvdG90eXBlLkNhPWZ1bmN0aW9uKGEpe0ZlKHRoaXMse3Q6XCJkXCIsZDphfSl9O2Z1bmN0aW9uIEFlKGEpe2EuWWM9PT1hLkImJmEuVGM9PT1hLkImJihhLmYoXCJjbGVhbmluZyB1cCBhbmQgcHJvbW90aW5nIGEgY29ubmVjdGlvbjogXCIrYS5CLmllKSxhLko9YS5CLGEuQj1udWxsKX1cbmZ1bmN0aW9uIEVlKGEpezA+PWEueWY/KGEuZihcIlNlY29uZGFyeSBjb25uZWN0aW9uIGlzIGhlYWx0aHkuXCIpLGEucmI9ITAsYS5CLnNkKCksYS5CLnN0YXJ0KCksYS5mKFwic2VuZGluZyBjbGllbnQgYWNrIG9uIHNlY29uZGFyeVwiKSxhLkIuc2VuZCh7dDpcImNcIixkOnt0OlwiYVwiLGQ6e319fSksYS5mKFwiRW5kaW5nIHRyYW5zbWlzc2lvbiBvbiBwcmltYXJ5XCIpLGEuSi5zZW5kKHt0OlwiY1wiLGQ6e3Q6XCJuXCIsZDp7fX19KSxhLlljPWEuQixBZShhKSk6KGEuZihcInNlbmRpbmcgcGluZyBvbiBzZWNvbmRhcnkuXCIpLGEuQi5zZW5kKHt0OlwiY1wiLGQ6e3Q6XCJwXCIsZDp7fX19KSl9dWUucHJvdG90eXBlLnhkPWZ1bmN0aW9uKGEpe0NlKHRoaXMpO3RoaXMuJGIoYSl9O2Z1bmN0aW9uIENlKGEpe2EucmJ8fChhLktlLS0sMD49YS5LZSYmKGEuZihcIlByaW1hcnkgY29ubmVjdGlvbiBpcyBoZWFsdGh5LlwiKSxhLnJiPSEwLGEuSi5zZCgpKSl9XG5mdW5jdGlvbiB6ZShhLGIpe2EuQj1uZXcgYihcImM6XCIrYS5pZCtcIjpcIithLlhlKyssYS5PLGEuTWQpO2EueWY9Yi5yZXNwb25zZXNSZXF1aXJlZFRvQmVIZWFsdGh5fHwwO2EuQi5vcGVuKHdlKGEsYS5CKSx4ZShhLGEuQikpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXthLkImJihhLmYoXCJUaW1lZCBvdXQgdHJ5aW5nIHRvIHVwZ3JhZGUuXCIpLGEuQi5jbG9zZSgpKX0sTWF0aC5mbG9vcig2RTQpKX1mdW5jdGlvbiB5ZShhLGIsYyl7YS5mKFwiUmVhbHRpbWUgY29ubmVjdGlvbiBlc3RhYmxpc2hlZC5cIik7YS5KPWI7YS5RYT0xO2EuS2MmJihhLktjKGMpLGEuS2M9bnVsbCk7MD09PWEuS2U/KGEuZihcIlByaW1hcnkgY29ubmVjdGlvbiBpcyBoZWFsdGh5LlwiKSxhLnJiPSEwKTpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7RGUoYSl9LE1hdGguZmxvb3IoNUUzKSl9XG5mdW5jdGlvbiBEZShhKXthLnJifHwxIT09YS5RYXx8KGEuZihcInNlbmRpbmcgcGluZyBvbiBwcmltYXJ5LlwiKSxGZShhLHt0OlwiY1wiLGQ6e3Q6XCJwXCIsZDp7fX19KSl9ZnVuY3Rpb24gRmUoYSxiKXtpZigxIT09YS5RYSl0aHJvd1wiQ29ubmVjdGlvbiBpcyBub3QgY29ubmVjdGVkXCI7YS5ZYy5zZW5kKGIpfXVlLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpezIhPT10aGlzLlFhJiYodGhpcy5mKFwiQ2xvc2luZyByZWFsdGltZSBjb25uZWN0aW9uLlwiKSx0aGlzLlFhPTIsQmUodGhpcyksdGhpcy5nYSYmKHRoaXMuZ2EoKSx0aGlzLmdhPW51bGwpKX07ZnVuY3Rpb24gQmUoYSl7YS5mKFwiU2h1dHRpbmcgZG93biBhbGwgY29ubmVjdGlvbnNcIik7YS5KJiYoYS5KLmNsb3NlKCksYS5KPW51bGwpO2EuQiYmKGEuQi5jbG9zZSgpLGEuQj1udWxsKTthLm5kJiYoY2xlYXJUaW1lb3V0KGEubmQpLGEubmQ9bnVsbCl9O2Z1bmN0aW9uIEdlKGEpe3ZhciBiPXt9LGM9e30sZD17fSxlPVwiXCI7dHJ5e3ZhciBmPWEuc3BsaXQoXCIuXCIpLGI9dGEoZ2IoZlswXSl8fFwiXCIpLGM9dGEoZ2IoZlsxXSl8fFwiXCIpLGU9ZlsyXSxkPWMuZHx8e307ZGVsZXRlIGMuZH1jYXRjaChnKXt9cmV0dXJue0dnOmIsZmU6YyxkYXRhOmQseGc6ZX19ZnVuY3Rpb24gSGUoYSl7YT1HZShhKS5mZTtyZXR1cm5cIm9iamVjdFwiPT09dHlwZW9mIGEmJmEuaGFzT3duUHJvcGVydHkoXCJpYXRcIik/dChhLFwiaWF0XCIpOm51bGx9ZnVuY3Rpb24gSWUoYSl7YT1HZShhKTt2YXIgYj1hLmZlO3JldHVybiEhYS54ZyYmISFiJiZcIm9iamVjdFwiPT09dHlwZW9mIGImJmIuaGFzT3duUHJvcGVydHkoXCJpYXRcIil9O2Z1bmN0aW9uIEplKGEsYixjLGQpe3RoaXMuaWQ9S2UrKzt0aGlzLmY9b2IoXCJwOlwiK3RoaXMuaWQrXCI6XCIpO3RoaXMuQ2I9ITA7dGhpcy5BYT17fTt0aGlzLmxhPVtdO3RoaXMuTmM9MDt0aGlzLkpjPVtdO3RoaXMuamE9ITE7dGhpcy5XYT0xRTM7dGhpcy50ZD0zRTU7dGhpcy55ZD1iO3RoaXMud2Q9Yzt0aGlzLkhlPWQ7dGhpcy5PPWE7dGhpcy5PZT1udWxsO3RoaXMuU2M9e307dGhpcy5zZz0wO3RoaXMuRGM9dGhpcy53ZT1udWxsO0xlKHRoaXMsMCk7SGQuTmIoKS52YihcInZpc2libGVcIix0aGlzLmtnLHRoaXMpOy0xPT09YS5ob3N0LmluZGV4T2YoXCJmYmxvY2FsXCIpJiZJZC5OYigpLnZiKFwib25saW5lXCIsdGhpcy5pZyx0aGlzKX12YXIgS2U9MCxNZT0wO2g9SmUucHJvdG90eXBlO1xuaC5DYT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Kyt0aGlzLnNnO2E9e3I6ZCxhOmEsYjpifTt0aGlzLmYocihhKSk7eSh0aGlzLmphLFwic2VuZFJlcXVlc3QgY2FsbCB3aGVuIHdlJ3JlIG5vdCBjb25uZWN0ZWQgbm90IGFsbG93ZWQuXCIpO3RoaXMuT2EuQ2EoYSk7YyYmKHRoaXMuU2NbZF09Yyl9O2Z1bmN0aW9uIE5lKGEsYixjLGQsZSl7dmFyIGY9Yi5GYSgpLGc9Yi5wYXRoLnRvU3RyaW5nKCk7YS5mKFwiTGlzdGVuIGNhbGxlZCBmb3IgXCIrZytcIiBcIitmKTthLkFhW2ddPWEuQWFbZ118fHt9O3koIWEuQWFbZ11bZl0sXCJsaXN0ZW4oKSBjYWxsZWQgdHdpY2UgZm9yIHNhbWUgcGF0aC9xdWVyeUlkLlwiKTtiPXtIOmUsbWQ6YyxwZzpJYyhiLm4pLHRhZzpkfTthLkFhW2ddW2ZdPWI7YS5qYSYmT2UoYSxnLGYsYil9XG5mdW5jdGlvbiBPZShhLGIsYyxkKXthLmYoXCJMaXN0ZW4gb24gXCIrYitcIiBmb3IgXCIrYyk7dmFyIGU9e3A6Yn07ZC50YWcmJihlLnE9ZC5wZyxlLnQ9ZC50YWcpO2UuaD1kLm1kKCk7YS5DYShcInFcIixlLGZ1bmN0aW9uKGUpe2lmKChhLkFhW2JdJiZhLkFhW2JdW2NdKT09PWQpe2EuZihcImxpc3RlbiByZXNwb25zZVwiLGUpO3ZhciBnPWUucztcIm9rXCIhPT1nJiZQZShhLGIsYyk7ZT1lLmQ7ZC5IJiZkLkgoZyxlKX19KX1oLlE9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuSWI9e1JmOmEsY2Y6ITEscWM6YixhZDpjfTt0aGlzLmYoXCJBdXRoZW50aWNhdGluZyB1c2luZyBjcmVkZW50aWFsOiBcIithKTtRZSh0aGlzKTsoYj00MD09YS5sZW5ndGgpfHwoYT1HZShhKS5mZSxiPVwib2JqZWN0XCI9PT10eXBlb2YgYSYmITA9PT10KGEsXCJhZG1pblwiKSk7YiYmKHRoaXMuZihcIkFkbWluIGF1dGggY3JlZGVudGlhbCBkZXRlY3RlZC4gIFJlZHVjaW5nIG1heCByZWNvbm5lY3QgdGltZS5cIiksdGhpcy50ZD0zRTQpfTtcbmguVWU9ZnVuY3Rpb24oYSl7ZGVsZXRlIHRoaXMuSWI7dGhpcy5qYSYmdGhpcy5DYShcInVuYXV0aFwiLHt9LGZ1bmN0aW9uKGIpe2EoYi5zLGIuZCl9KX07ZnVuY3Rpb24gUWUoYSl7dmFyIGI9YS5JYjthLmphJiZiJiZhLkNhKFwiYXV0aFwiLHtjcmVkOmIuUmZ9LGZ1bmN0aW9uKGMpe3ZhciBkPWMucztjPWMuZHx8XCJlcnJvclwiO1wib2tcIiE9PWQmJmEuSWI9PT1iJiZkZWxldGUgYS5JYjtiLmNmP1wib2tcIiE9PWQmJmIuYWQmJmIuYWQoZCxjKTooYi5jZj0hMCxiLnFjJiZiLnFjKGQsYykpfSl9ZnVuY3Rpb24gUmUoYSxiLGMsZCl7YS5qYT9TZShhLFwib1wiLGIsYyxkKTphLkpjLnB1c2goe1BjOmIsYWN0aW9uOlwib1wiLGRhdGE6YyxIOmR9KX1mdW5jdGlvbiBUZShhLGIsYyxkKXthLmphP1NlKGEsXCJvbVwiLGIsYyxkKTphLkpjLnB1c2goe1BjOmIsYWN0aW9uOlwib21cIixkYXRhOmMsSDpkfSl9XG5oLkZlPWZ1bmN0aW9uKGEsYil7dGhpcy5qYT9TZSh0aGlzLFwib2NcIixhLG51bGwsYik6dGhpcy5KYy5wdXNoKHtQYzphLGFjdGlvbjpcIm9jXCIsZGF0YTpudWxsLEg6Yn0pfTtmdW5jdGlvbiBTZShhLGIsYyxkLGUpe2M9e3A6YyxkOmR9O2EuZihcIm9uRGlzY29ubmVjdCBcIitiLGMpO2EuQ2EoYixjLGZ1bmN0aW9uKGEpe2UmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlKGEucyxhLmQpfSxNYXRoLmZsb29yKDApKX0pfWgucHV0PWZ1bmN0aW9uKGEsYixjLGQpe1VlKHRoaXMsXCJwXCIsYSxiLGMsZCl9O2Z1bmN0aW9uIFZlKGEsYixjLGQpe1VlKGEsXCJtXCIsYixjLGQsdm9pZCAwKX1mdW5jdGlvbiBVZShhLGIsYyxkLGUsZil7ZD17cDpjLGQ6ZH07bShmKSYmKGQuaD1mKTthLmxhLnB1c2goe2FjdGlvbjpiLHVmOmQsSDplfSk7YS5OYysrO2I9YS5sYS5sZW5ndGgtMTthLmphP1dlKGEsYik6YS5mKFwiQnVmZmVyaW5nIHB1dDogXCIrYyl9XG5mdW5jdGlvbiBXZShhLGIpe3ZhciBjPWEubGFbYl0uYWN0aW9uLGQ9YS5sYVtiXS51ZixlPWEubGFbYl0uSDthLmxhW2JdLnFnPWEuamE7YS5DYShjLGQsZnVuY3Rpb24oZCl7YS5mKGMrXCIgcmVzcG9uc2VcIixkKTtkZWxldGUgYS5sYVtiXTthLk5jLS07MD09PWEuTmMmJihhLmxhPVtdKTtlJiZlKGQucyxkLmQpfSl9XG5oLnhkPWZ1bmN0aW9uKGEpe2lmKFwiclwiaW4gYSl7dGhpcy5mKFwiZnJvbSBzZXJ2ZXI6IFwiK3IoYSkpO3ZhciBiPWEucixjPXRoaXMuU2NbYl07YyYmKGRlbGV0ZSB0aGlzLlNjW2JdLGMoYS5iKSl9ZWxzZXtpZihcImVycm9yXCJpbiBhKXRocm93XCJBIHNlcnZlci1zaWRlIGVycm9yIGhhcyBvY2N1cnJlZDogXCIrYS5lcnJvcjtcImFcImluIGEmJihiPWEuYSxjPWEuYix0aGlzLmYoXCJoYW5kbGVTZXJ2ZXJNZXNzYWdlXCIsYixjKSxcImRcIj09PWI/dGhpcy55ZChjLnAsYy5kLCExLGMudCk6XCJtXCI9PT1iP3RoaXMueWQoYy5wLGMuZCwhMCxjLnQpOlwiY1wiPT09Yj9YZSh0aGlzLGMucCxjLnEpOlwiYWNcIj09PWI/KGE9Yy5zLGI9Yy5kLGM9dGhpcy5JYixkZWxldGUgdGhpcy5JYixjJiZjLmFkJiZjLmFkKGEsYikpOlwic2RcIj09PWI/dGhpcy5PZT90aGlzLk9lKGMpOlwibXNnXCJpbiBjJiZcInVuZGVmaW5lZFwiIT09dHlwZW9mIGNvbnNvbGUmJmNvbnNvbGUubG9nKFwiRklSRUJBU0U6IFwiK2MubXNnLnJlcGxhY2UoXCJcXG5cIixcblwiXFxuRklSRUJBU0U6IFwiKSk6cGIoXCJVbnJlY29nbml6ZWQgYWN0aW9uIHJlY2VpdmVkIGZyb20gc2VydmVyOiBcIityKGIpK1wiXFxuQXJlIHlvdSB1c2luZyB0aGUgbGF0ZXN0IGNsaWVudD9cIikpfX07aC5LYz1mdW5jdGlvbihhKXt0aGlzLmYoXCJjb25uZWN0aW9uIHJlYWR5XCIpO3RoaXMuamE9ITA7dGhpcy5EYz0obmV3IERhdGUpLmdldFRpbWUoKTt0aGlzLkhlKHtzZXJ2ZXJUaW1lT2Zmc2V0OmEtKG5ldyBEYXRlKS5nZXRUaW1lKCl9KTtZZSh0aGlzKTt0aGlzLndkKCEwKX07ZnVuY3Rpb24gTGUoYSxiKXt5KCFhLk9hLFwiU2NoZWR1bGluZyBhIGNvbm5lY3Qgd2hlbiB3ZSdyZSBhbHJlYWR5IGNvbm5lY3RlZC9pbmc/XCIpO2EuS2ImJmNsZWFyVGltZW91dChhLktiKTthLktiPXNldFRpbWVvdXQoZnVuY3Rpb24oKXthLktiPW51bGw7WmUoYSl9LE1hdGguZmxvb3IoYikpfVxuaC5rZz1mdW5jdGlvbihhKXthJiYhdGhpcy5tYyYmdGhpcy5XYT09PXRoaXMudGQmJih0aGlzLmYoXCJXaW5kb3cgYmVjYW1lIHZpc2libGUuICBSZWR1Y2luZyBkZWxheS5cIiksdGhpcy5XYT0xRTMsdGhpcy5PYXx8TGUodGhpcywwKSk7dGhpcy5tYz1hfTtoLmlnPWZ1bmN0aW9uKGEpe2E/KHRoaXMuZihcIkJyb3dzZXIgd2VudCBvbmxpbmUuICBSZWNvbm5lY3RpbmcuXCIpLHRoaXMuV2E9MUUzLHRoaXMuQ2I9ITAsdGhpcy5PYXx8TGUodGhpcywwKSk6KHRoaXMuZihcIkJyb3dzZXIgd2VudCBvZmZsaW5lLiAgS2lsbGluZyBjb25uZWN0aW9uOyBkb24ndCByZWNvbm5lY3QuXCIpLHRoaXMuQ2I9ITEsdGhpcy5PYSYmdGhpcy5PYS5jbG9zZSgpKX07XG5oLm9mPWZ1bmN0aW9uKCl7dGhpcy5mKFwiZGF0YSBjbGllbnQgZGlzY29ubmVjdGVkXCIpO3RoaXMuamE9ITE7dGhpcy5PYT1udWxsO2Zvcih2YXIgYT0wO2E8dGhpcy5sYS5sZW5ndGg7YSsrKXt2YXIgYj10aGlzLmxhW2FdO2ImJlwiaFwiaW4gYi51ZiYmYi5xZyYmKGIuSCYmYi5IKFwiZGlzY29ubmVjdFwiKSxkZWxldGUgdGhpcy5sYVthXSx0aGlzLk5jLS0pfTA9PT10aGlzLk5jJiYodGhpcy5sYT1bXSk7aWYodGhpcy5DYil0aGlzLm1jP3RoaXMuRGMmJigzRTQ8KG5ldyBEYXRlKS5nZXRUaW1lKCktdGhpcy5EYyYmKHRoaXMuV2E9MUUzKSx0aGlzLkRjPW51bGwpOih0aGlzLmYoXCJXaW5kb3cgaXNuJ3QgdmlzaWJsZS4gIERlbGF5aW5nIHJlY29ubmVjdC5cIiksdGhpcy5XYT10aGlzLnRkLHRoaXMud2U9KG5ldyBEYXRlKS5nZXRUaW1lKCkpLGE9TWF0aC5tYXgoMCx0aGlzLldhLSgobmV3IERhdGUpLmdldFRpbWUoKS10aGlzLndlKSksYSo9TWF0aC5yYW5kb20oKSx0aGlzLmYoXCJUcnlpbmcgdG8gcmVjb25uZWN0IGluIFwiK1xuYStcIm1zXCIpLExlKHRoaXMsYSksdGhpcy5XYT1NYXRoLm1pbih0aGlzLnRkLDEuMyp0aGlzLldhKTtlbHNlIGZvcih2YXIgYyBpbiB0aGlzLlNjKWRlbGV0ZSB0aGlzLlNjW2NdO3RoaXMud2QoITEpfTtmdW5jdGlvbiBaZShhKXtpZihhLkNiKXthLmYoXCJNYWtpbmcgYSBjb25uZWN0aW9uIGF0dGVtcHRcIik7YS53ZT0obmV3IERhdGUpLmdldFRpbWUoKTthLkRjPW51bGw7dmFyIGI9cShhLnhkLGEpLGM9cShhLktjLGEpLGQ9cShhLm9mLGEpLGU9YS5pZCtcIjpcIitNZSsrO2EuT2E9bmV3IHVlKGUsYS5PLGIsYyxkLGZ1bmN0aW9uKGIpe3ooYitcIiAoXCIrYS5PLnRvU3RyaW5nKCkrXCIpXCIpO2EuQ2I9ITF9KX19aC5wYj1mdW5jdGlvbigpe3RoaXMuQ2I9ITE7dGhpcy5PYT90aGlzLk9hLmNsb3NlKCk6KHRoaXMuS2ImJihjbGVhclRpbWVvdXQodGhpcy5LYiksdGhpcy5LYj1udWxsKSx0aGlzLmphJiZ0aGlzLm9mKCkpfTtcbmguaGM9ZnVuY3Rpb24oKXt0aGlzLkNiPSEwO3RoaXMuV2E9MUUzO3RoaXMuT2F8fExlKHRoaXMsMCl9O2Z1bmN0aW9uIFhlKGEsYixjKXtjPWM/SmEoYyxmdW5jdGlvbihhKXtyZXR1cm4geGIoYSl9KS5qb2luKFwiJFwiKTpcImRlZmF1bHRcIjsoYT1QZShhLGIsYykpJiZhLkgmJmEuSChcInBlcm1pc3Npb25fZGVuaWVkXCIpfWZ1bmN0aW9uIFBlKGEsYixjKXtiPShuZXcgUyhiKSkudG9TdHJpbmcoKTt2YXIgZD1hLkFhW2JdW2NdO2RlbGV0ZSBhLkFhW2JdW2NdOzA9PT1KYihhLkFhW2JdKSYmZGVsZXRlIGEuQWFbYl07cmV0dXJuIGR9ZnVuY3Rpb24gWWUoYSl7UWUoYSk7QShhLkFhLGZ1bmN0aW9uKGIsZCl7QShiLGZ1bmN0aW9uKGIsYyl7T2UoYSxkLGMsYil9KX0pO2Zvcih2YXIgYj0wO2I8YS5sYS5sZW5ndGg7YisrKWEubGFbYl0mJldlKGEsYik7Zm9yKDthLkpjLmxlbmd0aDspYj1hLkpjLnNoaWZ0KCksU2UoYSxiLmFjdGlvbixiLlBjLGIuZGF0YSxiLkgpfTtmdW5jdGlvbiAkZSgpe3RoaXMubT10aGlzLkQ9bnVsbH0kZS5wcm90b3R5cGUuZGM9ZnVuY3Rpb24oYSxiKXtpZihhLmUoKSl0aGlzLkQ9Yix0aGlzLm09bnVsbDtlbHNlIGlmKG51bGwhPT10aGlzLkQpdGhpcy5EPXRoaXMuRC5DKGEsYik7ZWxzZXtudWxsPT10aGlzLm0mJih0aGlzLm09bmV3IGdlKTt2YXIgYz1JKGEpO3RoaXMubS5jb250YWlucyhjKXx8dGhpcy5tLmFkZChjLG5ldyAkZSk7Yz10aGlzLm0uZ2V0KGMpO2E9VChhKTtjLmRjKGEsYil9fTtcbmZ1bmN0aW9uIGFmKGEsYil7aWYoYi5lKCkpcmV0dXJuIGEuRD1udWxsLGEubT1udWxsLCEwO2lmKG51bGwhPT1hLkQpe2lmKGEuRC5NKCkpcmV0dXJuITE7dmFyIGM9YS5EO2EuRD1udWxsO2MuVShMLGZ1bmN0aW9uKGIsYyl7YS5kYyhuZXcgUyhiKSxjKX0pO3JldHVybiBhZihhLGIpfXJldHVybiBudWxsIT09YS5tPyhjPUkoYiksYj1UKGIpLGEubS5jb250YWlucyhjKSYmYWYoYS5tLmdldChjKSxiKSYmYS5tLnJlbW92ZShjKSxhLm0uZSgpPyhhLm09bnVsbCwhMCk6ITEpOiEwfWZ1bmN0aW9uIGJmKGEsYixjKXtudWxsIT09YS5EP2MoYixhLkQpOmEuVShmdW5jdGlvbihhLGUpe3ZhciBmPW5ldyBTKGIudG9TdHJpbmcoKStcIi9cIithKTtiZihlLGYsYyl9KX0kZS5wcm90b3R5cGUuVT1mdW5jdGlvbihhKXtudWxsIT09dGhpcy5tJiZoZSh0aGlzLm0sZnVuY3Rpb24oYixjKXthKGIsYyl9KX07ZnVuY3Rpb24gY2YoKXt0aGlzLkpkPU19Y2YucHJvdG90eXBlLmo9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuSmQucmEoYSl9O2NmLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLkpkLnRvU3RyaW5nKCl9O2Z1bmN0aW9uIGRmKCl7dGhpcy5uYj1bXX1mdW5jdGlvbiBlZihhLGIpe2Zvcih2YXIgYz1udWxsLGQ9MDtkPGIubGVuZ3RoO2QrKyl7dmFyIGU9YltkXSxmPWUuUWIoKTtudWxsPT09Y3x8Zi5lYShjLlFiKCkpfHwoYS5uYi5wdXNoKGMpLGM9bnVsbCk7bnVsbD09PWMmJihjPW5ldyBmZihmKSk7Yy5hZGQoZSl9YyYmYS5uYi5wdXNoKGMpfWZ1bmN0aW9uIFBjKGEsYixjKXtlZihhLGMpO2dmKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGEuZWEoYil9KX1mdW5jdGlvbiBoZihhLGIsYyl7ZWYoYSxjKTtnZihhLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRhaW5zKGIpfHxiLmNvbnRhaW5zKGEpfSl9XG5mdW5jdGlvbiBnZihhLGIpe2Zvcih2YXIgYz0hMCxkPTA7ZDxhLm5iLmxlbmd0aDtkKyspe3ZhciBlPWEubmJbZF07aWYoZSlpZihlPWUuUWIoKSxiKGUpKXtmb3IodmFyIGU9YS5uYltkXSxmPTA7ZjxlLmtkLmxlbmd0aDtmKyspe3ZhciBnPWUua2RbZl07aWYobnVsbCE9PWcpe2Uua2RbZl09bnVsbDt2YXIgaz1nLkxiKCk7bGImJmhiKFwiZXZlbnQ6IFwiK2cudG9TdHJpbmcoKSk7Q2Ioayl9fWEubmJbZF09bnVsbH1lbHNlIGM9ITF9YyYmKGEubmI9W10pfWZ1bmN0aW9uIGZmKGEpe3RoaXMuRWE9YTt0aGlzLmtkPVtdfWZmLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYSl7dGhpcy5rZC5wdXNoKGEpfTtmZi5wcm90b3R5cGUuUWI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5FYX07dmFyIGpmPVwiYXV0aC5maXJlYmFzZS5jb21cIjtmdW5jdGlvbiBrZihhLGIsYyl7dGhpcy5jZD1hfHx7fTt0aGlzLlVkPWJ8fHt9O3RoaXMuWGE9Y3x8e307dGhpcy5jZC5yZW1lbWJlcnx8KHRoaXMuY2QucmVtZW1iZXI9XCJkZWZhdWx0XCIpfXZhciBsZj1bXCJyZW1lbWJlclwiLFwicmVkaXJlY3RUb1wiXTtmdW5jdGlvbiBtZihhKXt2YXIgYj17fSxjPXt9O3VhKGF8fHt9LGZ1bmN0aW9uKGEsZSl7MDw9R2EobGYsYSk/YlthXT1lOmNbYV09ZX0pO3JldHVybiBuZXcga2YoYix7fSxjKX07dmFyIG5mPXtORVRXT1JLX0VSUk9SOlwiVW5hYmxlIHRvIGNvbnRhY3QgdGhlIEZpcmViYXNlIHNlcnZlci5cIixTRVJWRVJfRVJST1I6XCJBbiB1bmtub3duIHNlcnZlciBlcnJvciBvY2N1cnJlZC5cIixUUkFOU1BPUlRfVU5BVkFJTEFCTEU6XCJUaGVyZSBhcmUgbm8gbG9naW4gdHJhbnNwb3J0cyBhdmFpbGFibGUgZm9yIHRoZSByZXF1ZXN0ZWQgbWV0aG9kLlwiLFJFUVVFU1RfSU5URVJSVVBURUQ6XCJUaGUgYnJvd3NlciByZWRpcmVjdGVkIHRoZSBwYWdlIGJlZm9yZSB0aGUgbG9naW4gcmVxdWVzdCBjb3VsZCBjb21wbGV0ZS5cIixVU0VSX0NBTkNFTExFRDpcIlRoZSB1c2VyIGNhbmNlbGxlZCBhdXRoZW50aWNhdGlvbi5cIn07ZnVuY3Rpb24gWChhKXt2YXIgYj1FcnJvcih0KG5mLGEpLGEpO2IuY29kZT1hO3JldHVybiBifTtmdW5jdGlvbiBvZigpe3ZhciBhPXdpbmRvdy5vcGVuZXIuZnJhbWVzLGI7Zm9yKGI9YS5sZW5ndGgtMTswPD1iO2ItLSl0cnl7aWYoYVtiXS5sb2NhdGlvbi5wcm90b2NvbD09PXdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCYmYVtiXS5sb2NhdGlvbi5ob3N0PT09d2luZG93LmxvY2F0aW9uLmhvc3QmJlwiX193aW5jaGFuX3JlbGF5X2ZyYW1lXCI9PT1hW2JdLm5hbWUpcmV0dXJuIGFbYl19Y2F0Y2goYyl7fXJldHVybiBudWxsfWZ1bmN0aW9uIHBmKGEsYixjKXthLmF0dGFjaEV2ZW50P2EuYXR0YWNoRXZlbnQoXCJvblwiK2IsYyk6YS5hZGRFdmVudExpc3RlbmVyJiZhLmFkZEV2ZW50TGlzdGVuZXIoYixjLCExKX1mdW5jdGlvbiBxZihhLGIsYyl7YS5kZXRhY2hFdmVudD9hLmRldGFjaEV2ZW50KFwib25cIitiLGMpOmEucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYywhMSl9XG5mdW5jdGlvbiByZihhKXsvXmh0dHBzPzpcXC9cXC8vLnRlc3QoYSl8fChhPXdpbmRvdy5sb2NhdGlvbi5ocmVmKTt2YXIgYj0vXihodHRwcz86XFwvXFwvW1xcLV9hLXpBLVpcXC4wLTk6XSspLy5leGVjKGEpO3JldHVybiBiP2JbMV06YX1mdW5jdGlvbiBzZihhKXt2YXIgYj1cIlwiO3RyeXthPWEucmVwbGFjZShcIiNcIixcIlwiKTt2YXIgYz17fSxkPWEucmVwbGFjZSgvXlxcPy8sXCJcIikuc3BsaXQoXCImXCIpO2ZvcihhPTA7YTxkLmxlbmd0aDthKyspaWYoZFthXSl7dmFyIGU9ZFthXS5zcGxpdChcIj1cIik7Y1tlWzBdXT1lWzFdfWMmJnMoYyxcIl9fZmlyZWJhc2VfcmVxdWVzdF9rZXlcIikmJihiPXQoYyxcIl9fZmlyZWJhc2VfcmVxdWVzdF9rZXlcIikpfWNhdGNoKGYpe31yZXR1cm4gYn1cbmZ1bmN0aW9uIHRmKGEpe3ZhciBiPVtdLGM7Zm9yKGMgaW4gYSlpZihzKGEsYykpe3ZhciBkPXQoYSxjKTtpZihlYShkKSlmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyliLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGMpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChkW2VdKSk7ZWxzZSBiLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGMpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudCh0KGEsYykpKX1yZXR1cm4gYj9cIiZcIitiLmpvaW4oXCImXCIpOlwiXCJ9ZnVuY3Rpb24gdWYoKXt2YXIgYT1yYihqZik7cmV0dXJuIGEuc2NoZW1lK1wiOi8vXCIrYS5ob3N0K1wiL3YyXCJ9ZnVuY3Rpb24gdmYoYSl7cmV0dXJuIHVmKCkrXCIvXCIrYStcIi9hdXRoL2NoYW5uZWxcIn07ZnVuY3Rpb24gd2YoKXtyZXR1cm4hISh3aW5kb3cuY29yZG92YXx8d2luZG93LnBob25lZ2FwfHx3aW5kb3cuUGhvbmVHYXApJiYvaW9zfGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZHxibGFja2JlcnJ5fGllbW9iaWxlL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX1mdW5jdGlvbiB4Zigpe3ZhciBhPW5hdmlnYXRvci51c2VyQWdlbnQ7aWYoXCJNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXJcIj09PW5hdmlnYXRvci5hcHBOYW1lKXtpZigoYT1hLm1hdGNoKC9NU0lFIChbMC05XXsxLH1bXFwuMC05XXswLH0pLykpJiYxPGEubGVuZ3RoKXJldHVybiA4PD1wYXJzZUZsb2F0KGFbMV0pfWVsc2UgaWYoLTE8YS5pbmRleE9mKFwiVHJpZGVudFwiKSYmKGE9YS5tYXRjaCgvcnY6KFswLTldezIsMn1bXFwuMC05XXswLH0pLykpJiYxPGEubGVuZ3RoKXJldHVybiA4PD1wYXJzZUZsb2F0KGFbMV0pO3JldHVybiExfTtmdW5jdGlvbiB5ZihhKXthLm1ldGhvZHx8KGEubWV0aG9kPVwiR0VUXCIpO2EuaGVhZGVyc3x8KGEuaGVhZGVycz17fSk7YS5oZWFkZXJzLmNvbnRlbnRfdHlwZXx8KGEuaGVhZGVycy5jb250ZW50X3R5cGU9XCJhcHBsaWNhdGlvbi9qc29uXCIpO2EuaGVhZGVycy5jb250ZW50X3R5cGU9YS5oZWFkZXJzLmNvbnRlbnRfdHlwZS50b0xvd2VyQ2FzZSgpO3RoaXMub3B0aW9ucz1hfVxueWYucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoKXtjJiYoYyhYKFwiUkVRVUVTVF9JTlRFUlJVUFRFRFwiKSksYz1udWxsKX12YXIgZT1uZXcgWE1MSHR0cFJlcXVlc3QsZj10aGlzLm9wdGlvbnMubWV0aG9kLnRvVXBwZXJDYXNlKCksZztwZih3aW5kb3csXCJiZWZvcmV1bmxvYWRcIixkKTtlLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKGMmJjQ9PT1lLnJlYWR5U3RhdGUpe3ZhciBhO2lmKDIwMDw9ZS5zdGF0dXMmJjMwMD5lLnN0YXR1cyl7dHJ5e2E9dGEoZS5yZXNwb25zZVRleHQpfWNhdGNoKGIpe31jKG51bGwsYSl9ZWxzZSA1MDA8PWUuc3RhdHVzJiY2MDA+ZS5zdGF0dXM/YyhYKFwiU0VSVkVSX0VSUk9SXCIpKTpjKFgoXCJORVRXT1JLX0VSUk9SXCIpKTtjPW51bGw7cWYod2luZG93LFwiYmVmb3JldW5sb2FkXCIsZCl9fTtpZihcIkdFVFwiPT09ZilhKz0oL1xcPy8udGVzdChhKT9cIlwiOlwiP1wiKSt0ZihiKSxnPW51bGw7ZWxzZXt2YXIgaz10aGlzLm9wdGlvbnMuaGVhZGVycy5jb250ZW50X3R5cGU7XG5cImFwcGxpY2F0aW9uL2pzb25cIj09PWsmJihnPXIoYikpO1wiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCI9PT1rJiYoZz10ZihiKSl9ZS5vcGVuKGYsYSwhMCk7YT17XCJYLVJlcXVlc3RlZC1XaXRoXCI6XCJYTUxIdHRwUmVxdWVzdFwiLEFjY2VwdDpcImFwcGxpY2F0aW9uL2pzb247dGV4dC9wbGFpblwifTtRZChhLHRoaXMub3B0aW9ucy5oZWFkZXJzKTtmb3IodmFyIGwgaW4gYSllLnNldFJlcXVlc3RIZWFkZXIobCxhW2xdKTtlLnNlbmQoZyl9O3lmLmlzQXZhaWxhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuISF3aW5kb3cuWE1MSHR0cFJlcXVlc3QmJlwic3RyaW5nXCI9PT10eXBlb2YobmV3IFhNTEh0dHBSZXF1ZXN0KS5yZXNwb25zZVR5cGUmJighKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL01TSUUvKXx8bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvVHJpZGVudC8pKXx8eGYoKSl9O3lmLnByb3RvdHlwZS5zYz1mdW5jdGlvbigpe3JldHVyblwianNvblwifTtmdW5jdGlvbiB6ZihhKXt0aGlzLmZjPUZhKCkrRmEoKStGYSgpO3RoaXMucGY9YX1cbnpmLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKCl7YyYmKGMoWChcIlVTRVJfQ0FOQ0VMTEVEXCIpKSxjPW51bGwpfXZhciBlPXRoaXMsZj1yYihqZiksZztiLnJlcXVlc3RJZD10aGlzLmZjO2IucmVkaXJlY3RUbz1mLnNjaGVtZStcIjovL1wiK2YuaG9zdCtcIi9ibGFuay9wYWdlLmh0bWxcIjthKz0vXFw/Ly50ZXN0KGEpP1wiXCI6XCI/XCI7YSs9dGYoYik7KGc9d2luZG93Lm9wZW4oYSxcIl9ibGFua1wiLFwibG9jYXRpb249bm9cIikpJiZoYShnLmFkZEV2ZW50TGlzdGVuZXIpPyhnLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2Fkc3RhcnRcIixmdW5jdGlvbihhKXt2YXIgYjtpZihiPWEmJmEudXJsKWE6e3ZhciBuPWEudXJsO3RyeXt2YXIgdT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTt1LmhyZWY9bjtiPXUuaG9zdD09PWYuaG9zdCYmXCIvYmxhbmsvcGFnZS5odG1sXCI9PT11LnBhdGhuYW1lO2JyZWFrIGF9Y2F0Y2goeCl7fWI9ITF9YiYmKGE9c2YoYS51cmwpLGcucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImV4aXRcIixcbmQpLGcuY2xvc2UoKSxhPW5ldyBrZihudWxsLG51bGwse3JlcXVlc3RJZDplLmZjLHJlcXVlc3RLZXk6YX0pLGUucGYucmVxdWVzdFdpdGhDcmVkZW50aWFsKFwiL2F1dGgvc2Vzc2lvblwiLGEsYyksYz1udWxsKX0pLGcuYWRkRXZlbnRMaXN0ZW5lcihcImV4aXRcIixkKSk6YyhYKFwiVFJBTlNQT1JUX1VOQVZBSUxBQkxFXCIpKX07emYuaXNBdmFpbGFibGU9ZnVuY3Rpb24oKXtyZXR1cm4gd2YoKX07emYucHJvdG90eXBlLnNjPWZ1bmN0aW9uKCl7cmV0dXJuXCJyZWRpcmVjdFwifTtmdW5jdGlvbiBBZihhKXtpZighYS53aW5kb3dfZmVhdHVyZXN8fC0xIT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiRmVubmVjL1wiKXx8LTEhPT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJGaXJlZm94L1wiKSYmLTEhPT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJBbmRyb2lkXCIpKWEud2luZG93X2ZlYXR1cmVzPXZvaWQgMDthLndpbmRvd19uYW1lfHwoYS53aW5kb3dfbmFtZT1cIl9ibGFua1wiKTt0aGlzLm9wdGlvbnM9YX1cbkFmLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe2cmJihkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGcpLGc9dm9pZCAwKTt1JiYodT1jbGVhckludGVydmFsKHUpKTtxZih3aW5kb3csXCJtZXNzYWdlXCIsZSk7cWYod2luZG93LFwidW5sb2FkXCIsZCk7aWYobiYmIWEpdHJ5e24uY2xvc2UoKX1jYXRjaChiKXtrLnBvc3RNZXNzYWdlKFwiZGllXCIsbCl9bj1rPXZvaWQgMH1mdW5jdGlvbiBlKGEpe2lmKGEub3JpZ2luPT09bCl0cnl7dmFyIGI9dGEoYS5kYXRhKTtcInJlYWR5XCI9PT1iLmE/ay5wb3N0TWVzc2FnZSh4LGwpOlwiZXJyb3JcIj09PWIuYT8oZCghMSksYyYmKGMoYi5kKSxjPW51bGwpKTpcInJlc3BvbnNlXCI9PT1iLmEmJihkKGIuZm9yY2VLZWVwV2luZG93T3BlbiksYyYmKGMobnVsbCxiLmQpLGM9bnVsbCkpfWNhdGNoKGUpe319dmFyIGY9eGYoKSxnLGs7aWYoIXRoaXMub3B0aW9ucy5yZWxheV91cmwpcmV0dXJuIGMoRXJyb3IoXCJpbnZhbGlkIGFyZ3VtZW50czogb3JpZ2luIG9mIHVybCBhbmQgcmVsYXlfdXJsIG11c3QgbWF0Y2hcIikpO1xudmFyIGw9cmYoYSk7aWYobCE9PXJmKHRoaXMub3B0aW9ucy5yZWxheV91cmwpKWMmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtjKEVycm9yKFwiaW52YWxpZCBhcmd1bWVudHM6IG9yaWdpbiBvZiB1cmwgYW5kIHJlbGF5X3VybCBtdXN0IG1hdGNoXCIpKX0sMCk7ZWxzZXtmJiYoZz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpLGcuc2V0QXR0cmlidXRlKFwic3JjXCIsdGhpcy5vcHRpb25zLnJlbGF5X3VybCksZy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGcuc2V0QXR0cmlidXRlKFwibmFtZVwiLFwiX193aW5jaGFuX3JlbGF5X2ZyYW1lXCIpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZyksaz1nLmNvbnRlbnRXaW5kb3cpO2ErPSgvXFw/Ly50ZXN0KGEpP1wiXCI6XCI/XCIpK3RmKGIpO3ZhciBuPXdpbmRvdy5vcGVuKGEsdGhpcy5vcHRpb25zLndpbmRvd19uYW1lLHRoaXMub3B0aW9ucy53aW5kb3dfZmVhdHVyZXMpO2t8fChrPW4pO3ZhciB1PXNldEludGVydmFsKGZ1bmN0aW9uKCl7biYmbi5jbG9zZWQmJlxuKGQoITEpLGMmJihjKFgoXCJVU0VSX0NBTkNFTExFRFwiKSksYz1udWxsKSl9LDUwMCkseD1yKHthOlwicmVxdWVzdFwiLGQ6Yn0pO3BmKHdpbmRvdyxcInVubG9hZFwiLGQpO3BmKHdpbmRvdyxcIm1lc3NhZ2VcIixlKX19O1xuQWYuaXNBdmFpbGFibGU9ZnVuY3Rpb24oKXtyZXR1cm5cInBvc3RNZXNzYWdlXCJpbiB3aW5kb3cmJiEvXmZpbGU6XFwvLy50ZXN0KGxvY2F0aW9uLmhyZWYpJiYhKHdmKCl8fG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1dpbmRvd3MgUGhvbmUvKXx8d2luZG93LldpbmRvd3MmJi9ebXMtYXBweDovLnRlc3QobG9jYXRpb24uaHJlZil8fG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goLyhpUGhvbmV8aVBvZHxpUGFkKS4qQXBwbGVXZWJLaXQoPyEuKlNhZmFyaSkvaSl8fG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0NyaU9TLyl8fG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1R3aXR0ZXIgZm9yIGlQaG9uZS8pfHxuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9GQkFOXFwvRkJJT1MvKXx8d2luZG93Lm5hdmlnYXRvci5zdGFuZGFsb25lKSYmIW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1BoYW50b21KUy8pfTtBZi5wcm90b3R5cGUuc2M9ZnVuY3Rpb24oKXtyZXR1cm5cInBvcHVwXCJ9O2Z1bmN0aW9uIEJmKGEpe2EuY2FsbGJhY2tfcGFyYW1ldGVyfHwoYS5jYWxsYmFja19wYXJhbWV0ZXI9XCJjYWxsYmFja1wiKTt0aGlzLm9wdGlvbnM9YTt3aW5kb3cuX19maXJlYmFzZV9hdXRoX2pzb25wPXdpbmRvdy5fX2ZpcmViYXNlX2F1dGhfanNvbnB8fHt9fVxuQmYucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoKXtjJiYoYyhYKFwiUkVRVUVTVF9JTlRFUlJVUFRFRFwiKSksYz1udWxsKX1mdW5jdGlvbiBlKCl7c2V0VGltZW91dChmdW5jdGlvbigpe3dpbmRvdy5fX2ZpcmViYXNlX2F1dGhfanNvbnBbZl09dm9pZCAwO05kKHdpbmRvdy5fX2ZpcmViYXNlX2F1dGhfanNvbnApJiYod2luZG93Ll9fZmlyZWJhc2VfYXV0aF9qc29ucD12b2lkIDApO3RyeXt2YXIgYT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChmKTthJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9Y2F0Y2goYil7fX0sMSk7cWYod2luZG93LFwiYmVmb3JldW5sb2FkXCIsZCl9dmFyIGY9XCJmblwiKyhuZXcgRGF0ZSkuZ2V0VGltZSgpK01hdGguZmxvb3IoOTk5OTkqTWF0aC5yYW5kb20oKSk7Ylt0aGlzLm9wdGlvbnMuY2FsbGJhY2tfcGFyYW1ldGVyXT1cIl9fZmlyZWJhc2VfYXV0aF9qc29ucC5cIitmO2ErPSgvXFw/Ly50ZXN0KGEpP1wiXCI6XCI/XCIpK3RmKGIpO1xucGYod2luZG93LFwiYmVmb3JldW5sb2FkXCIsZCk7d2luZG93Ll9fZmlyZWJhc2VfYXV0aF9qc29ucFtmXT1mdW5jdGlvbihhKXtjJiYoYyhudWxsLGEpLGM9bnVsbCk7ZSgpfTtDZihmLGEsYyl9O1xuZnVuY3Rpb24gQ2YoYSxiLGMpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0cnl7dmFyIGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtkLnR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIjtkLmlkPWE7ZC5hc3luYz0hMDtkLnNyYz1iO2Qub25lcnJvcj1mdW5jdGlvbigpe3ZhciBiPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpO251bGwhPT1iJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYik7YyYmYyhYKFwiTkVUV09SS19FUlJPUlwiKSl9O3ZhciBlPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKTsoZSYmMCE9ZS5sZW5ndGg/ZVswXTpkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmFwcGVuZENoaWxkKGQpfWNhdGNoKGYpe2MmJmMoWChcIk5FVFdPUktfRVJST1JcIikpfX0sMCl9QmYuaXNBdmFpbGFibGU9ZnVuY3Rpb24oKXtyZXR1cm4hd2YoKX07QmYucHJvdG90eXBlLnNjPWZ1bmN0aW9uKCl7cmV0dXJuXCJqc29uXCJ9O2Z1bmN0aW9uIERmKGEsYil7dGhpcy5KZT1bXCJzZXNzaW9uXCIsYS5EZCxhLnRiXS5qb2luKFwiOlwiKTt0aGlzLlJkPWJ9RGYucHJvdG90eXBlLnNldD1mdW5jdGlvbihhLGIpe2lmKCFiKWlmKHRoaXMuUmQubGVuZ3RoKWI9dGhpcy5SZFswXTtlbHNlIHRocm93IEVycm9yKFwiZmIubG9naW4uU2Vzc2lvbk1hbmFnZXIgOiBObyBzdG9yYWdlIG9wdGlvbnMgYXZhaWxhYmxlIVwiKTtiLnNldCh0aGlzLkplLGEpfTtEZi5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7dmFyIGE9SmEodGhpcy5SZCxxKHRoaXMuWmYsdGhpcykpLGE9SWEoYSxmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9PWF9KTtRYShhLGZ1bmN0aW9uKGEsYyl7cmV0dXJuIEhlKGMudG9rZW4pLUhlKGEudG9rZW4pfSk7cmV0dXJuIDA8YS5sZW5ndGg/YS5zaGlmdCgpOm51bGx9O0RmLnByb3RvdHlwZS5aZj1mdW5jdGlvbihhKXt0cnl7dmFyIGI9YS5nZXQodGhpcy5KZSk7aWYoYiYmYi50b2tlbilyZXR1cm4gYn1jYXRjaChjKXt9cmV0dXJuIG51bGx9O1xuRGYucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztIYSh0aGlzLlJkLGZ1bmN0aW9uKGIpe2IucmVtb3ZlKGEuSmUpfSl9O2Z1bmN0aW9uIEVmKGEpe3RoaXMuZmM9RmEoKStGYSgpK0ZhKCk7dGhpcy5wZj1hfUVmLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKGEsYil7di5zZXQoXCJyZWRpcmVjdF9yZXF1ZXN0X2lkXCIsdGhpcy5mYyk7di5zZXQoXCJyZWRpcmVjdF9yZXF1ZXN0X2lkXCIsdGhpcy5mYyk7Yi5yZXF1ZXN0SWQ9dGhpcy5mYztiLnJlZGlyZWN0VG89Yi5yZWRpcmVjdFRvfHx3aW5kb3cubG9jYXRpb24uaHJlZjthKz0oL1xcPy8udGVzdChhKT9cIlwiOlwiP1wiKSt0ZihiKTt3aW5kb3cubG9jYXRpb249YX07RWYuaXNBdmFpbGFibGU9ZnVuY3Rpb24oKXtyZXR1cm4hL15maWxlOlxcLy8udGVzdChsb2NhdGlvbi5ocmVmKSYmIXdmKCl9O0VmLnByb3RvdHlwZS5zYz1mdW5jdGlvbigpe3JldHVyblwicmVkaXJlY3RcIn07ZnVuY3Rpb24gRmYoYSxiLGMsZCl7RmQuY2FsbCh0aGlzLFtcImF1dGhfc3RhdHVzXCJdKTt0aGlzLk89YTt0aGlzLldlPWI7dGhpcy5DZz1jO3RoaXMuRWU9ZDt0aGlzLmljPW5ldyBEZihhLFt6YSx2XSk7dGhpcy5oYj1udWxsO0dmKHRoaXMpfW1hKEZmLEZkKTtoPUZmLnByb3RvdHlwZTtoLm5lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGJ8fG51bGx9O2Z1bmN0aW9uIEdmKGEpe3YuZ2V0KFwicmVkaXJlY3RfcmVxdWVzdF9pZFwiKSYmSGYoYSk7dmFyIGI9YS5pYy5nZXQoKTtiJiZiLnRva2VuPyhJZihhLGIpLGEuV2UoYi50b2tlbixmdW5jdGlvbihjLGQpe0pmKGEsYyxkLCExLGIudG9rZW4sYil9LGZ1bmN0aW9uKGIsZCl7S2YoYSxcInJlc3VtZVNlc3Npb24oKVwiLGIsZCl9KSk6SWYoYSxudWxsKX1cbmZ1bmN0aW9uIExmKGEsYixjLGQsZSxmKXtcImZpcmViYXNlaW8tZGVtby5jb21cIj09PWEuTy5kb21haW4mJnooXCJGaXJlYmFzZSBhdXRoZW50aWNhdGlvbiBpcyBub3Qgc3VwcG9ydGVkIG9uIGRlbW8gRmlyZWJhc2VzICgqLmZpcmViYXNlaW8tZGVtby5jb20pLiBUbyBzZWN1cmUgeW91ciBGaXJlYmFzZSwgY3JlYXRlIGEgcHJvZHVjdGlvbiBGaXJlYmFzZSBhdCBodHRwczovL3d3dy5maXJlYmFzZS5jb20uXCIpO2EuV2UoYixmdW5jdGlvbihmLGspe0pmKGEsZixrLCEwLGIsYyxkfHx7fSxlKX0sZnVuY3Rpb24oYixjKXtLZihhLFwiYXV0aCgpXCIsYixjLGYpfSl9ZnVuY3Rpb24gTWYoYSxiKXthLmljLmNsZWFyKCk7SWYoYSxudWxsKTthLkNnKGZ1bmN0aW9uKGEsZCl7aWYoXCJva1wiPT09YSlCKGIsbnVsbCk7ZWxzZXt2YXIgZT0oYXx8XCJlcnJvclwiKS50b1VwcGVyQ2FzZSgpLGY9ZTtkJiYoZis9XCI6IFwiK2QpO2Y9RXJyb3IoZik7Zi5jb2RlPWU7QihiLGYpfX0pfVxuZnVuY3Rpb24gSmYoYSxiLGMsZCxlLGYsZyxrKXtcIm9rXCI9PT1iPyhkJiYoYj1jLmF1dGgsZi5hdXRoPWIsZi5leHBpcmVzPWMuZXhwaXJlcyxmLnRva2VuPUllKGUpP2U6XCJcIixjPW51bGwsYiYmcyhiLFwidWlkXCIpP2M9dChiLFwidWlkXCIpOnMoZixcInVpZFwiKSYmKGM9dChmLFwidWlkXCIpKSxmLnVpZD1jLGM9XCJjdXN0b21cIixiJiZzKGIsXCJwcm92aWRlclwiKT9jPXQoYixcInByb3ZpZGVyXCIpOnMoZixcInByb3ZpZGVyXCIpJiYoYz10KGYsXCJwcm92aWRlclwiKSksZi5wcm92aWRlcj1jLGEuaWMuY2xlYXIoKSxJZShlKSYmKGc9Z3x8e30sYz16YSxcInNlc3Npb25Pbmx5XCI9PT1nLnJlbWVtYmVyJiYoYz12KSxcIm5vbmVcIiE9PWcucmVtZW1iZXImJmEuaWMuc2V0KGYsYykpLElmKGEsZikpLEIoayxudWxsLGYpKTooYS5pYy5jbGVhcigpLElmKGEsbnVsbCksZj1hPShifHxcImVycm9yXCIpLnRvVXBwZXJDYXNlKCksYyYmKGYrPVwiOiBcIitjKSxmPUVycm9yKGYpLGYuY29kZT1hLEIoayxmKSl9XG5mdW5jdGlvbiBLZihhLGIsYyxkLGUpe3ooYitcIiB3YXMgY2FuY2VsZWQ6IFwiK2QpO2EuaWMuY2xlYXIoKTtJZihhLG51bGwpO2E9RXJyb3IoZCk7YS5jb2RlPWMudG9VcHBlckNhc2UoKTtCKGUsYSl9ZnVuY3Rpb24gTmYoYSxiLGMsZCxlKXtPZihhKTtjPW5ldyBrZihkfHx7fSx7fSxjfHx7fSk7UGYoYSxbeWYsQmZdLFwiL2F1dGgvXCIrYixjLGUpfVxuZnVuY3Rpb24gUWYoYSxiLGMsZCl7T2YoYSk7dmFyIGU9W0FmLHpmXTtjPW1mKGMpO1wiYW5vbnltb3VzXCI9PT1ifHxcInBhc3N3b3JkXCI9PT1iP3NldFRpbWVvdXQoZnVuY3Rpb24oKXtCKGQsWChcIlRSQU5TUE9SVF9VTkFWQUlMQUJMRVwiKSl9LDApOihjLlVkLndpbmRvd19mZWF0dXJlcz1cIm1lbnViYXI9eWVzLG1vZGFsPXllcyxhbHdheXNSYWlzZWQ9eWVzbG9jYXRpb249eWVzLHJlc2l6YWJsZT15ZXMsc2Nyb2xsYmFycz15ZXMsc3RhdHVzPXllcyxoZWlnaHQ9NjI1LHdpZHRoPTYyNSx0b3A9XCIrKFwib2JqZWN0XCI9PT10eXBlb2Ygc2NyZWVuPy41KihzY3JlZW4uaGVpZ2h0LTYyNSk6MCkrXCIsbGVmdD1cIisoXCJvYmplY3RcIj09PXR5cGVvZiBzY3JlZW4/LjUqKHNjcmVlbi53aWR0aC02MjUpOjApLGMuVWQucmVsYXlfdXJsPXZmKGEuTy50YiksYy5VZC5yZXF1ZXN0V2l0aENyZWRlbnRpYWw9cShhLmdjLGEpLFBmKGEsZSxcIi9hdXRoL1wiK2IsYyxkKSl9XG5mdW5jdGlvbiBIZihhKXt2YXIgYj12LmdldChcInJlZGlyZWN0X3JlcXVlc3RfaWRcIik7aWYoYil7dmFyIGM9di5nZXQoXCJyZWRpcmVjdF9jbGllbnRfb3B0aW9uc1wiKTt2LnJlbW92ZShcInJlZGlyZWN0X3JlcXVlc3RfaWRcIik7di5yZW1vdmUoXCJyZWRpcmVjdF9jbGllbnRfb3B0aW9uc1wiKTt2YXIgZD1beWYsQmZdLGI9e3JlcXVlc3RJZDpiLHJlcXVlc3RLZXk6c2YoZG9jdW1lbnQubG9jYXRpb24uaGFzaCl9LGM9bmV3IGtmKGMse30sYik7dHJ5e2RvY3VtZW50LmxvY2F0aW9uLmhhc2g9ZG9jdW1lbnQubG9jYXRpb24uaGFzaC5yZXBsYWNlKC8mX19maXJlYmFzZV9yZXF1ZXN0X2tleT0oW2EtekEtejAtOV0qKS8sXCJcIil9Y2F0Y2goZSl7fVBmKGEsZCxcIi9hdXRoL3Nlc3Npb25cIixjKX19aC5qZT1mdW5jdGlvbihhLGIpe09mKHRoaXMpO3ZhciBjPW1mKGEpO2MuWGEuX21ldGhvZD1cIlBPU1RcIjt0aGlzLmdjKFwiL3VzZXJzXCIsYyxmdW5jdGlvbihhLGMpe2E/QihiLGEpOkIoYixhLGMpfSl9O1xuaC5MZT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7T2YodGhpcyk7dmFyIGQ9XCIvdXNlcnMvXCIrZW5jb2RlVVJJQ29tcG9uZW50KGEuZW1haWwpLGU9bWYoYSk7ZS5YYS5fbWV0aG9kPVwiREVMRVRFXCI7dGhpcy5nYyhkLGUsZnVuY3Rpb24oYSxkKXshYSYmZCYmZC51aWQmJmMuaGImJmMuaGIudWlkJiZjLmhiLnVpZD09PWQudWlkJiZNZihjKTtCKGIsYSl9KX07aC5lZT1mdW5jdGlvbihhLGIpe09mKHRoaXMpO3ZhciBjPVwiL3VzZXJzL1wiK2VuY29kZVVSSUNvbXBvbmVudChhLmVtYWlsKStcIi9wYXNzd29yZFwiLGQ9bWYoYSk7ZC5YYS5fbWV0aG9kPVwiUFVUXCI7ZC5YYS5wYXNzd29yZD1hLm5ld1Bhc3N3b3JkO3RoaXMuZ2MoYyxkLGZ1bmN0aW9uKGEpe0IoYixhKX0pfTtcbmguZGU9ZnVuY3Rpb24oYSxiKXtPZih0aGlzKTt2YXIgYz1cIi91c2Vycy9cIitlbmNvZGVVUklDb21wb25lbnQoYS5vbGRFbWFpbCkrXCIvZW1haWxcIixkPW1mKGEpO2QuWGEuX21ldGhvZD1cIlBVVFwiO2QuWGEuZW1haWw9YS5uZXdFbWFpbDtkLlhhLnBhc3N3b3JkPWEucGFzc3dvcmQ7dGhpcy5nYyhjLGQsZnVuY3Rpb24oYSl7QihiLGEpfSl9O2guTWU9ZnVuY3Rpb24oYSxiKXtPZih0aGlzKTt2YXIgYz1cIi91c2Vycy9cIitlbmNvZGVVUklDb21wb25lbnQoYS5lbWFpbCkrXCIvcGFzc3dvcmRcIixkPW1mKGEpO2QuWGEuX21ldGhvZD1cIlBPU1RcIjt0aGlzLmdjKGMsZCxmdW5jdGlvbihhKXtCKGIsYSl9KX07aC5nYz1mdW5jdGlvbihhLGIsYyl7UmYodGhpcyxbeWYsQmZdLGEsYixjKX07XG5mdW5jdGlvbiBQZihhLGIsYyxkLGUpe1JmKGEsYixjLGQsZnVuY3Rpb24oYixjKXshYiYmYyYmYy50b2tlbiYmYy51aWQ/TGYoYSxjLnRva2VuLGMsZC5jZCxmdW5jdGlvbihhLGIpe2E/QihlLGEpOkIoZSxudWxsLGIpfSk6QihlLGJ8fFgoXCJVTktOT1dOX0VSUk9SXCIpKX0pfVxuZnVuY3Rpb24gUmYoYSxiLGMsZCxlKXtiPUlhKGIsZnVuY3Rpb24oYSl7cmV0dXJuXCJmdW5jdGlvblwiPT09dHlwZW9mIGEuaXNBdmFpbGFibGUmJmEuaXNBdmFpbGFibGUoKX0pOzA9PT1iLmxlbmd0aD9zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7QihlLFgoXCJUUkFOU1BPUlRfVU5BVkFJTEFCTEVcIikpfSwwKTooYj1uZXcgKGIuc2hpZnQoKSkoZC5VZCksZD12YShkLlhhKSxkLnY9XCJqcy0yLjEuMlwiLGQudHJhbnNwb3J0PWIuc2MoKSxkLnN1cHByZXNzX3N0YXR1c19jb2Rlcz0hMCxhPXVmKCkrXCIvXCIrYS5PLnRiK2MsYi5vcGVuKGEsZCxmdW5jdGlvbihhLGIpe2lmKGEpQihlLGEpO2Vsc2UgaWYoYiYmYi5lcnJvcil7dmFyIGM9RXJyb3IoYi5lcnJvci5tZXNzYWdlKTtjLmNvZGU9Yi5lcnJvci5jb2RlO2MuZGV0YWlscz1iLmVycm9yLmRldGFpbHM7QihlLGMpfWVsc2UgQihlLG51bGwsYil9KSl9XG5mdW5jdGlvbiBJZihhLGIpe3ZhciBjPW51bGwhPT1hLmhifHxudWxsIT09YjthLmhiPWI7YyYmYS5WZChcImF1dGhfc3RhdHVzXCIsYik7YS5FZShudWxsIT09Yil9aC5xZT1mdW5jdGlvbihhKXt5KFwiYXV0aF9zdGF0dXNcIj09PWEsJ2luaXRpYWwgZXZlbnQgbXVzdCBiZSBvZiB0eXBlIFwiYXV0aF9zdGF0dXNcIicpO3JldHVyblt0aGlzLmhiXX07ZnVuY3Rpb24gT2YoYSl7dmFyIGI9YS5PO2lmKFwiZmlyZWJhc2Vpby5jb21cIiE9PWIuZG9tYWluJiZcImZpcmViYXNlaW8tZGVtby5jb21cIiE9PWIuZG9tYWluJiZcImF1dGguZmlyZWJhc2UuY29tXCI9PT1qZil0aHJvdyBFcnJvcihcIlRoaXMgY3VzdG9tIEZpcmViYXNlIHNlcnZlciAoJ1wiK2EuTy5kb21haW4rXCInKSBkb2VzIG5vdCBzdXBwb3J0IGRlbGVnYXRlZCBsb2dpbi5cIik7fTtmdW5jdGlvbiBTZihhLGIpe3JldHVybiBhJiZcIm9iamVjdFwiPT09dHlwZW9mIGE/KHkoXCIuc3ZcImluIGEsXCJVbmV4cGVjdGVkIGxlYWYgbm9kZSBvciBwcmlvcml0eSBjb250ZW50c1wiKSxiW2FbXCIuc3ZcIl1dKTphfWZ1bmN0aW9uIFRmKGEsYil7dmFyIGM9bmV3ICRlO2JmKGEsbmV3IFMoXCJcIiksZnVuY3Rpb24oYSxlKXtjLmRjKGEsVWYoZSxiKSl9KTtyZXR1cm4gY31mdW5jdGlvbiBVZihhLGIpe3ZhciBjPWEuTCgpLkkoKSxjPVNmKGMsYiksZDtpZihhLk0oKSl7dmFyIGU9U2YoYS56YSgpLGIpO3JldHVybiBlIT09YS56YSgpfHxjIT09YS5MKCkuSSgpP25ldyBuZChlLE8oYykpOmF9ZD1hO2MhPT1hLkwoKS5JKCkmJihkPWQuWihuZXcgbmQoYykpKTthLlUoTCxmdW5jdGlvbihhLGMpe3ZhciBlPVVmKGMsYik7ZSE9PWMmJihkPWQuUChhLGUpKX0pO3JldHVybiBkfTtmdW5jdGlvbiB3YyhhLGIsYyl7dGhpcy5BPWE7dGhpcy5hYT1iO3RoaXMueWM9Y31mdW5jdGlvbiBWZihhKXtyZXR1cm4gYS5hYX1mdW5jdGlvbiB2YyhhLGIpe3JldHVybiBhLmFhJiYhYS55Y3x8YS5BLkRhKGIpfXdjLnByb3RvdHlwZS5qPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuQX07ZnVuY3Rpb24gV2YoYSxiKXt0aGlzLkY9YTt0aGlzLkxkPWJ9ZnVuY3Rpb24gWGYoYSxiLGMsZCl7cmV0dXJuIG5ldyBXZihuZXcgd2MoYixjLGQpLGEuTGQpfWZ1bmN0aW9uIFlmKGEpe3JldHVybiBhLkYuYWE/YS5GLmooKTpudWxsfVdmLnByb3RvdHlwZS51PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuTGR9O2Z1bmN0aW9uIHhjKGEpe3JldHVybiBhLkxkLmFhP2EuTGQuaigpOm51bGx9O2Z1bmN0aW9uIFpmKGEsYil7dGhpcy5ZZD1hO3RoaXMuT2Y9Yn1mdW5jdGlvbiAkZihhKXt0aGlzLkc9YX1cbiRmLnByb3RvdHlwZS5ZYT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uZXcgeWMsZjtpZihiLnR5cGU9PT1hZyliLnNvdXJjZS5tZT9jPWJnKHRoaXMsYSxiLnBhdGgsYi5HYSxjLGQsZSk6KHkoYi5zb3VyY2UuZGYsXCJVbmtub3duIHNvdXJjZS5cIiksZj1iLnNvdXJjZS5TZSxjPWNnKHRoaXMsYSxiLnBhdGgsYi5HYSxjLGQsZixlKSk7ZWxzZSBpZihiLnR5cGU9PT1kZyliLnNvdXJjZS5tZT9jPWVnKHRoaXMsYSxiLnBhdGgsYi5jaGlsZHJlbixjLGQsZSk6KHkoYi5zb3VyY2UuZGYsXCJVbmtub3duIHNvdXJjZS5cIiksZj1iLnNvdXJjZS5TZSxjPWZnKHRoaXMsYSxiLnBhdGgsYi5jaGlsZHJlbixjLGQsZixlKSk7ZWxzZSBpZihiLnR5cGU9PT1nZylpZihiLk5lKWlmKGY9Yi5wYXRoLG51bGwhPWMuamMoZikpYz1hO2Vsc2V7Yj1uZXcgdWMoYyxhLGQpO2Q9YS5GLmooKTtpZihmLmUoKXx8XCIucHJpb3JpdHlcIj09PUkoZikpVmYoYS51KCkpP2I9Yy5wYSh4YyhhKSk6KGI9YS51KCkuaigpLFxueShiIGluc3RhbmNlb2YgVyxcInNlcnZlckNoaWxkcmVuIHdvdWxkIGJlIGNvbXBsZXRlIGlmIGxlYWYgbm9kZVwiKSxiPWMucGMoYikpLGI9dGhpcy5HLm9hKGQsYixlKTtlbHNle2Y9SShmKTt2YXIgZz1jLlRhKGYsYS51KCkpO251bGw9PWcmJnZjKGEudSgpLGYpJiYoZz1kLksoZikpO2I9bnVsbCE9Zz90aGlzLkcuQyhkLGYsZyxiLGUpOmEuRi5qKCkuRGEoZik/dGhpcy5HLkMoZCxmLE0sYixlKTpkO2IuZSgpJiZWZihhLnUoKSkmJihkPWMucGEoeGMoYSkpLGQuTSgpJiYoYj10aGlzLkcub2EoYixkLGUpKSl9ZD1WZihhLnUoKSl8fG51bGwhPWMuamMoVSk7Yz1YZihhLGIsZCx0aGlzLkcueWEoKSl9ZWxzZSBjPWhnKHRoaXMsYSxiLnBhdGgsYyxkLGUpO2Vsc2UgaWYoYi50eXBlPT09aWcpZD1iLnBhdGgsYj1hLnUoKSxmPWIuaigpLGc9Yi5hYXx8ZC5lKCksYz1qZyh0aGlzLG5ldyBXZihhLkYsbmV3IHdjKGYsZyxiLnljKSksZCxjLHRjLGUpO2Vsc2UgdGhyb3cgZmIoXCJVbmtub3duIG9wZXJhdGlvbiB0eXBlOiBcIitcbmIudHlwZSk7ZT1KZChlLlphKTtkPWM7Yj1kLkY7Yi5hYSYmKGY9Yi5qKCkuTSgpfHxiLmooKS5lKCksZz1ZZihhKSwoMDxlLmxlbmd0aHx8IWEuRi5hYXx8ZiYmIWIuaigpLmVhKGcpfHwhYi5qKCkuTCgpLmVhKGcuTCgpKSkmJmUucHVzaChGYihZZihkKSkpKTtyZXR1cm4gbmV3IFpmKGMsZSl9O1xuZnVuY3Rpb24gamcoYSxiLGMsZCxlLGYpe3ZhciBnPWIuRjtpZihudWxsIT1kLmpjKGMpKXJldHVybiBiO3ZhciBrO2lmKGMuZSgpKXkoVmYoYi51KCkpLFwiSWYgY2hhbmdlIHBhdGggaXMgZW1wdHksIHdlIG11c3QgaGF2ZSBjb21wbGV0ZSBzZXJ2ZXIgZGF0YVwiKSxhLkcueWEoKT8oZT14YyhiKSxkPWQucGMoZSBpbnN0YW5jZW9mIFc/ZTpNKSk6ZD1kLnBhKHhjKGIpKSxmPWEuRy5vYShiLkYuaigpLGQsZik7ZWxzZXt2YXIgbD1JKGMpO2lmKFwiLnByaW9yaXR5XCI9PWwpeSgxPT1RYyhjKSxcIkNhbid0IGhhdmUgYSBwcmlvcml0eSB3aXRoIGFkZGl0aW9uYWwgcGF0aCBjb21wb25lbnRzXCIpLGY9Zy5qKCksaz1iLnUoKS5qKCksZD1kLiRjKGMsZixrKSxmPW51bGwhPWQ/YS5HLlooZixkKTpnLmooKTtlbHNle3ZhciBuPVQoYyk7dmMoZyxsKT8oaz1iLnUoKS5qKCksZD1kLiRjKGMsZy5qKCksayksZD1udWxsIT1kP2cuaigpLksobCkuQyhuLGQpOmcuaigpLksobCkpOmQ9ZC5UYShsLGIudSgpKTtcbmY9bnVsbCE9ZD9hLkcuQyhnLmooKSxsLGQsZSxmKTpnLmooKX19cmV0dXJuIFhmKGIsZixnLmFhfHxjLmUoKSxhLkcueWEoKSl9ZnVuY3Rpb24gY2coYSxiLGMsZCxlLGYsZyxrKXt2YXIgbD1iLnUoKTtnPWc/YS5HOmEuRy5NYigpO2lmKGMuZSgpKWQ9Zy5vYShsLmooKSxkLG51bGwpO2Vsc2UgaWYoZy55YSgpJiYhbC55YylkPWwuaigpLkMoYyxkKSxkPWcub2EobC5qKCksZCxudWxsKTtlbHNle3ZhciBuPUkoYyk7aWYoKGMuZSgpPyFsLmFhfHxsLnljOiF2YyhsLEkoYykpKSYmMTxRYyhjKSlyZXR1cm4gYjtkPWwuaigpLksobikuQyhUKGMpLGQpO2Q9XCIucHJpb3JpdHlcIj09bj9nLloobC5qKCksZCk6Zy5DKGwuaigpLG4sZCx0YyxudWxsKX1sPWwuYWF8fGMuZSgpO2I9bmV3IFdmKGIuRixuZXcgd2MoZCxsLGcueWEoKSkpO3JldHVybiBqZyhhLGIsYyxlLG5ldyB1YyhlLGIsZiksayl9XG5mdW5jdGlvbiBiZyhhLGIsYyxkLGUsZixnKXt2YXIgaz1iLkY7ZT1uZXcgdWMoZSxiLGYpO2lmKGMuZSgpKWc9YS5HLm9hKGIuRi5qKCksZCxnKSxhPVhmKGIsZywhMCxhLkcueWEoKSk7ZWxzZSBpZihmPUkoYyksXCIucHJpb3JpdHlcIj09PWYpZz1hLkcuWihiLkYuaigpLGQpLGE9WGYoYixnLGsuYWEsay55Yyk7ZWxzZXt2YXIgbD1UKGMpO2M9ay5qKCkuSyhmKTtpZighbC5lKCkpe3ZhciBuPWUuZWYoZik7ZD1udWxsIT1uP1wiLnByaW9yaXR5XCI9PT1SYyhsKSYmbi5yYShsLnBhcmVudCgpKS5lKCk/bjpuLkMobCxkKTpNfWMuZWEoZCk/YT1iOihnPWEuRy5DKGsuaigpLGYsZCxlLGcpLGE9WGYoYixnLGsuYWEsYS5HLnlhKCkpKX1yZXR1cm4gYX1cbmZ1bmN0aW9uIGVnKGEsYixjLGQsZSxmLGcpe3ZhciBrPWI7a2coZCxmdW5jdGlvbihkLG4pe3ZhciB1PWMubyhkKTt2YyhiLkYsSSh1KSkmJihrPWJnKGEsayx1LG4sZSxmLGcpKX0pO2tnKGQsZnVuY3Rpb24oZCxuKXt2YXIgdT1jLm8oZCk7dmMoYi5GLEkodSkpfHwoaz1iZyhhLGssdSxuLGUsZixnKSl9KTtyZXR1cm4ga31mdW5jdGlvbiBsZyhhLGIpe2tnKGIsZnVuY3Rpb24oYixkKXthPWEuQyhiLGQpfSk7cmV0dXJuIGF9XG5mdW5jdGlvbiBmZyhhLGIsYyxkLGUsZixnLGspe2lmKGIudSgpLmooKS5lKCkmJiFWZihiLnUoKSkpcmV0dXJuIGI7dmFyIGw9YjtjPWMuZSgpP2Q6bWcobmcsYyxkKTt2YXIgbj1iLnUoKS5qKCk7Yy5jaGlsZHJlbi5mYShmdW5jdGlvbihjLGQpe2lmKG4uRGEoYykpe3ZhciBFPWIudSgpLmooKS5LKGMpLEU9bGcoRSxkKTtsPWNnKGEsbCxuZXcgUyhjKSxFLGUsZixnLGspfX0pO2MuY2hpbGRyZW4uZmEoZnVuY3Rpb24oYyxkKXt2YXIgRT0hVmYoYi51KCkpJiZudWxsPT1kLnZhbHVlO24uRGEoYyl8fEV8fChFPWIudSgpLmooKS5LKGMpLEU9bGcoRSxkKSxsPWNnKGEsbCxuZXcgUyhjKSxFLGUsZixnLGspKX0pO3JldHVybiBsfVxuZnVuY3Rpb24gaGcoYSxiLGMsZCxlLGYpe2lmKG51bGwhPWQuamMoYykpcmV0dXJuIGI7dmFyIGc9bmV3IHVjKGQsYixlKSxrPWU9Yi5GLmooKTtpZihWZihiLnUoKSkpe2lmKGMuZSgpKWU9ZC5wYSh4YyhiKSksaz1hLkcub2EoYi5GLmooKSxlLGYpO2Vsc2UgaWYoXCIucHJpb3JpdHlcIj09PUkoYykpe3ZhciBsPWQuVGEoSShjKSxiLnUoKSk7bnVsbD09bHx8ZS5lKCl8fGUuTCgpLmVhKGwpfHwoaz1hLkcuWihlLGwpKX1lbHNlIGw9SShjKSxlPWQuVGEobCxiLnUoKSksbnVsbCE9ZSYmKGs9YS5HLkMoYi5GLmooKSxsLGUsZyxmKSk7ZT0hMH1lbHNlIGIuRi5hYT8oaz1lLGU9WWYoYiksZS5NKCl8fGUuVShMLGZ1bmN0aW9uKGMpe3ZhciBlPWQuVGEoYyxiLnUoKSk7bnVsbCE9ZSYmKGs9YS5HLkMoayxjLGUsZyxmKSl9KSxlPSEwKTooIWMuZSgpJiYobD1JKGMpLDE9PVFjKGMpfHx2YyhiLkYsbCkpJiYoYz1kLlRhKGwsYi51KCkpLG51bGwhPWMmJihrPWEuRy5DKGUsbCxjLGcsZikpKSxcbmU9ITEpO3JldHVybiBYZihiLGssZSxhLkcueWEoKSl9O2Z1bmN0aW9uIG9nKGEpe3RoaXMuVj1hO3RoaXMuZz1hLm4uZ31mdW5jdGlvbiBwZyhhLGIsYyxkKXt2YXIgZT1bXSxmPVtdO0hhKGIsZnVuY3Rpb24oYil7XCJjaGlsZF9jaGFuZ2VkXCI9PT1iLnR5cGUmJmEuZy5qZihiLkRlLGIuSGEpJiZmLnB1c2gobmV3IEMoXCJjaGlsZF9tb3ZlZFwiLGIuSGEsYi5VYSkpfSk7cWcoYSxlLFwiY2hpbGRfcmVtb3ZlZFwiLGIsZCxjKTtxZyhhLGUsXCJjaGlsZF9hZGRlZFwiLGIsZCxjKTtxZyhhLGUsXCJjaGlsZF9tb3ZlZFwiLGYsZCxjKTtxZyhhLGUsXCJjaGlsZF9jaGFuZ2VkXCIsYixkLGMpO3FnKGEsZSxHYixiLGQsYyk7cmV0dXJuIGV9ZnVuY3Rpb24gcWcoYSxiLGMsZCxlLGYpe2Q9SWEoZCxmdW5jdGlvbihhKXtyZXR1cm4gYS50eXBlPT09Y30pO1FhKGQscShhLlFmLGEpKTtIYShkLGZ1bmN0aW9uKGMpe3ZhciBkPXJnKGEsYyxmKTtIYShlLGZ1bmN0aW9uKGUpe2Uud2YoYy50eXBlKSYmYi5wdXNoKGUuY3JlYXRlRXZlbnQoZCxhLlYpKX0pfSl9XG5mdW5jdGlvbiByZyhhLGIsYyl7XCJ2YWx1ZVwiIT09Yi50eXBlJiZcImNoaWxkX3JlbW92ZWRcIiE9PWIudHlwZSYmKGIuRmQ9Yy5mZihiLlVhLGIuSGEsYS5nKSk7cmV0dXJuIGJ9b2cucHJvdG90eXBlLlFmPWZ1bmN0aW9uKGEsYil7aWYobnVsbD09YS5VYXx8bnVsbD09Yi5VYSl0aHJvdyBmYihcIlNob3VsZCBvbmx5IGNvbXBhcmUgY2hpbGRfIGV2ZW50cy5cIik7cmV0dXJuIHRoaXMuZy5jb21wYXJlKG5ldyBOKGEuVWEsYS5IYSksbmV3IE4oYi5VYSxiLkhhKSl9O2Z1bmN0aW9uIHNnKGEsYil7dGhpcy5WPWE7dmFyIGM9YS5uLGQ9bmV3IGJjKGMuZyksYz1KYyhjKT9uZXcgYmMoYy5nKTpjLmthP25ldyBBYyhjKTpuZXcgZGMoYyk7dGhpcy5zZj1uZXcgJGYoYyk7dmFyIGU9Yi51KCksZj1iLkYsZz1kLm9hKE0sZS5qKCksbnVsbCksaz1jLm9hKE0sZi5qKCksbnVsbCk7dGhpcy5JYT1uZXcgV2YobmV3IHdjKGssZi5hYSxjLnlhKCkpLG5ldyB3YyhnLGUuYWEsZC55YSgpKSk7dGhpcy5WYT1bXTt0aGlzLlVmPW5ldyBvZyhhKX1mdW5jdGlvbiB0ZyhhKXtyZXR1cm4gYS5WfWg9c2cucHJvdG90eXBlO2gudT1mdW5jdGlvbigpe3JldHVybiB0aGlzLklhLnUoKS5qKCl9O2guYmI9ZnVuY3Rpb24oYSl7dmFyIGI9eGModGhpcy5JYSk7cmV0dXJuIGImJihKYyh0aGlzLlYubil8fCFhLmUoKSYmIWIuSyhJKGEpKS5lKCkpP2IucmEoYSk6bnVsbH07aC5lPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLlZhLmxlbmd0aH07aC5HYj1mdW5jdGlvbihhKXt0aGlzLlZhLnB1c2goYSl9O1xuaC5nYj1mdW5jdGlvbihhLGIpe3ZhciBjPVtdO2lmKGIpe3kobnVsbD09YSxcIkEgY2FuY2VsIHNob3VsZCBjYW5jZWwgYWxsIGV2ZW50IHJlZ2lzdHJhdGlvbnMuXCIpO3ZhciBkPXRoaXMuVi5wYXRoO0hhKHRoaXMuVmEsZnVuY3Rpb24oYSl7KGE9YS5ZZShiLGQpKSYmYy5wdXNoKGEpfSl9aWYoYSl7Zm9yKHZhciBlPVtdLGY9MDtmPHRoaXMuVmEubGVuZ3RoOysrZil7dmFyIGc9dGhpcy5WYVtmXTtpZighZy5tYXRjaGVzKGEpKWUucHVzaChnKTtlbHNlIGlmKGEuaGYoKSl7ZT1lLmNvbmNhdCh0aGlzLlZhLnNsaWNlKGYrMSkpO2JyZWFrfX10aGlzLlZhPWV9ZWxzZSB0aGlzLlZhPVtdO3JldHVybiBjfTtcbmguWWE9ZnVuY3Rpb24oYSxiLGMpe2EudHlwZT09PWRnJiZudWxsIT09YS5zb3VyY2UueWImJih5KHhjKHRoaXMuSWEpLFwiV2Ugc2hvdWxkIGFsd2F5cyBoYXZlIGEgZnVsbCBjYWNoZSBiZWZvcmUgaGFuZGxpbmcgbWVyZ2VzXCIpLHkoWWYodGhpcy5JYSksXCJNaXNzaW5nIGV2ZW50IGNhY2hlLCBldmVuIHRob3VnaCB3ZSBoYXZlIGEgc2VydmVyIGNhY2hlXCIpKTt2YXIgZD10aGlzLklhO2E9dGhpcy5zZi5ZYShkLGEsYixjKTtiPXRoaXMuc2Y7Yz1hLllkO3koYy5GLmooKS5CYyhiLkcuZyksXCJFdmVudCBzbmFwIG5vdCBpbmRleGVkXCIpO3koYy51KCkuaigpLkJjKGIuRy5nKSxcIlNlcnZlciBzbmFwIG5vdCBpbmRleGVkXCIpO3koVmYoYS5ZZC51KCkpfHwhVmYoZC51KCkpLFwiT25jZSBhIHNlcnZlciBzbmFwIGlzIGNvbXBsZXRlLCBpdCBzaG91bGQgbmV2ZXIgZ28gYmFja1wiKTt0aGlzLklhPWEuWWQ7cmV0dXJuIHVnKHRoaXMsYS5PZixhLllkLkYuaigpLG51bGwpfTtcbmZ1bmN0aW9uIHZnKGEsYil7dmFyIGM9YS5JYS5GLGQ9W107Yy5qKCkuTSgpfHxjLmooKS5VKEwsZnVuY3Rpb24oYSxiKXtkLnB1c2gobmV3IEMoXCJjaGlsZF9hZGRlZFwiLGIsYSkpfSk7Yy5hYSYmZC5wdXNoKEZiKGMuaigpKSk7cmV0dXJuIHVnKGEsZCxjLmooKSxiKX1mdW5jdGlvbiB1ZyhhLGIsYyxkKXtyZXR1cm4gcGcoYS5VZixiLGMsZD9bZF06YS5WYSl9O2Z1bmN0aW9uIHdnKGEsYil7dGhpcy52YWx1ZT1hO3RoaXMuY2hpbGRyZW49Ynx8eGd9dmFyIHhnPW5ldyBaYyhmdW5jdGlvbihhLGIpe3JldHVybiBhPT09Yj8wOmE8Yj8tMToxfSksbmc9bmV3IHdnKG51bGwpO2Z1bmN0aW9uIHlnKGEpe3ZhciBiPW5nO0EoYSxmdW5jdGlvbihhLGQpe2I9Yi5zZXQobmV3IFMoZCksYSl9KTtyZXR1cm4gYn1oPXdnLnByb3RvdHlwZTtoLmU9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMudmFsdWUmJnRoaXMuY2hpbGRyZW4uZSgpfTtmdW5jdGlvbiB6ZyhhLGIsYyl7aWYobnVsbCE9YS52YWx1ZSYmYyhhLnZhbHVlKSlyZXR1cm57cGF0aDpVLHZhbHVlOmEudmFsdWV9O2lmKGIuZSgpKXJldHVybiBudWxsO3ZhciBkPUkoYik7YT1hLmNoaWxkcmVuLmdldChkKTtyZXR1cm4gbnVsbCE9PWE/KGI9emcoYSxUKGIpLGMpLG51bGwhPWI/e3BhdGg6KG5ldyBTKGQpKS5vKGIucGF0aCksdmFsdWU6Yi52YWx1ZX06bnVsbCk6bnVsbH1cbmZ1bmN0aW9uIEFnKGEsYil7cmV0dXJuIHpnKGEsYixmdW5jdGlvbigpe3JldHVybiEwfSl9aC5zdWJ0cmVlPWZ1bmN0aW9uKGEpe2lmKGEuZSgpKXJldHVybiB0aGlzO3ZhciBiPXRoaXMuY2hpbGRyZW4uZ2V0KEkoYSkpO3JldHVybiBudWxsIT09Yj9iLnN1YnRyZWUoVChhKSk6bmd9O2guc2V0PWZ1bmN0aW9uKGEsYil7aWYoYS5lKCkpcmV0dXJuIG5ldyB3ZyhiLHRoaXMuY2hpbGRyZW4pO3ZhciBjPUkoYSksZD0odGhpcy5jaGlsZHJlbi5nZXQoYyl8fG5nKS5zZXQoVChhKSxiKSxjPXRoaXMuY2hpbGRyZW4uTGEoYyxkKTtyZXR1cm4gbmV3IHdnKHRoaXMudmFsdWUsYyl9O1xuaC5yZW1vdmU9ZnVuY3Rpb24oYSl7aWYoYS5lKCkpcmV0dXJuIHRoaXMuY2hpbGRyZW4uZSgpP25nOm5ldyB3ZyhudWxsLHRoaXMuY2hpbGRyZW4pO3ZhciBiPUkoYSksYz10aGlzLmNoaWxkcmVuLmdldChiKTtyZXR1cm4gYz8oYT1jLnJlbW92ZShUKGEpKSxiPWEuZSgpP3RoaXMuY2hpbGRyZW4ucmVtb3ZlKGIpOnRoaXMuY2hpbGRyZW4uTGEoYixhKSxudWxsPT09dGhpcy52YWx1ZSYmYi5lKCk/bmc6bmV3IHdnKHRoaXMudmFsdWUsYikpOnRoaXN9O2guZ2V0PWZ1bmN0aW9uKGEpe2lmKGEuZSgpKXJldHVybiB0aGlzLnZhbHVlO3ZhciBiPXRoaXMuY2hpbGRyZW4uZ2V0KEkoYSkpO3JldHVybiBiP2IuZ2V0KFQoYSkpOm51bGx9O1xuZnVuY3Rpb24gbWcoYSxiLGMpe2lmKGIuZSgpKXJldHVybiBjO3ZhciBkPUkoYik7Yj1tZyhhLmNoaWxkcmVuLmdldChkKXx8bmcsVChiKSxjKTtkPWIuZSgpP2EuY2hpbGRyZW4ucmVtb3ZlKGQpOmEuY2hpbGRyZW4uTGEoZCxiKTtyZXR1cm4gbmV3IHdnKGEudmFsdWUsZCl9ZnVuY3Rpb24gQmcoYSxiKXtyZXR1cm4gQ2coYSxVLGIpfWZ1bmN0aW9uIENnKGEsYixjKXt2YXIgZD17fTthLmNoaWxkcmVuLmZhKGZ1bmN0aW9uKGEsZil7ZFthXT1DZyhmLGIubyhhKSxjKX0pO3JldHVybiBjKGIsYS52YWx1ZSxkKX1mdW5jdGlvbiBEZyhhLGIsYyl7cmV0dXJuIEVnKGEsYixVLGMpfWZ1bmN0aW9uIEVnKGEsYixjLGQpe3ZhciBlPWEudmFsdWU/ZChjLGEudmFsdWUpOiExO2lmKGUpcmV0dXJuIGU7aWYoYi5lKCkpcmV0dXJuIG51bGw7ZT1JKGIpO3JldHVybihhPWEuY2hpbGRyZW4uZ2V0KGUpKT9FZyhhLFQoYiksYy5vKGUpLGQpOm51bGx9XG5mdW5jdGlvbiBGZyhhLGIsYyl7aWYoIWIuZSgpKXt2YXIgZD0hMDthLnZhbHVlJiYoZD1jKFUsYS52YWx1ZSkpOyEwPT09ZCYmKGQ9SShiKSwoYT1hLmNoaWxkcmVuLmdldChkKSkmJkdnKGEsVChiKSxVLm8oZCksYykpfX1mdW5jdGlvbiBHZyhhLGIsYyxkKXtpZihiLmUoKSlyZXR1cm4gYTthLnZhbHVlJiZkKGMsYS52YWx1ZSk7dmFyIGU9SShiKTtyZXR1cm4oYT1hLmNoaWxkcmVuLmdldChlKSk/R2coYSxUKGIpLGMubyhlKSxkKTpuZ31mdW5jdGlvbiBrZyhhLGIpe0hnKGEsVSxiKX1mdW5jdGlvbiBIZyhhLGIsYyl7YS5jaGlsZHJlbi5mYShmdW5jdGlvbihhLGUpe0hnKGUsYi5vKGEpLGMpfSk7YS52YWx1ZSYmYyhiLGEudmFsdWUpfWZ1bmN0aW9uIElnKGEsYil7YS5jaGlsZHJlbi5mYShmdW5jdGlvbihhLGQpe2QudmFsdWUmJmIoYSxkLnZhbHVlKX0pfVxuaC50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBhPXt9O2tnKHRoaXMsZnVuY3Rpb24oYixjKXthW2IudG9TdHJpbmcoKV09Yy50b1N0cmluZygpfSk7cmV0dXJuIHIoYSl9O2Z1bmN0aW9uIEpnKCl7dGhpcy52YT17fX1oPUpnLnByb3RvdHlwZTtoLmU9ZnVuY3Rpb24oKXtyZXR1cm4gTmQodGhpcy52YSl9O2guWWE9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEuc291cmNlLnliO2lmKG51bGwhPT1kKXJldHVybiBkPXQodGhpcy52YSxkKSx5KG51bGwhPWQsXCJTeW5jVHJlZSBnYXZlIHVzIGFuIG9wIGZvciBhbiBpbnZhbGlkIHF1ZXJ5LlwiKSxkLllhKGEsYixjKTt2YXIgZT1bXTtBKHRoaXMudmEsZnVuY3Rpb24oZCl7ZT1lLmNvbmNhdChkLllhKGEsYixjKSl9KTtyZXR1cm4gZX07aC5HYj1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPWEuRmEoKSxnPXQodGhpcy52YSxmKTtpZighZyl7dmFyIGc9Yy5wYShlP2Q6bnVsbCksaz0hMTtnP2s9ITA6KGc9ZCBpbnN0YW5jZW9mIFc/Yy5wYyhkKTpNLGs9ITEpO2c9bmV3IHNnKGEsbmV3IFdmKG5ldyB3YyhnLGssITEpLG5ldyB3YyhkLGUsITEpKSk7dGhpcy52YVtmXT1nfWcuR2IoYik7cmV0dXJuIHZnKGcsYil9O1xuaC5nYj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5GYSgpLGU9W10sZj1bXSxnPW51bGwhPUtnKHRoaXMpO2lmKFwiZGVmYXVsdFwiPT09ZCl7dmFyIGs9dGhpcztBKHRoaXMudmEsZnVuY3Rpb24oYSxkKXtmPWYuY29uY2F0KGEuZ2IoYixjKSk7YS5lKCkmJihkZWxldGUgay52YVtkXSxKYyhhLlYubil8fGUucHVzaChhLlYpKX0pfWVsc2V7dmFyIGw9dCh0aGlzLnZhLGQpO2wmJihmPWYuY29uY2F0KGwuZ2IoYixjKSksbC5lKCkmJihkZWxldGUgdGhpcy52YVtkXSxKYyhsLlYubil8fGUucHVzaChsLlYpKSl9ZyYmbnVsbD09S2codGhpcykmJmUucHVzaChuZXcgUihhLmssYS5wYXRoKSk7cmV0dXJue3JnOmUsVmY6Zn19O2Z1bmN0aW9uIExnKGEpe3JldHVybiBJYShKZChhLnZhKSxmdW5jdGlvbihhKXtyZXR1cm4hSmMoYS5WLm4pfSl9aC5iYj1mdW5jdGlvbihhKXt2YXIgYj1udWxsO0EodGhpcy52YSxmdW5jdGlvbihjKXtiPWJ8fGMuYmIoYSl9KTtyZXR1cm4gYn07XG5mdW5jdGlvbiBNZyhhLGIpe2lmKEpjKGIubikpcmV0dXJuIEtnKGEpO3ZhciBjPWIuRmEoKTtyZXR1cm4gdChhLnZhLGMpfWZ1bmN0aW9uIEtnKGEpe3JldHVybiBNZChhLnZhLGZ1bmN0aW9uKGEpe3JldHVybiBKYyhhLlYubil9KXx8bnVsbH07ZnVuY3Rpb24gTmcoYSl7dGhpcy5XPWF9dmFyIE9nPW5ldyBOZyhuZXcgd2cobnVsbCkpO2Z1bmN0aW9uIFBnKGEsYixjKXtpZihiLmUoKSlyZXR1cm4gbmV3IE5nKG5ldyB3ZyhjKSk7dmFyIGQ9QWcoYS5XLGIpO2lmKG51bGwhPWQpe3ZhciBlPWQucGF0aCxkPWQudmFsdWU7Yj1WKGUsYik7ZD1kLkMoYixjKTtyZXR1cm4gbmV3IE5nKGEuVy5zZXQoZSxkKSl9YT1tZyhhLlcsYixuZXcgd2coYykpO3JldHVybiBuZXcgTmcoYSl9ZnVuY3Rpb24gUWcoYSxiLGMpe3ZhciBkPWE7dWEoYyxmdW5jdGlvbihhLGMpe2Q9UGcoZCxiLm8oYSksYyl9KTtyZXR1cm4gZH1OZy5wcm90b3R5cGUuR2Q9ZnVuY3Rpb24oYSl7aWYoYS5lKCkpcmV0dXJuIE9nO2E9bWcodGhpcy5XLGEsbmcpO3JldHVybiBuZXcgTmcoYSl9O2Z1bmN0aW9uIFJnKGEsYil7dmFyIGM9QWcoYS5XLGIpO3JldHVybiBudWxsIT1jP2EuVy5nZXQoYy5wYXRoKS5yYShWKGMucGF0aCxiKSk6bnVsbH1cbmZ1bmN0aW9uIFNnKGEpe3ZhciBiPVtdLGM9YS5XLnZhbHVlO251bGwhPWM/Yy5NKCl8fGMuVShMLGZ1bmN0aW9uKGEsYyl7Yi5wdXNoKG5ldyBOKGEsYykpfSk6YS5XLmNoaWxkcmVuLmZhKGZ1bmN0aW9uKGEsYyl7bnVsbCE9Yy52YWx1ZSYmYi5wdXNoKG5ldyBOKGEsYy52YWx1ZSkpfSk7cmV0dXJuIGJ9ZnVuY3Rpb24gVGcoYSxiKXtpZihiLmUoKSlyZXR1cm4gYTt2YXIgYz1SZyhhLGIpO3JldHVybiBudWxsIT1jP25ldyBOZyhuZXcgd2coYykpOm5ldyBOZyhhLlcuc3VidHJlZShiKSl9TmcucHJvdG90eXBlLmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5XLmUoKX07TmcucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKGEpe3JldHVybiBVZyhVLHRoaXMuVyxhKX07XG5mdW5jdGlvbiBVZyhhLGIsYyl7aWYobnVsbCE9Yi52YWx1ZSlyZXR1cm4gYy5DKGEsYi52YWx1ZSk7dmFyIGQ9bnVsbDtiLmNoaWxkcmVuLmZhKGZ1bmN0aW9uKGIsZil7XCIucHJpb3JpdHlcIj09PWI/KHkobnVsbCE9PWYudmFsdWUsXCJQcmlvcml0eSB3cml0ZXMgbXVzdCBhbHdheXMgYmUgbGVhZiBub2Rlc1wiKSxkPWYudmFsdWUpOmM9VWcoYS5vKGIpLGYsYyl9KTtjLnJhKGEpLmUoKXx8bnVsbD09PWR8fChjPWMuQyhhLm8oXCIucHJpb3JpdHlcIiksZCkpO3JldHVybiBjfTtmdW5jdGlvbiBWZygpe3RoaXMuVD1PZzt0aGlzLndhPVtdO3RoaXMuRWM9LTF9aD1WZy5wcm90b3R5cGU7XG5oLkdkPWZ1bmN0aW9uKGEpe3ZhciBiPU5hKHRoaXMud2EsZnVuY3Rpb24oYil7cmV0dXJuIGIuWmQ9PT1hfSk7eSgwPD1iLFwicmVtb3ZlV3JpdGUgY2FsbGVkIHdpdGggbm9uZXhpc3RlbnQgd3JpdGVJZC5cIik7dmFyIGM9dGhpcy53YVtiXTt0aGlzLndhLnNwbGljZShiLDEpO2Zvcih2YXIgZD1jLnZpc2libGUsZT0hMSxmPXRoaXMud2EubGVuZ3RoLTE7ZCYmMDw9Zjspe3ZhciBnPXRoaXMud2FbZl07Zy52aXNpYmxlJiYoZj49YiYmV2coZyxjLnBhdGgpP2Q9ITE6Yy5wYXRoLmNvbnRhaW5zKGcucGF0aCkmJihlPSEwKSk7Zi0tfWlmKGQpe2lmKGUpdGhpcy5UPVhnKHRoaXMud2EsWWcsVSksdGhpcy5FYz0wPHRoaXMud2EubGVuZ3RoP3RoaXMud2FbdGhpcy53YS5sZW5ndGgtMV0uWmQ6LTE7ZWxzZSBpZihjLkdhKXRoaXMuVD10aGlzLlQuR2QoYy5wYXRoKTtlbHNle3ZhciBrPXRoaXM7QShjLmNoaWxkcmVuLGZ1bmN0aW9uKGEsYil7ay5UPWsuVC5HZChjLnBhdGgubyhiKSl9KX1yZXR1cm4gYy5wYXRofXJldHVybiBudWxsfTtcbmgucGE9ZnVuY3Rpb24oYSxiLGMsZCl7aWYoY3x8ZCl7dmFyIGU9VGcodGhpcy5ULGEpO3JldHVybiFkJiZlLmUoKT9iOmR8fG51bGwhPWJ8fG51bGwhPVJnKGUsVSk/KGU9WGcodGhpcy53YSxmdW5jdGlvbihiKXtyZXR1cm4oYi52aXNpYmxlfHxkKSYmKCFjfHwhKDA8PUdhKGMsYi5aZCkpKSYmKGIucGF0aC5jb250YWlucyhhKXx8YS5jb250YWlucyhiLnBhdGgpKX0sYSksYj1ifHxNLGUuYXBwbHkoYikpOm51bGx9ZT1SZyh0aGlzLlQsYSk7aWYobnVsbCE9ZSlyZXR1cm4gZTtlPVRnKHRoaXMuVCxhKTtyZXR1cm4gZS5lKCk/YjpudWxsIT1ifHxudWxsIT1SZyhlLFUpPyhiPWJ8fE0sZS5hcHBseShiKSk6bnVsbH07XG5oLnBjPWZ1bmN0aW9uKGEsYil7dmFyIGM9TSxkPVJnKHRoaXMuVCxhKTtpZihkKWQuTSgpfHxkLlUoTCxmdW5jdGlvbihhLGIpe2M9Yy5QKGEsYil9KTtlbHNlIGlmKGIpe3ZhciBlPVRnKHRoaXMuVCxhKTtiLlUoTCxmdW5jdGlvbihhLGIpe3ZhciBkPVRnKGUsbmV3IFMoYSkpLmFwcGx5KGIpO2M9Yy5QKGEsZCl9KTtIYShTZyhlKSxmdW5jdGlvbihhKXtjPWMuUChhLm5hbWUsYS5ZKX0pfWVsc2UgZT1UZyh0aGlzLlQsYSksSGEoU2coZSksZnVuY3Rpb24oYSl7Yz1jLlAoYS5uYW1lLGEuWSl9KTtyZXR1cm4gY307aC4kYz1mdW5jdGlvbihhLGIsYyxkKXt5KGN8fGQsXCJFaXRoZXIgZXhpc3RpbmdFdmVudFNuYXAgb3IgZXhpc3RpbmdTZXJ2ZXJTbmFwIG11c3QgZXhpc3RcIik7YT1hLm8oYik7aWYobnVsbCE9UmcodGhpcy5ULGEpKXJldHVybiBudWxsO2E9VGcodGhpcy5ULGEpO3JldHVybiBhLmUoKT9kLnJhKGIpOmEuYXBwbHkoZC5yYShiKSl9O1xuaC5UYT1mdW5jdGlvbihhLGIsYyl7YT1hLm8oYik7dmFyIGQ9UmcodGhpcy5ULGEpO3JldHVybiBudWxsIT1kP2Q6dmMoYyxiKT9UZyh0aGlzLlQsYSkuYXBwbHkoYy5qKCkuSyhiKSk6bnVsbH07aC5qYz1mdW5jdGlvbihhKXtyZXR1cm4gUmcodGhpcy5ULGEpfTtoLmNlPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZzthPVRnKHRoaXMuVCxhKTtnPVJnKGEsVSk7aWYobnVsbD09ZylpZihudWxsIT1iKWc9YS5hcHBseShiKTtlbHNlIHJldHVybltdO2c9Zy5GYihmKTtpZihnLmUoKXx8Zy5NKCkpcmV0dXJuW107Yj1bXTthPW1jKGYpO2U9ZT9nLlJiKGMsZik6Zy5QYihjLGYpO2ZvcihmPVAoZSk7ZiYmYi5sZW5ndGg8ZDspMCE9PWEoZixjKSYmYi5wdXNoKGYpLGY9UChlKTtyZXR1cm4gYn07XG5mdW5jdGlvbiBXZyhhLGIpe3JldHVybiBhLkdhP2EucGF0aC5jb250YWlucyhiKTohIUxkKGEuY2hpbGRyZW4sZnVuY3Rpb24oYyxkKXtyZXR1cm4gYS5wYXRoLm8oZCkuY29udGFpbnMoYil9KX1mdW5jdGlvbiBZZyhhKXtyZXR1cm4gYS52aXNpYmxlfVxuZnVuY3Rpb24gWGcoYSxiLGMpe2Zvcih2YXIgZD1PZyxlPTA7ZTxhLmxlbmd0aDsrK2Upe3ZhciBmPWFbZV07aWYoYihmKSl7dmFyIGc9Zi5wYXRoO2lmKGYuR2EpYy5jb250YWlucyhnKT8oZz1WKGMsZyksZD1QZyhkLGcsZi5HYSkpOmcuY29udGFpbnMoYykmJihnPVYoZyxjKSxkPVBnKGQsVSxmLkdhLnJhKGcpKSk7ZWxzZSBpZihmLmNoaWxkcmVuKWlmKGMuY29udGFpbnMoZykpZz1WKGMsZyksZD1RZyhkLGcsZi5jaGlsZHJlbik7ZWxzZXtpZihnLmNvbnRhaW5zKGMpKWlmKGc9VihnLGMpLGcuZSgpKWQ9UWcoZCxVLGYuY2hpbGRyZW4pO2Vsc2UgaWYoZj10KGYuY2hpbGRyZW4sSShnKSkpZj1mLnJhKFQoZykpLGQ9UGcoZCxVLGYpfWVsc2UgdGhyb3cgZmIoXCJXcml0ZVJlY29yZCBzaG91bGQgaGF2ZSAuc25hcCBvciAuY2hpbGRyZW5cIik7fX1yZXR1cm4gZH1mdW5jdGlvbiBaZyhhLGIpe3RoaXMuRGI9YTt0aGlzLlc9Yn1oPVpnLnByb3RvdHlwZTtcbmgucGE9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLlcucGEodGhpcy5EYixhLGIsYyl9O2gucGM9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuVy5wYyh0aGlzLkRiLGEpfTtoLiRjPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5XLiRjKHRoaXMuRGIsYSxiLGMpfTtoLmpjPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLlcuamModGhpcy5EYi5vKGEpKX07aC5jZT1mdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybiB0aGlzLlcuY2UodGhpcy5EYixhLGIsYyxkLGUpfTtoLlRhPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuVy5UYSh0aGlzLkRiLGEsYil9O2gubz1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IFpnKHRoaXMuRGIubyhhKSx0aGlzLlcpfTtmdW5jdGlvbiAkZyhhLGIsYyl7dGhpcy50eXBlPWFnO3RoaXMuc291cmNlPWE7dGhpcy5wYXRoPWI7dGhpcy5HYT1jfSRnLnByb3RvdHlwZS5NYz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wYXRoLmUoKT9uZXcgJGcodGhpcy5zb3VyY2UsVSx0aGlzLkdhLksoYSkpOm5ldyAkZyh0aGlzLnNvdXJjZSxUKHRoaXMucGF0aCksdGhpcy5HYSl9OyRnLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiT3BlcmF0aW9uKFwiK3RoaXMucGF0aCtcIjogXCIrdGhpcy5zb3VyY2UudG9TdHJpbmcoKStcIiBvdmVyd3JpdGU6IFwiK3RoaXMuR2EudG9TdHJpbmcoKStcIilcIn07ZnVuY3Rpb24gYWgoYSxiKXt0aGlzLnR5cGU9Z2c7dGhpcy5zb3VyY2U9Ymg7dGhpcy5wYXRoPWE7dGhpcy5OZT1ifWFoLnByb3RvdHlwZS5NYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBhdGguZSgpP3RoaXM6bmV3IGFoKFQodGhpcy5wYXRoKSx0aGlzLk5lKX07YWgucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJPcGVyYXRpb24oXCIrdGhpcy5wYXRoK1wiOiBcIit0aGlzLnNvdXJjZS50b1N0cmluZygpK1wiIGFjayB3cml0ZSByZXZlcnQ9XCIrdGhpcy5OZStcIilcIn07ZnVuY3Rpb24gY2goYSxiKXt0aGlzLnR5cGU9aWc7dGhpcy5zb3VyY2U9YTt0aGlzLnBhdGg9Yn1jaC5wcm90b3R5cGUuTWM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXRoLmUoKT9uZXcgY2godGhpcy5zb3VyY2UsVSk6bmV3IGNoKHRoaXMuc291cmNlLFQodGhpcy5wYXRoKSl9O2NoLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiT3BlcmF0aW9uKFwiK3RoaXMucGF0aCtcIjogXCIrdGhpcy5zb3VyY2UudG9TdHJpbmcoKStcIiBsaXN0ZW5fY29tcGxldGUpXCJ9O2Z1bmN0aW9uIGRoKGEsYixjKXt0aGlzLnR5cGU9ZGc7dGhpcy5zb3VyY2U9YTt0aGlzLnBhdGg9Yjt0aGlzLmNoaWxkcmVuPWN9ZGgucHJvdG90eXBlLk1jPWZ1bmN0aW9uKGEpe2lmKHRoaXMucGF0aC5lKCkpcmV0dXJuIGE9dGhpcy5jaGlsZHJlbi5zdWJ0cmVlKG5ldyBTKGEpKSxhLmUoKT9udWxsOmEudmFsdWU/bmV3ICRnKHRoaXMuc291cmNlLFUsYS52YWx1ZSk6bmV3IGRoKHRoaXMuc291cmNlLFUsYSk7eShJKHRoaXMucGF0aCk9PT1hLFwiQ2FuJ3QgZ2V0IGEgbWVyZ2UgZm9yIGEgY2hpbGQgbm90IG9uIHRoZSBwYXRoIG9mIHRoZSBvcGVyYXRpb25cIik7cmV0dXJuIG5ldyBkaCh0aGlzLnNvdXJjZSxUKHRoaXMucGF0aCksdGhpcy5jaGlsZHJlbil9O2RoLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiT3BlcmF0aW9uKFwiK3RoaXMucGF0aCtcIjogXCIrdGhpcy5zb3VyY2UudG9TdHJpbmcoKStcIiBtZXJnZTogXCIrdGhpcy5jaGlsZHJlbi50b1N0cmluZygpK1wiKVwifTt2YXIgYWc9MCxkZz0xLGdnPTIsaWc9MztmdW5jdGlvbiBlaChhLGIsYyxkKXt0aGlzLm1lPWE7dGhpcy5kZj1iO3RoaXMueWI9Yzt0aGlzLlNlPWQ7eSghZHx8YixcIlRhZ2dlZCBxdWVyaWVzIG11c3QgYmUgZnJvbSBzZXJ2ZXIuXCIpfXZhciBiaD1uZXcgZWgoITAsITEsbnVsbCwhMSksZmg9bmV3IGVoKCExLCEwLG51bGwsITEpO2VoLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1lP1widXNlclwiOnRoaXMuU2U/XCJzZXJ2ZXIocXVlcnlJRD1cIit0aGlzLnliK1wiKVwiOlwic2VydmVyXCJ9O2Z1bmN0aW9uIGdoKGEpe3RoaXMubmE9bmc7dGhpcy54Yj1uZXcgVmc7dGhpcy5XYz17fTt0aGlzLmJjPXt9O3RoaXMuRmM9YX1mdW5jdGlvbiBoaChhLGIsYyxkLGUpe3ZhciBmPWEueGIsZz1lO3koZD5mLkVjLFwiU3RhY2tpbmcgYW4gb2xkZXIgd3JpdGUgb24gdG9wIG9mIG5ld2VyIG9uZXNcIik7bShnKXx8KGc9ITApO2Yud2EucHVzaCh7cGF0aDpiLEdhOmMsWmQ6ZCx2aXNpYmxlOmd9KTtnJiYoZi5UPVBnKGYuVCxiLGMpKTtmLkVjPWQ7cmV0dXJuIGU/aWgoYSxuZXcgJGcoYmgsYixjKSk6W119ZnVuY3Rpb24gamgoYSxiLGMsZCl7dmFyIGU9YS54Yjt5KGQ+ZS5FYyxcIlN0YWNraW5nIGFuIG9sZGVyIG1lcmdlIG9uIHRvcCBvZiBuZXdlciBvbmVzXCIpO2Uud2EucHVzaCh7cGF0aDpiLGNoaWxkcmVuOmMsWmQ6ZCx2aXNpYmxlOiEwfSk7ZS5UPVFnKGUuVCxiLGMpO2UuRWM9ZDtjPXlnKGMpO3JldHVybiBpaChhLG5ldyBkaChiaCxiLGMpKX1cbmZ1bmN0aW9uIGtoKGEsYixjKXtjPWN8fCExO2I9YS54Yi5HZChiKTtyZXR1cm4gbnVsbD09Yj9bXTppaChhLG5ldyBhaChiLGMpKX1mdW5jdGlvbiBsaChhLGIsYyl7Yz15ZyhjKTtyZXR1cm4gaWgoYSxuZXcgZGgoZmgsYixjKSl9ZnVuY3Rpb24gbWgoYSxiLGMsZCl7ZD1PZChhLldjLFwiX1wiK2QpO2lmKG51bGwhPWQpe3ZhciBlPW5oKGQpO2Q9ZS5wYXRoO2U9ZS55YjtiPVYoZCxiKTtjPW5ldyAkZyhuZXcgZWgoITEsITAsZSwhMCksYixjKTtyZXR1cm4gb2goYSxkLGMpfXJldHVybltdfWZ1bmN0aW9uIHBoKGEsYixjLGQpe2lmKGQ9T2QoYS5XYyxcIl9cIitkKSl7dmFyIGU9bmgoZCk7ZD1lLnBhdGg7ZT1lLnliO2I9VihkLGIpO2M9eWcoYyk7Yz1uZXcgZGgobmV3IGVoKCExLCEwLGUsITApLGIsYyk7cmV0dXJuIG9oKGEsZCxjKX1yZXR1cm5bXX1cbmdoLnByb3RvdHlwZS5HYj1mdW5jdGlvbihhLGIpe3ZhciBjPWEucGF0aCxkPW51bGwsZT0hMTtGZyh0aGlzLm5hLGMsZnVuY3Rpb24oYSxiKXt2YXIgZj1WKGEsYyk7ZD1iLmJiKGYpO2U9ZXx8bnVsbCE9S2coYik7cmV0dXJuIWR9KTt2YXIgZj10aGlzLm5hLmdldChjKTtmPyhlPWV8fG51bGwhPUtnKGYpLGQ9ZHx8Zi5iYihVKSk6KGY9bmV3IEpnLHRoaXMubmE9dGhpcy5uYS5zZXQoYyxmKSk7dmFyIGc7bnVsbCE9ZD9nPSEwOihnPSExLGQ9TSxJZyh0aGlzLm5hLnN1YnRyZWUoYyksZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmJiKFUpO2MmJihkPWQuUChhLGMpKX0pKTt2YXIgaz1udWxsIT1NZyhmLGEpO2lmKCFrJiYhSmMoYS5uKSl7dmFyIGw9cWgoYSk7eSghKGwgaW4gdGhpcy5iYyksXCJWaWV3IGRvZXMgbm90IGV4aXN0LCBidXQgd2UgaGF2ZSBhIHRhZ1wiKTt2YXIgbj1yaCsrO3RoaXMuYmNbbF09bjt0aGlzLldjW1wiX1wiK25dPWx9Zz1mLkdiKGEsYixuZXcgWmcoYyx0aGlzLnhiKSxcbmQsZyk7a3x8ZXx8KGY9TWcoZixhKSxnPWcuY29uY2F0KHNoKHRoaXMsYSxmKSkpO3JldHVybiBnfTtcbmdoLnByb3RvdHlwZS5nYj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5wYXRoLGU9dGhpcy5uYS5nZXQoZCksZj1bXTtpZihlJiYoXCJkZWZhdWx0XCI9PT1hLkZhKCl8fG51bGwhPU1nKGUsYSkpKXtmPWUuZ2IoYSxiLGMpO2UuZSgpJiYodGhpcy5uYT10aGlzLm5hLnJlbW92ZShkKSk7ZT1mLnJnO2Y9Zi5WZjtiPS0xIT09TmEoZSxmdW5jdGlvbihhKXtyZXR1cm4gSmMoYS5uKX0pO3ZhciBnPURnKHRoaXMubmEsZCxmdW5jdGlvbihhLGIpe3JldHVybiBudWxsIT1LZyhiKX0pO2lmKGImJiFnJiYoZD10aGlzLm5hLnN1YnRyZWUoZCksIWQuZSgpKSlmb3IodmFyIGQ9dGgoZCksaz0wO2s8ZC5sZW5ndGg7KytrKXt2YXIgbD1kW2tdLG49bC5WLGw9dWgodGhpcyxsKTt0aGlzLkZjLlBlKG4sdmgodGhpcyxuKSxsLm1kLGwuSCl9aWYoIWcmJjA8ZS5sZW5ndGgmJiFjKWlmKGIpdGhpcy5GYy5RZChhLG51bGwpO2Vsc2V7dmFyIHU9dGhpcztIYShlLGZ1bmN0aW9uKGEpe2EuRmEoKTt2YXIgYj11LmJjW3FoKGEpXTtcbnUuRmMuUWQoYSxiKX0pfXdoKHRoaXMsZSl9cmV0dXJuIGZ9O2doLnByb3RvdHlwZS5wYT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMueGIsZD1EZyh0aGlzLm5hLGEsZnVuY3Rpb24oYixjKXt2YXIgZD1WKGIsYSk7aWYoZD1jLmJiKGQpKXJldHVybiBkfSk7cmV0dXJuIGMucGEoYSxkLGIsITApfTtmdW5jdGlvbiB0aChhKXtyZXR1cm4gQmcoYSxmdW5jdGlvbihhLGMsZCl7aWYoYyYmbnVsbCE9S2coYykpcmV0dXJuW0tnKGMpXTt2YXIgZT1bXTtjJiYoZT1MZyhjKSk7QShkLGZ1bmN0aW9uKGEpe2U9ZS5jb25jYXQoYSl9KTtyZXR1cm4gZX0pfWZ1bmN0aW9uIHdoKGEsYil7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDsrK2Mpe3ZhciBkPWJbY107aWYoIUpjKGQubikpe3ZhciBkPXFoKGQpLGU9YS5iY1tkXTtkZWxldGUgYS5iY1tkXTtkZWxldGUgYS5XY1tcIl9cIitlXX19fVxuZnVuY3Rpb24gc2goYSxiLGMpe3ZhciBkPWIucGF0aCxlPXZoKGEsYik7Yz11aChhLGMpO2I9YS5GYy5QZShiLGUsYy5tZCxjLkgpO2Q9YS5uYS5zdWJ0cmVlKGQpO2lmKGUpeShudWxsPT1LZyhkLnZhbHVlKSxcIklmIHdlJ3JlIGFkZGluZyBhIHF1ZXJ5LCBpdCBzaG91bGRuJ3QgYmUgc2hhZG93ZWRcIik7ZWxzZSBmb3IoZT1CZyhkLGZ1bmN0aW9uKGEsYixjKXtpZighYS5lKCkmJmImJm51bGwhPUtnKGIpKXJldHVyblt0ZyhLZyhiKSldO3ZhciBkPVtdO2ImJihkPWQuY29uY2F0KEphKExnKGIpLGZ1bmN0aW9uKGEpe3JldHVybiBhLlZ9KSkpO0EoYyxmdW5jdGlvbihhKXtkPWQuY29uY2F0KGEpfSk7cmV0dXJuIGR9KSxkPTA7ZDxlLmxlbmd0aDsrK2QpYz1lW2RdLGEuRmMuUWQoYyx2aChhLGMpKTtyZXR1cm4gYn1cbmZ1bmN0aW9uIHVoKGEsYil7dmFyIGM9Yi5WLGQ9dmgoYSxjKTtyZXR1cm57bWQ6ZnVuY3Rpb24oKXtyZXR1cm4oYi51KCl8fE0pLmhhc2goKX0sSDpmdW5jdGlvbihiLGYpe2lmKFwib2tcIj09PWIpe2lmKGYmJlwib2JqZWN0XCI9PT10eXBlb2YgZiYmcyhmLFwid1wiKSl7dmFyIGc9dChmLFwid1wiKTtlYShnKSYmMDw9R2EoZyxcIm5vX2luZGV4XCIpJiZ6KFwiVXNpbmcgYW4gdW5zcGVjaWZpZWQgaW5kZXguIENvbnNpZGVyIGFkZGluZyBcIisoJ1wiLmluZGV4T25cIjogXCInK2Mubi5nLnRvU3RyaW5nKCkrJ1wiJykrXCIgYXQgXCIrYy5wYXRoLnRvU3RyaW5nKCkrXCIgdG8geW91ciBzZWN1cml0eSBydWxlcyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXCIpfWlmKGQpe3ZhciBrPWMucGF0aDtpZihnPU9kKGEuV2MsXCJfXCIrZCkpdmFyIGw9bmgoZyksZz1sLnBhdGgsbD1sLnliLGs9VihnLGspLGs9bmV3IGNoKG5ldyBlaCghMSwhMCxsLCEwKSxrKSxnPW9oKGEsZyxrKTtlbHNlIGc9W119ZWxzZSBnPWloKGEsbmV3IGNoKGZoLFxuYy5wYXRoKSk7cmV0dXJuIGd9Zz1cIlVua25vd24gRXJyb3JcIjtcInRvb19iaWdcIj09PWI/Zz1cIlRoZSBkYXRhIHJlcXVlc3RlZCBleGNlZWRzIHRoZSBtYXhpbXVtIHNpemUgdGhhdCBjYW4gYmUgYWNjZXNzZWQgd2l0aCBhIHNpbmdsZSByZXF1ZXN0LlwiOlwicGVybWlzc2lvbl9kZW5pZWRcIj09Yj9nPVwiQ2xpZW50IGRvZXNuJ3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGFjY2VzcyB0aGUgZGVzaXJlZCBkYXRhLlwiOlwidW5hdmFpbGFibGVcIj09YiYmKGc9XCJUaGUgc2VydmljZSBpcyB1bmF2YWlsYWJsZVwiKTtnPUVycm9yKGIrXCI6IFwiK2cpO2cuY29kZT1iLnRvVXBwZXJDYXNlKCk7cmV0dXJuIGEuZ2IoYyxudWxsLGcpfX19ZnVuY3Rpb24gcWgoYSl7cmV0dXJuIGEucGF0aC50b1N0cmluZygpK1wiJFwiK2EuRmEoKX1cbmZ1bmN0aW9uIG5oKGEpe3ZhciBiPWEuaW5kZXhPZihcIiRcIik7eSgtMSE9PWImJmI8YS5sZW5ndGgtMSxcIkJhZCBxdWVyeUtleS5cIik7cmV0dXJue3liOmEuc3Vic3RyKGIrMSkscGF0aDpuZXcgUyhhLnN1YnN0cigwLGIpKX19ZnVuY3Rpb24gdmgoYSxiKXt2YXIgYz1xaChiKTtyZXR1cm4gdChhLmJjLGMpfXZhciByaD0xO2Z1bmN0aW9uIG9oKGEsYixjKXt2YXIgZD1hLm5hLmdldChiKTt5KGQsXCJNaXNzaW5nIHN5bmMgcG9pbnQgZm9yIHF1ZXJ5IHRhZyB0aGF0IHdlJ3JlIHRyYWNraW5nXCIpO3JldHVybiBkLllhKGMsbmV3IFpnKGIsYS54YiksbnVsbCl9ZnVuY3Rpb24gaWgoYSxiKXtyZXR1cm4geGgoYSxiLGEubmEsbnVsbCxuZXcgWmcoVSxhLnhiKSl9XG5mdW5jdGlvbiB4aChhLGIsYyxkLGUpe2lmKGIucGF0aC5lKCkpcmV0dXJuIHloKGEsYixjLGQsZSk7dmFyIGY9Yy5nZXQoVSk7bnVsbD09ZCYmbnVsbCE9ZiYmKGQ9Zi5iYihVKSk7dmFyIGc9W10saz1JKGIucGF0aCksbD1iLk1jKGspO2lmKChjPWMuY2hpbGRyZW4uZ2V0KGspKSYmbCl2YXIgbj1kP2QuSyhrKTpudWxsLGs9ZS5vKGspLGc9Zy5jb25jYXQoeGgoYSxsLGMsbixrKSk7ZiYmKGc9Zy5jb25jYXQoZi5ZYShiLGUsZCkpKTtyZXR1cm4gZ31mdW5jdGlvbiB5aChhLGIsYyxkLGUpe3ZhciBmPWMuZ2V0KFUpO251bGw9PWQmJm51bGwhPWYmJihkPWYuYmIoVSkpO3ZhciBnPVtdO2MuY2hpbGRyZW4uZmEoZnVuY3Rpb24oYyxmKXt2YXIgbj1kP2QuSyhjKTpudWxsLHU9ZS5vKGMpLHg9Yi5NYyhjKTt4JiYoZz1nLmNvbmNhdCh5aChhLHgsZixuLHUpKSl9KTtmJiYoZz1nLmNvbmNhdChmLllhKGIsZSxkKSkpO3JldHVybiBnfTtmdW5jdGlvbiB6aChhKXt0aGlzLk89YTt0aGlzLlJhPVhkKGEpO3RoaXMuJD1uZXcgZGY7dGhpcy52ZD0xO3RoaXMuUz1uZXcgSmUodGhpcy5PLHEodGhpcy55ZCx0aGlzKSxxKHRoaXMud2QsdGhpcykscSh0aGlzLkhlLHRoaXMpKTt0aGlzLnpnPVlkKGEscShmdW5jdGlvbigpe3JldHVybiBuZXcgVWQodGhpcy5SYSx0aGlzLlMpfSx0aGlzKSk7dGhpcy5sYz1uZXcgVGM7dGhpcy5zZT1uZXcgY2Y7dmFyIGI9dGhpczt0aGlzLnFkPW5ldyBnaCh7UGU6ZnVuY3Rpb24oYSxkLGUsZil7ZD1bXTtlPWIuc2UuaihhLnBhdGgpO2UuZSgpfHwoZD1paChiLnFkLG5ldyAkZyhmaCxhLnBhdGgsZSkpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtmKFwib2tcIil9LDApKTtyZXR1cm4gZH0sUWQ6YmF9KTtBaCh0aGlzLFwiY29ubmVjdGVkXCIsITEpO3RoaXMuZ2E9bmV3ICRlO3RoaXMuUT1uZXcgRmYoYSxxKHRoaXMuUy5RLHRoaXMuUykscSh0aGlzLlMuVWUsdGhpcy5TKSxxKHRoaXMuRWUsdGhpcykpO3RoaXMuZ2Q9XG4wO3RoaXMudGU9bnVsbDt0aGlzLk49bmV3IGdoKHtQZTpmdW5jdGlvbihhLGQsZSxmKXtOZShiLlMsYSxlLGQsZnVuY3Rpb24oZCxlKXt2YXIgbD1mKGQsZSk7aGYoYi4kLGEucGF0aCxsKX0pO3JldHVybltdfSxRZDpmdW5jdGlvbihhLGQpe3ZhciBlPWIuUyxmPWEucGF0aC50b1N0cmluZygpLGc9YS5GYSgpO2UuZihcIlVubGlzdGVuIGNhbGxlZCBmb3IgXCIrZitcIiBcIitnKTtpZihQZShlLGYsZykmJmUuamEpe3ZhciBrPUljKGEubik7ZS5mKFwiVW5saXN0ZW4gb24gXCIrZitcIiBmb3IgXCIrZyk7Zj17cDpmfTtkJiYoZi5xPWssZi50PWQpO2UuQ2EoXCJuXCIsZil9fX0pfWg9emgucHJvdG90eXBlO2gudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5PLkFiP1wiaHR0cHM6Ly9cIjpcImh0dHA6Ly9cIikrdGhpcy5PLmhvc3R9O2gubmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLk8udGJ9O1xuZnVuY3Rpb24gQmgoYSl7YT1hLnNlLmoobmV3IFMoXCIuaW5mby9zZXJ2ZXJUaW1lT2Zmc2V0XCIpKS5JKCl8fDA7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCkrYX1mdW5jdGlvbiBDaChhKXthPWE9e3RpbWVzdGFtcDpCaChhKX07YS50aW1lc3RhbXA9YS50aW1lc3RhbXB8fChuZXcgRGF0ZSkuZ2V0VGltZSgpO3JldHVybiBhfWgueWQ9ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5nZCsrO3ZhciBlPW5ldyBTKGEpO2I9dGhpcy50ZT90aGlzLnRlKGEsYik6YjthPVtdO2Q/Yz8oYj10ZChiLGZ1bmN0aW9uKGEpe3JldHVybiBPKGEpfSksYT1waCh0aGlzLk4sZSxiLGQpKTooYj1PKGIpLGE9bWgodGhpcy5OLGUsYixkKSk6Yz8oZD10ZChiLGZ1bmN0aW9uKGEpe3JldHVybiBPKGEpfSksYT1saCh0aGlzLk4sZSxkKSk6KGQ9TyhiKSxhPWloKHRoaXMuTixuZXcgJGcoZmgsZSxkKSkpO2Q9ZTswPGEubGVuZ3RoJiYoZD1EaCh0aGlzLGUpKTtoZih0aGlzLiQsZCxhKX07XG5oLndkPWZ1bmN0aW9uKGEpe0FoKHRoaXMsXCJjb25uZWN0ZWRcIixhKTshMT09PWEmJkVoKHRoaXMpfTtoLkhlPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7emIoYSxmdW5jdGlvbihhLGQpe0FoKGIsZCxhKX0pfTtoLkVlPWZ1bmN0aW9uKGEpe0FoKHRoaXMsXCJhdXRoZW50aWNhdGVkXCIsYSl9O2Z1bmN0aW9uIEFoKGEsYixjKXtiPW5ldyBTKFwiLy5pbmZvL1wiK2IpO2M9TyhjKTt2YXIgZD1hLnNlO2QuSmQ9ZC5KZC5DKGIsYyk7Yz1paChhLnFkLG5ldyAkZyhmaCxiLGMpKTtoZihhLiQsYixjKX1cbmguQmI9ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5mKFwic2V0XCIse3BhdGg6YS50b1N0cmluZygpLHZhbHVlOmIsSGc6Y30pO3ZhciBlPUNoKHRoaXMpO2I9TyhiLGMpO3ZhciBlPVVmKGIsZSksZj10aGlzLnZkKyssZT1oaCh0aGlzLk4sYSxlLGYsITApO2VmKHRoaXMuJCxlKTt2YXIgZz10aGlzO3RoaXMuUy5wdXQoYS50b1N0cmluZygpLGIuSSghMCksZnVuY3Rpb24oYixjKXt2YXIgZT1cIm9rXCI9PT1iO2V8fHooXCJzZXQgYXQgXCIrYStcIiBmYWlsZWQ6IFwiK2IpO2U9a2goZy5OLGYsIWUpO2hmKGcuJCxhLGUpO0ZoKGQsYixjKX0pO2U9R2godGhpcyxhKTtEaCh0aGlzLGUpO2hmKHRoaXMuJCxlLFtdKX07XG5oLnVwZGF0ZT1mdW5jdGlvbihhLGIsYyl7dGhpcy5mKFwidXBkYXRlXCIse3BhdGg6YS50b1N0cmluZygpLHZhbHVlOmJ9KTt2YXIgZD0hMCxlPUNoKHRoaXMpLGY9e307QShiLGZ1bmN0aW9uKGEsYil7ZD0hMTt2YXIgYz1PKGEpO2ZbYl09VWYoYyxlKX0pO2lmKGQpaGIoXCJ1cGRhdGUoKSBjYWxsZWQgd2l0aCBlbXB0eSBkYXRhLiAgRG9uJ3QgZG8gYW55dGhpbmcuXCIpLEZoKGMsXCJva1wiKTtlbHNle3ZhciBnPXRoaXMudmQrKyxrPWpoKHRoaXMuTixhLGYsZyk7ZWYodGhpcy4kLGspO3ZhciBsPXRoaXM7VmUodGhpcy5TLGEudG9TdHJpbmcoKSxiLGZ1bmN0aW9uKGIsZCl7eShcIm9rXCI9PT1ifHxcInBlcm1pc3Npb25fZGVuaWVkXCI9PT1iLFwibWVyZ2UgYXQgXCIrYStcIiBmYWlsZWQuXCIpO3ZhciBlPVwib2tcIj09PWI7ZXx8eihcInVwZGF0ZSBhdCBcIithK1wiIGZhaWxlZDogXCIrYik7dmFyIGU9a2gobC5OLGcsIWUpLGY9YTswPGUubGVuZ3RoJiYoZj1EaChsLGEpKTtoZihsLiQsZixlKTtGaChjLGIsZCl9KTtcbmI9R2godGhpcyxhKTtEaCh0aGlzLGIpO2hmKHRoaXMuJCxhLFtdKX19O2Z1bmN0aW9uIEVoKGEpe2EuZihcIm9uRGlzY29ubmVjdEV2ZW50c1wiKTt2YXIgYj1DaChhKSxjPVtdO2JmKFRmKGEuZ2EsYiksVSxmdW5jdGlvbihiLGUpe2M9Yy5jb25jYXQoaWgoYS5OLG5ldyAkZyhmaCxiLGUpKSk7dmFyIGY9R2goYSxiKTtEaChhLGYpfSk7YS5nYT1uZXcgJGU7aGYoYS4kLFUsYyl9aC5GZT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7dGhpcy5TLkZlKGEudG9TdHJpbmcoKSxmdW5jdGlvbihkLGUpe1wib2tcIj09PWQmJmFmKGMuZ2EsYSk7RmgoYixkLGUpfSl9O2Z1bmN0aW9uIEhoKGEsYixjLGQpe3ZhciBlPU8oYyk7UmUoYS5TLGIudG9TdHJpbmcoKSxlLkkoITApLGZ1bmN0aW9uKGMsZyl7XCJva1wiPT09YyYmYS5nYS5kYyhiLGUpO0ZoKGQsYyxnKX0pfVxuZnVuY3Rpb24gSWgoYSxiLGMsZCxlKXt2YXIgZj1PKGMsZCk7UmUoYS5TLGIudG9TdHJpbmcoKSxmLkkoITApLGZ1bmN0aW9uKGMsZCl7XCJva1wiPT09YyYmYS5nYS5kYyhiLGYpO0ZoKGUsYyxkKX0pfWZ1bmN0aW9uIEpoKGEsYixjLGQpe3ZhciBlPSEwLGY7Zm9yKGYgaW4gYyllPSExO2U/KGhiKFwib25EaXNjb25uZWN0KCkudXBkYXRlKCkgY2FsbGVkIHdpdGggZW1wdHkgZGF0YS4gIERvbid0IGRvIGFueXRoaW5nLlwiKSxGaChkLFwib2tcIikpOlRlKGEuUyxiLnRvU3RyaW5nKCksYyxmdW5jdGlvbihlLGYpe2lmKFwib2tcIj09PWUpZm9yKHZhciBsIGluIGMpe3ZhciBuPU8oY1tsXSk7YS5nYS5kYyhiLm8obCksbil9RmgoZCxlLGYpfSl9ZnVuY3Rpb24gT2MoYSxiLGMpe2M9XCIuaW5mb1wiPT09SShiLnBhdGgpP2EucWQuR2IoYixjKTphLk4uR2IoYixjKTtQYyhhLiQsYi5wYXRoLGMpfWgucGI9ZnVuY3Rpb24oKXt0aGlzLlMucGIoKX07aC5oYz1mdW5jdGlvbigpe3RoaXMuUy5oYygpfTtcbmguUWU9ZnVuY3Rpb24oYSl7aWYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBjb25zb2xlKXthPyh0aGlzLlBkfHwodGhpcy5QZD1uZXcgVGQodGhpcy5SYSkpLGE9dGhpcy5QZC5nZXQoKSk6YT10aGlzLlJhLmdldCgpO3ZhciBiPUthKEtkKGEpLGZ1bmN0aW9uKGEsYil7cmV0dXJuIE1hdGgubWF4KGIubGVuZ3RoLGEpfSwwKSxjO2ZvcihjIGluIGEpe2Zvcih2YXIgZD1hW2NdLGU9Yy5sZW5ndGg7ZTxiKzI7ZSsrKWMrPVwiIFwiO2NvbnNvbGUubG9nKGMrZCl9fX07aC5SZT1mdW5jdGlvbihhKXtTZCh0aGlzLlJhLGEpO3RoaXMuemcuemZbYV09ITB9O2guZj1mdW5jdGlvbihhKXtoYihcInI6XCIrdGhpcy5TLmlkK1wiOlwiLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIEZoKGEsYixjKXthJiZDYihmdW5jdGlvbigpe2lmKFwib2tcIj09YilhKG51bGwpO2Vsc2V7dmFyIGQ9KGJ8fFwiZXJyb3JcIikudG9VcHBlckNhc2UoKSxlPWQ7YyYmKGUrPVwiOiBcIitjKTtlPUVycm9yKGUpO2UuY29kZT1kO2EoZSl9fSl9O2Z1bmN0aW9uIEtoKGEsYixjLGQsZSl7ZnVuY3Rpb24gZigpe31hLmYoXCJ0cmFuc2FjdGlvbiBvbiBcIitiKTt2YXIgZz1uZXcgUihhLGIpO2cudmIoXCJ2YWx1ZVwiLGYpO2M9e3BhdGg6Yix1cGRhdGU6YyxIOmQsc3RhdHVzOm51bGwscWY6ZWIoKSxWZTplLHhmOjAsWGQ6ZnVuY3Rpb24oKXtnLlpiKFwidmFsdWVcIixmKX0sJGQ6bnVsbCx4YTpudWxsLGRkOm51bGwsZWQ6bnVsbCxmZDpudWxsfTtkPWEuTi5wYShiLHZvaWQgMCl8fE07Yy5kZD1kO2Q9Yy51cGRhdGUoZC5JKCkpO2lmKG0oZCkpe1NiKFwidHJhbnNhY3Rpb24gZmFpbGVkOiBEYXRhIHJldHVybmVkIFwiLGQpO2Muc3RhdHVzPTE7ZT1VYyhhLmxjLGIpO3ZhciBrPWUuemEoKXx8W107ay5wdXNoKGMpO1ZjKGUsayk7XCJvYmplY3RcIj09PXR5cGVvZiBkJiZudWxsIT09ZCYmcyhkLFwiLnByaW9yaXR5XCIpPyhrPXQoZCxcIi5wcmlvcml0eVwiKSx5KFFiKGspLFwiSW52YWxpZCBwcmlvcml0eSByZXR1cm5lZCBieSB0cmFuc2FjdGlvbi4gUHJpb3JpdHkgbXVzdCBiZSBhIHZhbGlkIHN0cmluZywgZmluaXRlIG51bWJlciwgc2VydmVyIHZhbHVlLCBvciBudWxsLlwiKSk6XG5rPShhLk4ucGEoYil8fE0pLkwoKS5JKCk7ZT1DaChhKTtkPU8oZCxrKTtlPVVmKGQsZSk7Yy5lZD1kO2MuZmQ9ZTtjLnhhPWEudmQrKztjPWhoKGEuTixiLGUsYy54YSxjLlZlKTtoZihhLiQsYixjKTtMaChhKX1lbHNlIGMuWGQoKSxjLmVkPW51bGwsYy5mZD1udWxsLGMuSCYmKGE9bmV3IEQoYy5kZCxuZXcgUihhLGMucGF0aCksTCksYy5IKG51bGwsITEsYSkpfWZ1bmN0aW9uIExoKGEsYil7dmFyIGM9Ynx8YS5sYztifHxNaChhLGMpO2lmKG51bGwhPT1jLnphKCkpe3ZhciBkPU5oKGEsYyk7eSgwPGQubGVuZ3RoLFwiU2VuZGluZyB6ZXJvIGxlbmd0aCB0cmFuc2FjdGlvbiBxdWV1ZVwiKTtMYShkLGZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5zdGF0dXN9KSYmT2goYSxjLnBhdGgoKSxkKX1lbHNlIGMubGQoKSYmYy5VKGZ1bmN0aW9uKGIpe0xoKGEsYil9KX1cbmZ1bmN0aW9uIE9oKGEsYixjKXtmb3IodmFyIGQ9SmEoYyxmdW5jdGlvbihhKXtyZXR1cm4gYS54YX0pLGU9YS5OLnBhKGIsZCl8fE0sZD1lLGU9ZS5oYXNoKCksZj0wO2Y8Yy5sZW5ndGg7ZisrKXt2YXIgZz1jW2ZdO3koMT09PWcuc3RhdHVzLFwidHJ5VG9TZW5kVHJhbnNhY3Rpb25RdWV1ZV86IGl0ZW1zIGluIHF1ZXVlIHNob3VsZCBhbGwgYmUgcnVuLlwiKTtnLnN0YXR1cz0yO2cueGYrKzt2YXIgaz1WKGIsZy5wYXRoKSxkPWQuQyhrLGcuZWQpfWQ9ZC5JKCEwKTthLlMucHV0KGIudG9TdHJpbmcoKSxkLGZ1bmN0aW9uKGQpe2EuZihcInRyYW5zYWN0aW9uIHB1dCByZXNwb25zZVwiLHtwYXRoOmIudG9TdHJpbmcoKSxzdGF0dXM6ZH0pO3ZhciBlPVtdO2lmKFwib2tcIj09PWQpe2Q9W107Zm9yKGY9MDtmPGMubGVuZ3RoO2YrKyl7Y1tmXS5zdGF0dXM9MztlPWUuY29uY2F0KGtoKGEuTixjW2ZdLnhhKSk7aWYoY1tmXS5IKXt2YXIgZz1jW2ZdLmZkLGs9bmV3IFIoYSxjW2ZdLnBhdGgpO2QucHVzaChxKGNbZl0uSCxcbm51bGwsbnVsbCwhMCxuZXcgRChnLGssTCkpKX1jW2ZdLlhkKCl9TWgoYSxVYyhhLmxjLGIpKTtMaChhKTtoZihhLiQsYixlKTtmb3IoZj0wO2Y8ZC5sZW5ndGg7ZisrKUNiKGRbZl0pfWVsc2V7aWYoXCJkYXRhc3RhbGVcIj09PWQpZm9yKGY9MDtmPGMubGVuZ3RoO2YrKyljW2ZdLnN0YXR1cz00PT09Y1tmXS5zdGF0dXM/NToxO2Vsc2UgZm9yKHooXCJ0cmFuc2FjdGlvbiBhdCBcIitiLnRvU3RyaW5nKCkrXCIgZmFpbGVkOiBcIitkKSxmPTA7ZjxjLmxlbmd0aDtmKyspY1tmXS5zdGF0dXM9NSxjW2ZdLiRkPWQ7RGgoYSxiKX19LGUpfWZ1bmN0aW9uIERoKGEsYil7dmFyIGM9UGgoYSxiKSxkPWMucGF0aCgpLGM9TmgoYSxjKTtRaChhLGMsZCk7cmV0dXJuIGR9XG5mdW5jdGlvbiBRaChhLGIsYyl7aWYoMCE9PWIubGVuZ3RoKXtmb3IodmFyIGQ9W10sZT1bXSxmPUphKGIsZnVuY3Rpb24oYSl7cmV0dXJuIGEueGF9KSxnPTA7ZzxiLmxlbmd0aDtnKyspe3ZhciBrPWJbZ10sbD1WKGMsay5wYXRoKSxuPSExLHU7eShudWxsIT09bCxcInJlcnVuVHJhbnNhY3Rpb25zVW5kZXJOb2RlXzogcmVsYXRpdmVQYXRoIHNob3VsZCBub3QgYmUgbnVsbC5cIik7aWYoNT09PWsuc3RhdHVzKW49ITAsdT1rLiRkLGU9ZS5jb25jYXQoa2goYS5OLGsueGEsITApKTtlbHNlIGlmKDE9PT1rLnN0YXR1cylpZigyNTw9ay54ZiluPSEwLHU9XCJtYXhyZXRyeVwiLGU9ZS5jb25jYXQoa2goYS5OLGsueGEsITApKTtlbHNle3ZhciB4PWEuTi5wYShrLnBhdGgsZil8fE07ay5kZD14O3ZhciBFPWJbZ10udXBkYXRlKHguSSgpKTttKEUpPyhTYihcInRyYW5zYWN0aW9uIGZhaWxlZDogRGF0YSByZXR1cm5lZCBcIixFKSxsPU8oRSksXCJvYmplY3RcIj09PXR5cGVvZiBFJiZudWxsIT1FJiZzKEUsXG5cIi5wcmlvcml0eVwiKXx8KGw9bC5aKHguTCgpKSkseD1rLnhhLEU9Q2goYSksRT1VZihsLEUpLGsuZWQ9bCxrLmZkPUUsay54YT1hLnZkKyssT2EoZix4KSxlPWUuY29uY2F0KGhoKGEuTixrLnBhdGgsRSxrLnhhLGsuVmUpKSxlPWUuY29uY2F0KGtoKGEuTix4LCEwKSkpOihuPSEwLHU9XCJub2RhdGFcIixlPWUuY29uY2F0KGtoKGEuTixrLnhhLCEwKSkpfWhmKGEuJCxjLGUpO2U9W107biYmKGJbZ10uc3RhdHVzPTMsc2V0VGltZW91dChiW2ddLlhkLE1hdGguZmxvb3IoMCkpLGJbZ10uSCYmKFwibm9kYXRhXCI9PT11PyhrPW5ldyBSKGEsYltnXS5wYXRoKSxkLnB1c2gocShiW2ddLkgsbnVsbCxudWxsLCExLG5ldyBEKGJbZ10uZGQsayxMKSkpKTpkLnB1c2gocShiW2ddLkgsbnVsbCxFcnJvcih1KSwhMSxudWxsKSkpKX1NaChhLGEubGMpO2ZvcihnPTA7ZzxkLmxlbmd0aDtnKyspQ2IoZFtnXSk7TGgoYSl9fVxuZnVuY3Rpb24gUGgoYSxiKXtmb3IodmFyIGMsZD1hLmxjO251bGwhPT0oYz1JKGIpKSYmbnVsbD09PWQuemEoKTspZD1VYyhkLGMpLGI9VChiKTtyZXR1cm4gZH1mdW5jdGlvbiBOaChhLGIpe3ZhciBjPVtdO1JoKGEsYixjKTtjLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5xZi1iLnFmfSk7cmV0dXJuIGN9ZnVuY3Rpb24gUmgoYSxiLGMpe3ZhciBkPWIuemEoKTtpZihudWxsIT09ZClmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyljLnB1c2goZFtlXSk7Yi5VKGZ1bmN0aW9uKGIpe1JoKGEsYixjKX0pfWZ1bmN0aW9uIE1oKGEsYil7dmFyIGM9Yi56YSgpO2lmKGMpe2Zvcih2YXIgZD0wLGU9MDtlPGMubGVuZ3RoO2UrKykzIT09Y1tlXS5zdGF0dXMmJihjW2RdPWNbZV0sZCsrKTtjLmxlbmd0aD1kO1ZjKGIsMDxjLmxlbmd0aD9jOm51bGwpfWIuVShmdW5jdGlvbihiKXtNaChhLGIpfSl9XG5mdW5jdGlvbiBHaChhLGIpe3ZhciBjPVBoKGEsYikucGF0aCgpLGQ9VWMoYS5sYyxiKTtZYyhkLGZ1bmN0aW9uKGIpe1NoKGEsYil9KTtTaChhLGQpO1hjKGQsZnVuY3Rpb24oYil7U2goYSxiKX0pO3JldHVybiBjfVxuZnVuY3Rpb24gU2goYSxiKXt2YXIgYz1iLnphKCk7aWYobnVsbCE9PWMpe2Zvcih2YXIgZD1bXSxlPVtdLGY9LTEsZz0wO2c8Yy5sZW5ndGg7ZysrKTQhPT1jW2ddLnN0YXR1cyYmKDI9PT1jW2ddLnN0YXR1cz8oeShmPT09Zy0xLFwiQWxsIFNFTlQgaXRlbXMgc2hvdWxkIGJlIGF0IGJlZ2lubmluZyBvZiBxdWV1ZS5cIiksZj1nLGNbZ10uc3RhdHVzPTQsY1tnXS4kZD1cInNldFwiKTooeSgxPT09Y1tnXS5zdGF0dXMsXCJVbmV4cGVjdGVkIHRyYW5zYWN0aW9uIHN0YXR1cyBpbiBhYm9ydFwiKSxjW2ddLlhkKCksZT1lLmNvbmNhdChraChhLk4sY1tnXS54YSwhMCkpLGNbZ10uSCYmZC5wdXNoKHEoY1tnXS5ILG51bGwsRXJyb3IoXCJzZXRcIiksITEsbnVsbCkpKSk7LTE9PT1mP1ZjKGIsbnVsbCk6Yy5sZW5ndGg9ZisxO2hmKGEuJCxiLnBhdGgoKSxlKTtmb3IoZz0wO2c8ZC5sZW5ndGg7ZysrKUNiKGRbZ10pfX07ZnVuY3Rpb24gVGgoKXt0aGlzLmVjPXt9fWNhKFRoKTtUaC5wcm90b3R5cGUucGI9ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gdGhpcy5lYyl0aGlzLmVjW2FdLnBiKCl9O1RoLnByb3RvdHlwZS5pbnRlcnJ1cHQ9VGgucHJvdG90eXBlLnBiO1RoLnByb3RvdHlwZS5oYz1mdW5jdGlvbigpe2Zvcih2YXIgYSBpbiB0aGlzLmVjKXRoaXMuZWNbYV0uaGMoKX07VGgucHJvdG90eXBlLnJlc3VtZT1UaC5wcm90b3R5cGUuaGM7ZnVuY3Rpb24gVWgoYSl7dmFyIGI9dGhpczt0aGlzLnJjPWE7dGhpcy5TZD1cIipcIjt4ZigpP3RoaXMuSGM9dGhpcy5vZD1vZigpOih0aGlzLkhjPXdpbmRvdy5vcGVuZXIsdGhpcy5vZD13aW5kb3cpO2lmKCFiLkhjKXRocm93XCJVbmFibGUgdG8gZmluZCByZWxheSBmcmFtZVwiO3BmKHRoaXMub2QsXCJtZXNzYWdlXCIscSh0aGlzLiRiLHRoaXMpKTtwZih0aGlzLm9kLFwibWVzc2FnZVwiLHEodGhpcy5uZix0aGlzKSk7dHJ5e1ZoKHRoaXMse2E6XCJyZWFkeVwifSl9Y2F0Y2goYyl7cGYodGhpcy5IYyxcImxvYWRcIixmdW5jdGlvbigpe1ZoKGIse2E6XCJyZWFkeVwifSl9KX1wZih3aW5kb3csXCJ1bmxvYWRcIixxKHRoaXMuamcsdGhpcykpfWZ1bmN0aW9uIFZoKGEsYil7Yj1yKGIpO3hmKCk/YS5IYy5kb1Bvc3QoYixhLlNkKTphLkhjLnBvc3RNZXNzYWdlKGIsYS5TZCl9XG5VaC5wcm90b3R5cGUuJGI9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjO3RyeXtjPXRhKGEuZGF0YSl9Y2F0Y2goZCl7fWMmJlwicmVxdWVzdFwiPT09Yy5hJiYocWYod2luZG93LFwibWVzc2FnZVwiLHRoaXMuJGIpLHRoaXMuU2Q9YS5vcmlnaW4sdGhpcy5yYyYmc2V0VGltZW91dChmdW5jdGlvbigpe2IucmMoYi5TZCxjLmQsZnVuY3Rpb24oYSxjKXtiLk1mPSFjO2IucmM9dm9pZCAwO1ZoKGIse2E6XCJyZXNwb25zZVwiLGQ6YSxmb3JjZUtlZXBXaW5kb3dPcGVuOmN9KX0pfSwwKSl9O1VoLnByb3RvdHlwZS5qZz1mdW5jdGlvbigpe3RyeXtxZih0aGlzLm9kLFwibWVzc2FnZVwiLHRoaXMubmYpfWNhdGNoKGEpe310aGlzLnJjJiYoVmgodGhpcyx7YTpcImVycm9yXCIsZDpcInVua25vd24gY2xvc2VkIHdpbmRvd1wifSksdGhpcy5yYz12b2lkIDApO3RyeXt3aW5kb3cuY2xvc2UoKX1jYXRjaChiKXt9fTtVaC5wcm90b3R5cGUubmY9ZnVuY3Rpb24oYSl7aWYodGhpcy5NZiYmXCJkaWVcIj09PWEuZGF0YSl0cnl7d2luZG93LmNsb3NlKCl9Y2F0Y2goYil7fX07dmFyIFk9e1hmOmZ1bmN0aW9uKCl7amU9YWU9ITB9fTtZLmZvcmNlTG9uZ1BvbGxpbmc9WS5YZjtZLllmPWZ1bmN0aW9uKCl7a2U9ITB9O1kuZm9yY2VXZWJTb2NrZXRzPVkuWWY7WS53Zz1mdW5jdGlvbihhLGIpe2Euay5TLk9lPWJ9O1kuc2V0U2VjdXJpdHlEZWJ1Z0NhbGxiYWNrPVkud2c7WS5RZT1mdW5jdGlvbihhLGIpe2Euay5RZShiKX07WS5zdGF0cz1ZLlFlO1kuUmU9ZnVuY3Rpb24oYSxiKXthLmsuUmUoYil9O1kuc3RhdHNJbmNyZW1lbnRDb3VudGVyPVkuUmU7WS5nZD1mdW5jdGlvbihhKXtyZXR1cm4gYS5rLmdkfTtZLmRhdGFVcGRhdGVDb3VudD1ZLmdkO1kuYWc9ZnVuY3Rpb24oYSxiKXthLmsudGU9Yn07WS5pbnRlcmNlcHRTZXJ2ZXJEYXRhPVkuYWc7WS5nZz1mdW5jdGlvbihhKXtuZXcgVWgoYSl9O1kub25Qb3B1cE9wZW49WS5nZztZLnVnPWZ1bmN0aW9uKGEpe2pmPWF9O1kuc2V0QXV0aGVudGljYXRpb25TZXJ2ZXI9WS51ZztmdW5jdGlvbiBaKGEsYil7dGhpcy5SYz1hO3RoaXMuRWE9Yn1aLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24oYSl7RihcIkZpcmViYXNlLm9uRGlzY29ubmVjdCgpLmNhbmNlbFwiLDAsMSxhcmd1bWVudHMubGVuZ3RoKTtIKFwiRmlyZWJhc2Uub25EaXNjb25uZWN0KCkuY2FuY2VsXCIsMSxhLCEwKTt0aGlzLlJjLkZlKHRoaXMuRWEsYXx8bnVsbCl9O1oucHJvdG90eXBlLmNhbmNlbD1aLnByb3RvdHlwZS5jYW5jZWw7Wi5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGEpe0YoXCJGaXJlYmFzZS5vbkRpc2Nvbm5lY3QoKS5yZW1vdmVcIiwwLDEsYXJndW1lbnRzLmxlbmd0aCk7WmIoXCJGaXJlYmFzZS5vbkRpc2Nvbm5lY3QoKS5yZW1vdmVcIix0aGlzLkVhKTtIKFwiRmlyZWJhc2Uub25EaXNjb25uZWN0KCkucmVtb3ZlXCIsMSxhLCEwKTtIaCh0aGlzLlJjLHRoaXMuRWEsbnVsbCxhKX07Wi5wcm90b3R5cGUucmVtb3ZlPVoucHJvdG90eXBlLnJlbW92ZTtcbloucHJvdG90eXBlLnNldD1mdW5jdGlvbihhLGIpe0YoXCJGaXJlYmFzZS5vbkRpc2Nvbm5lY3QoKS5zZXRcIiwxLDIsYXJndW1lbnRzLmxlbmd0aCk7WmIoXCJGaXJlYmFzZS5vbkRpc2Nvbm5lY3QoKS5zZXRcIix0aGlzLkVhKTtSYihcIkZpcmViYXNlLm9uRGlzY29ubmVjdCgpLnNldFwiLGEsITEpO0goXCJGaXJlYmFzZS5vbkRpc2Nvbm5lY3QoKS5zZXRcIiwyLGIsITApO0hoKHRoaXMuUmMsdGhpcy5FYSxhLGIpfTtaLnByb3RvdHlwZS5zZXQ9Wi5wcm90b3R5cGUuc2V0O1xuWi5wcm90b3R5cGUuQmI9ZnVuY3Rpb24oYSxiLGMpe0YoXCJGaXJlYmFzZS5vbkRpc2Nvbm5lY3QoKS5zZXRXaXRoUHJpb3JpdHlcIiwyLDMsYXJndW1lbnRzLmxlbmd0aCk7WmIoXCJGaXJlYmFzZS5vbkRpc2Nvbm5lY3QoKS5zZXRXaXRoUHJpb3JpdHlcIix0aGlzLkVhKTtSYihcIkZpcmViYXNlLm9uRGlzY29ubmVjdCgpLnNldFdpdGhQcmlvcml0eVwiLGEsITEpO1ZiKFwiRmlyZWJhc2Uub25EaXNjb25uZWN0KCkuc2V0V2l0aFByaW9yaXR5XCIsMixiKTtIKFwiRmlyZWJhc2Uub25EaXNjb25uZWN0KCkuc2V0V2l0aFByaW9yaXR5XCIsMyxjLCEwKTtJaCh0aGlzLlJjLHRoaXMuRWEsYSxiLGMpfTtaLnByb3RvdHlwZS5zZXRXaXRoUHJpb3JpdHk9Wi5wcm90b3R5cGUuQmI7XG5aLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oYSxiKXtGKFwiRmlyZWJhc2Uub25EaXNjb25uZWN0KCkudXBkYXRlXCIsMSwyLGFyZ3VtZW50cy5sZW5ndGgpO1piKFwiRmlyZWJhc2Uub25EaXNjb25uZWN0KCkudXBkYXRlXCIsdGhpcy5FYSk7aWYoZWEoYSkpe2Zvcih2YXIgYz17fSxkPTA7ZDxhLmxlbmd0aDsrK2QpY1tcIlwiK2RdPWFbZF07YT1jO3ooXCJQYXNzaW5nIGFuIEFycmF5IHRvIEZpcmViYXNlLm9uRGlzY29ubmVjdCgpLnVwZGF0ZSgpIGlzIGRlcHJlY2F0ZWQuIFVzZSBzZXQoKSBpZiB5b3Ugd2FudCB0byBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIGRhdGEsIG9yIGFuIE9iamVjdCB3aXRoIGludGVnZXIga2V5cyBpZiB5b3UgcmVhbGx5IGRvIHdhbnQgdG8gb25seSB1cGRhdGUgc29tZSBvZiB0aGUgY2hpbGRyZW4uXCIpfVViKFwiRmlyZWJhc2Uub25EaXNjb25uZWN0KCkudXBkYXRlXCIsYSk7SChcIkZpcmViYXNlLm9uRGlzY29ubmVjdCgpLnVwZGF0ZVwiLDIsYiwhMCk7SmgodGhpcy5SYyxcbnRoaXMuRWEsYSxiKX07Wi5wcm90b3R5cGUudXBkYXRlPVoucHJvdG90eXBlLnVwZGF0ZTt2YXIgJD17fTskLm5jPUplOyQuRGF0YUNvbm5lY3Rpb249JC5uYztKZS5wcm90b3R5cGUueWc9ZnVuY3Rpb24oYSxiKXt0aGlzLkNhKFwicVwiLHtwOmF9LGIpfTskLm5jLnByb3RvdHlwZS5zaW1wbGVMaXN0ZW49JC5uYy5wcm90b3R5cGUueWc7SmUucHJvdG90eXBlLlNmPWZ1bmN0aW9uKGEsYil7dGhpcy5DYShcImVjaG9cIix7ZDphfSxiKX07JC5uYy5wcm90b3R5cGUuZWNobz0kLm5jLnByb3RvdHlwZS5TZjtKZS5wcm90b3R5cGUuaW50ZXJydXB0PUplLnByb3RvdHlwZS5wYjskLkRmPXVlOyQuUmVhbFRpbWVDb25uZWN0aW9uPSQuRGY7dWUucHJvdG90eXBlLnNlbmRSZXF1ZXN0PXVlLnByb3RvdHlwZS5DYTt1ZS5wcm90b3R5cGUuY2xvc2U9dWUucHJvdG90eXBlLmNsb3NlO1xuJC4kZj1mdW5jdGlvbihhKXt2YXIgYj1KZS5wcm90b3R5cGUucHV0O0plLnByb3RvdHlwZS5wdXQ9ZnVuY3Rpb24oYyxkLGUsZil7bShmKSYmKGY9YSgpKTtiLmNhbGwodGhpcyxjLGQsZSxmKX07cmV0dXJuIGZ1bmN0aW9uKCl7SmUucHJvdG90eXBlLnB1dD1ifX07JC5oaWphY2tIYXNoPSQuJGY7JC5DZj1BYTskLkNvbm5lY3Rpb25UYXJnZXQ9JC5DZjskLkZhPWZ1bmN0aW9uKGEpe3JldHVybiBhLkZhKCl9OyQucXVlcnlJZGVudGlmaWVyPSQuRmE7JC5iZz1mdW5jdGlvbihhKXtyZXR1cm4gYS5rLlMuQWF9OyQubGlzdGVucz0kLmJnO3ZhciBXaD1mdW5jdGlvbigpe3ZhciBhPTAsYj1bXTtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9Yz09PWE7YT1jO2Zvcih2YXIgZT1BcnJheSg4KSxmPTc7MDw9ZjtmLS0pZVtmXT1cIi0wMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpfYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIi5jaGFyQXQoYyU2NCksYz1NYXRoLmZsb29yKGMvNjQpO3koMD09PWMsXCJDYW5ub3QgcHVzaCBhdCB0aW1lID09IDBcIik7Yz1lLmpvaW4oXCJcIik7aWYoZCl7Zm9yKGY9MTE7MDw9ZiYmNjM9PT1iW2ZdO2YtLSliW2ZdPTA7YltmXSsrfWVsc2UgZm9yKGY9MDsxMj5mO2YrKyliW2ZdPU1hdGguZmxvb3IoNjQqTWF0aC5yYW5kb20oKSk7Zm9yKGY9MDsxMj5mO2YrKyljKz1cIi0wMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpfYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIi5jaGFyQXQoYltmXSk7eSgyMD09PWMubGVuZ3RoLFwiTmV4dFB1c2hJZDogTGVuZ3RoIHNob3VsZCBiZSAyMC5cIik7XG5yZXR1cm4gY319KCk7ZnVuY3Rpb24gUihhLGIpe3ZhciBjLGQsZTtpZihhIGluc3RhbmNlb2YgemgpYz1hLGQ9YjtlbHNle0YoXCJuZXcgRmlyZWJhc2VcIiwxLDIsYXJndW1lbnRzLmxlbmd0aCk7ZD1yYihhcmd1bWVudHNbMF0pO2M9ZC5BZztcImZpcmViYXNlXCI9PT1kLmRvbWFpbiYmcWIoZC5ob3N0K1wiIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQuIFBsZWFzZSB1c2UgPFlPVVIgRklSRUJBU0U+LmZpcmViYXNlaW8uY29tIGluc3RlYWRcIik7Y3x8cWIoXCJDYW5ub3QgcGFyc2UgRmlyZWJhc2UgdXJsLiBQbGVhc2UgdXNlIGh0dHBzOi8vPFlPVVIgRklSRUJBU0U+LmZpcmViYXNlaW8uY29tXCIpO2QuQWJ8fFwidW5kZWZpbmVkXCIhPT10eXBlb2Ygd2luZG93JiZ3aW5kb3cubG9jYXRpb24mJndpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCYmLTEhPT13aW5kb3cubG9jYXRpb24ucHJvdG9jb2wuaW5kZXhPZihcImh0dHBzOlwiKSYmeihcIkluc2VjdXJlIEZpcmViYXNlIGFjY2VzcyBmcm9tIGEgc2VjdXJlIHBhZ2UuIFBsZWFzZSB1c2UgaHR0cHMgaW4gY2FsbHMgdG8gbmV3IEZpcmViYXNlKCkuXCIpO1xuYz1uZXcgQWEoZC5ob3N0LGQuQWIsYyxcIndzXCI9PT1kLnNjaGVtZXx8XCJ3c3NcIj09PWQuc2NoZW1lKTtkPW5ldyBTKGQuUGMpO2U9ZC50b1N0cmluZygpO3ZhciBmOyEoZj0hcChjLmhvc3QpfHwwPT09Yy5ob3N0Lmxlbmd0aHx8IVBiKGMudGIpKSYmKGY9MCE9PWUubGVuZ3RoKSYmKGUmJihlPWUucmVwbGFjZSgvXlxcLypcXC5pbmZvKFxcL3wkKS8sXCIvXCIpKSxmPSEocChlKSYmMCE9PWUubGVuZ3RoJiYhT2IudGVzdChlKSkpO2lmKGYpdGhyb3cgRXJyb3IoRyhcIm5ldyBGaXJlYmFzZVwiLDEsITEpKydtdXN0IGJlIGEgdmFsaWQgZmlyZWJhc2UgVVJMIGFuZCB0aGUgcGF0aCBjYW5cXCd0IGNvbnRhaW4gXCIuXCIsIFwiI1wiLCBcIiRcIiwgXCJbXCIsIG9yIFwiXVwiLicpO2lmKGIpaWYoYiBpbnN0YW5jZW9mIFRoKWU9YjtlbHNlIGlmKHAoYikpZT1UaC5OYigpLGMuRGQ9YjtlbHNlIHRocm93IEVycm9yKFwiRXhwZWN0ZWQgYSB2YWxpZCBGaXJlYmFzZS5Db250ZXh0IGZvciBzZWNvbmQgYXJndW1lbnQgdG8gbmV3IEZpcmViYXNlKClcIik7XG5lbHNlIGU9VGguTmIoKTtmPWMudG9TdHJpbmcoKTt2YXIgZz10KGUuZWMsZik7Z3x8KGc9bmV3IHpoKGMpLGUuZWNbZl09Zyk7Yz1nfVEuY2FsbCh0aGlzLGMsZCxGYywhMSl9bWEoUixRKTt2YXIgWGg9UixZaD1bXCJGaXJlYmFzZVwiXSxaaD1hYTtZaFswXWluIFpofHwhWmguZXhlY1NjcmlwdHx8WmguZXhlY1NjcmlwdChcInZhciBcIitZaFswXSk7Zm9yKHZhciAkaDtZaC5sZW5ndGgmJigkaD1ZaC5zaGlmdCgpKTspIVloLmxlbmd0aCYmbShYaCk/WmhbJGhdPVhoOlpoPVpoWyRoXT9aaFskaF06WmhbJGhdPXt9O1IucHJvdG90eXBlLm5hbWU9ZnVuY3Rpb24oKXt6KFwiRmlyZWJhc2UubmFtZSgpIGJlaW5nIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgRmlyZWJhc2Uua2V5KCkgaW5zdGVhZC5cIik7RihcIkZpcmViYXNlLm5hbWVcIiwwLDAsYXJndW1lbnRzLmxlbmd0aCk7cmV0dXJuIHRoaXMua2V5KCl9O1IucHJvdG90eXBlLm5hbWU9Ui5wcm90b3R5cGUubmFtZTtcblIucHJvdG90eXBlLmtleT1mdW5jdGlvbigpe0YoXCJGaXJlYmFzZS5rZXlcIiwwLDAsYXJndW1lbnRzLmxlbmd0aCk7cmV0dXJuIHRoaXMucGF0aC5lKCk/bnVsbDpSYyh0aGlzLnBhdGgpfTtSLnByb3RvdHlwZS5rZXk9Ui5wcm90b3R5cGUua2V5O1IucHJvdG90eXBlLm89ZnVuY3Rpb24oYSl7RihcIkZpcmViYXNlLmNoaWxkXCIsMSwxLGFyZ3VtZW50cy5sZW5ndGgpO2lmKGdhKGEpKWE9U3RyaW5nKGEpO2Vsc2UgaWYoIShhIGluc3RhbmNlb2YgUykpaWYobnVsbD09PUkodGhpcy5wYXRoKSl7dmFyIGI9YTtiJiYoYj1iLnJlcGxhY2UoL15cXC8qXFwuaW5mbyhcXC98JCkvLFwiL1wiKSk7WWIoXCJGaXJlYmFzZS5jaGlsZFwiLGIpfWVsc2UgWWIoXCJGaXJlYmFzZS5jaGlsZFwiLGEpO3JldHVybiBuZXcgUih0aGlzLmssdGhpcy5wYXRoLm8oYSkpfTtSLnByb3RvdHlwZS5jaGlsZD1SLnByb3RvdHlwZS5vO1xuUi5wcm90b3R5cGUucGFyZW50PWZ1bmN0aW9uKCl7RihcIkZpcmViYXNlLnBhcmVudFwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKTt2YXIgYT10aGlzLnBhdGgucGFyZW50KCk7cmV0dXJuIG51bGw9PT1hP251bGw6bmV3IFIodGhpcy5rLGEpfTtSLnByb3RvdHlwZS5wYXJlbnQ9Ui5wcm90b3R5cGUucGFyZW50O1IucHJvdG90eXBlLnJvb3Q9ZnVuY3Rpb24oKXtGKFwiRmlyZWJhc2UucmVmXCIsMCwwLGFyZ3VtZW50cy5sZW5ndGgpO2Zvcih2YXIgYT10aGlzO251bGwhPT1hLnBhcmVudCgpOylhPWEucGFyZW50KCk7cmV0dXJuIGF9O1IucHJvdG90eXBlLnJvb3Q9Ui5wcm90b3R5cGUucm9vdDtcblIucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7RihcIkZpcmViYXNlLnRvU3RyaW5nXCIsMCwwLGFyZ3VtZW50cy5sZW5ndGgpO3ZhciBhO2lmKG51bGw9PT10aGlzLnBhcmVudCgpKWE9dGhpcy5rLnRvU3RyaW5nKCk7ZWxzZXthPXRoaXMucGFyZW50KCkudG9TdHJpbmcoKStcIi9cIjt2YXIgYj10aGlzLmtleSgpO2ErPWVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYikpfXJldHVybiBhfTtSLnByb3RvdHlwZS50b1N0cmluZz1SLnByb3RvdHlwZS50b1N0cmluZztSLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oYSxiKXtGKFwiRmlyZWJhc2Uuc2V0XCIsMSwyLGFyZ3VtZW50cy5sZW5ndGgpO1piKFwiRmlyZWJhc2Uuc2V0XCIsdGhpcy5wYXRoKTtSYihcIkZpcmViYXNlLnNldFwiLGEsITEpO0goXCJGaXJlYmFzZS5zZXRcIiwyLGIsITApO3RoaXMuay5CYih0aGlzLnBhdGgsYSxudWxsLGJ8fG51bGwpfTtSLnByb3RvdHlwZS5zZXQ9Ui5wcm90b3R5cGUuc2V0O1xuUi5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGEsYil7RihcIkZpcmViYXNlLnVwZGF0ZVwiLDEsMixhcmd1bWVudHMubGVuZ3RoKTtaYihcIkZpcmViYXNlLnVwZGF0ZVwiLHRoaXMucGF0aCk7aWYoZWEoYSkpe2Zvcih2YXIgYz17fSxkPTA7ZDxhLmxlbmd0aDsrK2QpY1tcIlwiK2RdPWFbZF07YT1jO3ooXCJQYXNzaW5nIGFuIEFycmF5IHRvIEZpcmViYXNlLnVwZGF0ZSgpIGlzIGRlcHJlY2F0ZWQuIFVzZSBzZXQoKSBpZiB5b3Ugd2FudCB0byBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIGRhdGEsIG9yIGFuIE9iamVjdCB3aXRoIGludGVnZXIga2V5cyBpZiB5b3UgcmVhbGx5IGRvIHdhbnQgdG8gb25seSB1cGRhdGUgc29tZSBvZiB0aGUgY2hpbGRyZW4uXCIpfVViKFwiRmlyZWJhc2UudXBkYXRlXCIsYSk7SChcIkZpcmViYXNlLnVwZGF0ZVwiLDIsYiwhMCk7aWYocyhhLFwiLnByaW9yaXR5XCIpKXRocm93IEVycm9yKFwidXBkYXRlKCkgZG9lcyBub3QgY3VycmVudGx5IHN1cHBvcnQgdXBkYXRpbmcgLnByaW9yaXR5LlwiKTtcbnRoaXMuay51cGRhdGUodGhpcy5wYXRoLGEsYnx8bnVsbCl9O1IucHJvdG90eXBlLnVwZGF0ZT1SLnByb3RvdHlwZS51cGRhdGU7Ui5wcm90b3R5cGUuQmI9ZnVuY3Rpb24oYSxiLGMpe0YoXCJGaXJlYmFzZS5zZXRXaXRoUHJpb3JpdHlcIiwyLDMsYXJndW1lbnRzLmxlbmd0aCk7WmIoXCJGaXJlYmFzZS5zZXRXaXRoUHJpb3JpdHlcIix0aGlzLnBhdGgpO1JiKFwiRmlyZWJhc2Uuc2V0V2l0aFByaW9yaXR5XCIsYSwhMSk7VmIoXCJGaXJlYmFzZS5zZXRXaXRoUHJpb3JpdHlcIiwyLGIpO0goXCJGaXJlYmFzZS5zZXRXaXRoUHJpb3JpdHlcIiwzLGMsITApO2lmKFwiLmxlbmd0aFwiPT09dGhpcy5rZXkoKXx8XCIua2V5c1wiPT09dGhpcy5rZXkoKSl0aHJvd1wiRmlyZWJhc2Uuc2V0V2l0aFByaW9yaXR5IGZhaWxlZDogXCIrdGhpcy5rZXkoKStcIiBpcyBhIHJlYWQtb25seSBvYmplY3QuXCI7dGhpcy5rLkJiKHRoaXMucGF0aCxhLGIsY3x8bnVsbCl9O1IucHJvdG90eXBlLnNldFdpdGhQcmlvcml0eT1SLnByb3RvdHlwZS5CYjtcblIucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihhKXtGKFwiRmlyZWJhc2UucmVtb3ZlXCIsMCwxLGFyZ3VtZW50cy5sZW5ndGgpO1piKFwiRmlyZWJhc2UucmVtb3ZlXCIsdGhpcy5wYXRoKTtIKFwiRmlyZWJhc2UucmVtb3ZlXCIsMSxhLCEwKTt0aGlzLnNldChudWxsLGEpfTtSLnByb3RvdHlwZS5yZW1vdmU9Ui5wcm90b3R5cGUucmVtb3ZlO1xuUi5wcm90b3R5cGUudHJhbnNhY3Rpb249ZnVuY3Rpb24oYSxiLGMpe0YoXCJGaXJlYmFzZS50cmFuc2FjdGlvblwiLDEsMyxhcmd1bWVudHMubGVuZ3RoKTtaYihcIkZpcmViYXNlLnRyYW5zYWN0aW9uXCIsdGhpcy5wYXRoKTtIKFwiRmlyZWJhc2UudHJhbnNhY3Rpb25cIiwxLGEsITEpO0goXCJGaXJlYmFzZS50cmFuc2FjdGlvblwiLDIsYiwhMCk7aWYobShjKSYmXCJib29sZWFuXCIhPXR5cGVvZiBjKXRocm93IEVycm9yKEcoXCJGaXJlYmFzZS50cmFuc2FjdGlvblwiLDMsITApK1wibXVzdCBiZSBhIGJvb2xlYW4uXCIpO2lmKFwiLmxlbmd0aFwiPT09dGhpcy5rZXkoKXx8XCIua2V5c1wiPT09dGhpcy5rZXkoKSl0aHJvd1wiRmlyZWJhc2UudHJhbnNhY3Rpb24gZmFpbGVkOiBcIit0aGlzLmtleSgpK1wiIGlzIGEgcmVhZC1vbmx5IG9iamVjdC5cIjtcInVuZGVmaW5lZFwiPT09dHlwZW9mIGMmJihjPSEwKTtLaCh0aGlzLmssdGhpcy5wYXRoLGEsYnx8bnVsbCxjKX07Ui5wcm90b3R5cGUudHJhbnNhY3Rpb249Ui5wcm90b3R5cGUudHJhbnNhY3Rpb247XG5SLnByb3RvdHlwZS52Zz1mdW5jdGlvbihhLGIpe0YoXCJGaXJlYmFzZS5zZXRQcmlvcml0eVwiLDEsMixhcmd1bWVudHMubGVuZ3RoKTtaYihcIkZpcmViYXNlLnNldFByaW9yaXR5XCIsdGhpcy5wYXRoKTtWYihcIkZpcmViYXNlLnNldFByaW9yaXR5XCIsMSxhKTtIKFwiRmlyZWJhc2Uuc2V0UHJpb3JpdHlcIiwyLGIsITApO3RoaXMuay5CYih0aGlzLnBhdGgubyhcIi5wcmlvcml0eVwiKSxhLG51bGwsYil9O1IucHJvdG90eXBlLnNldFByaW9yaXR5PVIucHJvdG90eXBlLnZnO1IucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oYSxiKXtGKFwiRmlyZWJhc2UucHVzaFwiLDAsMixhcmd1bWVudHMubGVuZ3RoKTtaYihcIkZpcmViYXNlLnB1c2hcIix0aGlzLnBhdGgpO1JiKFwiRmlyZWJhc2UucHVzaFwiLGEsITApO0goXCJGaXJlYmFzZS5wdXNoXCIsMixiLCEwKTt2YXIgYz1CaCh0aGlzLmspLGM9V2goYyksYz10aGlzLm8oYyk7XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBhJiZudWxsIT09YSYmYy5zZXQoYSxiKTtyZXR1cm4gY307XG5SLnByb3RvdHlwZS5wdXNoPVIucHJvdG90eXBlLnB1c2g7Ui5wcm90b3R5cGUuZmI9ZnVuY3Rpb24oKXtaYihcIkZpcmViYXNlLm9uRGlzY29ubmVjdFwiLHRoaXMucGF0aCk7cmV0dXJuIG5ldyBaKHRoaXMuayx0aGlzLnBhdGgpfTtSLnByb3RvdHlwZS5vbkRpc2Nvbm5lY3Q9Ui5wcm90b3R5cGUuZmI7Ui5wcm90b3R5cGUuUT1mdW5jdGlvbihhLGIsYyl7eihcIkZpcmViYXNlUmVmLmF1dGgoKSBiZWluZyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIEZpcmViYXNlUmVmLmF1dGhXaXRoQ3VzdG9tVG9rZW4oKSBpbnN0ZWFkLlwiKTtGKFwiRmlyZWJhc2UuYXV0aFwiLDEsMyxhcmd1bWVudHMubGVuZ3RoKTskYihcIkZpcmViYXNlLmF1dGhcIixhKTtIKFwiRmlyZWJhc2UuYXV0aFwiLDIsYiwhMCk7SChcIkZpcmViYXNlLmF1dGhcIiwzLGIsITApO0xmKHRoaXMuay5RLGEse30se3JlbWVtYmVyOlwibm9uZVwifSxiLGMpfTtSLnByb3RvdHlwZS5hdXRoPVIucHJvdG90eXBlLlE7XG5SLnByb3RvdHlwZS5VZT1mdW5jdGlvbihhKXtGKFwiRmlyZWJhc2UudW5hdXRoXCIsMCwxLGFyZ3VtZW50cy5sZW5ndGgpO0goXCJGaXJlYmFzZS51bmF1dGhcIiwxLGEsITApO01mKHRoaXMuay5RLGEpfTtSLnByb3RvdHlwZS51bmF1dGg9Ui5wcm90b3R5cGUuVWU7Ui5wcm90b3R5cGUubmU9ZnVuY3Rpb24oKXtGKFwiRmlyZWJhc2UuZ2V0QXV0aFwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKTtyZXR1cm4gdGhpcy5rLlEubmUoKX07Ui5wcm90b3R5cGUuZ2V0QXV0aD1SLnByb3RvdHlwZS5uZTtSLnByb3RvdHlwZS5mZz1mdW5jdGlvbihhLGIpe0YoXCJGaXJlYmFzZS5vbkF1dGhcIiwxLDIsYXJndW1lbnRzLmxlbmd0aCk7SChcIkZpcmViYXNlLm9uQXV0aFwiLDEsYSwhMSk7TWIoXCJGaXJlYmFzZS5vbkF1dGhcIiwyLGIpO3RoaXMuay5RLnZiKFwiYXV0aF9zdGF0dXNcIixhLGIpfTtSLnByb3RvdHlwZS5vbkF1dGg9Ui5wcm90b3R5cGUuZmc7XG5SLnByb3RvdHlwZS5lZz1mdW5jdGlvbihhLGIpe0YoXCJGaXJlYmFzZS5vZmZBdXRoXCIsMSwyLGFyZ3VtZW50cy5sZW5ndGgpO0goXCJGaXJlYmFzZS5vZmZBdXRoXCIsMSxhLCExKTtNYihcIkZpcmViYXNlLm9mZkF1dGhcIiwyLGIpO3RoaXMuay5RLlpiKFwiYXV0aF9zdGF0dXNcIixhLGIpfTtSLnByb3RvdHlwZS5vZmZBdXRoPVIucHJvdG90eXBlLmVnO1IucHJvdG90eXBlLkhmPWZ1bmN0aW9uKGEsYixjKXtGKFwiRmlyZWJhc2UuYXV0aFdpdGhDdXN0b21Ub2tlblwiLDIsMyxhcmd1bWVudHMubGVuZ3RoKTskYihcIkZpcmViYXNlLmF1dGhXaXRoQ3VzdG9tVG9rZW5cIixhKTtIKFwiRmlyZWJhc2UuYXV0aFdpdGhDdXN0b21Ub2tlblwiLDIsYiwhMSk7SihcIkZpcmViYXNlLmF1dGhXaXRoQ3VzdG9tVG9rZW5cIiwzLGMsITApO0xmKHRoaXMuay5RLGEse30sY3x8e30sYil9O1IucHJvdG90eXBlLmF1dGhXaXRoQ3VzdG9tVG9rZW49Ui5wcm90b3R5cGUuSGY7XG5SLnByb3RvdHlwZS5JZj1mdW5jdGlvbihhLGIsYyl7RihcIkZpcmViYXNlLmF1dGhXaXRoT0F1dGhQb3B1cFwiLDIsMyxhcmd1bWVudHMubGVuZ3RoKTthYyhcIkZpcmViYXNlLmF1dGhXaXRoT0F1dGhQb3B1cFwiLDEsYSk7SChcIkZpcmViYXNlLmF1dGhXaXRoT0F1dGhQb3B1cFwiLDIsYiwhMSk7SihcIkZpcmViYXNlLmF1dGhXaXRoT0F1dGhQb3B1cFwiLDMsYywhMCk7UWYodGhpcy5rLlEsYSxjLGIpfTtSLnByb3RvdHlwZS5hdXRoV2l0aE9BdXRoUG9wdXA9Ui5wcm90b3R5cGUuSWY7XG5SLnByb3RvdHlwZS5KZj1mdW5jdGlvbihhLGIsYyl7RihcIkZpcmViYXNlLmF1dGhXaXRoT0F1dGhSZWRpcmVjdFwiLDIsMyxhcmd1bWVudHMubGVuZ3RoKTthYyhcIkZpcmViYXNlLmF1dGhXaXRoT0F1dGhSZWRpcmVjdFwiLDEsYSk7SChcIkZpcmViYXNlLmF1dGhXaXRoT0F1dGhSZWRpcmVjdFwiLDIsYiwhMSk7SihcIkZpcmViYXNlLmF1dGhXaXRoT0F1dGhSZWRpcmVjdFwiLDMsYywhMCk7dmFyIGQ9dGhpcy5rLlE7T2YoZCk7dmFyIGU9W0VmXSxmPW1mKGMpO1wiYW5vbnltb3VzXCI9PT1hfHxcImZpcmViYXNlXCI9PT1hP0IoYixYKFwiVFJBTlNQT1JUX1VOQVZBSUxBQkxFXCIpKToodi5zZXQoXCJyZWRpcmVjdF9jbGllbnRfb3B0aW9uc1wiLGYuY2QpLFBmKGQsZSxcIi9hdXRoL1wiK2EsZixiKSl9O1IucHJvdG90eXBlLmF1dGhXaXRoT0F1dGhSZWRpcmVjdD1SLnByb3RvdHlwZS5KZjtcblIucHJvdG90eXBlLktmPWZ1bmN0aW9uKGEsYixjLGQpe0YoXCJGaXJlYmFzZS5hdXRoV2l0aE9BdXRoVG9rZW5cIiwzLDQsYXJndW1lbnRzLmxlbmd0aCk7YWMoXCJGaXJlYmFzZS5hdXRoV2l0aE9BdXRoVG9rZW5cIiwxLGEpO0goXCJGaXJlYmFzZS5hdXRoV2l0aE9BdXRoVG9rZW5cIiwzLGMsITEpO0ooXCJGaXJlYmFzZS5hdXRoV2l0aE9BdXRoVG9rZW5cIiw0LGQsITApO3AoYik/KGFjKFwiRmlyZWJhc2UuYXV0aFdpdGhPQXV0aFRva2VuXCIsMixiKSxOZih0aGlzLmsuUSxhK1wiL3Rva2VuXCIse2FjY2Vzc190b2tlbjpifSxkLGMpKTooSihcIkZpcmViYXNlLmF1dGhXaXRoT0F1dGhUb2tlblwiLDIsYiwhMSksTmYodGhpcy5rLlEsYStcIi90b2tlblwiLGIsZCxjKSl9O1IucHJvdG90eXBlLmF1dGhXaXRoT0F1dGhUb2tlbj1SLnByb3RvdHlwZS5LZjtcblIucHJvdG90eXBlLkdmPWZ1bmN0aW9uKGEsYil7RihcIkZpcmViYXNlLmF1dGhBbm9ueW1vdXNseVwiLDEsMixhcmd1bWVudHMubGVuZ3RoKTtIKFwiRmlyZWJhc2UuYXV0aEFub255bW91c2x5XCIsMSxhLCExKTtKKFwiRmlyZWJhc2UuYXV0aEFub255bW91c2x5XCIsMixiLCEwKTtOZih0aGlzLmsuUSxcImFub255bW91c1wiLHt9LGIsYSl9O1IucHJvdG90eXBlLmF1dGhBbm9ueW1vdXNseT1SLnByb3RvdHlwZS5HZjtcblIucHJvdG90eXBlLkxmPWZ1bmN0aW9uKGEsYixjKXtGKFwiRmlyZWJhc2UuYXV0aFdpdGhQYXNzd29yZFwiLDIsMyxhcmd1bWVudHMubGVuZ3RoKTtKKFwiRmlyZWJhc2UuYXV0aFdpdGhQYXNzd29yZFwiLDEsYSwhMSk7SyhcIkZpcmViYXNlLmF1dGhXaXRoUGFzc3dvcmRcIixhLFwiZW1haWxcIik7SyhcIkZpcmViYXNlLmF1dGhXaXRoUGFzc3dvcmRcIixhLFwicGFzc3dvcmRcIik7SChcIkZpcmViYXNlLmF1dGhBbm9ueW1vdXNseVwiLDIsYiwhMSk7SihcIkZpcmViYXNlLmF1dGhBbm9ueW1vdXNseVwiLDMsYywhMCk7TmYodGhpcy5rLlEsXCJwYXNzd29yZFwiLGEsYyxiKX07Ui5wcm90b3R5cGUuYXV0aFdpdGhQYXNzd29yZD1SLnByb3RvdHlwZS5MZjtcblIucHJvdG90eXBlLmplPWZ1bmN0aW9uKGEsYil7RihcIkZpcmViYXNlLmNyZWF0ZVVzZXJcIiwyLDIsYXJndW1lbnRzLmxlbmd0aCk7SihcIkZpcmViYXNlLmNyZWF0ZVVzZXJcIiwxLGEsITEpO0soXCJGaXJlYmFzZS5jcmVhdGVVc2VyXCIsYSxcImVtYWlsXCIpO0soXCJGaXJlYmFzZS5jcmVhdGVVc2VyXCIsYSxcInBhc3N3b3JkXCIpO0goXCJGaXJlYmFzZS5jcmVhdGVVc2VyXCIsMixiLCExKTt0aGlzLmsuUS5qZShhLGIpfTtSLnByb3RvdHlwZS5jcmVhdGVVc2VyPVIucHJvdG90eXBlLmplO1IucHJvdG90eXBlLkxlPWZ1bmN0aW9uKGEsYil7RihcIkZpcmViYXNlLnJlbW92ZVVzZXJcIiwyLDIsYXJndW1lbnRzLmxlbmd0aCk7SihcIkZpcmViYXNlLnJlbW92ZVVzZXJcIiwxLGEsITEpO0soXCJGaXJlYmFzZS5yZW1vdmVVc2VyXCIsYSxcImVtYWlsXCIpO0soXCJGaXJlYmFzZS5yZW1vdmVVc2VyXCIsYSxcInBhc3N3b3JkXCIpO0goXCJGaXJlYmFzZS5yZW1vdmVVc2VyXCIsMixiLCExKTt0aGlzLmsuUS5MZShhLGIpfTtcblIucHJvdG90eXBlLnJlbW92ZVVzZXI9Ui5wcm90b3R5cGUuTGU7Ui5wcm90b3R5cGUuZWU9ZnVuY3Rpb24oYSxiKXtGKFwiRmlyZWJhc2UuY2hhbmdlUGFzc3dvcmRcIiwyLDIsYXJndW1lbnRzLmxlbmd0aCk7SihcIkZpcmViYXNlLmNoYW5nZVBhc3N3b3JkXCIsMSxhLCExKTtLKFwiRmlyZWJhc2UuY2hhbmdlUGFzc3dvcmRcIixhLFwiZW1haWxcIik7SyhcIkZpcmViYXNlLmNoYW5nZVBhc3N3b3JkXCIsYSxcIm9sZFBhc3N3b3JkXCIpO0soXCJGaXJlYmFzZS5jaGFuZ2VQYXNzd29yZFwiLGEsXCJuZXdQYXNzd29yZFwiKTtIKFwiRmlyZWJhc2UuY2hhbmdlUGFzc3dvcmRcIiwyLGIsITEpO3RoaXMuay5RLmVlKGEsYil9O1IucHJvdG90eXBlLmNoYW5nZVBhc3N3b3JkPVIucHJvdG90eXBlLmVlO1xuUi5wcm90b3R5cGUuZGU9ZnVuY3Rpb24oYSxiKXtGKFwiRmlyZWJhc2UuY2hhbmdlRW1haWxcIiwyLDIsYXJndW1lbnRzLmxlbmd0aCk7SihcIkZpcmViYXNlLmNoYW5nZUVtYWlsXCIsMSxhLCExKTtLKFwiRmlyZWJhc2UuY2hhbmdlRW1haWxcIixhLFwib2xkRW1haWxcIik7SyhcIkZpcmViYXNlLmNoYW5nZUVtYWlsXCIsYSxcIm5ld0VtYWlsXCIpO0soXCJGaXJlYmFzZS5jaGFuZ2VFbWFpbFwiLGEsXCJwYXNzd29yZFwiKTtIKFwiRmlyZWJhc2UuY2hhbmdlRW1haWxcIiwyLGIsITEpO3RoaXMuay5RLmRlKGEsYil9O1IucHJvdG90eXBlLmNoYW5nZUVtYWlsPVIucHJvdG90eXBlLmRlO1xuUi5wcm90b3R5cGUuTWU9ZnVuY3Rpb24oYSxiKXtGKFwiRmlyZWJhc2UucmVzZXRQYXNzd29yZFwiLDIsMixhcmd1bWVudHMubGVuZ3RoKTtKKFwiRmlyZWJhc2UucmVzZXRQYXNzd29yZFwiLDEsYSwhMSk7SyhcIkZpcmViYXNlLnJlc2V0UGFzc3dvcmRcIixhLFwiZW1haWxcIik7SChcIkZpcmViYXNlLnJlc2V0UGFzc3dvcmRcIiwyLGIsITEpO3RoaXMuay5RLk1lKGEsYil9O1IucHJvdG90eXBlLnJlc2V0UGFzc3dvcmQ9Ui5wcm90b3R5cGUuTWU7Ui5nb09mZmxpbmU9ZnVuY3Rpb24oKXtGKFwiRmlyZWJhc2UuZ29PZmZsaW5lXCIsMCwwLGFyZ3VtZW50cy5sZW5ndGgpO1RoLk5iKCkucGIoKX07Ui5nb09ubGluZT1mdW5jdGlvbigpe0YoXCJGaXJlYmFzZS5nb09ubGluZVwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKTtUaC5OYigpLmhjKCl9O1xuZnVuY3Rpb24gbmIoYSxiKXt5KCFifHwhMD09PWF8fCExPT09YSxcIkNhbid0IHR1cm4gb24gY3VzdG9tIGxvZ2dlcnMgcGVyc2lzdGVudGx5LlwiKTshMD09PWE/KFwidW5kZWZpbmVkXCIhPT10eXBlb2YgY29uc29sZSYmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBjb25zb2xlLmxvZz9sYj1xKGNvbnNvbGUubG9nLGNvbnNvbGUpOlwib2JqZWN0XCI9PT10eXBlb2YgY29uc29sZS5sb2cmJihsYj1mdW5jdGlvbihhKXtjb25zb2xlLmxvZyhhKX0pKSxiJiZ2LnNldChcImxvZ2dpbmdfZW5hYmxlZFwiLCEwKSk6YT9sYj1hOihsYj1udWxsLHYucmVtb3ZlKFwibG9nZ2luZ19lbmFibGVkXCIpKX1SLmVuYWJsZUxvZ2dpbmc9bmI7Ui5TZXJ2ZXJWYWx1ZT17VElNRVNUQU1QOntcIi5zdlwiOlwidGltZXN0YW1wXCJ9fTtSLlNES19WRVJTSU9OPVwiMi4xLjJcIjtSLklOVEVSTkFMPVk7Ui5Db250ZXh0PVRoO1IuVEVTVF9BQ0NFU1M9JDt9KSgpO1xubW9kdWxlLmV4cG9ydHMgPSBGaXJlYmFzZTtcbiIsIi8qIVxuICogIGhvd2xlci5qcyB2MS4xLjI1XG4gKiAgaG93bGVyanMuY29tXG4gKlxuICogIChjKSAyMDEzLTIwMTQsIEphbWVzIFNpbXBzb24gb2YgR29sZEZpcmUgU3R1ZGlvc1xuICogIGdvbGRmaXJlc3R1ZGlvcy5jb21cbiAqXG4gKiAgTUlUIExpY2Vuc2VcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG4gIC8vIHNldHVwXG4gIHZhciBjYWNoZSA9IHt9O1xuXG4gIC8vIHNldHVwIHRoZSBhdWRpbyBjb250ZXh0XG4gIHZhciBjdHggPSBudWxsLFxuICAgIHVzaW5nV2ViQXVkaW8gPSB0cnVlLFxuICAgIG5vQXVkaW8gPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICBpZiAodHlwZW9mIEF1ZGlvQ29udGV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGN0eCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB3ZWJraXRBdWRpb0NvbnRleHQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjdHggPSBuZXcgd2Via2l0QXVkaW9Db250ZXh0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVzaW5nV2ViQXVkaW8gPSBmYWxzZTtcbiAgICB9XG4gIH0gY2F0Y2goZSkge1xuICAgIHVzaW5nV2ViQXVkaW8gPSBmYWxzZTtcbiAgfVxuXG4gIGlmICghdXNpbmdXZWJBdWRpbykge1xuICAgIGlmICh0eXBlb2YgQXVkaW8gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0cnkge1xuICAgICAgICBuZXcgQXVkaW8oKTtcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICBub0F1ZGlvID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbm9BdWRpbyA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLy8gY3JlYXRlIGEgbWFzdGVyIGdhaW4gbm9kZVxuICBpZiAodXNpbmdXZWJBdWRpbykge1xuICAgIHZhciBtYXN0ZXJHYWluID0gKHR5cGVvZiBjdHguY3JlYXRlR2FpbiA9PT0gJ3VuZGVmaW5lZCcpID8gY3R4LmNyZWF0ZUdhaW5Ob2RlKCkgOiBjdHguY3JlYXRlR2FpbigpO1xuICAgIG1hc3RlckdhaW4uZ2Fpbi52YWx1ZSA9IDE7XG4gICAgbWFzdGVyR2Fpbi5jb25uZWN0KGN0eC5kZXN0aW5hdGlvbik7XG4gIH1cblxuICAvLyBjcmVhdGUgZ2xvYmFsIGNvbnRyb2xsZXJcbiAgdmFyIEhvd2xlckdsb2JhbCA9IGZ1bmN0aW9uKGNvZGVjcykge1xuICAgIHRoaXMuX3ZvbHVtZSA9IDE7XG4gICAgdGhpcy5fbXV0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLnVzaW5nV2ViQXVkaW8gPSB1c2luZ1dlYkF1ZGlvO1xuICAgIHRoaXMuY3R4ID0gY3R4O1xuICAgIHRoaXMubm9BdWRpbyA9IG5vQXVkaW87XG4gICAgdGhpcy5faG93bHMgPSBbXTtcbiAgICB0aGlzLl9jb2RlY3MgPSBjb2RlY3M7XG4gICAgdGhpcy5pT1NBdXRvRW5hYmxlID0gdHJ1ZTtcbiAgfTtcbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSBnbG9iYWwgdm9sdW1lIGZvciBhbGwgc291bmRzLlxuICAgICAqIEBwYXJhbSAge0Zsb2F0fSB2b2wgVm9sdW1lIGZyb20gMC4wIHRvIDEuMC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXIvRmxvYXR9ICAgICBSZXR1cm5zIHNlbGYgb3IgY3VycmVudCB2b2x1bWUuXG4gICAgICovXG4gICAgdm9sdW1lOiBmdW5jdGlvbih2b2wpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gbWFrZSBzdXJlIHZvbHVtZSBpcyBhIG51bWJlclxuICAgICAgdm9sID0gcGFyc2VGbG9hdCh2b2wpO1xuXG4gICAgICBpZiAodm9sID49IDAgJiYgdm9sIDw9IDEpIHtcbiAgICAgICAgc2VsZi5fdm9sdW1lID0gdm9sO1xuXG4gICAgICAgIGlmICh1c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgICAgbWFzdGVyR2Fpbi5nYWluLnZhbHVlID0gdm9sO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGNhY2hlIGFuZCBjaGFuZ2Ugdm9sdW1lIG9mIGFsbCBub2RlcyB0aGF0IGFyZSB1c2luZyBIVE1MNSBBdWRpb1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gc2VsZi5faG93bHMpIHtcbiAgICAgICAgICBpZiAoc2VsZi5faG93bHMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBzZWxmLl9ob3dsc1trZXldLl93ZWJBdWRpbyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIC8vIGxvb3AgdGhyb3VnaCB0aGUgYXVkaW8gbm9kZXNcbiAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dsc1trZXldLl9hdWRpb05vZGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgc2VsZi5faG93bHNba2V5XS5fYXVkaW9Ob2RlW2ldLnZvbHVtZSA9IHNlbGYuX2hvd2xzW2tleV0uX3ZvbHVtZSAqIHNlbGYuX3ZvbHVtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gcmV0dXJuIHRoZSBjdXJyZW50IGdsb2JhbCB2b2x1bWVcbiAgICAgIHJldHVybiAodXNpbmdXZWJBdWRpbykgPyBtYXN0ZXJHYWluLmdhaW4udmFsdWUgOiBzZWxmLl92b2x1bWU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE11dGUgYWxsIHNvdW5kcy5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgbXV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLl9zZXRNdXRlZCh0cnVlKTtcblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVubXV0ZSBhbGwgc291bmRzLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICB1bm11dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5fc2V0TXV0ZWQoZmFsc2UpO1xuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIG11dGluZyBhbmQgdW5tdXRpbmcgZ2xvYmFsbHkuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gbXV0ZWQgSXMgbXV0ZWQgb3Igbm90LlxuICAgICAqL1xuICAgIF9zZXRNdXRlZDogZnVuY3Rpb24obXV0ZWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgc2VsZi5fbXV0ZWQgPSBtdXRlZDtcblxuICAgICAgaWYgKHVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgbWFzdGVyR2Fpbi5nYWluLnZhbHVlID0gbXV0ZWQgPyAwIDogc2VsZi5fdm9sdW1lO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gc2VsZi5faG93bHMpIHtcbiAgICAgICAgaWYgKHNlbGYuX2hvd2xzLmhhc093blByb3BlcnR5KGtleSkgJiYgc2VsZi5faG93bHNba2V5XS5fd2ViQXVkaW8gPT09IGZhbHNlKSB7XG4gICAgICAgICAgLy8gbG9vcCB0aHJvdWdoIHRoZSBhdWRpbyBub2Rlc1xuICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dsc1trZXldLl9hdWRpb05vZGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHNlbGYuX2hvd2xzW2tleV0uX2F1ZGlvTm9kZVtpXS5tdXRlZCA9IG11dGVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBmb3IgY29kZWMgc3VwcG9ydC5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IGV4dCBBdWRpbyBmaWxlIGV4dGVudGlvbi5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqL1xuICAgIGNvZGVjczogZnVuY3Rpb24oZXh0KSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29kZWNzW2V4dF07XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGlPUyB3aWxsIG9ubHkgYWxsb3cgYXVkaW8gdG8gYmUgcGxheWVkIGFmdGVyIGEgdXNlciBpbnRlcmFjdGlvbi5cbiAgICAgKiBBdHRlbXB0IHRvIGF1dG9tYXRpY2FsbHkgdW5sb2NrIGF1ZGlvIG9uIHRoZSBmaXJzdCB1c2VyIGludGVyYWN0aW9uLlxuICAgICAqIENvbmNlcHQgZnJvbTogaHR0cDovL3BhdWxiYWthdXMuY29tL3R1dG9yaWFscy9odG1sNS93ZWItYXVkaW8tb24taW9zL1xuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfZW5hYmxlaU9TQXVkaW86IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBvbmx5IHJ1biB0aGlzIG9uIGlPUyBpZiBhdWRpbyBpc24ndCBhbHJlYWR5IGVhbmJsZWRcbiAgICAgIGlmIChjdHggJiYgKHNlbGYuX2lPU0VuYWJsZWQgfHwgIS9pUGhvbmV8aVBhZHxpUG9kL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZWxmLl9pT1NFbmFibGVkID0gZmFsc2U7XG5cbiAgICAgIC8vIGNhbGwgdGhpcyBtZXRob2Qgb24gdG91Y2ggc3RhcnQgdG8gY3JlYXRlIGFuZCBwbGF5IGEgYnVmZmVyLFxuICAgICAgLy8gdGhlbiBjaGVjayBpZiB0aGUgYXVkaW8gYWN0dWFsbHkgcGxheWVkIHRvIGRldGVybWluZSBpZlxuICAgICAgLy8gYXVkaW8gaGFzIG5vdyBiZWVuIHVubG9ja2VkIG9uIGlPU1xuICAgICAgdmFyIHVubG9jayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBjcmVhdGUgYW4gZW1wdHkgYnVmZmVyXG4gICAgICAgIHZhciBidWZmZXIgPSBjdHguY3JlYXRlQnVmZmVyKDEsIDEsIDIyMDUwKTtcbiAgICAgICAgdmFyIHNvdXJjZSA9IGN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcbiAgICAgICAgc291cmNlLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICAgICAgc291cmNlLmNvbm5lY3QoY3R4LmRlc3RpbmF0aW9uKTtcblxuICAgICAgICAvLyBwbGF5IHRoZSBlbXB0eSBidWZmZXJcbiAgICAgICAgaWYgKHR5cGVvZiBzb3VyY2Uuc3RhcnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc291cmNlLm5vdGVPbigwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzb3VyY2Uuc3RhcnQoMCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzZXR1cCBhIHRpbWVvdXQgdG8gY2hlY2sgdGhhdCB3ZSBhcmUgdW5sb2NrZWQgb24gdGhlIG5leHQgZXZlbnQgbG9vcFxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICgoc291cmNlLnBsYXliYWNrU3RhdGUgPT09IHNvdXJjZS5QTEFZSU5HX1NUQVRFIHx8IHNvdXJjZS5wbGF5YmFja1N0YXRlID09PSBzb3VyY2UuRklOSVNIRURfU1RBVEUpKSB7XG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIHVubG9ja2VkIHN0YXRlIGFuZCBwcmV2ZW50IHRoaXMgY2hlY2sgZnJvbSBoYXBwZW5pbmcgYWdhaW5cbiAgICAgICAgICAgIHNlbGYuX2lPU0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgc2VsZi5pT1NBdXRvRW5hYmxlID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgdG91Y2ggc3RhcnQgbGlzdGVuZXJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdW5sb2NrLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIHNldHVwIGEgdG91Y2ggc3RhcnQgbGlzdGVuZXIgdG8gYXR0ZW1wdCBhbiB1bmxvY2sgaW5cbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdW5sb2NrLCBmYWxzZSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cbiAgfTtcblxuICAvLyBjaGVjayBmb3IgYnJvd3NlciBjb2RlYyBzdXBwb3J0XG4gIHZhciBhdWRpb1Rlc3QgPSBudWxsO1xuICB2YXIgY29kZWNzID0ge307XG4gIGlmICghbm9BdWRpbykge1xuICAgIGF1ZGlvVGVzdCA9IG5ldyBBdWRpbygpO1xuICAgIGNvZGVjcyA9IHtcbiAgICAgIG1wMzogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL21wZWc7JykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgIG9wdXM6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9vZ2c7IGNvZGVjcz1cIm9wdXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICBvZ2c6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9vZ2c7IGNvZGVjcz1cInZvcmJpc1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgIHdhdjogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3dhdjsgY29kZWNzPVwiMVwiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgIGFhYzogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2FhYzsnKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgbTRhOiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtbTRhOycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbTRhOycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vYWFjOycpKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgbXA0OiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtbXA0OycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXA0OycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vYWFjOycpKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgd2ViYTogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3dlYm07IGNvZGVjcz1cInZvcmJpc1wiJykucmVwbGFjZSgvXm5vJC8sICcnKVxuICAgIH07XG4gIH1cblxuICAvLyBhbGxvdyBhY2Nlc3MgdG8gdGhlIGdsb2JhbCBhdWRpbyBjb250cm9sc1xuICB2YXIgSG93bGVyID0gbmV3IEhvd2xlckdsb2JhbChjb2RlY3MpO1xuXG4gIC8vIHNldHVwIHRoZSBhdWRpbyBvYmplY3RcbiAgdmFyIEhvd2wgPSBmdW5jdGlvbihvKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gc2V0dXAgdGhlIGRlZmF1bHRzXG4gICAgc2VsZi5fYXV0b3BsYXkgPSBvLmF1dG9wbGF5IHx8IGZhbHNlO1xuICAgIHNlbGYuX2J1ZmZlciA9IG8uYnVmZmVyIHx8IGZhbHNlO1xuICAgIHNlbGYuX2R1cmF0aW9uID0gby5kdXJhdGlvbiB8fCAwO1xuICAgIHNlbGYuX2Zvcm1hdCA9IG8uZm9ybWF0IHx8IG51bGw7XG4gICAgc2VsZi5fbG9vcCA9IG8ubG9vcCB8fCBmYWxzZTtcbiAgICBzZWxmLl9sb2FkZWQgPSBmYWxzZTtcbiAgICBzZWxmLl9zcHJpdGUgPSBvLnNwcml0ZSB8fCB7fTtcbiAgICBzZWxmLl9zcmMgPSBvLnNyYyB8fCAnJztcbiAgICBzZWxmLl9wb3MzZCA9IG8ucG9zM2QgfHwgWzAsIDAsIC0wLjVdO1xuICAgIHNlbGYuX3ZvbHVtZSA9IG8udm9sdW1lICE9PSB1bmRlZmluZWQgPyBvLnZvbHVtZSA6IDE7XG4gICAgc2VsZi5fdXJscyA9IG8udXJscyB8fCBbXTtcbiAgICBzZWxmLl9yYXRlID0gby5yYXRlIHx8IDE7XG5cbiAgICAvLyBhbGxvdyBmb3JjaW5nIG9mIGEgc3BlY2lmaWMgcGFubmluZ01vZGVsICgnZXF1YWxwb3dlcicgb3IgJ0hSVEYnKSxcbiAgICAvLyBpZiBub25lIGlzIHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gJ2VxdWFscG93ZXInIGFuZCBzd2l0Y2hlcyB0byAnSFJURidcbiAgICAvLyBpZiAzZCBzb3VuZCBpcyB1c2VkXG4gICAgc2VsZi5fbW9kZWwgPSBvLm1vZGVsIHx8IG51bGw7XG5cbiAgICAvLyBzZXR1cCBldmVudCBmdW5jdGlvbnNcbiAgICBzZWxmLl9vbmxvYWQgPSBbby5vbmxvYWQgfHwgZnVuY3Rpb24oKSB7fV07XG4gICAgc2VsZi5fb25sb2FkZXJyb3IgPSBbby5vbmxvYWRlcnJvciB8fCBmdW5jdGlvbigpIHt9XTtcbiAgICBzZWxmLl9vbmVuZCA9IFtvLm9uZW5kIHx8IGZ1bmN0aW9uKCkge31dO1xuICAgIHNlbGYuX29ucGF1c2UgPSBbby5vbnBhdXNlIHx8IGZ1bmN0aW9uKCkge31dO1xuICAgIHNlbGYuX29ucGxheSA9IFtvLm9ucGxheSB8fCBmdW5jdGlvbigpIHt9XTtcblxuICAgIHNlbGYuX29uZW5kVGltZXIgPSBbXTtcblxuICAgIC8vIFdlYiBBdWRpbyBvciBIVE1MNSBBdWRpbz9cbiAgICBzZWxmLl93ZWJBdWRpbyA9IHVzaW5nV2ViQXVkaW8gJiYgIXNlbGYuX2J1ZmZlcjtcblxuICAgIC8vIGNoZWNrIGlmIHdlIG5lZWQgdG8gZmFsbCBiYWNrIHRvIEhUTUw1IEF1ZGlvXG4gICAgc2VsZi5fYXVkaW9Ob2RlID0gW107XG4gICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICBzZWxmLl9zZXR1cEF1ZGlvTm9kZSgpO1xuICAgIH1cblxuICAgIC8vIGF1dG9tYXRpY2FsbHkgdHJ5IHRvIGVuYWJsZSBhdWRpbyBvbiBpT1NcbiAgICBpZiAodHlwZW9mIGN0eCAhPT0gJ3VuZGVmaW5lZCcgJiYgY3R4ICYmIEhvd2xlci5pT1NBdXRvRW5hYmxlKSB7XG4gICAgICBIb3dsZXIuX2VuYWJsZWlPU0F1ZGlvKCk7XG4gICAgfVxuXG4gICAgLy8gYWRkIHRoaXMgdG8gYW4gYXJyYXkgb2YgSG93bCdzIHRvIGFsbG93IGdsb2JhbCBjb250cm9sXG4gICAgSG93bGVyLl9ob3dscy5wdXNoKHNlbGYpO1xuXG4gICAgLy8gbG9hZCB0aGUgdHJhY2tcbiAgICBzZWxmLmxvYWQoKTtcbiAgfTtcblxuICAvLyBzZXR1cCBhbGwgb2YgdGhlIG1ldGhvZHNcbiAgSG93bC5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogTG9hZCBhbiBhdWRpbyBmaWxlLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgbG9hZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIHVybCA9IG51bGw7XG5cbiAgICAgIC8vIGlmIG5vIGF1ZGlvIGlzIGF2YWlsYWJsZSwgcXVpdCBpbW1lZGlhdGVseVxuICAgICAgaWYgKG5vQXVkaW8pIHtcbiAgICAgICAgc2VsZi5vbignbG9hZGVycm9yJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gbG9vcCB0aHJvdWdoIHNvdXJjZSBVUkxzIGFuZCBwaWNrIHRoZSBmaXJzdCBvbmUgdGhhdCBpcyBjb21wYXRpYmxlXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fdXJscy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZXh0LCB1cmxJdGVtO1xuXG4gICAgICAgIGlmIChzZWxmLl9mb3JtYXQpIHtcbiAgICAgICAgICAvLyB1c2Ugc3BlY2lmaWVkIGF1ZGlvIGZvcm1hdCBpZiBhdmFpbGFibGVcbiAgICAgICAgICBleHQgPSBzZWxmLl9mb3JtYXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gZmlndXJlIG91dCB0aGUgZmlsZXR5cGUgKHdoZXRoZXIgYW4gZXh0ZW5zaW9uIG9yIGJhc2U2NCBkYXRhKVxuICAgICAgICAgIHVybEl0ZW0gPSBzZWxmLl91cmxzW2ldO1xuICAgICAgICAgIGV4dCA9IC9eZGF0YTphdWRpb1xcLyhbXjssXSspOy9pLmV4ZWModXJsSXRlbSk7XG4gICAgICAgICAgaWYgKCFleHQpIHtcbiAgICAgICAgICAgIGV4dCA9IC9cXC4oW14uXSspJC8uZXhlYyh1cmxJdGVtLnNwbGl0KCc/JywgMSlbMF0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChleHQpIHtcbiAgICAgICAgICAgIGV4dCA9IGV4dFsxXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxmLm9uKCdsb2FkZXJyb3InKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29kZWNzW2V4dF0pIHtcbiAgICAgICAgICB1cmwgPSBzZWxmLl91cmxzW2ldO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghdXJsKSB7XG4gICAgICAgIHNlbGYub24oJ2xvYWRlcnJvcicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNlbGYuX3NyYyA9IHVybDtcblxuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgIGxvYWRCdWZmZXIoc2VsZiwgdXJsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBuZXdOb2RlID0gbmV3IEF1ZGlvKCk7XG5cbiAgICAgICAgLy8gbGlzdGVuIGZvciBlcnJvcnMgd2l0aCBIVE1MNSBhdWRpbyAoaHR0cDovL2Rldi53My5vcmcvaHRtbDUvc3BlYy1hdXRob3Itdmlldy9zcGVjLmh0bWwjbWVkaWFlcnJvcilcbiAgICAgICAgbmV3Tm9kZS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAobmV3Tm9kZS5lcnJvciAmJiBuZXdOb2RlLmVycm9yLmNvZGUgPT09IDQpIHtcbiAgICAgICAgICAgIEhvd2xlckdsb2JhbC5ub0F1ZGlvID0gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLm9uKCdsb2FkZXJyb3InLCB7dHlwZTogbmV3Tm9kZS5lcnJvciA/IG5ld05vZGUuZXJyb3IuY29kZSA6IDB9KTtcbiAgICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICAgIHNlbGYuX2F1ZGlvTm9kZS5wdXNoKG5ld05vZGUpO1xuXG4gICAgICAgIC8vIHNldHVwIHRoZSBuZXcgYXVkaW8gbm9kZVxuICAgICAgICBuZXdOb2RlLnNyYyA9IHVybDtcbiAgICAgICAgbmV3Tm9kZS5fcG9zID0gMDtcbiAgICAgICAgbmV3Tm9kZS5wcmVsb2FkID0gJ2F1dG8nO1xuICAgICAgICBuZXdOb2RlLnZvbHVtZSA9IChIb3dsZXIuX211dGVkKSA/IDAgOiBzZWxmLl92b2x1bWUgKiBIb3dsZXIudm9sdW1lKCk7XG5cbiAgICAgICAgLy8gc2V0dXAgdGhlIGV2ZW50IGxpc3RlbmVyIHRvIHN0YXJ0IHBsYXlpbmcgdGhlIHNvdW5kXG4gICAgICAgIC8vIGFzIHNvb24gYXMgaXQgaGFzIGJ1ZmZlcmVkIGVub3VnaFxuICAgICAgICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAvLyByb3VuZCB1cCB0aGUgZHVyYXRpb24gd2hlbiB1c2luZyBIVE1MNSBBdWRpbyB0byBhY2NvdW50IGZvciB0aGUgbG93ZXIgcHJlY2lzaW9uXG4gICAgICAgICAgc2VsZi5fZHVyYXRpb24gPSBNYXRoLmNlaWwobmV3Tm9kZS5kdXJhdGlvbiAqIDEwKSAvIDEwO1xuXG4gICAgICAgICAgLy8gc2V0dXAgYSBzcHJpdGUgaWYgbm9uZSBpcyBkZWZpbmVkXG4gICAgICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHNlbGYuX3Nwcml0ZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBzZWxmLl9zcHJpdGUgPSB7X2RlZmF1bHQ6IFswLCBzZWxmLl9kdXJhdGlvbiAqIDEwMDBdfTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIXNlbGYuX2xvYWRlZCkge1xuICAgICAgICAgICAgc2VsZi5fbG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHNlbGYub24oJ2xvYWQnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2VsZi5fYXV0b3BsYXkpIHtcbiAgICAgICAgICAgIHNlbGYucGxheSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGNsZWFyIHRoZSBldmVudCBsaXN0ZW5lclxuICAgICAgICAgIG5ld05vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheXRocm91Z2gnLCBsaXN0ZW5lciwgZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICBuZXdOb2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnBsYXl0aHJvdWdoJywgbGlzdGVuZXIsIGZhbHNlKTtcbiAgICAgICAgbmV3Tm9kZS5sb2FkKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSBVUkxzIHRvIGJlIHB1bGxlZCBmcm9tIHRvIHBsYXkgaW4gdGhpcyBzb3VyY2UuXG4gICAgICogQHBhcmFtICB7QXJyYXl9IHVybHMgIEFycnkgb2YgVVJMcyB0byBsb2FkIGZyb21cbiAgICAgKiBAcmV0dXJuIHtIb3dsfSAgICAgICAgUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IFVSTHNcbiAgICAgKi9cbiAgICB1cmxzOiBmdW5jdGlvbih1cmxzKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmICh1cmxzKSB7XG4gICAgICAgIHNlbGYuc3RvcCgpO1xuICAgICAgICBzZWxmLl91cmxzID0gKHR5cGVvZiB1cmxzID09PSAnc3RyaW5nJykgPyBbdXJsc10gOiB1cmxzO1xuICAgICAgICBzZWxmLl9sb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgc2VsZi5sb2FkKCk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc2VsZi5fdXJscztcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUGxheSBhIHNvdW5kIGZyb20gdGhlIGN1cnJlbnQgdGltZSAoMCBieSBkZWZhdWx0KS5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgc3ByaXRlICAgKG9wdGlvbmFsKSBQbGF5cyBmcm9tIHRoZSBzcGVjaWZpZWQgcG9zaXRpb24gaW4gdGhlIHNvdW5kIHNwcml0ZSBkZWZpbml0aW9uLlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFjayAob3B0aW9uYWwpIFJldHVybnMgdGhlIHVuaXF1ZSBwbGF5YmFjayBpZCBmb3IgdGhpcyBzb3VuZCBpbnN0YW5jZS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIHBsYXk6IGZ1bmN0aW9uKHNwcml0ZSwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gaWYgbm8gc3ByaXRlIHdhcyBwYXNzZWQgYnV0IGEgY2FsbGJhY2sgd2FzLCB1cGRhdGUgdGhlIHZhcmlhYmxlc1xuICAgICAgaWYgKHR5cGVvZiBzcHJpdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBzcHJpdGU7XG4gICAgICB9XG5cbiAgICAgIC8vIHVzZSB0aGUgZGVmYXVsdCBzcHJpdGUgaWYgbm9uZSBpcyBwYXNzZWRcbiAgICAgIGlmICghc3ByaXRlIHx8IHR5cGVvZiBzcHJpdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgc3ByaXRlID0gJ19kZWZhdWx0JztcbiAgICAgIH1cblxuICAgICAgLy8gaWYgdGhlIHNvdW5kIGhhc24ndCBiZWVuIGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBldmVudCBxdWV1ZVxuICAgICAgaWYgKCFzZWxmLl9sb2FkZWQpIHtcbiAgICAgICAgc2VsZi5vbignbG9hZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYucGxheShzcHJpdGUsIGNhbGxiYWNrKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIHRoZSBzcHJpdGUgZG9lc24ndCBleGlzdCwgcGxheSBub3RoaW5nXG4gICAgICBpZiAoIXNlbGYuX3Nwcml0ZVtzcHJpdGVdKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIGNhbGxiYWNrKCk7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBnZXQgdGhlIG5vZGUgdG8gcGxheWJhY2tcbiAgICAgIHNlbGYuX2luYWN0aXZlTm9kZShmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIC8vIHBlcnNpc3QgdGhlIHNwcml0ZSBiZWluZyBwbGF5ZWRcbiAgICAgICAgbm9kZS5fc3ByaXRlID0gc3ByaXRlO1xuXG4gICAgICAgIC8vIGRldGVybWluZSB3aGVyZSB0byBzdGFydCBwbGF5aW5nIGZyb21cbiAgICAgICAgdmFyIHBvcyA9IChub2RlLl9wb3MgPiAwKSA/IG5vZGUuX3BvcyA6IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdIC8gMTAwMDtcblxuICAgICAgICAvLyBkZXRlcm1pbmUgaG93IGxvbmcgdG8gcGxheSBmb3JcbiAgICAgICAgdmFyIGR1cmF0aW9uID0gMDtcbiAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgZHVyYXRpb24gPSBzZWxmLl9zcHJpdGVbc3ByaXRlXVsxXSAvIDEwMDAgLSBub2RlLl9wb3M7XG4gICAgICAgICAgaWYgKG5vZGUuX3BvcyA+IDApIHtcbiAgICAgICAgICAgIHBvcyA9IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdIC8gMTAwMCArIHBvcztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZHVyYXRpb24gPSBzZWxmLl9zcHJpdGVbc3ByaXRlXVsxXSAvIDEwMDAgLSAocG9zIC0gc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMF0gLyAxMDAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRldGVybWluZSBpZiB0aGlzIHNvdW5kIHNob3VsZCBiZSBsb29wZWRcbiAgICAgICAgdmFyIGxvb3AgPSAhIShzZWxmLl9sb29wIHx8IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzJdKTtcblxuICAgICAgICAvLyBzZXQgdGltZXIgdG8gZmlyZSB0aGUgJ29uZW5kJyBldmVudFxuICAgICAgICB2YXIgc291bmRJZCA9ICh0eXBlb2YgY2FsbGJhY2sgPT09ICdzdHJpbmcnKSA/IGNhbGxiYWNrIDogTWF0aC5yb3VuZChEYXRlLm5vdygpICogTWF0aC5yYW5kb20oKSkgKyAnJyxcbiAgICAgICAgICB0aW1lcklkO1xuICAgICAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICBpZDogc291bmRJZCxcbiAgICAgICAgICAgIHNwcml0ZTogc3ByaXRlLFxuICAgICAgICAgICAgbG9vcDogbG9vcFxuICAgICAgICAgIH07XG4gICAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBpZiBsb29waW5nLCByZXN0YXJ0IHRoZSB0cmFja1xuICAgICAgICAgICAgaWYgKCFzZWxmLl93ZWJBdWRpbyAmJiBsb29wKSB7XG4gICAgICAgICAgICAgIHNlbGYuc3RvcChkYXRhLmlkKS5wbGF5KHNwcml0ZSwgZGF0YS5pZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHNldCB3ZWIgYXVkaW8gbm9kZSB0byBwYXVzZWQgYXQgZW5kXG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgIWxvb3ApIHtcbiAgICAgICAgICAgICAgc2VsZi5fbm9kZUJ5SWQoZGF0YS5pZCkucGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgc2VsZi5fbm9kZUJ5SWQoZGF0YS5pZCkuX3BvcyA9IDA7XG5cbiAgICAgICAgICAgICAgLy8gY2xlYXIgdGhlIGVuZCB0aW1lclxuICAgICAgICAgICAgICBzZWxmLl9jbGVhckVuZFRpbWVyKGRhdGEuaWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBlbmQgdGhlIHRyYWNrIGlmIGl0IGlzIEhUTUwgYXVkaW8gYW5kIGEgc3ByaXRlXG4gICAgICAgICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmICFsb29wKSB7XG4gICAgICAgICAgICAgIHNlbGYuc3RvcChkYXRhLmlkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZmlyZSBlbmRlZCBldmVudFxuICAgICAgICAgICAgc2VsZi5vbignZW5kJywgc291bmRJZCk7XG4gICAgICAgICAgfSwgZHVyYXRpb24gKiAxMDAwKTtcblxuICAgICAgICAgIC8vIHN0b3JlIHRoZSByZWZlcmVuY2UgdG8gdGhlIHRpbWVyXG4gICAgICAgICAgc2VsZi5fb25lbmRUaW1lci5wdXNoKHt0aW1lcjogdGltZXJJZCwgaWQ6IGRhdGEuaWR9KTtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICB2YXIgbG9vcFN0YXJ0ID0gc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMF0gLyAxMDAwLFxuICAgICAgICAgICAgbG9vcEVuZCA9IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzFdIC8gMTAwMDtcblxuICAgICAgICAgIC8vIHNldCB0aGUgcGxheSBpZCB0byB0aGlzIG5vZGUgYW5kIGxvYWQgaW50byBjb250ZXh0XG4gICAgICAgICAgbm9kZS5pZCA9IHNvdW5kSWQ7XG4gICAgICAgICAgbm9kZS5wYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgICByZWZyZXNoQnVmZmVyKHNlbGYsIFtsb29wLCBsb29wU3RhcnQsIGxvb3BFbmRdLCBzb3VuZElkKTtcbiAgICAgICAgICBzZWxmLl9wbGF5U3RhcnQgPSBjdHguY3VycmVudFRpbWU7XG4gICAgICAgICAgbm9kZS5nYWluLnZhbHVlID0gc2VsZi5fdm9sdW1lO1xuXG4gICAgICAgICAgaWYgKHR5cGVvZiBub2RlLmJ1ZmZlclNvdXJjZS5zdGFydCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIG5vZGUuYnVmZmVyU291cmNlLm5vdGVHcmFpbk9uKDAsIHBvcywgZHVyYXRpb24pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBub2RlLmJ1ZmZlclNvdXJjZS5zdGFydCgwLCBwb3MsIGR1cmF0aW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKG5vZGUucmVhZHlTdGF0ZSA9PT0gNCB8fCAhbm9kZS5yZWFkeVN0YXRlICYmIG5hdmlnYXRvci5pc0NvY29vbkpTKSB7XG4gICAgICAgICAgICBub2RlLnJlYWR5U3RhdGUgPSA0O1xuICAgICAgICAgICAgbm9kZS5pZCA9IHNvdW5kSWQ7XG4gICAgICAgICAgICBub2RlLmN1cnJlbnRUaW1lID0gcG9zO1xuICAgICAgICAgICAgbm9kZS5tdXRlZCA9IEhvd2xlci5fbXV0ZWQgfHwgbm9kZS5tdXRlZDtcbiAgICAgICAgICAgIG5vZGUudm9sdW1lID0gc2VsZi5fdm9sdW1lICogSG93bGVyLnZvbHVtZSgpO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgbm9kZS5wbGF5KCk7IH0sIDApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxmLl9jbGVhckVuZFRpbWVyKHNvdW5kSWQpO1xuXG4gICAgICAgICAgICAoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgdmFyIHNvdW5kID0gc2VsZixcbiAgICAgICAgICAgICAgICBwbGF5U3ByaXRlID0gc3ByaXRlLFxuICAgICAgICAgICAgICAgIGZuID0gY2FsbGJhY2ssXG4gICAgICAgICAgICAgICAgbmV3Tm9kZSA9IG5vZGU7XG4gICAgICAgICAgICAgIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHNvdW5kLnBsYXkocGxheVNwcml0ZSwgZm4pO1xuXG4gICAgICAgICAgICAgICAgLy8gY2xlYXIgdGhlIGV2ZW50IGxpc3RlbmVyXG4gICAgICAgICAgICAgICAgbmV3Tm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdjYW5wbGF5dGhyb3VnaCcsIGxpc3RlbmVyLCBmYWxzZSk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIG5ld05vZGUuYWRkRXZlbnRMaXN0ZW5lcignY2FucGxheXRocm91Z2gnLCBsaXN0ZW5lciwgZmFsc2UpO1xuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZmlyZSB0aGUgcGxheSBldmVudCBhbmQgc2VuZCB0aGUgc291bmRJZCBiYWNrIGluIHRoZSBjYWxsYmFja1xuICAgICAgICBzZWxmLm9uKCdwbGF5Jyk7XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIGNhbGxiYWNrKHNvdW5kSWQpO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQYXVzZSBwbGF5YmFjayBhbmQgc2F2ZSB0aGUgY3VycmVudCBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaWQgKG9wdGlvbmFsKSBUaGUgcGxheSBpbnN0YW5jZSBJRC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIHBhdXNlOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBpZiB0aGUgc291bmQgaGFzbid0IGJlZW4gbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGV2ZW50IHF1ZXVlXG4gICAgICBpZiAoIXNlbGYuX2xvYWRlZCkge1xuICAgICAgICBzZWxmLm9uKCdwbGF5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5wYXVzZShpZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBjbGVhciAnb25lbmQnIHRpbWVyXG4gICAgICBzZWxmLl9jbGVhckVuZFRpbWVyKGlkKTtcblxuICAgICAgdmFyIGFjdGl2ZU5vZGUgPSAoaWQpID8gc2VsZi5fbm9kZUJ5SWQoaWQpIDogc2VsZi5fYWN0aXZlTm9kZSgpO1xuICAgICAgaWYgKGFjdGl2ZU5vZGUpIHtcbiAgICAgICAgYWN0aXZlTm9kZS5fcG9zID0gc2VsZi5wb3MobnVsbCwgaWQpO1xuXG4gICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0aGUgc291bmQgaGFzIGJlZW4gY3JlYXRlZFxuICAgICAgICAgIGlmICghYWN0aXZlTm9kZS5idWZmZXJTb3VyY2UgfHwgYWN0aXZlTm9kZS5wYXVzZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGFjdGl2ZU5vZGUucGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICBpZiAodHlwZW9mIGFjdGl2ZU5vZGUuYnVmZmVyU291cmNlLnN0b3AgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBhY3RpdmVOb2RlLmJ1ZmZlclNvdXJjZS5ub3RlT2ZmKDApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhY3RpdmVOb2RlLmJ1ZmZlclNvdXJjZS5zdG9wKDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhY3RpdmVOb2RlLnBhdXNlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgc2VsZi5vbigncGF1c2UnKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFN0b3AgcGxheWJhY2sgYW5kIHJlc2V0IHRvIHN0YXJ0LlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gaWQgIChvcHRpb25hbCkgVGhlIHBsYXkgaW5zdGFuY2UgSUQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBzdG9wOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBpZiB0aGUgc291bmQgaGFzbid0IGJlZW4gbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGV2ZW50IHF1ZXVlXG4gICAgICBpZiAoIXNlbGYuX2xvYWRlZCkge1xuICAgICAgICBzZWxmLm9uKCdwbGF5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5zdG9wKGlkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIGNsZWFyICdvbmVuZCcgdGltZXJcbiAgICAgIHNlbGYuX2NsZWFyRW5kVGltZXIoaWQpO1xuXG4gICAgICB2YXIgYWN0aXZlTm9kZSA9IChpZCkgPyBzZWxmLl9ub2RlQnlJZChpZCkgOiBzZWxmLl9hY3RpdmVOb2RlKCk7XG4gICAgICBpZiAoYWN0aXZlTm9kZSkge1xuICAgICAgICBhY3RpdmVOb2RlLl9wb3MgPSAwO1xuXG4gICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0aGUgc291bmQgaGFzIGJlZW4gY3JlYXRlZFxuICAgICAgICAgIGlmICghYWN0aXZlTm9kZS5idWZmZXJTb3VyY2UgfHwgYWN0aXZlTm9kZS5wYXVzZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGFjdGl2ZU5vZGUucGF1c2VkID0gdHJ1ZTtcblxuICAgICAgICAgIGlmICh0eXBlb2YgYWN0aXZlTm9kZS5idWZmZXJTb3VyY2Uuc3RvcCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGFjdGl2ZU5vZGUuYnVmZmVyU291cmNlLm5vdGVPZmYoMCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFjdGl2ZU5vZGUuYnVmZmVyU291cmNlLnN0b3AoMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCFpc05hTihhY3RpdmVOb2RlLmR1cmF0aW9uKSkge1xuICAgICAgICAgIGFjdGl2ZU5vZGUucGF1c2UoKTtcbiAgICAgICAgICBhY3RpdmVOb2RlLmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTXV0ZSB0aGlzIHNvdW5kLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gaWQgKG9wdGlvbmFsKSBUaGUgcGxheSBpbnN0YW5jZSBJRC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIG11dGU6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIGlmIHRoZSBzb3VuZCBoYXNuJ3QgYmVlbiBsb2FkZWQsIGFkZCBpdCB0byB0aGUgZXZlbnQgcXVldWVcbiAgICAgIGlmICghc2VsZi5fbG9hZGVkKSB7XG4gICAgICAgIHNlbGYub24oJ3BsYXknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLm11dGUoaWQpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgdmFyIGFjdGl2ZU5vZGUgPSAoaWQpID8gc2VsZi5fbm9kZUJ5SWQoaWQpIDogc2VsZi5fYWN0aXZlTm9kZSgpO1xuICAgICAgaWYgKGFjdGl2ZU5vZGUpIHtcbiAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgYWN0aXZlTm9kZS5nYWluLnZhbHVlID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhY3RpdmVOb2RlLm11dGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVW5tdXRlIHRoaXMgc291bmQuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBpZCAob3B0aW9uYWwpIFRoZSBwbGF5IGluc3RhbmNlIElELlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgdW5tdXRlOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBpZiB0aGUgc291bmQgaGFzbid0IGJlZW4gbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGV2ZW50IHF1ZXVlXG4gICAgICBpZiAoIXNlbGYuX2xvYWRlZCkge1xuICAgICAgICBzZWxmLm9uKCdwbGF5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi51bm11dGUoaWQpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgdmFyIGFjdGl2ZU5vZGUgPSAoaWQpID8gc2VsZi5fbm9kZUJ5SWQoaWQpIDogc2VsZi5fYWN0aXZlTm9kZSgpO1xuICAgICAgaWYgKGFjdGl2ZU5vZGUpIHtcbiAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgYWN0aXZlTm9kZS5nYWluLnZhbHVlID0gc2VsZi5fdm9sdW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFjdGl2ZU5vZGUubXV0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB2b2x1bWUgb2YgdGhpcyBzb3VuZC5cbiAgICAgKiBAcGFyYW0gIHtGbG9hdH0gIHZvbCBWb2x1bWUgZnJvbSAwLjAgdG8gMS4wLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gaWQgIChvcHRpb25hbCkgVGhlIHBsYXkgaW5zdGFuY2UgSUQuXG4gICAgICogQHJldHVybiB7SG93bC9GbG9hdH0gICAgIFJldHVybnMgc2VsZiBvciBjdXJyZW50IHZvbHVtZS5cbiAgICAgKi9cbiAgICB2b2x1bWU6IGZ1bmN0aW9uKHZvbCwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gbWFrZSBzdXJlIHZvbHVtZSBpcyBhIG51bWJlclxuICAgICAgdm9sID0gcGFyc2VGbG9hdCh2b2wpO1xuXG4gICAgICBpZiAodm9sID49IDAgJiYgdm9sIDw9IDEpIHtcbiAgICAgICAgc2VsZi5fdm9sdW1lID0gdm9sO1xuXG4gICAgICAgIC8vIGlmIHRoZSBzb3VuZCBoYXNuJ3QgYmVlbiBsb2FkZWQsIGFkZCBpdCB0byB0aGUgZXZlbnQgcXVldWVcbiAgICAgICAgaWYgKCFzZWxmLl9sb2FkZWQpIHtcbiAgICAgICAgICBzZWxmLm9uKCdwbGF5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnZvbHVtZSh2b2wsIGlkKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFjdGl2ZU5vZGUgPSAoaWQpID8gc2VsZi5fbm9kZUJ5SWQoaWQpIDogc2VsZi5fYWN0aXZlTm9kZSgpO1xuICAgICAgICBpZiAoYWN0aXZlTm9kZSkge1xuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgYWN0aXZlTm9kZS5nYWluLnZhbHVlID0gdm9sO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhY3RpdmVOb2RlLnZvbHVtZSA9IHZvbCAqIEhvd2xlci52b2x1bWUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzZWxmLl92b2x1bWU7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgd2hldGhlciB0byBsb29wIHRoZSBzb3VuZC5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBsb29wIFRvIGxvb3Agb3Igbm90IHRvIGxvb3AsIHRoYXQgaXMgdGhlIHF1ZXN0aW9uLlxuICAgICAqIEByZXR1cm4ge0hvd2wvQm9vbGVhbn0gICAgICBSZXR1cm5zIHNlbGYgb3IgY3VycmVudCBsb29waW5nIHZhbHVlLlxuICAgICAqL1xuICAgIGxvb3A6IGZ1bmN0aW9uKGxvb3ApIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKHR5cGVvZiBsb29wID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgc2VsZi5fbG9vcCA9IGxvb3A7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc2VsZi5fbG9vcDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCBzb3VuZCBzcHJpdGUgZGVmaW5pdGlvbi5cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IHNwcml0ZSBFeGFtcGxlOiB7c3ByaXRlTmFtZTogW29mZnNldCwgZHVyYXRpb24sIGxvb3BdfVxuICAgICAqICAgICAgICAgICAgICAgIEBwYXJhbSB7SW50ZWdlcn0gb2Zmc2V0ICAgV2hlcmUgdG8gYmVnaW4gcGxheWJhY2sgaW4gbWlsbGlzZWNvbmRzXG4gICAgICogICAgICAgICAgICAgICAgQHBhcmFtIHtJbnRlZ2VyfSBkdXJhdGlvbiBIb3cgbG9uZyB0byBwbGF5IGluIG1pbGxpc2Vjb25kc1xuICAgICAqICAgICAgICAgICAgICAgIEBwYXJhbSB7Qm9vbGVhbn0gbG9vcCAgICAgKG9wdGlvbmFsKSBTZXQgdHJ1ZSB0byBsb29wIHRoaXMgc3ByaXRlXG4gICAgICogQHJldHVybiB7SG93bH0gICAgICAgIFJldHVybnMgY3VycmVudCBzcHJpdGUgc2hlZXQgb3Igc2VsZi5cbiAgICAgKi9cbiAgICBzcHJpdGU6IGZ1bmN0aW9uKHNwcml0ZSkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAodHlwZW9mIHNwcml0ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgc2VsZi5fc3ByaXRlID0gc3ByaXRlO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuX3Nwcml0ZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgcG9zaXRpb24gb2YgcGxheWJhY2suXG4gICAgICogQHBhcmFtICB7RmxvYXR9ICBwb3MgVGhlIHBvc2l0aW9uIHRvIG1vdmUgY3VycmVudCBwbGF5YmFjayB0by5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IGlkICAob3B0aW9uYWwpIFRoZSBwbGF5IGluc3RhbmNlIElELlxuICAgICAqIEByZXR1cm4ge0hvd2wvRmxvYXR9ICAgICAgUmV0dXJucyBzZWxmIG9yIGN1cnJlbnQgcGxheWJhY2sgcG9zaXRpb24uXG4gICAgICovXG4gICAgcG9zOiBmdW5jdGlvbihwb3MsIGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIGlmIHRoZSBzb3VuZCBoYXNuJ3QgYmVlbiBsb2FkZWQsIGFkZCBpdCB0byB0aGUgZXZlbnQgcXVldWVcbiAgICAgIGlmICghc2VsZi5fbG9hZGVkKSB7XG4gICAgICAgIHNlbGYub24oJ2xvYWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLnBvcyhwb3MpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdHlwZW9mIHBvcyA9PT0gJ251bWJlcicgPyBzZWxmIDogc2VsZi5fcG9zIHx8IDA7XG4gICAgICB9XG5cbiAgICAgIC8vIG1ha2Ugc3VyZSB3ZSBhcmUgZGVhbGluZyB3aXRoIGEgbnVtYmVyIGZvciBwb3NcbiAgICAgIHBvcyA9IHBhcnNlRmxvYXQocG9zKTtcblxuICAgICAgdmFyIGFjdGl2ZU5vZGUgPSAoaWQpID8gc2VsZi5fbm9kZUJ5SWQoaWQpIDogc2VsZi5fYWN0aXZlTm9kZSgpO1xuICAgICAgaWYgKGFjdGl2ZU5vZGUpIHtcbiAgICAgICAgaWYgKHBvcyA+PSAwKSB7XG4gICAgICAgICAgc2VsZi5wYXVzZShpZCk7XG4gICAgICAgICAgYWN0aXZlTm9kZS5fcG9zID0gcG9zO1xuICAgICAgICAgIHNlbGYucGxheShhY3RpdmVOb2RlLl9zcHJpdGUsIGlkKTtcblxuICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzZWxmLl93ZWJBdWRpbyA/IGFjdGl2ZU5vZGUuX3BvcyArIChjdHguY3VycmVudFRpbWUgLSBzZWxmLl9wbGF5U3RhcnQpIDogYWN0aXZlTm9kZS5jdXJyZW50VGltZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChwb3MgPj0gMCkge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGZpbmQgdGhlIGZpcnN0IGluYWN0aXZlIG5vZGUgdG8gcmV0dXJuIHRoZSBwb3MgZm9yXG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9hdWRpb05vZGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoc2VsZi5fYXVkaW9Ob2RlW2ldLnBhdXNlZCAmJiBzZWxmLl9hdWRpb05vZGVbaV0ucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgICAgcmV0dXJuIChzZWxmLl93ZWJBdWRpbykgPyBzZWxmLl9hdWRpb05vZGVbaV0uX3BvcyA6IHNlbGYuX2F1ZGlvTm9kZVtpXS5jdXJyZW50VGltZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgM0QgcG9zaXRpb24gb2YgdGhlIGF1ZGlvIHNvdXJjZS5cbiAgICAgKiBUaGUgbW9zdCBjb21tb24gdXNhZ2UgaXMgdG8gc2V0IHRoZSAneCcgcG9zaXRpb25cbiAgICAgKiB0byBhZmZlY3QgdGhlIGxlZnQvcmlnaHQgZWFyIHBhbm5pbmcuIFNldHRpbmcgYW55IHZhbHVlIGhpZ2hlciB0aGFuXG4gICAgICogMS4wIHdpbGwgYmVnaW4gdG8gZGVjcmVhc2UgdGhlIHZvbHVtZSBvZiB0aGUgc291bmQgYXMgaXQgbW92ZXMgZnVydGhlciBhd2F5LlxuICAgICAqIE5PVEU6IFRoaXMgb25seSB3b3JrcyB3aXRoIFdlYiBBdWRpbyBBUEksIEhUTUw1IEF1ZGlvIHBsYXliYWNrXG4gICAgICogd2lsbCBub3QgYmUgYWZmZWN0ZWQuXG4gICAgICogQHBhcmFtICB7RmxvYXR9ICB4ICBUaGUgeC1wb3NpdGlvbiBvZiB0aGUgcGxheWJhY2sgZnJvbSAtMTAwMC4wIHRvIDEwMDAuMFxuICAgICAqIEBwYXJhbSAge0Zsb2F0fSAgeSAgVGhlIHktcG9zaXRpb24gb2YgdGhlIHBsYXliYWNrIGZyb20gLTEwMDAuMCB0byAxMDAwLjBcbiAgICAgKiBAcGFyYW0gIHtGbG9hdH0gIHogIFRoZSB6LXBvc2l0aW9uIG9mIHRoZSBwbGF5YmFjayBmcm9tIC0xMDAwLjAgdG8gMTAwMC4wXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBpZCAob3B0aW9uYWwpIFRoZSBwbGF5IGluc3RhbmNlIElELlxuICAgICAqIEByZXR1cm4ge0hvd2wvQXJyYXl9ICAgUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IDNEIHBvc2l0aW9uOiBbeCwgeSwgel1cbiAgICAgKi9cbiAgICBwb3MzZDogZnVuY3Rpb24oeCwgeSwgeiwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gc2V0IGEgZGVmYXVsdCBmb3IgdGhlIG9wdGlvbmFsICd5JyAmICd6J1xuICAgICAgeSA9ICh0eXBlb2YgeSA9PT0gJ3VuZGVmaW5lZCcgfHwgIXkpID8gMCA6IHk7XG4gICAgICB6ID0gKHR5cGVvZiB6ID09PSAndW5kZWZpbmVkJyB8fCAheikgPyAtMC41IDogejtcblxuICAgICAgLy8gaWYgdGhlIHNvdW5kIGhhc24ndCBiZWVuIGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBldmVudCBxdWV1ZVxuICAgICAgaWYgKCFzZWxmLl9sb2FkZWQpIHtcbiAgICAgICAgc2VsZi5vbigncGxheScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYucG9zM2QoeCwgeSwgeiwgaWQpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgaWYgKHggPj0gMCB8fCB4IDwgMCkge1xuICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICB2YXIgYWN0aXZlTm9kZSA9IChpZCkgPyBzZWxmLl9ub2RlQnlJZChpZCkgOiBzZWxmLl9hY3RpdmVOb2RlKCk7XG4gICAgICAgICAgaWYgKGFjdGl2ZU5vZGUpIHtcbiAgICAgICAgICAgIHNlbGYuX3BvczNkID0gW3gsIHksIHpdO1xuICAgICAgICAgICAgYWN0aXZlTm9kZS5wYW5uZXIuc2V0UG9zaXRpb24oeCwgeSwgeik7XG4gICAgICAgICAgICBhY3RpdmVOb2RlLnBhbm5lci5wYW5uaW5nTW9kZWwgPSBzZWxmLl9tb2RlbCB8fCAnSFJURic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc2VsZi5fcG9zM2Q7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBGYWRlIGEgY3VycmVudGx5IHBsYXlpbmcgc291bmQgYmV0d2VlbiB0d28gdm9sdW1lcy5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICAgZnJvbSAgICAgVGhlIHZvbHVtZSB0byBmYWRlIGZyb20gKDAuMCB0byAxLjApLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gICB0byAgICAgICBUaGUgdm9sdW1lIHRvIGZhZGUgdG8gKDAuMCB0byAxLjApLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gICBsZW4gICAgICBUaW1lIGluIG1pbGxpc2Vjb25kcyB0byBmYWRlLlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFjayAob3B0aW9uYWwpIEZpcmVkIHdoZW4gdGhlIGZhZGUgaXMgY29tcGxldGUuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgIGlkICAgICAgIChvcHRpb25hbCkgVGhlIHBsYXkgaW5zdGFuY2UgSUQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBmYWRlOiBmdW5jdGlvbihmcm9tLCB0bywgbGVuLCBjYWxsYmFjaywgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgZGlmZiA9IE1hdGguYWJzKGZyb20gLSB0byksXG4gICAgICAgIGRpciA9IGZyb20gPiB0byA/ICdkb3duJyA6ICd1cCcsXG4gICAgICAgIHN0ZXBzID0gZGlmZiAvIDAuMDEsXG4gICAgICAgIHN0ZXBUaW1lID0gbGVuIC8gc3RlcHM7XG5cbiAgICAgIC8vIGlmIHRoZSBzb3VuZCBoYXNuJ3QgYmVlbiBsb2FkZWQsIGFkZCBpdCB0byB0aGUgZXZlbnQgcXVldWVcbiAgICAgIGlmICghc2VsZi5fbG9hZGVkKSB7XG4gICAgICAgIHNlbGYub24oJ2xvYWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLmZhZGUoZnJvbSwgdG8sIGxlbiwgY2FsbGJhY2ssIGlkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIHNldCB0aGUgdm9sdW1lIHRvIHRoZSBzdGFydCBwb3NpdGlvblxuICAgICAgc2VsZi52b2x1bWUoZnJvbSwgaWQpO1xuXG4gICAgICBmb3IgKHZhciBpPTE7IGk8PXN0ZXBzOyBpKyspIHtcbiAgICAgICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBjaGFuZ2UgPSBzZWxmLl92b2x1bWUgKyAoZGlyID09PSAndXAnID8gMC4wMSA6IC0wLjAxKSAqIGksXG4gICAgICAgICAgICB2b2wgPSBNYXRoLnJvdW5kKDEwMDAgKiBjaGFuZ2UpIC8gMTAwMCxcbiAgICAgICAgICAgIHRvVm9sID0gdG87XG5cbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi52b2x1bWUodm9sLCBpZCk7XG5cbiAgICAgICAgICAgIGlmICh2b2wgPT09IHRvVm9sKSB7XG4gICAgICAgICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCBzdGVwVGltZSAqIGkpO1xuICAgICAgICB9KSgpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBbREVQUkVDQVRFRF0gRmFkZSBpbiB0aGUgY3VycmVudCBzb3VuZC5cbiAgICAgKiBAcGFyYW0gIHtGbG9hdH0gICAgdG8gICAgICBWb2x1bWUgdG8gZmFkZSB0byAoMC4wIHRvIDEuMCkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIGxlbiAgICAgVGltZSBpbiBtaWxsaXNlY29uZHMgdG8gZmFkZS5cbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIGZhZGVJbjogZnVuY3Rpb24odG8sIGxlbiwgY2FsbGJhY2spIHtcbiAgICAgIHJldHVybiB0aGlzLnZvbHVtZSgwKS5wbGF5KCkuZmFkZSgwLCB0bywgbGVuLCBjYWxsYmFjayk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFtERVBSRUNBVEVEXSBGYWRlIG91dCB0aGUgY3VycmVudCBzb3VuZCBhbmQgcGF1c2Ugd2hlbiBmaW5pc2hlZC5cbiAgICAgKiBAcGFyYW0gIHtGbG9hdH0gICAgdG8gICAgICAgVm9sdW1lIHRvIGZhZGUgdG8gKDAuMCB0byAxLjApLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gICBsZW4gICAgICBUaW1lIGluIG1pbGxpc2Vjb25kcyB0byBmYWRlLlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgICAqIEBwYXJhbSAge1N0cmluZ30gICBpZCAgICAgICAob3B0aW9uYWwpIFRoZSBwbGF5IGluc3RhbmNlIElELlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgZmFkZU91dDogZnVuY3Rpb24odG8sIGxlbiwgY2FsbGJhY2ssIGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIHJldHVybiBzZWxmLmZhZGUoc2VsZi5fdm9sdW1lLCB0bywgbGVuLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjaygpO1xuICAgICAgICBzZWxmLnBhdXNlKGlkKTtcblxuICAgICAgICAvLyBmaXJlIGVuZGVkIGV2ZW50XG4gICAgICAgIHNlbGYub24oJ2VuZCcpO1xuICAgICAgfSwgaWQpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgYW4gYXVkaW8gbm9kZSBieSBJRC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfSBBdWRpbyBub2RlLlxuICAgICAqL1xuICAgIF9ub2RlQnlJZDogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgbm9kZSA9IHNlbGYuX2F1ZGlvTm9kZVswXTtcblxuICAgICAgLy8gZmluZCB0aGUgbm9kZSB3aXRoIHRoaXMgSURcbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9hdWRpb05vZGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHNlbGYuX2F1ZGlvTm9kZVtpXS5pZCA9PT0gaWQpIHtcbiAgICAgICAgICBub2RlID0gc2VsZi5fYXVkaW9Ob2RlW2ldO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBub2RlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGZpcnN0IGFjdGl2ZSBhdWRpbyBub2RlLlxuICAgICAqIEByZXR1cm4ge0hvd2x9IEF1ZGlvIG5vZGUuXG4gICAgICovXG4gICAgX2FjdGl2ZU5vZGU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICBub2RlID0gbnVsbDtcblxuICAgICAgLy8gZmluZCB0aGUgZmlyc3QgcGxheWluZyBub2RlXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fYXVkaW9Ob2RlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICghc2VsZi5fYXVkaW9Ob2RlW2ldLnBhdXNlZCkge1xuICAgICAgICAgIG5vZGUgPSBzZWxmLl9hdWRpb05vZGVbaV07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gcmVtb3ZlIGV4Y2VzcyBpbmFjdGl2ZSBub2Rlc1xuICAgICAgc2VsZi5fZHJhaW5Qb29sKCk7XG5cbiAgICAgIHJldHVybiBub2RlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGZpcnN0IGluYWN0aXZlIGF1ZGlvIG5vZGUuXG4gICAgICogSWYgdGhlcmUgaXMgbm9uZSwgY3JlYXRlIGEgbmV3IG9uZSBhbmQgYWRkIGl0IHRvIHRoZSBwb29sLlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFjayBGdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlIGF1ZGlvIG5vZGUgaXMgcmVhZHkuXG4gICAgICovXG4gICAgX2luYWN0aXZlTm9kZTogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgbm9kZSA9IG51bGw7XG5cbiAgICAgIC8vIGZpbmQgZmlyc3QgaW5hY3RpdmUgbm9kZSB0byByZWN5Y2xlXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fYXVkaW9Ob2RlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChzZWxmLl9hdWRpb05vZGVbaV0ucGF1c2VkICYmIHNlbGYuX2F1ZGlvTm9kZVtpXS5yZWFkeVN0YXRlID09PSA0KSB7XG4gICAgICAgICAgLy8gc2VuZCB0aGUgbm9kZSBiYWNrIGZvciB1c2UgYnkgdGhlIG5ldyBwbGF5IGluc3RhbmNlXG4gICAgICAgICAgY2FsbGJhY2soc2VsZi5fYXVkaW9Ob2RlW2ldKTtcbiAgICAgICAgICBub2RlID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyByZW1vdmUgZXhjZXNzIGluYWN0aXZlIG5vZGVzXG4gICAgICBzZWxmLl9kcmFpblBvb2woKTtcblxuICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBjcmVhdGUgbmV3IG5vZGUgaWYgdGhlcmUgYXJlIG5vIGluYWN0aXZlc1xuICAgICAgdmFyIG5ld05vZGU7XG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgbmV3Tm9kZSA9IHNlbGYuX3NldHVwQXVkaW9Ob2RlKCk7XG4gICAgICAgIGNhbGxiYWNrKG5ld05vZGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5sb2FkKCk7XG4gICAgICAgIG5ld05vZGUgPSBzZWxmLl9hdWRpb05vZGVbc2VsZi5fYXVkaW9Ob2RlLmxlbmd0aCAtIDFdO1xuXG4gICAgICAgIC8vIGxpc3RlbiBmb3IgdGhlIGNvcnJlY3QgbG9hZCBldmVudCBhbmQgZmlyZSB0aGUgY2FsbGJhY2tcbiAgICAgICAgdmFyIGxpc3RlbmVyRXZlbnQgPSBuYXZpZ2F0b3IuaXNDb2Nvb25KUyA/ICdjYW5wbGF5dGhyb3VnaCcgOiAnbG9hZGVkbWV0YWRhdGEnO1xuICAgICAgICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBuZXdOb2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIobGlzdGVuZXJFdmVudCwgbGlzdGVuZXIsIGZhbHNlKTtcbiAgICAgICAgICBjYWxsYmFjayhuZXdOb2RlKTtcbiAgICAgICAgfTtcbiAgICAgICAgbmV3Tm9kZS5hZGRFdmVudExpc3RlbmVyKGxpc3RlbmVyRXZlbnQsIGxpc3RlbmVyLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIElmIHRoZXJlIGFyZSBtb3JlIHRoYW4gNSBpbmFjdGl2ZSBhdWRpbyBub2RlcyBpbiB0aGUgcG9vbCwgY2xlYXIgb3V0IHRoZSByZXN0LlxuICAgICAqL1xuICAgIF9kcmFpblBvb2w6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICBpbmFjdGl2ZSA9IDAsXG4gICAgICAgIGk7XG5cbiAgICAgIC8vIGNvdW50IHRoZSBudW1iZXIgb2YgaW5hY3RpdmUgbm9kZXNcbiAgICAgIGZvciAoaT0wOyBpPHNlbGYuX2F1ZGlvTm9kZS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2VsZi5fYXVkaW9Ob2RlW2ldLnBhdXNlZCkge1xuICAgICAgICAgIGluYWN0aXZlKys7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gcmVtb3ZlIGV4Y2VzcyBpbmFjdGl2ZSBub2Rlc1xuICAgICAgZm9yIChpPXNlbGYuX2F1ZGlvTm9kZS5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XG4gICAgICAgIGlmIChpbmFjdGl2ZSA8PSA1KSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5fYXVkaW9Ob2RlW2ldLnBhdXNlZCkge1xuICAgICAgICAgIC8vIGRpc2Nvbm5lY3QgdGhlIGF1ZGlvIHNvdXJjZSBpZiB1c2luZyBXZWIgQXVkaW9cbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgIHNlbGYuX2F1ZGlvTm9kZVtpXS5kaXNjb25uZWN0KDApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGluYWN0aXZlLS07XG4gICAgICAgICAgc2VsZi5fYXVkaW9Ob2RlLnNwbGljZShpLCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDbGVhciAnb25lbmQnIHRpbWVvdXQgYmVmb3JlIGl0IGVuZHMuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBzb3VuZElkICBUaGUgcGxheSBpbnN0YW5jZSBJRC5cbiAgICAgKi9cbiAgICBfY2xlYXJFbmRUaW1lcjogZnVuY3Rpb24oc291bmRJZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICBpbmRleCA9IDA7XG5cbiAgICAgIC8vIGxvb3AgdGhyb3VnaCB0aGUgdGltZXJzIHRvIGZpbmQgdGhlIG9uZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBzb3VuZFxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX29uZW5kVGltZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHNlbGYuX29uZW5kVGltZXJbaV0uaWQgPT09IHNvdW5kSWQpIHtcbiAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIHRpbWVyID0gc2VsZi5fb25lbmRUaW1lcltpbmRleF07XG4gICAgICBpZiAodGltZXIpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyLnRpbWVyKTtcbiAgICAgICAgc2VsZi5fb25lbmRUaW1lci5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXR1cCB0aGUgZ2FpbiBub2RlIGFuZCBwYW5uZXIgZm9yIGEgV2ViIEF1ZGlvIGluc3RhbmNlLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gVGhlIG5ldyBhdWRpbyBub2RlLlxuICAgICAqL1xuICAgIF9zZXR1cEF1ZGlvTm9kZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIG5vZGUgPSBzZWxmLl9hdWRpb05vZGUsXG4gICAgICAgIGluZGV4ID0gc2VsZi5fYXVkaW9Ob2RlLmxlbmd0aDtcblxuICAgICAgLy8gY3JlYXRlIGdhaW4gbm9kZVxuICAgICAgbm9kZVtpbmRleF0gPSAodHlwZW9mIGN0eC5jcmVhdGVHYWluID09PSAndW5kZWZpbmVkJykgPyBjdHguY3JlYXRlR2Fpbk5vZGUoKSA6IGN0eC5jcmVhdGVHYWluKCk7XG4gICAgICBub2RlW2luZGV4XS5nYWluLnZhbHVlID0gc2VsZi5fdm9sdW1lO1xuICAgICAgbm9kZVtpbmRleF0ucGF1c2VkID0gdHJ1ZTtcbiAgICAgIG5vZGVbaW5kZXhdLl9wb3MgPSAwO1xuICAgICAgbm9kZVtpbmRleF0ucmVhZHlTdGF0ZSA9IDQ7XG4gICAgICBub2RlW2luZGV4XS5jb25uZWN0KG1hc3RlckdhaW4pO1xuXG4gICAgICAvLyBjcmVhdGUgdGhlIHBhbm5lclxuICAgICAgbm9kZVtpbmRleF0ucGFubmVyID0gY3R4LmNyZWF0ZVBhbm5lcigpO1xuICAgICAgbm9kZVtpbmRleF0ucGFubmVyLnBhbm5pbmdNb2RlbCA9IHNlbGYuX21vZGVsIHx8ICdlcXVhbHBvd2VyJztcbiAgICAgIG5vZGVbaW5kZXhdLnBhbm5lci5zZXRQb3NpdGlvbihzZWxmLl9wb3MzZFswXSwgc2VsZi5fcG9zM2RbMV0sIHNlbGYuX3BvczNkWzJdKTtcbiAgICAgIG5vZGVbaW5kZXhdLnBhbm5lci5jb25uZWN0KG5vZGVbaW5kZXhdKTtcblxuICAgICAgcmV0dXJuIG5vZGVbaW5kZXhdO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDYWxsL3NldCBjdXN0b20gZXZlbnRzLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gICBldmVudCBFdmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiAgICBGdW5jdGlvbiB0byBjYWxsLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgb246IGZ1bmN0aW9uKGV2ZW50LCBmbikge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICBldmVudHMgPSBzZWxmWydfb24nICsgZXZlbnRdO1xuXG4gICAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGV2ZW50cy5wdXNoKGZuKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxldmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoZm4pIHtcbiAgICAgICAgICAgIGV2ZW50c1tpXS5jYWxsKHNlbGYsIGZuKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXZlbnRzW2ldLmNhbGwoc2VsZik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSBjdXN0b20gZXZlbnQuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgIGV2ZW50IEV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgIExpc3RlbmVyIHRvIHJlbW92ZS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIG9mZjogZnVuY3Rpb24oZXZlbnQsIGZuKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIGV2ZW50cyA9IHNlbGZbJ19vbicgKyBldmVudF0sXG4gICAgICAgIGZuU3RyaW5nID0gZm4gPyBmbi50b1N0cmluZygpIDogbnVsbDtcblxuICAgICAgaWYgKGZuU3RyaW5nKSB7XG4gICAgICAgIC8vIGxvb3AgdGhyb3VnaCBmdW5jdGlvbnMgaW4gdGhlIGV2ZW50IGZvciBjb21wYXJpc29uXG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxldmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoZm5TdHJpbmcgPT09IGV2ZW50c1tpXS50b1N0cmluZygpKSB7XG4gICAgICAgICAgICBldmVudHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmWydfb24nICsgZXZlbnRdID0gW107XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVbmxvYWQgYW5kIGRlc3Ryb3kgdGhlIGN1cnJlbnQgSG93bCBvYmplY3QuXG4gICAgICogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IHN0b3AgYWxsIHBsYXkgaW5zdGFuY2VzIGF0dGFjaGVkIHRvIHRoaXMgc291bmQuXG4gICAgICovXG4gICAgdW5sb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gc3RvcCBwbGF5aW5nIGFueSBhY3RpdmUgbm9kZXNcbiAgICAgIHZhciBub2RlcyA9IHNlbGYuX2F1ZGlvTm9kZTtcbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9hdWRpb05vZGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gc3RvcCB0aGUgc291bmQgaWYgaXQgaXMgY3VycmVudGx5IHBsYXlpbmdcbiAgICAgICAgaWYgKCFub2Rlc1tpXS5wYXVzZWQpIHtcbiAgICAgICAgICBzZWxmLnN0b3Aobm9kZXNbaV0uaWQpO1xuICAgICAgICAgIHNlbGYub24oJ2VuZCcsIG5vZGVzW2ldLmlkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAvLyByZW1vdmUgdGhlIHNvdXJjZSBpZiB1c2luZyBIVE1MNSBBdWRpb1xuICAgICAgICAgIG5vZGVzW2ldLnNyYyA9ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGRpc2Nvbm5lY3QgdGhlIG91dHB1dCBmcm9tIHRoZSBtYXN0ZXIgZ2FpblxuICAgICAgICAgIG5vZGVzW2ldLmRpc2Nvbm5lY3QoMCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gbWFrZSBzdXJlIGFsbCB0aW1lb3V0cyBhcmUgY2xlYXJlZFxuICAgICAgZm9yIChpPTA7IGk8c2VsZi5fb25lbmRUaW1lci5sZW5ndGg7IGkrKykge1xuICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fb25lbmRUaW1lcltpXS50aW1lcik7XG4gICAgICB9XG5cbiAgICAgIC8vIHJlbW92ZSB0aGUgcmVmZXJlbmNlIGluIHRoZSBnbG9iYWwgSG93bGVyIG9iamVjdFxuICAgICAgdmFyIGluZGV4ID0gSG93bGVyLl9ob3dscy5pbmRleE9mKHNlbGYpO1xuICAgICAgaWYgKGluZGV4ICE9PSBudWxsICYmIGluZGV4ID49IDApIHtcbiAgICAgICAgSG93bGVyLl9ob3dscy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuXG4gICAgICAvLyBkZWxldGUgdGhpcyBzb3VuZCBmcm9tIHRoZSBjYWNoZVxuICAgICAgZGVsZXRlIGNhY2hlW3NlbGYuX3NyY107XG4gICAgICBzZWxmID0gbnVsbDtcbiAgICB9XG5cbiAgfTtcblxuICAvLyBvbmx5IGRlZmluZSB0aGVzZSBmdW5jdGlvbnMgd2hlbiB1c2luZyBXZWJBdWRpb1xuICBpZiAodXNpbmdXZWJBdWRpbykge1xuXG4gICAgLyoqXG4gICAgICogQnVmZmVyIGEgc291bmQgZnJvbSBVUkwgKG9yIGZyb20gY2FjaGUpIGFuZCBkZWNvZGUgdG8gYXVkaW8gc291cmNlIChXZWIgQXVkaW8gQVBJKS5cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IG9iaiBUaGUgSG93bCBvYmplY3QgZm9yIHRoZSBzb3VuZCB0byBsb2FkLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdXJsIFRoZSBwYXRoIHRvIHRoZSBzb3VuZCBmaWxlLlxuICAgICAqL1xuICAgIHZhciBsb2FkQnVmZmVyID0gZnVuY3Rpb24ob2JqLCB1cmwpIHtcbiAgICAgIC8vIGNoZWNrIGlmIHRoZSBidWZmZXIgaGFzIGFscmVhZHkgYmVlbiBjYWNoZWRcbiAgICAgIGlmICh1cmwgaW4gY2FjaGUpIHtcbiAgICAgICAgLy8gc2V0IHRoZSBkdXJhdGlvbiBmcm9tIHRoZSBjYWNoZVxuICAgICAgICBvYmouX2R1cmF0aW9uID0gY2FjaGVbdXJsXS5kdXJhdGlvbjtcblxuICAgICAgICAvLyBsb2FkIHRoZSBzb3VuZCBpbnRvIHRoaXMgb2JqZWN0XG4gICAgICAgIGxvYWRTb3VuZChvYmopO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICgvXmRhdGE6W147XSs7YmFzZTY0LC8udGVzdCh1cmwpKSB7XG4gICAgICAgIC8vIERlY29kZSBiYXNlNjQgZGF0YS1VUklzIGJlY2F1c2Ugc29tZSBicm93c2VycyBjYW5ub3QgbG9hZCBkYXRhLVVSSXMgd2l0aCBYTUxIdHRwUmVxdWVzdC5cbiAgICAgICAgdmFyIGRhdGEgPSBhdG9iKHVybC5zcGxpdCgnLCcpWzFdKTtcbiAgICAgICAgdmFyIGRhdGFWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS5sZW5ndGgpO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8ZGF0YS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIGRhdGFWaWV3W2ldID0gZGF0YS5jaGFyQ29kZUF0KGkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBkZWNvZGVBdWRpb0RhdGEoZGF0YVZpZXcuYnVmZmVyLCBvYmosIHVybCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBsb2FkIHRoZSBidWZmZXIgZnJvbSB0aGUgVVJMXG4gICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG4gICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZGVjb2RlQXVkaW9EYXRhKHhoci5yZXNwb25zZSwgb2JqLCB1cmwpO1xuICAgICAgICB9O1xuICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGFuIGVycm9yLCBzd2l0Y2ggdGhlIHNvdW5kIHRvIEhUTUwgQXVkaW9cbiAgICAgICAgICBpZiAob2JqLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgb2JqLl9idWZmZXIgPSB0cnVlO1xuICAgICAgICAgICAgb2JqLl93ZWJBdWRpbyA9IGZhbHNlO1xuICAgICAgICAgICAgb2JqLl9hdWRpb05vZGUgPSBbXTtcbiAgICAgICAgICAgIGRlbGV0ZSBvYmouX2dhaW5Ob2RlO1xuICAgICAgICAgICAgZGVsZXRlIGNhY2hlW3VybF07XG4gICAgICAgICAgICBvYmoubG9hZCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB4aHIuc2VuZCgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgeGhyLm9uZXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEZWNvZGUgYXVkaW8gZGF0YSBmcm9tIGFuIGFycmF5IGJ1ZmZlci5cbiAgICAgKiBAcGFyYW0gIHtBcnJheUJ1ZmZlcn0gYXJyYXlidWZmZXIgVGhlIGF1ZGlvIGRhdGEuXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBvYmogVGhlIEhvd2wgb2JqZWN0IGZvciB0aGUgc291bmQgdG8gbG9hZC5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHVybCBUaGUgcGF0aCB0byB0aGUgc291bmQgZmlsZS5cbiAgICAgKi9cbiAgICB2YXIgZGVjb2RlQXVkaW9EYXRhID0gZnVuY3Rpb24oYXJyYXlidWZmZXIsIG9iaiwgdXJsKSB7XG4gICAgICAvLyBkZWNvZGUgdGhlIGJ1ZmZlciBpbnRvIGFuIGF1ZGlvIHNvdXJjZVxuICAgICAgY3R4LmRlY29kZUF1ZGlvRGF0YShcbiAgICAgICAgYXJyYXlidWZmZXIsXG4gICAgICAgIGZ1bmN0aW9uKGJ1ZmZlcikge1xuICAgICAgICAgIGlmIChidWZmZXIpIHtcbiAgICAgICAgICAgIGNhY2hlW3VybF0gPSBidWZmZXI7XG4gICAgICAgICAgICBsb2FkU291bmQob2JqLCBidWZmZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgb2JqLm9uKCdsb2FkZXJyb3InKTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRmluaXNoZXMgbG9hZGluZyB0aGUgV2ViIEF1ZGlvIEFQSSBzb3VuZCBhbmQgZmlyZXMgdGhlIGxvYWRlZCBldmVudFxuICAgICAqIEBwYXJhbSAge09iamVjdH0gIG9iaiAgICBUaGUgSG93bCBvYmplY3QgZm9yIHRoZSBzb3VuZCB0byBsb2FkLlxuICAgICAqIEBwYXJhbSAge09iamVjY3R9IGJ1ZmZlciBUaGUgZGVjb2RlZCBidWZmZXIgc291bmQgc291cmNlLlxuICAgICAqL1xuICAgIHZhciBsb2FkU291bmQgPSBmdW5jdGlvbihvYmosIGJ1ZmZlcikge1xuICAgICAgLy8gc2V0IHRoZSBkdXJhdGlvblxuICAgICAgb2JqLl9kdXJhdGlvbiA9IChidWZmZXIpID8gYnVmZmVyLmR1cmF0aW9uIDogb2JqLl9kdXJhdGlvbjtcblxuICAgICAgLy8gc2V0dXAgYSBzcHJpdGUgaWYgbm9uZSBpcyBkZWZpbmVkXG4gICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqLl9zcHJpdGUpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBvYmouX3Nwcml0ZSA9IHtfZGVmYXVsdDogWzAsIG9iai5fZHVyYXRpb24gKiAxMDAwXX07XG4gICAgICB9XG5cbiAgICAgIC8vIGZpcmUgdGhlIGxvYWRlZCBldmVudFxuICAgICAgaWYgKCFvYmouX2xvYWRlZCkge1xuICAgICAgICBvYmouX2xvYWRlZCA9IHRydWU7XG4gICAgICAgIG9iai5vbignbG9hZCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAob2JqLl9hdXRvcGxheSkge1xuICAgICAgICBvYmoucGxheSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBzb3VuZCBiYWNrIGludG8gdGhlIGJ1ZmZlciBzb3VyY2UuXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBvYmogICBUaGUgc291bmQgdG8gbG9hZC5cbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gIGxvb3AgIExvb3AgYm9vbGVhbiwgcG9zLCBhbmQgZHVyYXRpb24uXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBpZCAgICAob3B0aW9uYWwpIFRoZSBwbGF5IGluc3RhbmNlIElELlxuICAgICAqL1xuICAgIHZhciByZWZyZXNoQnVmZmVyID0gZnVuY3Rpb24ob2JqLCBsb29wLCBpZCkge1xuICAgICAgLy8gZGV0ZXJtaW5lIHdoaWNoIG5vZGUgdG8gY29ubmVjdCB0b1xuICAgICAgdmFyIG5vZGUgPSBvYmouX25vZGVCeUlkKGlkKTtcblxuICAgICAgLy8gc2V0dXAgdGhlIGJ1ZmZlciBzb3VyY2UgZm9yIHBsYXliYWNrXG4gICAgICBub2RlLmJ1ZmZlclNvdXJjZSA9IGN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcbiAgICAgIG5vZGUuYnVmZmVyU291cmNlLmJ1ZmZlciA9IGNhY2hlW29iai5fc3JjXTtcbiAgICAgIG5vZGUuYnVmZmVyU291cmNlLmNvbm5lY3Qobm9kZS5wYW5uZXIpO1xuICAgICAgbm9kZS5idWZmZXJTb3VyY2UubG9vcCA9IGxvb3BbMF07XG4gICAgICBpZiAobG9vcFswXSkge1xuICAgICAgICBub2RlLmJ1ZmZlclNvdXJjZS5sb29wU3RhcnQgPSBsb29wWzFdO1xuICAgICAgICBub2RlLmJ1ZmZlclNvdXJjZS5sb29wRW5kID0gbG9vcFsxXSArIGxvb3BbMl07XG4gICAgICB9XG4gICAgICBub2RlLmJ1ZmZlclNvdXJjZS5wbGF5YmFja1JhdGUudmFsdWUgPSBvYmouX3JhdGU7XG4gICAgfTtcblxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBzdXBwb3J0IGZvciBBTUQgKEFzeW5jaHJvbm91cyBNb2R1bGUgRGVmaW5pdGlvbikgbGlicmFyaWVzIHN1Y2ggYXMgcmVxdWlyZS5qcy5cbiAgICovXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBIb3dsZXI6IEhvd2xlcixcbiAgICAgICAgSG93bDogSG93bFxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgc3VwcG9ydCBmb3IgQ29tbW9uSlMgbGlicmFyaWVzIHN1Y2ggYXMgYnJvd3NlcmlmeS5cbiAgICovXG4gIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBleHBvcnRzLkhvd2xlciA9IEhvd2xlcjtcbiAgICBleHBvcnRzLkhvd2wgPSBIb3dsO1xuICB9XG5cbiAgLy8gZGVmaW5lIGdsb2JhbGx5IGluIGNhc2UgQU1EIGlzIG5vdCBhdmFpbGFibGUgb3IgYXZhaWxhYmxlIGJ1dCBub3QgdXNlZFxuXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHdpbmRvdy5Ib3dsZXIgPSBIb3dsZXI7XG4gICAgd2luZG93Lkhvd2wgPSBIb3dsO1xuICB9XG5cbn0pKCk7XG4iXX0=
